webpackJsonp([4, 5], [function (t, e, i) { var n; (function (o) { n = function (t, e, n) { i(7), i(85), i(86), i(87), i(92), i(93), i(109), i(110); var s = i(5), a = i(3).current_user, r = null, l = 0, h = i(114); i(117); var c = s.extend({ init: function () { this._super(), this.id = id, this.module = sliceModule, this.setHoldState(), this.resize(), this.createSlice(), this.initAnno(), this.initComment(), this.initExcise(), this.scroll(), this.binds() }, setHoldState: function () { setInterval(function () { o.ajax({ type: "GET", dataType: "json", url: "/Slice/HoldState?type=" + this.module, cache: !1 }) }.bind(this), 3e4) }, resize: function () { function t() { var t = o("#main").height(), e = o(".space").height(), i = o(".tab-title").height(); o("#sliceContainer").height(t), o(".tab").height(t - e), o("#labellist").height(t - 221 - e - i), o("#anno").height(o("#labellist").height() - 41), o("#comt").height(t - e - i - 164), o("#question").height(t - e - i - 34), o("#main").width() >= 1250 ? o("#sliceContainer").width(o("#main").width() - 250) : o("#sliceContainer").width(1e3) } o(window).resize(t).resize(), t() }, createSlice: function () { var t = { slideId: this.id, containerId: "sliceContainer", isShape: !0, isToolbar: !0, isNavmap: !0, isLockMouse: !0, isSaveBtn: !0 }; r = SMds.createViewer(t) }, insertHTML: function (t) { var e, i, n = o("#messageBox")[0]; if (window.getSelection) { if (o(n).focus(), e = window.getSelection(), e.getRangeAt && e.rangeCount) { i = e.getRangeAt(0), i.deleteContents(); var s = document.createElement("div"); s.innerHTML = t; for (var a, r, l = document.createDocumentFragment(); a = s.firstChild;)r = l.appendChild(a); i.insertNode(l), r && (i = i.cloneRange(), i.setStartAfter(r), i.collapse(!0), e.removeAllRanges(), e.addRange(i)) } } else document.selection && "Control" != document.selection.type && (o(n).focus(), ierange = document.selection.createRange(), ierange.pasteHTML(t), o(n).focus()) }, initAnno: function () { o.ajax({ type: "GET", dataType: "json", url: "/Api/Slice/GetAnnoFromId?id=" + this.id, cache: !1, success: function (t, e) { var i = o("#anno"), n = o('<div class="list-group"></div>'); t.forEach(function (t) { if ("Position" == t.type) { var e = o('<input  type = "button" id="' + t.ID + '" class="btn-lable list-group-item "value="' + t.name + '"/><div class="separation"></div>').bind("click", function () { r.locationAnno(o(this).attr("id")) }); n.append(e) } }), i.append(n) }, error: function (t, e) { console.log(t) } }) }, initComment: function () { function t(t, i) { if (o("#messageBox").empty(), "success" == i) { var n = t.Data; if (0 != n.length) e(n); else { var s = '<div style="font-size:14px">评论还是空的哟，快来抢沙发！</div>'; o("#comt").html(s) } } } function e(t) { var e = "", n = o("#comt"); n.empty(); for (var s = 0; s < t.length; s++)0 === t[s].parentID && (e = "", e += '<div class="media" >', e += '<div class="media-body" id = "fir' + t[s].commentID + '">', e += '<div class="media-heading">', e += '<div class="user-name">' + t[s].userName + "</div>", e += '<div class="creat-time">' + t[s].creatTime + "</div>", e += '<div class="rep-del">', e += '<a class="btn-reply" data-id="' + t[s].commentID + '">回复</a>', (a.EmployeeName == t[s].userName || "Teacher" == a.RoleName) && (e += '<div style="display: inline" class = "stand-separation"></div>', e += '<a class="btn-del" style="padding-left: 5px;" data-id="' + t[s].commentID + '">删除</a>'), e += "</div>", e += "</div>", e += '<p class="com-con">' + t[s].commentContent + "</p>", e += "</div>", e += '<div class="separation" style="margin: 15px"></div>', e += "</div>", n.append(o(e).data("anno", t[s].picLable))); for (var s = 0; s < t.length; s++)0 !== t[s].parentID && i(t[s]) } function i(t) { var e = "", i = o("#fir" + t.parentID), n = "fir" + t.parentID; e += '<div class="media" >', e += '<div class="separation" style="margin: 0 5px"></div>', e += '<div class="media-body" style="padding: 0 0 0 15px;" parent-id="' + n + '">', e += '<div class="media-heading">', e += '<div style="font-size:16px">' + t.userName + "</div>", e += '<div style="display: inline;color:#CCC;font-size:12px">' + t.creatTime + "</div>", (a.EmployeeName == t.userName || "Teacher" == a.RoleName) && (e += '<div style="float:right;display: inline">', e += '<a class="btn-del"  data-id="' + t.commentID + '">删除</a>', e += "</div>"), e += "</div>", e += '<p class="com-con">' + t.commentContent + "</p>", e += "</div>", e += "</div>", i.append(o(e).data("anno", t.picLable)) } o.ajax({ type: "GET", dataType: "json", url: "/Api/Slice/GetCommentFromId?id=" + this.id, cache: !1, success: t, error: function (t, e) { console.log(t) } }) }, initExcise: function () { function t(t, i) { for (var n = [], s = [], a = 0; a < t.length; a++) { n[a] = t[a].Content, s[a] = t[a].Answer; var l = ""; l += '<div class = "top-news" >', l += '<div class = "exe-question">', l += "<p>", l += a + 1 + ".", l += n[a], l += "</p>", l += '<input type="text" placeholder="请输入答案"/>', l += '<div class = "correctAnswer">', l += "正确答案：", l += s[a], l += "</div>", l += '<button class="btn-yellow exe-answer" type="button" >查看答案</button>', l += '<div class="separation" style="margin:30px 0 0 0;"></div>', l += "</div>", l += "</div>", o("#question").append(o(l).bind("click", function (t) { var e = o(t.delegateTarget).data("annos"); shape = JSON.parse(e), r.clearCanvas(), r.setAnnotations(shape), r.locationAnno(shape[0].guid) }).find("button.exe-answer").bind("click", e).end().data("annos", t[a].Annotations)) } } function e(t) { var e = o(t.delegateTarget).parent("div.exe-question"); e.find(".correctAnswer").css("visibility", "visible"), e.find("input").val() == e.find(".correctAnswer").html().substring(5) ? (e.find("input").css("border", "2px solid green"), e.find("button").css("background-color", "green").html("答案正确")) : (e.find("input").css("border", "2px solid red"), e.find("button").css("background-color", "red").html("答案错误")) } o.ajax({ type: "GET", dataType: "json", url: "/Api/Slice/GetQusetionFromId?id=" + this.id, cache: !1, success: t, error: function (t, e) { console.log(t) } }) }, binds: function () { var t = [], e = 0; o(".tab-title  ul li").click(function () { o(".active").removeClass("active"), o(this).addClass("active"), e = o(this).index() + 1, o("#sidebar_tab_1").css("display", "none"), o("#sidebar_tab_2").css("display", "none"), o("#sidebar_tab_3").css("display", "none"), o("#sidebar_tab_" + e).fadeIn(500) }), o("#check2").bind("click", function () { this.checked ? (t = r.getAnnotations(), r.clearCanvas()) : r.setAnnotations(t) }), o("#comt").on("click", ".btn-reply", function (t) { l = o(t.currentTarget).attr("data-id"), o("#replyF").hide(), o("#replyH").show(), o(".comm-rep").val("回复"), o(o("#messageBox")[0]).focus() }), o("#comt").on("click", ".btn-del", function (t) { var e = o(t.currentTarget).attr("data-id"); h({ title: "确定删除评论？", type: "select", anchor: t.currentTarget, data: [{ html: "<h3>取消</h3>", callback: function () { }.bind(this) }, { html: "<h3>确定</h3>", selected: !0, className: "negative", callback: function () { o.ajax({ type: "POST", dataType: "json", url: "/Api/Slice/DeleteComment?id=" + e, cache: !1, success: function (t, e, i) { this.initComment() }.bind(this), error: function (t, e) { console.log(t) } }) }.bind(this) }] }) }.bind(this)), o(".get-point").on("click", function () { var t = r.getCenterPoint(), e = ""; e += '<a style="color:#ffb43a" contenteditable="false" ', e += 'posx="' + t.point.x + '"', e += 'posy="' + t.point.y + '"', e += 'zoom="' + t.zoom + '"', e += ">图片位置</a>", this.insertHTML(e) }.bind(this)), o(".comm-rep").on("click", function () { var t = JSON.stringify(r.getAnnotations()); o.ajax({ url: "/Api/Slice/SendComment", type: "POST", cache: !1, dataType: "json", data: { commentContent: o("#messageBox").html(), picLable: t, parentID: l, sliceID: this.id }, success: function (t, e) { this.initComment(), 0 == l && o("#comt").slimScroll({ scrollTo: "0" }) }.bind(this), error: function (t, e) { console.log(t) } }) }.bind(this)), o("#comt").on("click", "p a", function (t) { var e = { point: { x: parseFloat(o(t.currentTarget).attr("posx")), y: parseFloat(o(t.currentTarget).attr("posy")) }, zoom: parseFloat(o(t.currentTarget).attr("zoom")) }, i = o(t.currentTarget).parents("div.media").data("anno"); r.setAnnotations(JSON.parse(i)), r.panToPoint(e) }.bind(this)), o("#messageBox").on("click", "a", function (t) { var e = { point: { x: parseFloat(o(t.currentTarget).attr("posx")), y: parseFloat(o(t.currentTarget).attr("posy")) }, zoom: parseFloat(o(t.currentTarget).attr("zoom")) }; r.panToPoint(e) }.bind(this)), o("#replyH a").on("click", function () { l = 0, o("#replyF").show(), o("#replyH").hide(), o(".comm-rep").val("评论"), o(o("#messageBox")[0]).focus() }), o(".return-slice").on("click", function () { r.openMds(this.id) }.bind(this)) }, scroll: function () { o("#info").slimScroll({ size: "7px", color: "#a1b2bd", opacity: .3, position: "right", height: o("#info").height(), allowPageScroll: !1, disableFadeOut: !1 }), o("#anno").slimScroll({ size: "7px", color: "#a1b2bd", opacity: .3, position: "right", height: o("#anno").height(), allowPageScroll: !1, disableFadeOut: !1 }), o("#comt").slimScroll({ size: "7px", color: "#a1b2bd", opacity: .3, position: "right", height: o("#comt").height(), allowPageScroll: !1, disableFadeOut: !1 }), o("#messageBox").slimScroll({ size: "7px", color: "#a1b2bd", opacity: .3, position: "right", height: o("#messageBox").height(), allowPageScroll: !1, disableFadeOut: !1 }), o("#question").slimScroll({ size: "7px", color: "#a1b2bd", opacity: .3, position: "right", height: o("#question").height(), allowPageScroll: !1, disableFadeOut: !1 }) } }); n.exports = c, i(52)(c) }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }).call(e, i(4)) }, , , function (t, e, i) { var n; (function (o) { "use strict"; n = function (t, e, i) { var n = { current_user: {}, initialized: !1, init: function (t) { this.initialized || (this.initialized = !0, this.data = t || {}, o.extend(this, this.data), o.extend(this.current_user, this)) }, get: function (t) { return this[t] }, set: function (t, e) { this[t] = e } }; i.exports = n }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }).call(e, i(4)) }, function (t, e, i) {
    var n, o; !function (e, i) { "object" == typeof t && "object" == typeof t.exports ? t.exports = e.document ? i(e, !0) : function (t) { if (!t.document) throw new Error("jQuery requires a window with a document"); return i(t) } : i(e) }("undefined" != typeof window ? window : this, function (i, s) {
        function a(t) { var e = t.length, i = lt.type(t); return "function" === i || lt.isWindow(t) ? !1 : 1 === t.nodeType && e ? !0 : "array" === i || 0 === e || "number" == typeof e && e > 0 && e - 1 in t } function r(t, e, i) { if (lt.isFunction(e)) return lt.grep(t, function (t, n) { return !!e.call(t, n, t) !== i }); if (e.nodeType) return lt.grep(t, function (t) { return t === e !== i }); if ("string" == typeof e) { if (gt.test(e)) return lt.filter(e, t, i); e = lt.filter(e, t) } return lt.grep(t, function (t) { return lt.inArray(t, e) >= 0 !== i }) } function l(t, e) { do t = t[e]; while (t && 1 !== t.nodeType); return t } function h(t) { var e = kt[t] = {}; return lt.each(t.match(Ct) || [], function (t, i) { e[i] = !0 }), e } function c() { yt.addEventListener ? (yt.removeEventListener("DOMContentLoaded", u, !1), i.removeEventListener("load", u, !1)) : (yt.detachEvent("onreadystatechange", u), i.detachEvent("onload", u)) } function u() { (yt.addEventListener || "load" === event.type || "complete" === yt.readyState) && (c(), lt.ready()) } function d(t, e, i) { if (void 0 === i && 1 === t.nodeType) { var n = "data-" + e.replace(Dt, "-$1").toLowerCase(); if (i = t.getAttribute(n), "string" == typeof i) { try { i = "true" === i ? !0 : "false" === i ? !1 : "null" === i ? null : +i + "" === i ? +i : Mt.test(i) ? lt.parseJSON(i) : i } catch (o) { } lt.data(t, e, i) } else i = void 0 } return i } function p(t) { var e; for (e in t) if (("data" !== e || !lt.isEmptyObject(t[e])) && "toJSON" !== e) return !1; return !0 } function f(t, e, i, n) { if (lt.acceptData(t)) { var o, s, a = lt.expando, r = t.nodeType, l = r ? lt.cache : t, h = r ? t[a] : t[a] && a; if (h && l[h] && (n || l[h].data) || void 0 !== i || "string" != typeof e) return h || (h = r ? t[a] = J.pop() || lt.guid++ : a), l[h] || (l[h] = r ? {} : { toJSON: lt.noop }), ("object" == typeof e || "function" == typeof e) && (n ? l[h] = lt.extend(l[h], e) : l[h].data = lt.extend(l[h].data, e)), s = l[h], n || (s.data || (s.data = {}), s = s.data), void 0 !== i && (s[lt.camelCase(e)] = i), "string" == typeof e ? (o = s[e], null == o && (o = s[lt.camelCase(e)])) : o = s, o } } function m(t, e, i) { if (lt.acceptData(t)) { var n, o, s = t.nodeType, a = s ? lt.cache : t, r = s ? t[lt.expando] : lt.expando; if (a[r]) { if (e && (n = i ? a[r] : a[r].data)) { lt.isArray(e) ? e = e.concat(lt.map(e, lt.camelCase)) : e in n ? e = [e] : (e = lt.camelCase(e), e = e in n ? [e] : e.split(" ")), o = e.length; for (; o--;)delete n[e[o]]; if (i ? !p(n) : !lt.isEmptyObject(n)) return } (i || (delete a[r].data, p(a[r]))) && (s ? lt.cleanData([t], !0) : at.deleteExpando || a != a.window ? delete a[r] : a[r] = null) } } } function g() { return !0 } function v() { return !1 } function y() { try { return yt.activeElement } catch (t) { } } function b(t) { var e = Wt.split("|"), i = t.createDocumentFragment(); if (i.createElement) for (; e.length;)i.createElement(e.pop()); return i } function w(t, e) { var i, n, o = 0, s = typeof t.getElementsByTagName !== St ? t.getElementsByTagName(e || "*") : typeof t.querySelectorAll !== St ? t.querySelectorAll(e || "*") : void 0; if (!s) for (s = [], i = t.childNodes || t; null != (n = i[o]); o++)!e || lt.nodeName(n, e) ? s.push(n) : lt.merge(s, w(n, e)); return void 0 === e || e && lt.nodeName(t, e) ? lt.merge([t], s) : s } function x(t) { Ot.test(t.type) && (t.defaultChecked = t.checked) } function _(t, e) { return lt.nodeName(t, "table") && lt.nodeName(11 !== e.nodeType ? e : e.firstChild, "tr") ? t.getElementsByTagName("tbody")[0] || t.appendChild(t.ownerDocument.createElement("tbody")) : t } function C(t) { return t.type = (null !== lt.find.attr(t, "type")) + "/" + t.type, t } function k(t) { var e = Zt.exec(t.type); return e ? t.type = e[1] : t.removeAttribute("type"), t } function T(t, e) { for (var i, n = 0; null != (i = t[n]); n++)lt._data(i, "globalEval", !e || lt._data(e[n], "globalEval")) } function P(t, e) { if (1 === e.nodeType && lt.hasData(t)) { var i, n, o, s = lt._data(t), a = lt._data(e, s), r = s.events; if (r) { delete a.handle, a.events = {}; for (i in r) for (n = 0, o = r[i].length; o > n; n++)lt.event.add(e, i, r[i][n]) } a.data && (a.data = lt.extend({}, a.data)) } } function S(t, e) { var i, n, o; if (1 === e.nodeType) { if (i = e.nodeName.toLowerCase(), !at.noCloneEvent && e[lt.expando]) { o = lt._data(e); for (n in o.events) lt.removeEvent(e, n, o.handle); e.removeAttribute(lt.expando) } "script" === i && e.text !== t.text ? (C(e).text = t.text, k(e)) : "object" === i ? (e.parentNode && (e.outerHTML = t.outerHTML), at.html5Clone && t.innerHTML && !lt.trim(e.innerHTML) && (e.innerHTML = t.innerHTML)) : "input" === i && Ot.test(t.type) ? (e.defaultChecked = e.checked = t.checked, e.value !== t.value && (e.value = t.value)) : "option" === i ? e.defaultSelected = e.selected = t.defaultSelected : ("input" === i || "textarea" === i) && (e.defaultValue = t.defaultValue) } } function M(t, e) { var n, o = lt(e.createElement(t)).appendTo(e.body), s = i.getDefaultComputedStyle && (n = i.getDefaultComputedStyle(o[0])) ? n.display : lt.css(o[0], "display"); return o.detach(), s } function D(t) { var e = yt, i = ne[t]; return i || (i = M(t, e), "none" !== i && i || (ie = (ie || lt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement), e = (ie[0].contentWindow || ie[0].contentDocument).document, e.write(), e.close(), i = M(t, e), ie.detach()), ne[t] = i), i } function E(t, e) { return { get: function () { var i = t(); if (null != i) return i ? void delete this.get : (this.get = e).apply(this, arguments) } } } function A(t, e) { if (e in t) return e; for (var i = e.charAt(0).toUpperCase() + e.slice(1), n = e, o = ge.length; o--;)if (e = ge[o] + i, e in t) return e; return n } function I(t, e) { for (var i, n, o, s = [], a = 0, r = t.length; r > a; a++)n = t[a], n.style && (s[a] = lt._data(n, "olddisplay"), i = n.style.display, e ? (s[a] || "none" !== i || (n.style.display = ""), "" === n.style.display && It(n) && (s[a] = lt._data(n, "olddisplay", D(n.nodeName)))) : (o = It(n), (i && "none" !== i || !o) && lt._data(n, "olddisplay", o ? i : lt.css(n, "display")))); for (a = 0; r > a; a++)n = t[a], n.style && (e && "none" !== n.style.display && "" !== n.style.display || (n.style.display = e ? s[a] || "" : "none")); return t } function N(t, e, i) { var n = de.exec(e); return n ? Math.max(0, n[1] - (i || 0)) + (n[2] || "px") : e } function O(t, e, i, n, o) { for (var s = i === (n ? "border" : "content") ? 4 : "width" === e ? 1 : 0, a = 0; 4 > s; s += 2)"margin" === i && (a += lt.css(t, i + At[s], !0, o)), n ? ("content" === i && (a -= lt.css(t, "padding" + At[s], !0, o)), "margin" !== i && (a -= lt.css(t, "border" + At[s] + "Width", !0, o))) : (a += lt.css(t, "padding" + At[s], !0, o), "padding" !== i && (a += lt.css(t, "border" + At[s] + "Width", !0, o))); return a } function H(t, e, i) { var n = !0, o = "width" === e ? t.offsetWidth : t.offsetHeight, s = oe(t), a = at.boxSizing && "border-box" === lt.css(t, "boxSizing", !1, s); if (0 >= o || null == o) { if (o = se(t, e, s), (0 > o || null == o) && (o = t.style[e]), re.test(o)) return o; n = a && (at.boxSizingReliable() || o === t.style[e]), o = parseFloat(o) || 0 } return o + O(t, e, i || (a ? "border" : "content"), n, s) + "px" } function z(t, e, i, n, o) { return new z.prototype.init(t, e, i, n, o) } function F() { return setTimeout(function () { ve = void 0 }), ve = lt.now() } function L(t, e) { var i, n = { height: t }, o = 0; for (e = e ? 1 : 0; 4 > o; o += 2 - e)i = At[o], n["margin" + i] = n["padding" + i] = t; return e && (n.opacity = n.width = t), n } function R(t, e, i) { for (var n, o = (Ce[e] || []).concat(Ce["*"]), s = 0, a = o.length; a > s; s++)if (n = o[s].call(i, e, t)) return n } function W(t, e, i) { var n, o, s, a, r, l, h, c, u = this, d = {}, p = t.style, f = t.nodeType && It(t), m = lt._data(t, "fxshow"); i.queue || (r = lt._queueHooks(t, "fx"), null == r.unqueued && (r.unqueued = 0, l = r.empty.fire, r.empty.fire = function () { r.unqueued || l() }), r.unqueued++ , u.always(function () { u.always(function () { r.unqueued-- , lt.queue(t, "fx").length || r.empty.fire() }) })), 1 === t.nodeType && ("height" in e || "width" in e) && (i.overflow = [p.overflow, p.overflowX, p.overflowY], h = lt.css(t, "display"), c = "none" === h ? lt._data(t, "olddisplay") || D(t.nodeName) : h, "inline" === c && "none" === lt.css(t, "float") && (at.inlineBlockNeedsLayout && "inline" !== D(t.nodeName) ? p.zoom = 1 : p.display = "inline-block")), i.overflow && (p.overflow = "hidden", at.shrinkWrapBlocks() || u.always(function () { p.overflow = i.overflow[0], p.overflowX = i.overflow[1], p.overflowY = i.overflow[2] })); for (n in e) if (o = e[n], be.exec(o)) { if (delete e[n], s = s || "toggle" === o, o === (f ? "hide" : "show")) { if ("show" !== o || !m || void 0 === m[n]) continue; f = !0 } d[n] = m && m[n] || lt.style(t, n) } else h = void 0; if (lt.isEmptyObject(d)) "inline" === ("none" === h ? D(t.nodeName) : h) && (p.display = h); else { m ? "hidden" in m && (f = m.hidden) : m = lt._data(t, "fxshow", {}), s && (m.hidden = !f), f ? lt(t).show() : u.done(function () { lt(t).hide() }), u.done(function () { var e; lt._removeData(t, "fxshow"); for (e in d) lt.style(t, e, d[e]) }); for (n in d) a = R(f ? m[n] : 0, n, u), n in m || (m[n] = a.start, f && (a.end = a.start, a.start = "width" === n || "height" === n ? 1 : 0)) } } function B(t, e) { var i, n, o, s, a; for (i in t) if (n = lt.camelCase(i), o = e[n], s = t[i], lt.isArray(s) && (o = s[1], s = t[i] = s[0]), i !== n && (t[n] = s, delete t[i]), a = lt.cssHooks[n], a && "expand" in a) { s = a.expand(s), delete t[n]; for (i in s) i in t || (t[i] = s[i], e[i] = o) } else e[n] = o } function j(t, e, i) { var n, o, s = 0, a = _e.length, r = lt.Deferred().always(function () { delete l.elem }), l = function () { if (o) return !1; for (var e = ve || F(), i = Math.max(0, h.startTime + h.duration - e), n = i / h.duration || 0, s = 1 - n, a = 0, l = h.tweens.length; l > a; a++)h.tweens[a].run(s); return r.notifyWith(t, [h, s, i]), 1 > s && l ? i : (r.resolveWith(t, [h]), !1) }, h = r.promise({ elem: t, props: lt.extend({}, e), opts: lt.extend(!0, { specialEasing: {} }, i), originalProperties: e, originalOptions: i, startTime: ve || F(), duration: i.duration, tweens: [], createTween: function (e, i) { var n = lt.Tween(t, h.opts, e, i, h.opts.specialEasing[e] || h.opts.easing); return h.tweens.push(n), n }, stop: function (e) { var i = 0, n = e ? h.tweens.length : 0; if (o) return this; for (o = !0; n > i; i++)h.tweens[i].run(1); return e ? r.resolveWith(t, [h, e]) : r.rejectWith(t, [h, e]), this } }), c = h.props; for (B(c, h.opts.specialEasing); a > s; s++)if (n = _e[s].call(h, t, c, h.opts)) return n; return lt.map(c, R, h), lt.isFunction(h.opts.start) && h.opts.start.call(t, h), lt.fx.timer(lt.extend(l, { elem: t, anim: h, queue: h.opts.queue })), h.progress(h.opts.progress).done(h.opts.done, h.opts.complete).fail(h.opts.fail).always(h.opts.always) } function U(t) { return function (e, i) { "string" != typeof e && (i = e, e = "*"); var n, o = 0, s = e.toLowerCase().match(Ct) || []; if (lt.isFunction(i)) for (; n = s[o++];)"+" === n.charAt(0) ? (n = n.slice(1) || "*", (t[n] = t[n] || []).unshift(i)) : (t[n] = t[n] || []).push(i) } } function q(t, e, i, n) { function o(r) { var l; return s[r] = !0, lt.each(t[r] || [], function (t, r) { var h = r(e, i, n); return "string" != typeof h || a || s[h] ? a ? !(l = h) : void 0 : (e.dataTypes.unshift(h), o(h), !1) }), l } var s = {}, a = t === Ve; return o(e.dataTypes[0]) || !s["*"] && o("*") } function $(t, e) { var i, n, o = lt.ajaxSettings.flatOptions || {}; for (n in e) void 0 !== e[n] && ((o[n] ? t : i || (i = {}))[n] = e[n]); return i && lt.extend(!0, t, i), t } function Y(t, e, i) { for (var n, o, s, a, r = t.contents, l = t.dataTypes; "*" === l[0];)l.shift(), void 0 === o && (o = t.mimeType || e.getResponseHeader("Content-Type")); if (o) for (a in r) if (r[a] && r[a].test(o)) { l.unshift(a); break } if (l[0] in i) s = l[0]; else { for (a in i) { if (!l[0] || t.converters[a + " " + l[0]]) { s = a; break } n || (n = a) } s = s || n } return s ? (s !== l[0] && l.unshift(s), i[s]) : void 0 } function V(t, e, i, n) { var o, s, a, r, l, h = {}, c = t.dataTypes.slice(); if (c[1]) for (a in t.converters) h[a.toLowerCase()] = t.converters[a]; for (s = c.shift(); s;)if (t.responseFields[s] && (i[t.responseFields[s]] = e), !l && n && t.dataFilter && (e = t.dataFilter(e, t.dataType)), l = s, s = c.shift()) if ("*" === s) s = l; else if ("*" !== l && l !== s) { if (a = h[l + " " + s] || h["* " + s], !a) for (o in h) if (r = o.split(" "), r[1] === s && (a = h[l + " " + r[0]] || h["* " + r[0]])) { a === !0 ? a = h[o] : h[o] !== !0 && (s = r[0], c.unshift(r[1])); break } if (a !== !0) if (a && t["throws"]) e = a(e); else try { e = a(e) } catch (u) { return { state: "parsererror", error: a ? u : "No conversion from " + l + " to " + s } } } return { state: "success", data: e } } function X(t, e, i, n) { var o; if (lt.isArray(e)) lt.each(e, function (e, o) { i || Ze.test(t) ? n(t, o) : X(t + "[" + ("object" == typeof o ? e : "") + "]", o, i, n) }); else if (i || "object" !== lt.type(e)) n(t, e); else for (o in e) X(t + "[" + o + "]", e[o], i, n) } function G() { try { return new i.XMLHttpRequest } catch (t) { } } function K() { try { return new i.ActiveXObject("Microsoft.XMLHTTP") } catch (t) { } } function Z(t) { return lt.isWindow(t) ? t : 9 === t.nodeType ? t.defaultView || t.parentWindow : !1 } var J = [], Q = J.slice, tt = J.concat, et = J.push, it = J.indexOf, nt = {}, ot = nt.toString, st = nt.hasOwnProperty, at = {}, rt = "1.11.1", lt = function (t, e) { return new lt.fn.init(t, e) }, ht = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, ct = /^-ms-/, ut = /-([\da-z])/gi, dt = function (t, e) { return e.toUpperCase() }; lt.fn = lt.prototype = { jquery: rt, constructor: lt, selector: "", length: 0, toArray: function () { return Q.call(this) }, get: function (t) { return null != t ? 0 > t ? this[t + this.length] : this[t] : Q.call(this) }, pushStack: function (t) { var e = lt.merge(this.constructor(), t); return e.prevObject = this, e.context = this.context, e }, each: function (t, e) { return lt.each(this, t, e) }, map: function (t) { return this.pushStack(lt.map(this, function (e, i) { return t.call(e, i, e) })) }, slice: function () { return this.pushStack(Q.apply(this, arguments)) }, first: function () { return this.eq(0) }, last: function () { return this.eq(-1) }, eq: function (t) { var e = this.length, i = +t + (0 > t ? e : 0); return this.pushStack(i >= 0 && e > i ? [this[i]] : []) }, end: function () { return this.prevObject || this.constructor(null) }, push: et, sort: J.sort, splice: J.splice }, lt.extend = lt.fn.extend = function () { var t, e, i, n, o, s, a = arguments[0] || {}, r = 1, l = arguments.length, h = !1; for ("boolean" == typeof a && (h = a, a = arguments[r] || {}, r++), "object" == typeof a || lt.isFunction(a) || (a = {}), r === l && (a = this, r--); l > r; r++)if (null != (o = arguments[r])) for (n in o) t = a[n], i = o[n], a !== i && (h && i && (lt.isPlainObject(i) || (e = lt.isArray(i))) ? (e ? (e = !1, s = t && lt.isArray(t) ? t : []) : s = t && lt.isPlainObject(t) ? t : {}, a[n] = lt.extend(h, s, i)) : void 0 !== i && (a[n] = i)); return a }, lt.extend({ expando: "jQuery" + (rt + Math.random()).replace(/\D/g, ""), isReady: !0, error: function (t) { throw new Error(t) }, noop: function () { }, isFunction: function (t) { return "function" === lt.type(t) }, isArray: Array.isArray || function (t) { return "array" === lt.type(t) }, isWindow: function (t) { return null != t && t == t.window }, isNumeric: function (t) { return !lt.isArray(t) && t - parseFloat(t) >= 0 }, isEmptyObject: function (t) { var e; for (e in t) return !1; return !0 }, isPlainObject: function (t) { var e; if (!t || "object" !== lt.type(t) || t.nodeType || lt.isWindow(t)) return !1; try { if (t.constructor && !st.call(t, "constructor") && !st.call(t.constructor.prototype, "isPrototypeOf")) return !1 } catch (i) { return !1 } if (at.ownLast) for (e in t) return st.call(t, e); for (e in t); return void 0 === e || st.call(t, e) }, type: function (t) { return null == t ? t + "" : "object" == typeof t || "function" == typeof t ? nt[ot.call(t)] || "object" : typeof t }, globalEval: function (t) { t && lt.trim(t) && (i.execScript || function (t) { i.eval.call(i, t) })(t) }, camelCase: function (t) { return t.replace(ct, "ms-").replace(ut, dt) }, nodeName: function (t, e) { return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase() }, each: function (t, e, i) { var n, o = 0, s = t.length, r = a(t); if (i) { if (r) for (; s > o && (n = e.apply(t[o], i), n !== !1); o++); else for (o in t) if (n = e.apply(t[o], i), n === !1) break } else if (r) for (; s > o && (n = e.call(t[o], o, t[o]), n !== !1); o++); else for (o in t) if (n = e.call(t[o], o, t[o]), n === !1) break; return t }, trim: function (t) { return null == t ? "" : (t + "").replace(ht, "") }, makeArray: function (t, e) { var i = e || []; return null != t && (a(Object(t)) ? lt.merge(i, "string" == typeof t ? [t] : t) : et.call(i, t)), i }, inArray: function (t, e, i) { var n; if (e) { if (it) return it.call(e, t, i); for (n = e.length, i = i ? 0 > i ? Math.max(0, n + i) : i : 0; n > i; i++)if (i in e && e[i] === t) return i } return -1 }, merge: function (t, e) { for (var i = +e.length, n = 0, o = t.length; i > n;)t[o++] = e[n++]; if (i !== i) for (; void 0 !== e[n];)t[o++] = e[n++]; return t.length = o, t }, grep: function (t, e, i) { for (var n, o = [], s = 0, a = t.length, r = !i; a > s; s++)n = !e(t[s], s), n !== r && o.push(t[s]); return o }, map: function (t, e, i) { var n, o = 0, s = t.length, r = a(t), l = []; if (r) for (; s > o; o++)n = e(t[o], o, i), null != n && l.push(n); else for (o in t) n = e(t[o], o, i), null != n && l.push(n); return tt.apply([], l) }, guid: 1, proxy: function (t, e) { var i, n, o; return "string" == typeof e && (o = t[e], e = t, t = o), lt.isFunction(t) ? (i = Q.call(arguments, 2), n = function () { return t.apply(e || this, i.concat(Q.call(arguments))) }, n.guid = t.guid = t.guid || lt.guid++ , n) : void 0 }, now: function () { return +new Date }, support: at }), lt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (t, e) { nt["[object " + e + "]"] = e.toLowerCase() }); var pt = function (t) {
            function e(t, e, i, n) { var o, s, a, r, l, h, u, p, f, m; if ((e ? e.ownerDocument || e : W) !== I && A(e), e = e || I, i = i || [], !t || "string" != typeof t) return i; if (1 !== (r = e.nodeType) && 9 !== r) return []; if (O && !n) { if (o = yt.exec(t)) if (a = o[1]) { if (9 === r) { if (s = e.getElementById(a), !s || !s.parentNode) return i; if (s.id === a) return i.push(s), i } else if (e.ownerDocument && (s = e.ownerDocument.getElementById(a)) && L(e, s) && s.id === a) return i.push(s), i } else { if (o[2]) return Q.apply(i, e.getElementsByTagName(t)), i; if ((a = o[3]) && x.getElementsByClassName && e.getElementsByClassName) return Q.apply(i, e.getElementsByClassName(a)), i } if (x.qsa && (!H || !H.test(t))) { if (p = u = R, f = e, m = 9 === r && t, 1 === r && "object" !== e.nodeName.toLowerCase()) { for (h = T(t), (u = e.getAttribute("id")) ? p = u.replace(wt, "\\$&") : e.setAttribute("id", p), p = "[id='" + p + "'] ", l = h.length; l--;)h[l] = p + d(h[l]); f = bt.test(t) && c(e.parentNode) || e, m = h.join(",") } if (m) try { return Q.apply(i, f.querySelectorAll(m)), i } catch (g) { } finally { u || e.removeAttribute("id") } } } return S(t.replace(lt, "$1"), e, i, n) } function i() { function t(i, n) { return e.push(i + " ") > _.cacheLength && delete t[e.shift()], t[i + " "] = n } var e = []; return t } function n(t) { return t[R] = !0, t } function o(t) { var e = I.createElement("div"); try { return !!t(e) } catch (i) { return !1 } finally { e.parentNode && e.parentNode.removeChild(e), e = null } } function s(t, e) { for (var i = t.split("|"), n = t.length; n--;)_.attrHandle[i[n]] = e } function a(t, e) { var i = e && t, n = i && 1 === t.nodeType && 1 === e.nodeType && (~e.sourceIndex || X) - (~t.sourceIndex || X); if (n) return n; if (i) for (; i = i.nextSibling;)if (i === e) return -1; return t ? 1 : -1 } function r(t) { return function (e) { var i = e.nodeName.toLowerCase(); return "input" === i && e.type === t } } function l(t) { return function (e) { var i = e.nodeName.toLowerCase(); return ("input" === i || "button" === i) && e.type === t } } function h(t) { return n(function (e) { return e = +e, n(function (i, n) { for (var o, s = t([], i.length, e), a = s.length; a--;)i[o = s[a]] && (i[o] = !(n[o] = i[o])) }) }) } function c(t) { return t && typeof t.getElementsByTagName !== V && t } function u() { } function d(t) { for (var e = 0, i = t.length, n = ""; i > e; e++)n += t[e].value; return n } function p(t, e, i) { var n = e.dir, o = i && "parentNode" === n, s = j++; return e.first ? function (e, i, s) { for (; e = e[n];)if (1 === e.nodeType || o) return t(e, i, s) } : function (e, i, a) { var r, l, h = [B, s]; if (a) { for (; e = e[n];)if ((1 === e.nodeType || o) && t(e, i, a)) return !0 } else for (; e = e[n];)if (1 === e.nodeType || o) { if (l = e[R] || (e[R] = {}), (r = l[n]) && r[0] === B && r[1] === s) return h[2] = r[2]; if (l[n] = h, h[2] = t(e, i, a)) return !0 } } } function f(t) { return t.length > 1 ? function (e, i, n) { for (var o = t.length; o--;)if (!t[o](e, i, n)) return !1; return !0 } : t[0] } function m(t, i, n) { for (var o = 0, s = i.length; s > o; o++)e(t, i[o], n); return n } function g(t, e, i, n, o) { for (var s, a = [], r = 0, l = t.length, h = null != e; l > r; r++)(s = t[r]) && (!i || i(s, n, o)) && (a.push(s), h && e.push(r)); return a } function v(t, e, i, o, s, a) { return o && !o[R] && (o = v(o)), s && !s[R] && (s = v(s, a)), n(function (n, a, r, l) { var h, c, u, d = [], p = [], f = a.length, v = n || m(e || "*", r.nodeType ? [r] : r, []), y = !t || !n && e ? v : g(v, d, t, r, l), b = i ? s || (n ? t : f || o) ? [] : a : y; if (i && i(y, b, r, l), o) for (h = g(b, p), o(h, [], r, l), c = h.length; c--;)(u = h[c]) && (b[p[c]] = !(y[p[c]] = u)); if (n) { if (s || t) { if (s) { for (h = [], c = b.length; c--;)(u = b[c]) && h.push(y[c] = u); s(null, b = [], h, l) } for (c = b.length; c--;)(u = b[c]) && (h = s ? et.call(n, u) : d[c]) > -1 && (n[h] = !(a[h] = u)) } } else b = g(b === a ? b.splice(f, b.length) : b), s ? s(null, a, b, l) : Q.apply(a, b) }) } function y(t) { for (var e, i, n, o = t.length, s = _.relative[t[0].type], a = s || _.relative[" "], r = s ? 1 : 0, l = p(function (t) { return t === e }, a, !0), h = p(function (t) { return et.call(e, t) > -1 }, a, !0), c = [function (t, i, n) { return !s && (n || i !== M) || ((e = i).nodeType ? l(t, i, n) : h(t, i, n)) }]; o > r; r++)if (i = _.relative[t[r].type]) c = [p(f(c), i)]; else { if (i = _.filter[t[r].type].apply(null, t[r].matches), i[R]) { for (n = ++r; o > n && !_.relative[t[n].type]; n++); return v(r > 1 && f(c), r > 1 && d(t.slice(0, r - 1).concat({ value: " " === t[r - 2].type ? "*" : "" })).replace(lt, "$1"), i, n > r && y(t.slice(r, n)), o > n && y(t = t.slice(n)), o > n && d(t)) } c.push(i) } return f(c) } function b(t, i) { var o = i.length > 0, s = t.length > 0, a = function (n, a, r, l, h) { var c, u, d, p = 0, f = "0", m = n && [], v = [], y = M, b = n || s && _.find.TAG("*", h), w = B += null == y ? 1 : Math.random() || .1, x = b.length; for (h && (M = a !== I && a); f !== x && null != (c = b[f]); f++) { if (s && c) { for (u = 0; d = t[u++];)if (d(c, a, r)) { l.push(c); break } h && (B = w) } o && ((c = !d && c) && p-- , n && m.push(c)) } if (p += f, o && f !== p) { for (u = 0; d = i[u++];)d(m, v, a, r); if (n) { if (p > 0) for (; f--;)m[f] || v[f] || (v[f] = Z.call(l)); v = g(v) } Q.apply(l, v), h && !n && v.length > 0 && p + i.length > 1 && e.uniqueSort(l) } return h && (B = w, M = y), m }; return o ? n(a) : a } var w, x, _, C, k, T, P, S, M, D, E, A, I, N, O, H, z, F, L, R = "sizzle" + -new Date, W = t.document, B = 0, j = 0, U = i(), q = i(), $ = i(), Y = function (t, e) { return t === e && (E = !0), 0 }, V = "undefined", X = 1 << 31, G = {}.hasOwnProperty, K = [], Z = K.pop, J = K.push, Q = K.push, tt = K.slice, et = K.indexOf || function (t) { for (var e = 0, i = this.length; i > e; e++)if (this[e] === t) return e; return -1 }, it = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", nt = "[\\x20\\t\\r\\n\\f]", ot = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", st = ot.replace("w", "w#"), at = "\\[" + nt + "*(" + ot + ")(?:" + nt + "*([*^$|!~]?=)" + nt + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + st + "))|)" + nt + "*\\]", rt = ":(" + ot + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + at + ")*)|.*)\\)|)", lt = new RegExp("^" + nt + "+|((?:^|[^\\\\])(?:\\\\.)*)" + nt + "+$", "g"), ht = new RegExp("^" + nt + "*," + nt + "*"), ct = new RegExp("^" + nt + "*([>+~]|" + nt + ")" + nt + "*"), ut = new RegExp("=" + nt + "*([^\\]'\"]*?)" + nt + "*\\]", "g"), dt = new RegExp(rt), pt = new RegExp("^" + st + "$"), ft = { ID: new RegExp("^#(" + ot + ")"), CLASS: new RegExp("^\\.(" + ot + ")"), TAG: new RegExp("^(" + ot.replace("w", "w*") + ")"), ATTR: new RegExp("^" + at), PSEUDO: new RegExp("^" + rt), CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + nt + "*(even|odd|(([+-]|)(\\d*)n|)" + nt + "*(?:([+-]|)" + nt + "*(\\d+)|))" + nt + "*\\)|)", "i"), bool: new RegExp("^(?:" + it + ")$", "i"), needsContext: new RegExp("^" + nt + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + nt + "*((?:-\\d)?\\d*)" + nt + "*\\)|)(?=[^-]|$)", "i") }, mt = /^(?:input|select|textarea|button)$/i, gt = /^h\d$/i, vt = /^[^{]+\{\s*\[native \w/, yt = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, bt = /[+~]/, wt = /'|\\/g, xt = new RegExp("\\\\([\\da-f]{1,6}" + nt + "?|(" + nt + ")|.)", "ig"), _t = function (t, e, i) { var n = "0x" + e - 65536; return n !== n || i ? e : 0 > n ? String.fromCharCode(n + 65536) : String.fromCharCode(n >> 10 | 55296, 1023 & n | 56320) }; try { Q.apply(K = tt.call(W.childNodes), W.childNodes), K[W.childNodes.length].nodeType } catch (Ct) { Q = { apply: K.length ? function (t, e) { J.apply(t, tt.call(e)) } : function (t, e) { for (var i = t.length, n = 0; t[i++] = e[n++];); t.length = i - 1 } } } x = e.support = {}, k = e.isXML = function (t) { var e = t && (t.ownerDocument || t).documentElement; return e ? "HTML" !== e.nodeName : !1 }, A = e.setDocument = function (t) {
                var e, i = t ? t.ownerDocument || t : W, n = i.defaultView; return i !== I && 9 === i.nodeType && i.documentElement ? (I = i, N = i.documentElement, O = !k(i), n && n !== n.top && (n.addEventListener ? n.addEventListener("unload", function () { A() }, !1) : n.attachEvent && n.attachEvent("onunload", function () { A() })), x.attributes = o(function (t) { return t.className = "i", !t.getAttribute("className") }), x.getElementsByTagName = o(function (t) { return t.appendChild(i.createComment("")), !t.getElementsByTagName("*").length }), x.getElementsByClassName = vt.test(i.getElementsByClassName) && o(function (t) { return t.innerHTML = "<div class='a'></div><div class='a i'></div>", t.firstChild.className = "i", 2 === t.getElementsByClassName("i").length }), x.getById = o(function (t) { return N.appendChild(t).id = R, !i.getElementsByName || !i.getElementsByName(R).length }), x.getById ? (_.find.ID = function (t, e) {
                    if (typeof e.getElementById !== V && O) {
                        var i = e.getElementById(t); return i && i.parentNode ? [i] : [];
                    }
                }, _.filter.ID = function (t) { var e = t.replace(xt, _t); return function (t) { return t.getAttribute("id") === e } }) : (delete _.find.ID, _.filter.ID = function (t) { var e = t.replace(xt, _t); return function (t) { var i = typeof t.getAttributeNode !== V && t.getAttributeNode("id"); return i && i.value === e } }), _.find.TAG = x.getElementsByTagName ? function (t, e) { return typeof e.getElementsByTagName !== V ? e.getElementsByTagName(t) : void 0 } : function (t, e) { var i, n = [], o = 0, s = e.getElementsByTagName(t); if ("*" === t) { for (; i = s[o++];)1 === i.nodeType && n.push(i); return n } return s }, _.find.CLASS = x.getElementsByClassName && function (t, e) { return typeof e.getElementsByClassName !== V && O ? e.getElementsByClassName(t) : void 0 }, z = [], H = [], (x.qsa = vt.test(i.querySelectorAll)) && (o(function (t) { t.innerHTML = "<select msallowclip=''><option selected=''></option></select>", t.querySelectorAll("[msallowclip^='']").length && H.push("[*^$]=" + nt + "*(?:''|\"\")"), t.querySelectorAll("[selected]").length || H.push("\\[" + nt + "*(?:value|" + it + ")"), t.querySelectorAll(":checked").length || H.push(":checked") }), o(function (t) { var e = i.createElement("input"); e.setAttribute("type", "hidden"), t.appendChild(e).setAttribute("name", "D"), t.querySelectorAll("[name=d]").length && H.push("name" + nt + "*[*^$|!~]?="), t.querySelectorAll(":enabled").length || H.push(":enabled", ":disabled"), t.querySelectorAll("*,:x"), H.push(",.*:") })), (x.matchesSelector = vt.test(F = N.matches || N.webkitMatchesSelector || N.mozMatchesSelector || N.oMatchesSelector || N.msMatchesSelector)) && o(function (t) { x.disconnectedMatch = F.call(t, "div"), F.call(t, "[s!='']:x"), z.push("!=", rt) }), H = H.length && new RegExp(H.join("|")), z = z.length && new RegExp(z.join("|")), e = vt.test(N.compareDocumentPosition), L = e || vt.test(N.contains) ? function (t, e) { var i = 9 === t.nodeType ? t.documentElement : t, n = e && e.parentNode; return t === n || !(!n || 1 !== n.nodeType || !(i.contains ? i.contains(n) : t.compareDocumentPosition && 16 & t.compareDocumentPosition(n))) } : function (t, e) { if (e) for (; e = e.parentNode;)if (e === t) return !0; return !1 }, Y = e ? function (t, e) { if (t === e) return E = !0, 0; var n = !t.compareDocumentPosition - !e.compareDocumentPosition; return n ? n : (n = (t.ownerDocument || t) === (e.ownerDocument || e) ? t.compareDocumentPosition(e) : 1, 1 & n || !x.sortDetached && e.compareDocumentPosition(t) === n ? t === i || t.ownerDocument === W && L(W, t) ? -1 : e === i || e.ownerDocument === W && L(W, e) ? 1 : D ? et.call(D, t) - et.call(D, e) : 0 : 4 & n ? -1 : 1) } : function (t, e) { if (t === e) return E = !0, 0; var n, o = 0, s = t.parentNode, r = e.parentNode, l = [t], h = [e]; if (!s || !r) return t === i ? -1 : e === i ? 1 : s ? -1 : r ? 1 : D ? et.call(D, t) - et.call(D, e) : 0; if (s === r) return a(t, e); for (n = t; n = n.parentNode;)l.unshift(n); for (n = e; n = n.parentNode;)h.unshift(n); for (; l[o] === h[o];)o++; return o ? a(l[o], h[o]) : l[o] === W ? -1 : h[o] === W ? 1 : 0 }, i) : I
            }, e.matches = function (t, i) { return e(t, null, null, i) }, e.matchesSelector = function (t, i) { if ((t.ownerDocument || t) !== I && A(t), i = i.replace(ut, "='$1']"), x.matchesSelector && O && (!z || !z.test(i)) && (!H || !H.test(i))) try { var n = F.call(t, i); if (n || x.disconnectedMatch || t.document && 11 !== t.document.nodeType) return n } catch (o) { } return e(i, I, null, [t]).length > 0 }, e.contains = function (t, e) { return (t.ownerDocument || t) !== I && A(t), L(t, e) }, e.attr = function (t, e) { (t.ownerDocument || t) !== I && A(t); var i = _.attrHandle[e.toLowerCase()], n = i && G.call(_.attrHandle, e.toLowerCase()) ? i(t, e, !O) : void 0; return void 0 !== n ? n : x.attributes || !O ? t.getAttribute(e) : (n = t.getAttributeNode(e)) && n.specified ? n.value : null }, e.error = function (t) { throw new Error("Syntax error, unrecognized expression: " + t) }, e.uniqueSort = function (t) { var e, i = [], n = 0, o = 0; if (E = !x.detectDuplicates, D = !x.sortStable && t.slice(0), t.sort(Y), E) { for (; e = t[o++];)e === t[o] && (n = i.push(o)); for (; n--;)t.splice(i[n], 1) } return D = null, t }, C = e.getText = function (t) { var e, i = "", n = 0, o = t.nodeType; if (o) { if (1 === o || 9 === o || 11 === o) { if ("string" == typeof t.textContent) return t.textContent; for (t = t.firstChild; t; t = t.nextSibling)i += C(t) } else if (3 === o || 4 === o) return t.nodeValue } else for (; e = t[n++];)i += C(e); return i }, _ = e.selectors = { cacheLength: 50, createPseudo: n, match: ft, attrHandle: {}, find: {}, relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } }, preFilter: { ATTR: function (t) { return t[1] = t[1].replace(xt, _t), t[3] = (t[3] || t[4] || t[5] || "").replace(xt, _t), "~=" === t[2] && (t[3] = " " + t[3] + " "), t.slice(0, 4) }, CHILD: function (t) { return t[1] = t[1].toLowerCase(), "nth" === t[1].slice(0, 3) ? (t[3] || e.error(t[0]), t[4] = +(t[4] ? t[5] + (t[6] || 1) : 2 * ("even" === t[3] || "odd" === t[3])), t[5] = +(t[7] + t[8] || "odd" === t[3])) : t[3] && e.error(t[0]), t }, PSEUDO: function (t) { var e, i = !t[6] && t[2]; return ft.CHILD.test(t[0]) ? null : (t[3] ? t[2] = t[4] || t[5] || "" : i && dt.test(i) && (e = T(i, !0)) && (e = i.indexOf(")", i.length - e) - i.length) && (t[0] = t[0].slice(0, e), t[2] = i.slice(0, e)), t.slice(0, 3)) } }, filter: { TAG: function (t) { var e = t.replace(xt, _t).toLowerCase(); return "*" === t ? function () { return !0 } : function (t) { return t.nodeName && t.nodeName.toLowerCase() === e } }, CLASS: function (t) { var e = U[t + " "]; return e || (e = new RegExp("(^|" + nt + ")" + t + "(" + nt + "|$)")) && U(t, function (t) { return e.test("string" == typeof t.className && t.className || typeof t.getAttribute !== V && t.getAttribute("class") || "") }) }, ATTR: function (t, i, n) { return function (o) { var s = e.attr(o, t); return null == s ? "!=" === i : i ? (s += "", "=" === i ? s === n : "!=" === i ? s !== n : "^=" === i ? n && 0 === s.indexOf(n) : "*=" === i ? n && s.indexOf(n) > -1 : "$=" === i ? n && s.slice(-n.length) === n : "~=" === i ? (" " + s + " ").indexOf(n) > -1 : "|=" === i ? s === n || s.slice(0, n.length + 1) === n + "-" : !1) : !0 } }, CHILD: function (t, e, i, n, o) { var s = "nth" !== t.slice(0, 3), a = "last" !== t.slice(-4), r = "of-type" === e; return 1 === n && 0 === o ? function (t) { return !!t.parentNode } : function (e, i, l) { var h, c, u, d, p, f, m = s !== a ? "nextSibling" : "previousSibling", g = e.parentNode, v = r && e.nodeName.toLowerCase(), y = !l && !r; if (g) { if (s) { for (; m;) { for (u = e; u = u[m];)if (r ? u.nodeName.toLowerCase() === v : 1 === u.nodeType) return !1; f = m = "only" === t && !f && "nextSibling" } return !0 } if (f = [a ? g.firstChild : g.lastChild], a && y) { for (c = g[R] || (g[R] = {}), h = c[t] || [], p = h[0] === B && h[1], d = h[0] === B && h[2], u = p && g.childNodes[p]; u = ++p && u && u[m] || (d = p = 0) || f.pop();)if (1 === u.nodeType && ++d && u === e) { c[t] = [B, p, d]; break } } else if (y && (h = (e[R] || (e[R] = {}))[t]) && h[0] === B) d = h[1]; else for (; (u = ++p && u && u[m] || (d = p = 0) || f.pop()) && ((r ? u.nodeName.toLowerCase() !== v : 1 !== u.nodeType) || !++d || (y && ((u[R] || (u[R] = {}))[t] = [B, d]), u !== e));); return d -= o, d === n || d % n === 0 && d / n >= 0 } } }, PSEUDO: function (t, i) { var o, s = _.pseudos[t] || _.setFilters[t.toLowerCase()] || e.error("unsupported pseudo: " + t); return s[R] ? s(i) : s.length > 1 ? (o = [t, t, "", i], _.setFilters.hasOwnProperty(t.toLowerCase()) ? n(function (t, e) { for (var n, o = s(t, i), a = o.length; a--;)n = et.call(t, o[a]), t[n] = !(e[n] = o[a]) }) : function (t) { return s(t, 0, o) }) : s } }, pseudos: { not: n(function (t) { var e = [], i = [], o = P(t.replace(lt, "$1")); return o[R] ? n(function (t, e, i, n) { for (var s, a = o(t, null, n, []), r = t.length; r--;)(s = a[r]) && (t[r] = !(e[r] = s)) }) : function (t, n, s) { return e[0] = t, o(e, null, s, i), !i.pop() } }), has: n(function (t) { return function (i) { return e(t, i).length > 0 } }), contains: n(function (t) { return function (e) { return (e.textContent || e.innerText || C(e)).indexOf(t) > -1 } }), lang: n(function (t) { return pt.test(t || "") || e.error("unsupported lang: " + t), t = t.replace(xt, _t).toLowerCase(), function (e) { var i; do if (i = O ? e.lang : e.getAttribute("xml:lang") || e.getAttribute("lang")) return i = i.toLowerCase(), i === t || 0 === i.indexOf(t + "-"); while ((e = e.parentNode) && 1 === e.nodeType); return !1 } }), target: function (e) { var i = t.location && t.location.hash; return i && i.slice(1) === e.id }, root: function (t) { return t === N }, focus: function (t) { return t === I.activeElement && (!I.hasFocus || I.hasFocus()) && !!(t.type || t.href || ~t.tabIndex) }, enabled: function (t) { return t.disabled === !1 }, disabled: function (t) { return t.disabled === !0 }, checked: function (t) { var e = t.nodeName.toLowerCase(); return "input" === e && !!t.checked || "option" === e && !!t.selected }, selected: function (t) { return t.parentNode && t.parentNode.selectedIndex, t.selected === !0 }, empty: function (t) { for (t = t.firstChild; t; t = t.nextSibling)if (t.nodeType < 6) return !1; return !0 }, parent: function (t) { return !_.pseudos.empty(t) }, header: function (t) { return gt.test(t.nodeName) }, input: function (t) { return mt.test(t.nodeName) }, button: function (t) { var e = t.nodeName.toLowerCase(); return "input" === e && "button" === t.type || "button" === e }, text: function (t) { var e; return "input" === t.nodeName.toLowerCase() && "text" === t.type && (null == (e = t.getAttribute("type")) || "text" === e.toLowerCase()) }, first: h(function () { return [0] }), last: h(function (t, e) { return [e - 1] }), eq: h(function (t, e, i) { return [0 > i ? i + e : i] }), even: h(function (t, e) { for (var i = 0; e > i; i += 2)t.push(i); return t }), odd: h(function (t, e) { for (var i = 1; e > i; i += 2)t.push(i); return t }), lt: h(function (t, e, i) { for (var n = 0 > i ? i + e : i; --n >= 0;)t.push(n); return t }), gt: h(function (t, e, i) { for (var n = 0 > i ? i + e : i; ++n < e;)t.push(n); return t }) } }, _.pseudos.nth = _.pseudos.eq; for (w in { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) _.pseudos[w] = r(w); for (w in { submit: !0, reset: !0 }) _.pseudos[w] = l(w); return u.prototype = _.filters = _.pseudos, _.setFilters = new u, T = e.tokenize = function (t, i) { var n, o, s, a, r, l, h, c = q[t + " "]; if (c) return i ? 0 : c.slice(0); for (r = t, l = [], h = _.preFilter; r;) { (!n || (o = ht.exec(r))) && (o && (r = r.slice(o[0].length) || r), l.push(s = [])), n = !1, (o = ct.exec(r)) && (n = o.shift(), s.push({ value: n, type: o[0].replace(lt, " ") }), r = r.slice(n.length)); for (a in _.filter) !(o = ft[a].exec(r)) || h[a] && !(o = h[a](o)) || (n = o.shift(), s.push({ value: n, type: a, matches: o }), r = r.slice(n.length)); if (!n) break } return i ? r.length : r ? e.error(t) : q(t, l).slice(0) }, P = e.compile = function (t, e) { var i, n = [], o = [], s = $[t + " "]; if (!s) { for (e || (e = T(t)), i = e.length; i--;)s = y(e[i]), s[R] ? n.push(s) : o.push(s); s = $(t, b(o, n)), s.selector = t } return s }, S = e.select = function (t, e, i, n) { var o, s, a, r, l, h = "function" == typeof t && t, u = !n && T(t = h.selector || t); if (i = i || [], 1 === u.length) { if (s = u[0] = u[0].slice(0), s.length > 2 && "ID" === (a = s[0]).type && x.getById && 9 === e.nodeType && O && _.relative[s[1].type]) { if (e = (_.find.ID(a.matches[0].replace(xt, _t), e) || [])[0], !e) return i; h && (e = e.parentNode), t = t.slice(s.shift().value.length) } for (o = ft.needsContext.test(t) ? 0 : s.length; o-- && (a = s[o], !_.relative[r = a.type]);)if ((l = _.find[r]) && (n = l(a.matches[0].replace(xt, _t), bt.test(s[0].type) && c(e.parentNode) || e))) { if (s.splice(o, 1), t = n.length && d(s), !t) return Q.apply(i, n), i; break } } return (h || P(t, u))(n, e, !O, i, bt.test(t) && c(e.parentNode) || e), i }, x.sortStable = R.split("").sort(Y).join("") === R, x.detectDuplicates = !!E, A(), x.sortDetached = o(function (t) { return 1 & t.compareDocumentPosition(I.createElement("div")) }), o(function (t) { return t.innerHTML = "<a href='#'></a>", "#" === t.firstChild.getAttribute("href") }) || s("type|href|height|width", function (t, e, i) { return i ? void 0 : t.getAttribute(e, "type" === e.toLowerCase() ? 1 : 2) }), x.attributes && o(function (t) { return t.innerHTML = "<input/>", t.firstChild.setAttribute("value", ""), "" === t.firstChild.getAttribute("value") }) || s("value", function (t, e, i) { return i || "input" !== t.nodeName.toLowerCase() ? void 0 : t.defaultValue }), o(function (t) { return null == t.getAttribute("disabled") }) || s(it, function (t, e, i) { var n; return i ? void 0 : t[e] === !0 ? e.toLowerCase() : (n = t.getAttributeNode(e)) && n.specified ? n.value : null }), e
        }(i); lt.find = pt, lt.expr = pt.selectors, lt.expr[":"] = lt.expr.pseudos, lt.unique = pt.uniqueSort, lt.text = pt.getText, lt.isXMLDoc = pt.isXML, lt.contains = pt.contains; var ft = lt.expr.match.needsContext, mt = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, gt = /^.[^:#\[\.,]*$/; lt.filter = function (t, e, i) { var n = e[0]; return i && (t = ":not(" + t + ")"), 1 === e.length && 1 === n.nodeType ? lt.find.matchesSelector(n, t) ? [n] : [] : lt.find.matches(t, lt.grep(e, function (t) { return 1 === t.nodeType })) }, lt.fn.extend({ find: function (t) { var e, i = [], n = this, o = n.length; if ("string" != typeof t) return this.pushStack(lt(t).filter(function () { for (e = 0; o > e; e++)if (lt.contains(n[e], this)) return !0 })); for (e = 0; o > e; e++)lt.find(t, n[e], i); return i = this.pushStack(o > 1 ? lt.unique(i) : i), i.selector = this.selector ? this.selector + " " + t : t, i }, filter: function (t) { return this.pushStack(r(this, t || [], !1)) }, not: function (t) { return this.pushStack(r(this, t || [], !0)) }, is: function (t) { return !!r(this, "string" == typeof t && ft.test(t) ? lt(t) : t || [], !1).length } }); var vt, yt = i.document, bt = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, wt = lt.fn.init = function (t, e) { var i, n; if (!t) return this; if ("string" == typeof t) { if (i = "<" === t.charAt(0) && ">" === t.charAt(t.length - 1) && t.length >= 3 ? [null, t, null] : bt.exec(t), !i || !i[1] && e) return !e || e.jquery ? (e || vt).find(t) : this.constructor(e).find(t); if (i[1]) { if (e = e instanceof lt ? e[0] : e, lt.merge(this, lt.parseHTML(i[1], e && e.nodeType ? e.ownerDocument || e : yt, !0)), mt.test(i[1]) && lt.isPlainObject(e)) for (i in e) lt.isFunction(this[i]) ? this[i](e[i]) : this.attr(i, e[i]); return this } if (n = yt.getElementById(i[2]), n && n.parentNode) { if (n.id !== i[2]) return vt.find(t); this.length = 1, this[0] = n } return this.context = yt, this.selector = t, this } return t.nodeType ? (this.context = this[0] = t, this.length = 1, this) : lt.isFunction(t) ? "undefined" != typeof vt.ready ? vt.ready(t) : t(lt) : (void 0 !== t.selector && (this.selector = t.selector, this.context = t.context), lt.makeArray(t, this)) }; wt.prototype = lt.fn, vt = lt(yt); var xt = /^(?:parents|prev(?:Until|All))/, _t = { children: !0, contents: !0, next: !0, prev: !0 }; lt.extend({ dir: function (t, e, i) { for (var n = [], o = t[e]; o && 9 !== o.nodeType && (void 0 === i || 1 !== o.nodeType || !lt(o).is(i));)1 === o.nodeType && n.push(o), o = o[e]; return n }, sibling: function (t, e) { for (var i = []; t; t = t.nextSibling)1 === t.nodeType && t !== e && i.push(t); return i } }), lt.fn.extend({ has: function (t) { var e, i = lt(t, this), n = i.length; return this.filter(function () { for (e = 0; n > e; e++)if (lt.contains(this, i[e])) return !0 }) }, closest: function (t, e) { for (var i, n = 0, o = this.length, s = [], a = ft.test(t) || "string" != typeof t ? lt(t, e || this.context) : 0; o > n; n++)for (i = this[n]; i && i !== e; i = i.parentNode)if (i.nodeType < 11 && (a ? a.index(i) > -1 : 1 === i.nodeType && lt.find.matchesSelector(i, t))) { s.push(i); break } return this.pushStack(s.length > 1 ? lt.unique(s) : s) }, index: function (t) { return t ? "string" == typeof t ? lt.inArray(this[0], lt(t)) : lt.inArray(t.jquery ? t[0] : t, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1 }, add: function (t, e) { return this.pushStack(lt.unique(lt.merge(this.get(), lt(t, e)))) }, addBack: function (t) { return this.add(null == t ? this.prevObject : this.prevObject.filter(t)) } }), lt.each({ parent: function (t) { var e = t.parentNode; return e && 11 !== e.nodeType ? e : null }, parents: function (t) { return lt.dir(t, "parentNode") }, parentsUntil: function (t, e, i) { return lt.dir(t, "parentNode", i) }, next: function (t) { return l(t, "nextSibling") }, prev: function (t) { return l(t, "previousSibling") }, nextAll: function (t) { return lt.dir(t, "nextSibling") }, prevAll: function (t) { return lt.dir(t, "previousSibling") }, nextUntil: function (t, e, i) { return lt.dir(t, "nextSibling", i) }, prevUntil: function (t, e, i) { return lt.dir(t, "previousSibling", i) }, siblings: function (t) { return lt.sibling((t.parentNode || {}).firstChild, t) }, children: function (t) { return lt.sibling(t.firstChild) }, contents: function (t) { return lt.nodeName(t, "iframe") ? t.contentDocument || t.contentWindow.document : lt.merge([], t.childNodes) } }, function (t, e) { lt.fn[t] = function (i, n) { var o = lt.map(this, e, i); return "Until" !== t.slice(-5) && (n = i), n && "string" == typeof n && (o = lt.filter(n, o)), this.length > 1 && (_t[t] || (o = lt.unique(o)), xt.test(t) && (o = o.reverse())), this.pushStack(o) } }); var Ct = /\S+/g, kt = {}; lt.Callbacks = function (t) { t = "string" == typeof t ? kt[t] || h(t) : lt.extend({}, t); var e, i, n, o, s, a, r = [], l = !t.once && [], c = function (h) { for (i = t.memory && h, n = !0, s = a || 0, a = 0, o = r.length, e = !0; r && o > s; s++)if (r[s].apply(h[0], h[1]) === !1 && t.stopOnFalse) { i = !1; break } e = !1, r && (l ? l.length && c(l.shift()) : i ? r = [] : u.disable()) }, u = { add: function () { if (r) { var n = r.length; !function s(e) { lt.each(e, function (e, i) { var n = lt.type(i); "function" === n ? t.unique && u.has(i) || r.push(i) : i && i.length && "string" !== n && s(i) }) }(arguments), e ? o = r.length : i && (a = n, c(i)) } return this }, remove: function () { return r && lt.each(arguments, function (t, i) { for (var n; (n = lt.inArray(i, r, n)) > -1;)r.splice(n, 1), e && (o >= n && o-- , s >= n && s--) }), this }, has: function (t) { return t ? lt.inArray(t, r) > -1 : !(!r || !r.length) }, empty: function () { return r = [], o = 0, this }, disable: function () { return r = l = i = void 0, this }, disabled: function () { return !r }, lock: function () { return l = void 0, i || u.disable(), this }, locked: function () { return !l }, fireWith: function (t, i) { return !r || n && !l || (i = i || [], i = [t, i.slice ? i.slice() : i], e ? l.push(i) : c(i)), this }, fire: function () { return u.fireWith(this, arguments), this }, fired: function () { return !!n } }; return u }, lt.extend({ Deferred: function (t) { var e = [["resolve", "done", lt.Callbacks("once memory"), "resolved"], ["reject", "fail", lt.Callbacks("once memory"), "rejected"], ["notify", "progress", lt.Callbacks("memory")]], i = "pending", n = { state: function () { return i }, always: function () { return o.done(arguments).fail(arguments), this }, then: function () { var t = arguments; return lt.Deferred(function (i) { lt.each(e, function (e, s) { var a = lt.isFunction(t[e]) && t[e]; o[s[1]](function () { var t = a && a.apply(this, arguments); t && lt.isFunction(t.promise) ? t.promise().done(i.resolve).fail(i.reject).progress(i.notify) : i[s[0] + "With"](this === n ? i.promise() : this, a ? [t] : arguments) }) }), t = null }).promise() }, promise: function (t) { return null != t ? lt.extend(t, n) : n } }, o = {}; return n.pipe = n.then, lt.each(e, function (t, s) { var a = s[2], r = s[3]; n[s[1]] = a.add, r && a.add(function () { i = r }, e[1 ^ t][2].disable, e[2][2].lock), o[s[0]] = function () { return o[s[0] + "With"](this === o ? n : this, arguments), this }, o[s[0] + "With"] = a.fireWith }), n.promise(o), t && t.call(o, o), o }, when: function (t) { var e, i, n, o = 0, s = Q.call(arguments), a = s.length, r = 1 !== a || t && lt.isFunction(t.promise) ? a : 0, l = 1 === r ? t : lt.Deferred(), h = function (t, i, n) { return function (o) { i[t] = this, n[t] = arguments.length > 1 ? Q.call(arguments) : o, n === e ? l.notifyWith(i, n) : --r || l.resolveWith(i, n) } }; if (a > 1) for (e = new Array(a), i = new Array(a), n = new Array(a); a > o; o++)s[o] && lt.isFunction(s[o].promise) ? s[o].promise().done(h(o, n, s)).fail(l.reject).progress(h(o, i, e)) : --r; return r || l.resolveWith(n, s), l.promise() } }); var Tt; lt.fn.ready = function (t) { return lt.ready.promise().done(t), this }, lt.extend({ isReady: !1, readyWait: 1, holdReady: function (t) { t ? lt.readyWait++ : lt.ready(!0) }, ready: function (t) { if (t === !0 ? !--lt.readyWait : !lt.isReady) { if (!yt.body) return setTimeout(lt.ready); lt.isReady = !0, t !== !0 && --lt.readyWait > 0 || (Tt.resolveWith(yt, [lt]), lt.fn.triggerHandler && (lt(yt).triggerHandler("ready"), lt(yt).off("ready"))) } } }), lt.ready.promise = function (t) { if (!Tt) if (Tt = lt.Deferred(), "complete" === yt.readyState) setTimeout(lt.ready); else if (yt.addEventListener) yt.addEventListener("DOMContentLoaded", u, !1), i.addEventListener("load", u, !1); else { yt.attachEvent("onreadystatechange", u), i.attachEvent("onload", u); var e = !1; try { e = null == i.frameElement && yt.documentElement } catch (n) { } e && e.doScroll && !function o() { if (!lt.isReady) { try { e.doScroll("left") } catch (t) { return setTimeout(o, 50) } c(), lt.ready() } }() } return Tt.promise(t) }; var Pt, St = "undefined"; for (Pt in lt(at)) break; at.ownLast = "0" !== Pt, at.inlineBlockNeedsLayout = !1, lt(function () { var t, e, i, n; i = yt.getElementsByTagName("body")[0], i && i.style && (e = yt.createElement("div"), n = yt.createElement("div"), n.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", i.appendChild(n).appendChild(e), typeof e.style.zoom !== St && (e.style.cssText = "display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1", at.inlineBlockNeedsLayout = t = 3 === e.offsetWidth, t && (i.style.zoom = 1)), i.removeChild(n)) }), function () { var t = yt.createElement("div"); if (null == at.deleteExpando) { at.deleteExpando = !0; try { delete t.test } catch (e) { at.deleteExpando = !1 } } t = null }(), lt.acceptData = function (t) { var e = lt.noData[(t.nodeName + " ").toLowerCase()], i = +t.nodeType || 1; return 1 !== i && 9 !== i ? !1 : !e || e !== !0 && t.getAttribute("classid") === e }; var Mt = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, Dt = /([A-Z])/g; lt.extend({ cache: {}, noData: { "applet ": !0, "embed ": !0, "object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" }, hasData: function (t) { return t = t.nodeType ? lt.cache[t[lt.expando]] : t[lt.expando], !!t && !p(t) }, data: function (t, e, i) { return f(t, e, i) }, removeData: function (t, e) { return m(t, e) }, _data: function (t, e, i) { return f(t, e, i, !0) }, _removeData: function (t, e) { return m(t, e, !0) } }), lt.fn.extend({ data: function (t, e) { var i, n, o, s = this[0], a = s && s.attributes; if (void 0 === t) { if (this.length && (o = lt.data(s), 1 === s.nodeType && !lt._data(s, "parsedAttrs"))) { for (i = a.length; i--;)a[i] && (n = a[i].name, 0 === n.indexOf("data-") && (n = lt.camelCase(n.slice(5)), d(s, n, o[n]))); lt._data(s, "parsedAttrs", !0) } return o } return "object" == typeof t ? this.each(function () { lt.data(this, t) }) : arguments.length > 1 ? this.each(function () { lt.data(this, t, e) }) : s ? d(s, t, lt.data(s, t)) : void 0 }, removeData: function (t) { return this.each(function () { lt.removeData(this, t) }) } }), lt.extend({ queue: function (t, e, i) { var n; return t ? (e = (e || "fx") + "queue", n = lt._data(t, e), i && (!n || lt.isArray(i) ? n = lt._data(t, e, lt.makeArray(i)) : n.push(i)), n || []) : void 0 }, dequeue: function (t, e) { e = e || "fx"; var i = lt.queue(t, e), n = i.length, o = i.shift(), s = lt._queueHooks(t, e), a = function () { lt.dequeue(t, e) }; "inprogress" === o && (o = i.shift(), n--), o && ("fx" === e && i.unshift("inprogress"), delete s.stop, o.call(t, a, s)), !n && s && s.empty.fire() }, _queueHooks: function (t, e) { var i = e + "queueHooks"; return lt._data(t, i) || lt._data(t, i, { empty: lt.Callbacks("once memory").add(function () { lt._removeData(t, e + "queue"), lt._removeData(t, i) }) }) } }), lt.fn.extend({ queue: function (t, e) { var i = 2; return "string" != typeof t && (e = t, t = "fx", i--), arguments.length < i ? lt.queue(this[0], t) : void 0 === e ? this : this.each(function () { var i = lt.queue(this, t, e); lt._queueHooks(this, t), "fx" === t && "inprogress" !== i[0] && lt.dequeue(this, t) }) }, dequeue: function (t) { return this.each(function () { lt.dequeue(this, t) }) }, clearQueue: function (t) { return this.queue(t || "fx", []) }, promise: function (t, e) { var i, n = 1, o = lt.Deferred(), s = this, a = this.length, r = function () { --n || o.resolveWith(s, [s]) }; for ("string" != typeof t && (e = t, t = void 0), t = t || "fx"; a--;)i = lt._data(s[a], t + "queueHooks"), i && i.empty && (n++ , i.empty.add(r)); return r(), o.promise(e) } }); var Et = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, At = ["Top", "Right", "Bottom", "Left"], It = function (t, e) { return t = e || t, "none" === lt.css(t, "display") || !lt.contains(t.ownerDocument, t) }, Nt = lt.access = function (t, e, i, n, o, s, a) { var r = 0, l = t.length, h = null == i; if ("object" === lt.type(i)) { o = !0; for (r in i) lt.access(t, e, r, i[r], !0, s, a) } else if (void 0 !== n && (o = !0, lt.isFunction(n) || (a = !0), h && (a ? (e.call(t, n), e = null) : (h = e, e = function (t, e, i) { return h.call(lt(t), i) })), e)) for (; l > r; r++)e(t[r], i, a ? n : n.call(t[r], r, e(t[r], i))); return o ? t : h ? e.call(t) : l ? e(t[0], i) : s }, Ot = /^(?:checkbox|radio)$/i; !function () { var t = yt.createElement("input"), e = yt.createElement("div"), i = yt.createDocumentFragment(); if (e.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", at.leadingWhitespace = 3 === e.firstChild.nodeType, at.tbody = !e.getElementsByTagName("tbody").length, at.htmlSerialize = !!e.getElementsByTagName("link").length, at.html5Clone = "<:nav></:nav>" !== yt.createElement("nav").cloneNode(!0).outerHTML, t.type = "checkbox", t.checked = !0, i.appendChild(t), at.appendChecked = t.checked, e.innerHTML = "<textarea>x</textarea>", at.noCloneChecked = !!e.cloneNode(!0).lastChild.defaultValue, i.appendChild(e), e.innerHTML = "<input type='radio' checked='checked' name='t'/>", at.checkClone = e.cloneNode(!0).cloneNode(!0).lastChild.checked, at.noCloneEvent = !0, e.attachEvent && (e.attachEvent("onclick", function () { at.noCloneEvent = !1 }), e.cloneNode(!0).click()), null == at.deleteExpando) { at.deleteExpando = !0; try { delete e.test } catch (n) { at.deleteExpando = !1 } } }(), function () { var t, e, n = yt.createElement("div"); for (t in { submit: !0, change: !0, focusin: !0 }) e = "on" + t, (at[t + "Bubbles"] = e in i) || (n.setAttribute(e, "t"), at[t + "Bubbles"] = n.attributes[e].expando === !1); n = null }(); var Ht = /^(?:input|select|textarea)$/i, zt = /^key/, Ft = /^(?:mouse|pointer|contextmenu)|click/, Lt = /^(?:focusinfocus|focusoutblur)$/, Rt = /^([^.]*)(?:\.(.+)|)$/; lt.event = { global: {}, add: function (t, e, i, n, o) { var s, a, r, l, h, c, u, d, p, f, m, g = lt._data(t); if (g) { for (i.handler && (l = i, i = l.handler, o = l.selector), i.guid || (i.guid = lt.guid++), (a = g.events) || (a = g.events = {}), (c = g.handle) || (c = g.handle = function (t) { return typeof lt === St || t && lt.event.triggered === t.type ? void 0 : lt.event.dispatch.apply(c.elem, arguments) }, c.elem = t), e = (e || "").match(Ct) || [""], r = e.length; r--;)s = Rt.exec(e[r]) || [], p = m = s[1], f = (s[2] || "").split(".").sort(), p && (h = lt.event.special[p] || {}, p = (o ? h.delegateType : h.bindType) || p, h = lt.event.special[p] || {}, u = lt.extend({ type: p, origType: m, data: n, handler: i, guid: i.guid, selector: o, needsContext: o && lt.expr.match.needsContext.test(o), namespace: f.join(".") }, l), (d = a[p]) || (d = a[p] = [], d.delegateCount = 0, h.setup && h.setup.call(t, n, f, c) !== !1 || (t.addEventListener ? t.addEventListener(p, c, !1) : t.attachEvent && t.attachEvent("on" + p, c))), h.add && (h.add.call(t, u), u.handler.guid || (u.handler.guid = i.guid)), o ? d.splice(d.delegateCount++, 0, u) : d.push(u), lt.event.global[p] = !0); t = null } }, remove: function (t, e, i, n, o) { var s, a, r, l, h, c, u, d, p, f, m, g = lt.hasData(t) && lt._data(t); if (g && (c = g.events)) { for (e = (e || "").match(Ct) || [""], h = e.length; h--;)if (r = Rt.exec(e[h]) || [], p = m = r[1], f = (r[2] || "").split(".").sort(), p) { for (u = lt.event.special[p] || {}, p = (n ? u.delegateType : u.bindType) || p, d = c[p] || [], r = r[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"), l = s = d.length; s--;)a = d[s], !o && m !== a.origType || i && i.guid !== a.guid || r && !r.test(a.namespace) || n && n !== a.selector && ("**" !== n || !a.selector) || (d.splice(s, 1), a.selector && d.delegateCount-- , u.remove && u.remove.call(t, a)); l && !d.length && (u.teardown && u.teardown.call(t, f, g.handle) !== !1 || lt.removeEvent(t, p, g.handle), delete c[p]) } else for (p in c) lt.event.remove(t, p + e[h], i, n, !0); lt.isEmptyObject(c) && (delete g.handle, lt._removeData(t, "events")) } }, trigger: function (t, e, n, o) { var s, a, r, l, h, c, u, d = [n || yt], p = st.call(t, "type") ? t.type : t, f = st.call(t, "namespace") ? t.namespace.split(".") : []; if (r = c = n = n || yt, 3 !== n.nodeType && 8 !== n.nodeType && !Lt.test(p + lt.event.triggered) && (p.indexOf(".") >= 0 && (f = p.split("."), p = f.shift(), f.sort()), a = p.indexOf(":") < 0 && "on" + p, t = t[lt.expando] ? t : new lt.Event(p, "object" == typeof t && t), t.isTrigger = o ? 2 : 3, t.namespace = f.join("."), t.namespace_re = t.namespace ? new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = void 0, t.target || (t.target = n), e = null == e ? [t] : lt.makeArray(e, [t]), h = lt.event.special[p] || {}, o || !h.trigger || h.trigger.apply(n, e) !== !1)) { if (!o && !h.noBubble && !lt.isWindow(n)) { for (l = h.delegateType || p, Lt.test(l + p) || (r = r.parentNode); r; r = r.parentNode)d.push(r), c = r; c === (n.ownerDocument || yt) && d.push(c.defaultView || c.parentWindow || i) } for (u = 0; (r = d[u++]) && !t.isPropagationStopped();)t.type = u > 1 ? l : h.bindType || p, s = (lt._data(r, "events") || {})[t.type] && lt._data(r, "handle"), s && s.apply(r, e), s = a && r[a], s && s.apply && lt.acceptData(r) && (t.result = s.apply(r, e), t.result === !1 && t.preventDefault()); if (t.type = p, !o && !t.isDefaultPrevented() && (!h._default || h._default.apply(d.pop(), e) === !1) && lt.acceptData(n) && a && n[p] && !lt.isWindow(n)) { c = n[a], c && (n[a] = null), lt.event.triggered = p; try { n[p]() } catch (m) { } lt.event.triggered = void 0, c && (n[a] = c) } return t.result } }, dispatch: function (t) { t = lt.event.fix(t); var e, i, n, o, s, a = [], r = Q.call(arguments), l = (lt._data(this, "events") || {})[t.type] || [], h = lt.event.special[t.type] || {}; if (r[0] = t, t.delegateTarget = this, !h.preDispatch || h.preDispatch.call(this, t) !== !1) { for (a = lt.event.handlers.call(this, t, l), e = 0; (o = a[e++]) && !t.isPropagationStopped();)for (t.currentTarget = o.elem, s = 0; (n = o.handlers[s++]) && !t.isImmediatePropagationStopped();)(!t.namespace_re || t.namespace_re.test(n.namespace)) && (t.handleObj = n, t.data = n.data, i = ((lt.event.special[n.origType] || {}).handle || n.handler).apply(o.elem, r), void 0 !== i && (t.result = i) === !1 && (t.preventDefault(), t.stopPropagation())); return h.postDispatch && h.postDispatch.call(this, t), t.result } }, handlers: function (t, e) { var i, n, o, s, a = [], r = e.delegateCount, l = t.target; if (r && l.nodeType && (!t.button || "click" !== t.type)) for (; l != this; l = l.parentNode || this)if (1 === l.nodeType && (l.disabled !== !0 || "click" !== t.type)) { for (o = [], s = 0; r > s; s++)n = e[s], i = n.selector + " ", void 0 === o[i] && (o[i] = n.needsContext ? lt(i, this).index(l) >= 0 : lt.find(i, this, null, [l]).length), o[i] && o.push(n); o.length && a.push({ elem: l, handlers: o }) } return r < e.length && a.push({ elem: this, handlers: e.slice(r) }), a }, fix: function (t) { if (t[lt.expando]) return t; var e, i, n, o = t.type, s = t, a = this.fixHooks[o]; for (a || (this.fixHooks[o] = a = Ft.test(o) ? this.mouseHooks : zt.test(o) ? this.keyHooks : {}), n = a.props ? this.props.concat(a.props) : this.props, t = new lt.Event(s), e = n.length; e--;)i = n[e], t[i] = s[i]; return t.target || (t.target = s.srcElement || yt), 3 === t.target.nodeType && (t.target = t.target.parentNode), t.metaKey = !!t.metaKey, a.filter ? a.filter(t, s) : t }, props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "), fixHooks: {}, keyHooks: { props: "char charCode key keyCode".split(" "), filter: function (t, e) { return null == t.which && (t.which = null != e.charCode ? e.charCode : e.keyCode), t } }, mouseHooks: { props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "), filter: function (t, e) { var i, n, o, s = e.button, a = e.fromElement; return null == t.pageX && null != e.clientX && (n = t.target.ownerDocument || yt, o = n.documentElement, i = n.body, t.pageX = e.clientX + (o && o.scrollLeft || i && i.scrollLeft || 0) - (o && o.clientLeft || i && i.clientLeft || 0), t.pageY = e.clientY + (o && o.scrollTop || i && i.scrollTop || 0) - (o && o.clientTop || i && i.clientTop || 0)), !t.relatedTarget && a && (t.relatedTarget = a === t.target ? e.toElement : a), t.which || void 0 === s || (t.which = 1 & s ? 1 : 2 & s ? 3 : 4 & s ? 2 : 0), t } }, special: { load: { noBubble: !0 }, focus: { trigger: function () { if (this !== y() && this.focus) try { return this.focus(), !1 } catch (t) { } }, delegateType: "focusin" }, blur: { trigger: function () { return this === y() && this.blur ? (this.blur(), !1) : void 0 }, delegateType: "focusout" }, click: { trigger: function () { return lt.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), !1) : void 0 }, _default: function (t) { return lt.nodeName(t.target, "a") } }, beforeunload: { postDispatch: function (t) { void 0 !== t.result && t.originalEvent && (t.originalEvent.returnValue = t.result) } } }, simulate: function (t, e, i, n) { var o = lt.extend(new lt.Event, i, { type: t, isSimulated: !0, originalEvent: {} }); n ? lt.event.trigger(o, null, e) : lt.event.dispatch.call(e, o), o.isDefaultPrevented() && i.preventDefault() } }, lt.removeEvent = yt.removeEventListener ? function (t, e, i) { t.removeEventListener && t.removeEventListener(e, i, !1) } : function (t, e, i) { var n = "on" + e; t.detachEvent && (typeof t[n] === St && (t[n] = null), t.detachEvent(n, i)) }, lt.Event = function (t, e) { return this instanceof lt.Event ? (t && t.type ? (this.originalEvent = t, this.type = t.type, this.isDefaultPrevented = t.defaultPrevented || void 0 === t.defaultPrevented && t.returnValue === !1 ? g : v) : this.type = t, e && lt.extend(this, e), this.timeStamp = t && t.timeStamp || lt.now(), void (this[lt.expando] = !0)) : new lt.Event(t, e) }, lt.Event.prototype = { isDefaultPrevented: v, isPropagationStopped: v, isImmediatePropagationStopped: v, preventDefault: function () { var t = this.originalEvent; this.isDefaultPrevented = g, t && (t.preventDefault ? t.preventDefault() : t.returnValue = !1) }, stopPropagation: function () { var t = this.originalEvent; this.isPropagationStopped = g, t && (t.stopPropagation && t.stopPropagation(), t.cancelBubble = !0) }, stopImmediatePropagation: function () { var t = this.originalEvent; this.isImmediatePropagationStopped = g, t && t.stopImmediatePropagation && t.stopImmediatePropagation(), this.stopPropagation() } }, lt.each({ mouseenter: "mouseover", mouseleave: "mouseout", pointerenter: "pointerover", pointerleave: "pointerout" }, function (t, e) { lt.event.special[t] = { delegateType: e, bindType: e, handle: function (t) { var i, n = this, o = t.relatedTarget, s = t.handleObj; return (!o || o !== n && !lt.contains(n, o)) && (t.type = s.origType, i = s.handler.apply(this, arguments), t.type = e), i } } }), at.submitBubbles || (lt.event.special.submit = { setup: function () { return lt.nodeName(this, "form") ? !1 : void lt.event.add(this, "click._submit keypress._submit", function (t) { var e = t.target, i = lt.nodeName(e, "input") || lt.nodeName(e, "button") ? e.form : void 0; i && !lt._data(i, "submitBubbles") && (lt.event.add(i, "submit._submit", function (t) { t._submit_bubble = !0 }), lt._data(i, "submitBubbles", !0)) }) }, postDispatch: function (t) { t._submit_bubble && (delete t._submit_bubble, this.parentNode && !t.isTrigger && lt.event.simulate("submit", this.parentNode, t, !0)) }, teardown: function () { return lt.nodeName(this, "form") ? !1 : void lt.event.remove(this, "._submit") } }), at.changeBubbles || (lt.event.special.change = {
            setup: function () {
                return Ht.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (lt.event.add(this, "propertychange._change", function (t) { "checked" === t.originalEvent.propertyName && (this._just_changed = !0) }), lt.event.add(this, "click._change", function (t) { this._just_changed && !t.isTrigger && (this._just_changed = !1), lt.event.simulate("change", this, t, !0) })), !1) : void lt.event.add(this, "beforeactivate._change", function (t) {
                    var e = t.target; Ht.test(e.nodeName) && !lt._data(e, "changeBubbles") && (lt.event.add(e, "change._change", function (t) {
                        !this.parentNode || t.isSimulated || t.isTrigger || lt.event.simulate("change", this.parentNode, t, !0)
                    }), lt._data(e, "changeBubbles", !0))
                })
            }, handle: function (t) { var e = t.target; return this !== e || t.isSimulated || t.isTrigger || "radio" !== e.type && "checkbox" !== e.type ? t.handleObj.handler.apply(this, arguments) : void 0 }, teardown: function () { return lt.event.remove(this, "._change"), !Ht.test(this.nodeName) }
        }), at.focusinBubbles || lt.each({ focus: "focusin", blur: "focusout" }, function (t, e) { var i = function (t) { lt.event.simulate(e, t.target, lt.event.fix(t), !0) }; lt.event.special[e] = { setup: function () { var n = this.ownerDocument || this, o = lt._data(n, e); o || n.addEventListener(t, i, !0), lt._data(n, e, (o || 0) + 1) }, teardown: function () { var n = this.ownerDocument || this, o = lt._data(n, e) - 1; o ? lt._data(n, e, o) : (n.removeEventListener(t, i, !0), lt._removeData(n, e)) } } }), lt.fn.extend({ on: function (t, e, i, n, o) { var s, a; if ("object" == typeof t) { "string" != typeof e && (i = i || e, e = void 0); for (s in t) this.on(s, e, i, t[s], o); return this } if (null == i && null == n ? (n = e, i = e = void 0) : null == n && ("string" == typeof e ? (n = i, i = void 0) : (n = i, i = e, e = void 0)), n === !1) n = v; else if (!n) return this; return 1 === o && (a = n, n = function (t) { return lt().off(t), a.apply(this, arguments) }, n.guid = a.guid || (a.guid = lt.guid++)), this.each(function () { lt.event.add(this, t, n, i, e) }) }, one: function (t, e, i, n) { return this.on(t, e, i, n, 1) }, off: function (t, e, i) { var n, o; if (t && t.preventDefault && t.handleObj) return n = t.handleObj, lt(t.delegateTarget).off(n.namespace ? n.origType + "." + n.namespace : n.origType, n.selector, n.handler), this; if ("object" == typeof t) { for (o in t) this.off(o, e, t[o]); return this } return (e === !1 || "function" == typeof e) && (i = e, e = void 0), i === !1 && (i = v), this.each(function () { lt.event.remove(this, t, i, e) }) }, trigger: function (t, e) { return this.each(function () { lt.event.trigger(t, e, this) }) }, triggerHandler: function (t, e) { var i = this[0]; return i ? lt.event.trigger(t, e, i, !0) : void 0 } }); var Wt = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video", Bt = / jQuery\d+="(?:null|\d+)"/g, jt = new RegExp("<(?:" + Wt + ")[\\s/>]", "i"), Ut = /^\s+/, qt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, $t = /<([\w:]+)/, Yt = /<tbody/i, Vt = /<|&#?\w+;/, Xt = /<(?:script|style|link)/i, Gt = /checked\s*(?:[^=]|=\s*.checked.)/i, Kt = /^$|\/(?:java|ecma)script/i, Zt = /^true\/(.*)/, Jt = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, Qt = { option: [1, "<select multiple='multiple'>", "</select>"], legend: [1, "<fieldset>", "</fieldset>"], area: [1, "<map>", "</map>"], param: [1, "<object>", "</object>"], thead: [1, "<table>", "</table>"], tr: [2, "<table><tbody>", "</tbody></table>"], col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], _default: at.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"] }, te = b(yt), ee = te.appendChild(yt.createElement("div")); Qt.optgroup = Qt.option, Qt.tbody = Qt.tfoot = Qt.colgroup = Qt.caption = Qt.thead, Qt.th = Qt.td, lt.extend({ clone: function (t, e, i) { var n, o, s, a, r, l = lt.contains(t.ownerDocument, t); if (at.html5Clone || lt.isXMLDoc(t) || !jt.test("<" + t.nodeName + ">") ? s = t.cloneNode(!0) : (ee.innerHTML = t.outerHTML, ee.removeChild(s = ee.firstChild)), !(at.noCloneEvent && at.noCloneChecked || 1 !== t.nodeType && 11 !== t.nodeType || lt.isXMLDoc(t))) for (n = w(s), r = w(t), a = 0; null != (o = r[a]); ++a)n[a] && S(o, n[a]); if (e) if (i) for (r = r || w(t), n = n || w(s), a = 0; null != (o = r[a]); a++)P(o, n[a]); else P(t, s); return n = w(s, "script"), n.length > 0 && T(n, !l && w(t, "script")), n = r = o = null, s }, buildFragment: function (t, e, i, n) { for (var o, s, a, r, l, h, c, u = t.length, d = b(e), p = [], f = 0; u > f; f++)if (s = t[f], s || 0 === s) if ("object" === lt.type(s)) lt.merge(p, s.nodeType ? [s] : s); else if (Vt.test(s)) { for (r = r || d.appendChild(e.createElement("div")), l = ($t.exec(s) || ["", ""])[1].toLowerCase(), c = Qt[l] || Qt._default, r.innerHTML = c[1] + s.replace(qt, "<$1></$2>") + c[2], o = c[0]; o--;)r = r.lastChild; if (!at.leadingWhitespace && Ut.test(s) && p.push(e.createTextNode(Ut.exec(s)[0])), !at.tbody) for (s = "table" !== l || Yt.test(s) ? "<table>" !== c[1] || Yt.test(s) ? 0 : r : r.firstChild, o = s && s.childNodes.length; o--;)lt.nodeName(h = s.childNodes[o], "tbody") && !h.childNodes.length && s.removeChild(h); for (lt.merge(p, r.childNodes), r.textContent = ""; r.firstChild;)r.removeChild(r.firstChild); r = d.lastChild } else p.push(e.createTextNode(s)); for (r && d.removeChild(r), at.appendChecked || lt.grep(w(p, "input"), x), f = 0; s = p[f++];)if ((!n || -1 === lt.inArray(s, n)) && (a = lt.contains(s.ownerDocument, s), r = w(d.appendChild(s), "script"), a && T(r), i)) for (o = 0; s = r[o++];)Kt.test(s.type || "") && i.push(s); return r = null, d }, cleanData: function (t, e) { for (var i, n, o, s, a = 0, r = lt.expando, l = lt.cache, h = at.deleteExpando, c = lt.event.special; null != (i = t[a]); a++)if ((e || lt.acceptData(i)) && (o = i[r], s = o && l[o])) { if (s.events) for (n in s.events) c[n] ? lt.event.remove(i, n) : lt.removeEvent(i, n, s.handle); l[o] && (delete l[o], h ? delete i[r] : typeof i.removeAttribute !== St ? i.removeAttribute(r) : i[r] = null, J.push(o)) } } }), lt.fn.extend({ text: function (t) { return Nt(this, function (t) { return void 0 === t ? lt.text(this) : this.empty().append((this[0] && this[0].ownerDocument || yt).createTextNode(t)) }, null, t, arguments.length) }, append: function () { return this.domManip(arguments, function (t) { if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) { var e = _(this, t); e.appendChild(t) } }) }, prepend: function () { return this.domManip(arguments, function (t) { if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) { var e = _(this, t); e.insertBefore(t, e.firstChild) } }) }, before: function () { return this.domManip(arguments, function (t) { this.parentNode && this.parentNode.insertBefore(t, this) }) }, after: function () { return this.domManip(arguments, function (t) { this.parentNode && this.parentNode.insertBefore(t, this.nextSibling) }) }, remove: function (t, e) { for (var i, n = t ? lt.filter(t, this) : this, o = 0; null != (i = n[o]); o++)e || 1 !== i.nodeType || lt.cleanData(w(i)), i.parentNode && (e && lt.contains(i.ownerDocument, i) && T(w(i, "script")), i.parentNode.removeChild(i)); return this }, empty: function () { for (var t, e = 0; null != (t = this[e]); e++) { for (1 === t.nodeType && lt.cleanData(w(t, !1)); t.firstChild;)t.removeChild(t.firstChild); t.options && lt.nodeName(t, "select") && (t.options.length = 0) } return this }, clone: function (t, e) { return t = null == t ? !1 : t, e = null == e ? t : e, this.map(function () { return lt.clone(this, t, e) }) }, html: function (t) { return Nt(this, function (t) { var e = this[0] || {}, i = 0, n = this.length; if (void 0 === t) return 1 === e.nodeType ? e.innerHTML.replace(Bt, "") : void 0; if ("string" == typeof t && !Xt.test(t) && (at.htmlSerialize || !jt.test(t)) && (at.leadingWhitespace || !Ut.test(t)) && !Qt[($t.exec(t) || ["", ""])[1].toLowerCase()]) { t = t.replace(qt, "<$1></$2>"); try { for (; n > i; i++)e = this[i] || {}, 1 === e.nodeType && (lt.cleanData(w(e, !1)), e.innerHTML = t); e = 0 } catch (o) { } } e && this.empty().append(t) }, null, t, arguments.length) }, replaceWith: function () { var t = arguments[0]; return this.domManip(arguments, function (e) { t = this.parentNode, lt.cleanData(w(this)), t && t.replaceChild(e, this) }), t && (t.length || t.nodeType) ? this : this.remove() }, detach: function (t) { return this.remove(t, !0) }, domManip: function (t, e) { t = tt.apply([], t); var i, n, o, s, a, r, l = 0, h = this.length, c = this, u = h - 1, d = t[0], p = lt.isFunction(d); if (p || h > 1 && "string" == typeof d && !at.checkClone && Gt.test(d)) return this.each(function (i) { var n = c.eq(i); p && (t[0] = d.call(this, i, n.html())), n.domManip(t, e) }); if (h && (r = lt.buildFragment(t, this[0].ownerDocument, !1, this), i = r.firstChild, 1 === r.childNodes.length && (r = i), i)) { for (s = lt.map(w(r, "script"), C), o = s.length; h > l; l++)n = r, l !== u && (n = lt.clone(n, !0, !0), o && lt.merge(s, w(n, "script"))), e.call(this[l], n, l); if (o) for (a = s[s.length - 1].ownerDocument, lt.map(s, k), l = 0; o > l; l++)n = s[l], Kt.test(n.type || "") && !lt._data(n, "globalEval") && lt.contains(a, n) && (n.src ? lt._evalUrl && lt._evalUrl(n.src) : lt.globalEval((n.text || n.textContent || n.innerHTML || "").replace(Jt, ""))); r = i = null } return this } }), lt.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (t, e) { lt.fn[t] = function (t) { for (var i, n = 0, o = [], s = lt(t), a = s.length - 1; a >= n; n++)i = n === a ? this : this.clone(!0), lt(s[n])[e](i), et.apply(o, i.get()); return this.pushStack(o) } }); var ie, ne = {}; !function () { var t; at.shrinkWrapBlocks = function () { if (null != t) return t; t = !1; var e, i, n; return i = yt.getElementsByTagName("body")[0], i && i.style ? (e = yt.createElement("div"), n = yt.createElement("div"), n.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", i.appendChild(n).appendChild(e), typeof e.style.zoom !== St && (e.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1", e.appendChild(yt.createElement("div")).style.width = "5px", t = 3 !== e.offsetWidth), i.removeChild(n), t) : void 0 } }(); var oe, se, ae = /^margin/, re = new RegExp("^(" + Et + ")(?!px)[a-z%]+$", "i"), le = /^(top|right|bottom|left)$/; i.getComputedStyle ? (oe = function (t) { return t.ownerDocument.defaultView.getComputedStyle(t, null) }, se = function (t, e, i) { var n, o, s, a, r = t.style; return i = i || oe(t), a = i ? i.getPropertyValue(e) || i[e] : void 0, i && ("" !== a || lt.contains(t.ownerDocument, t) || (a = lt.style(t, e)), re.test(a) && ae.test(e) && (n = r.width, o = r.minWidth, s = r.maxWidth, r.minWidth = r.maxWidth = r.width = a, a = i.width, r.width = n, r.minWidth = o, r.maxWidth = s)), void 0 === a ? a : a + "" }) : yt.documentElement.currentStyle && (oe = function (t) { return t.currentStyle }, se = function (t, e, i) { var n, o, s, a, r = t.style; return i = i || oe(t), a = i ? i[e] : void 0, null == a && r && r[e] && (a = r[e]), re.test(a) && !le.test(e) && (n = r.left, o = t.runtimeStyle, s = o && o.left, s && (o.left = t.currentStyle.left), r.left = "fontSize" === e ? "1em" : a, a = r.pixelLeft + "px", r.left = n, s && (o.left = s)), void 0 === a ? a : a + "" || "auto" }), function () { function t() { var t, e, n, o; e = yt.getElementsByTagName("body")[0], e && e.style && (t = yt.createElement("div"), n = yt.createElement("div"), n.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", e.appendChild(n).appendChild(t), t.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", s = a = !1, l = !0, i.getComputedStyle && (s = "1%" !== (i.getComputedStyle(t, null) || {}).top, a = "4px" === (i.getComputedStyle(t, null) || { width: "4px" }).width, o = t.appendChild(yt.createElement("div")), o.style.cssText = t.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", o.style.marginRight = o.style.width = "0", t.style.width = "1px", l = !parseFloat((i.getComputedStyle(o, null) || {}).marginRight)), t.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", o = t.getElementsByTagName("td"), o[0].style.cssText = "margin:0;border:0;padding:0;display:none", r = 0 === o[0].offsetHeight, r && (o[0].style.display = "", o[1].style.display = "none", r = 0 === o[0].offsetHeight), e.removeChild(n)) } var e, n, o, s, a, r, l; e = yt.createElement("div"), e.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", o = e.getElementsByTagName("a")[0], n = o && o.style, n && (n.cssText = "float:left;opacity:.5", at.opacity = "0.5" === n.opacity, at.cssFloat = !!n.cssFloat, e.style.backgroundClip = "content-box", e.cloneNode(!0).style.backgroundClip = "", at.clearCloneStyle = "content-box" === e.style.backgroundClip, at.boxSizing = "" === n.boxSizing || "" === n.MozBoxSizing || "" === n.WebkitBoxSizing, lt.extend(at, { reliableHiddenOffsets: function () { return null == r && t(), r }, boxSizingReliable: function () { return null == a && t(), a }, pixelPosition: function () { return null == s && t(), s }, reliableMarginRight: function () { return null == l && t(), l } })) }(), lt.swap = function (t, e, i, n) { var o, s, a = {}; for (s in e) a[s] = t.style[s], t.style[s] = e[s]; o = i.apply(t, n || []); for (s in e) t.style[s] = a[s]; return o }; var he = /alpha\([^)]*\)/i, ce = /opacity\s*=\s*([^)]*)/, ue = /^(none|table(?!-c[ea]).+)/, de = new RegExp("^(" + Et + ")(.*)$", "i"), pe = new RegExp("^([+-])=(" + Et + ")", "i"), fe = { position: "absolute", visibility: "hidden", display: "block" }, me = { letterSpacing: "0", fontWeight: "400" }, ge = ["Webkit", "O", "Moz", "ms"]; lt.extend({ cssHooks: { opacity: { get: function (t, e) { if (e) { var i = se(t, "opacity"); return "" === i ? "1" : i } } } }, cssNumber: { columnCount: !0, fillOpacity: !0, flexGrow: !0, flexShrink: !0, fontWeight: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 }, cssProps: { "float": at.cssFloat ? "cssFloat" : "styleFloat" }, style: function (t, e, i, n) { if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) { var o, s, a, r = lt.camelCase(e), l = t.style; if (e = lt.cssProps[r] || (lt.cssProps[r] = A(l, r)), a = lt.cssHooks[e] || lt.cssHooks[r], void 0 === i) return a && "get" in a && void 0 !== (o = a.get(t, !1, n)) ? o : l[e]; if (s = typeof i, "string" === s && (o = pe.exec(i)) && (i = (o[1] + 1) * o[2] + parseFloat(lt.css(t, e)), s = "number"), null != i && i === i && ("number" !== s || lt.cssNumber[r] || (i += "px"), at.clearCloneStyle || "" !== i || 0 !== e.indexOf("background") || (l[e] = "inherit"), !(a && "set" in a && void 0 === (i = a.set(t, i, n))))) try { l[e] = i } catch (h) { } } }, css: function (t, e, i, n) { var o, s, a, r = lt.camelCase(e); return e = lt.cssProps[r] || (lt.cssProps[r] = A(t.style, r)), a = lt.cssHooks[e] || lt.cssHooks[r], a && "get" in a && (s = a.get(t, !0, i)), void 0 === s && (s = se(t, e, n)), "normal" === s && e in me && (s = me[e]), "" === i || i ? (o = parseFloat(s), i === !0 || lt.isNumeric(o) ? o || 0 : s) : s } }), lt.each(["height", "width"], function (t, e) { lt.cssHooks[e] = { get: function (t, i, n) { return i ? ue.test(lt.css(t, "display")) && 0 === t.offsetWidth ? lt.swap(t, fe, function () { return H(t, e, n) }) : H(t, e, n) : void 0 }, set: function (t, i, n) { var o = n && oe(t); return N(t, i, n ? O(t, e, n, at.boxSizing && "border-box" === lt.css(t, "boxSizing", !1, o), o) : 0) } } }), at.opacity || (lt.cssHooks.opacity = { get: function (t, e) { return ce.test((e && t.currentStyle ? t.currentStyle.filter : t.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : e ? "1" : "" }, set: function (t, e) { var i = t.style, n = t.currentStyle, o = lt.isNumeric(e) ? "alpha(opacity=" + 100 * e + ")" : "", s = n && n.filter || i.filter || ""; i.zoom = 1, (e >= 1 || "" === e) && "" === lt.trim(s.replace(he, "")) && i.removeAttribute && (i.removeAttribute("filter"), "" === e || n && !n.filter) || (i.filter = he.test(s) ? s.replace(he, o) : s + " " + o) } }), lt.cssHooks.marginRight = E(at.reliableMarginRight, function (t, e) { return e ? lt.swap(t, { display: "inline-block" }, se, [t, "marginRight"]) : void 0 }), lt.each({ margin: "", padding: "", border: "Width" }, function (t, e) { lt.cssHooks[t + e] = { expand: function (i) { for (var n = 0, o = {}, s = "string" == typeof i ? i.split(" ") : [i]; 4 > n; n++)o[t + At[n] + e] = s[n] || s[n - 2] || s[0]; return o } }, ae.test(t) || (lt.cssHooks[t + e].set = N) }), lt.fn.extend({ css: function (t, e) { return Nt(this, function (t, e, i) { var n, o, s = {}, a = 0; if (lt.isArray(e)) { for (n = oe(t), o = e.length; o > a; a++)s[e[a]] = lt.css(t, e[a], !1, n); return s } return void 0 !== i ? lt.style(t, e, i) : lt.css(t, e) }, t, e, arguments.length > 1) }, show: function () { return I(this, !0) }, hide: function () { return I(this) }, toggle: function (t) { return "boolean" == typeof t ? t ? this.show() : this.hide() : this.each(function () { It(this) ? lt(this).show() : lt(this).hide() }) } }), lt.Tween = z, z.prototype = { constructor: z, init: function (t, e, i, n, o, s) { this.elem = t, this.prop = i, this.easing = o || "swing", this.options = e, this.start = this.now = this.cur(), this.end = n, this.unit = s || (lt.cssNumber[i] ? "" : "px") }, cur: function () { var t = z.propHooks[this.prop]; return t && t.get ? t.get(this) : z.propHooks._default.get(this) }, run: function (t) { var e, i = z.propHooks[this.prop]; return this.options.duration ? this.pos = e = lt.easing[this.easing](t, this.options.duration * t, 0, 1, this.options.duration) : this.pos = e = t, this.now = (this.end - this.start) * e + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), i && i.set ? i.set(this) : z.propHooks._default.set(this), this } }, z.prototype.init.prototype = z.prototype, z.propHooks = { _default: { get: function (t) { var e; return null == t.elem[t.prop] || t.elem.style && null != t.elem.style[t.prop] ? (e = lt.css(t.elem, t.prop, ""), e && "auto" !== e ? e : 0) : t.elem[t.prop] }, set: function (t) { lt.fx.step[t.prop] ? lt.fx.step[t.prop](t) : t.elem.style && (null != t.elem.style[lt.cssProps[t.prop]] || lt.cssHooks[t.prop]) ? lt.style(t.elem, t.prop, t.now + t.unit) : t.elem[t.prop] = t.now } } }, z.propHooks.scrollTop = z.propHooks.scrollLeft = { set: function (t) { t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now) } }, lt.easing = { linear: function (t) { return t }, swing: function (t) { return .5 - Math.cos(t * Math.PI) / 2 } }, lt.fx = z.prototype.init, lt.fx.step = {}; var ve, ye, be = /^(?:toggle|show|hide)$/, we = new RegExp("^(?:([+-])=|)(" + Et + ")([a-z%]*)$", "i"), xe = /queueHooks$/, _e = [W], Ce = { "*": [function (t, e) { var i = this.createTween(t, e), n = i.cur(), o = we.exec(e), s = o && o[3] || (lt.cssNumber[t] ? "" : "px"), a = (lt.cssNumber[t] || "px" !== s && +n) && we.exec(lt.css(i.elem, t)), r = 1, l = 20; if (a && a[3] !== s) { s = s || a[3], o = o || [], a = +n || 1; do r = r || ".5", a /= r, lt.style(i.elem, t, a + s); while (r !== (r = i.cur() / n) && 1 !== r && --l) } return o && (a = i.start = +a || +n || 0, i.unit = s, i.end = o[1] ? a + (o[1] + 1) * o[2] : +o[2]), i }] }; lt.Animation = lt.extend(j, { tweener: function (t, e) { lt.isFunction(t) ? (e = t, t = ["*"]) : t = t.split(" "); for (var i, n = 0, o = t.length; o > n; n++)i = t[n], Ce[i] = Ce[i] || [], Ce[i].unshift(e) }, prefilter: function (t, e) { e ? _e.unshift(t) : _e.push(t) } }), lt.speed = function (t, e, i) { var n = t && "object" == typeof t ? lt.extend({}, t) : { complete: i || !i && e || lt.isFunction(t) && t, duration: t, easing: i && e || e && !lt.isFunction(e) && e }; return n.duration = lt.fx.off ? 0 : "number" == typeof n.duration ? n.duration : n.duration in lt.fx.speeds ? lt.fx.speeds[n.duration] : lt.fx.speeds._default, (null == n.queue || n.queue === !0) && (n.queue = "fx"), n.old = n.complete, n.complete = function () { lt.isFunction(n.old) && n.old.call(this), n.queue && lt.dequeue(this, n.queue) }, n }, lt.fn.extend({ fadeTo: function (t, e, i, n) { return this.filter(It).css("opacity", 0).show().end().animate({ opacity: e }, t, i, n) }, animate: function (t, e, i, n) { var o = lt.isEmptyObject(t), s = lt.speed(e, i, n), a = function () { var e = j(this, lt.extend({}, t), s); (o || lt._data(this, "finish")) && e.stop(!0) }; return a.finish = a, o || s.queue === !1 ? this.each(a) : this.queue(s.queue, a) }, stop: function (t, e, i) { var n = function (t) { var e = t.stop; delete t.stop, e(i) }; return "string" != typeof t && (i = e, e = t, t = void 0), e && t !== !1 && this.queue(t || "fx", []), this.each(function () { var e = !0, o = null != t && t + "queueHooks", s = lt.timers, a = lt._data(this); if (o) a[o] && a[o].stop && n(a[o]); else for (o in a) a[o] && a[o].stop && xe.test(o) && n(a[o]); for (o = s.length; o--;)s[o].elem !== this || null != t && s[o].queue !== t || (s[o].anim.stop(i), e = !1, s.splice(o, 1)); (e || !i) && lt.dequeue(this, t) }) }, finish: function (t) { return t !== !1 && (t = t || "fx"), this.each(function () { var e, i = lt._data(this), n = i[t + "queue"], o = i[t + "queueHooks"], s = lt.timers, a = n ? n.length : 0; for (i.finish = !0, lt.queue(this, t, []), o && o.stop && o.stop.call(this, !0), e = s.length; e--;)s[e].elem === this && s[e].queue === t && (s[e].anim.stop(!0), s.splice(e, 1)); for (e = 0; a > e; e++)n[e] && n[e].finish && n[e].finish.call(this); delete i.finish }) } }), lt.each(["toggle", "show", "hide"], function (t, e) { var i = lt.fn[e]; lt.fn[e] = function (t, n, o) { return null == t || "boolean" == typeof t ? i.apply(this, arguments) : this.animate(L(e, !0), t, n, o) } }), lt.each({ slideDown: L("show"), slideUp: L("hide"), slideToggle: L("toggle"), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle" } }, function (t, e) { lt.fn[t] = function (t, i, n) { return this.animate(e, t, i, n) } }), lt.timers = [], lt.fx.tick = function () { var t, e = lt.timers, i = 0; for (ve = lt.now(); i < e.length; i++)t = e[i], t() || e[i] !== t || e.splice(i--, 1); e.length || lt.fx.stop(), ve = void 0 }, lt.fx.timer = function (t) { lt.timers.push(t), t() ? lt.fx.start() : lt.timers.pop() }, lt.fx.interval = 13, lt.fx.start = function () { ye || (ye = setInterval(lt.fx.tick, lt.fx.interval)) }, lt.fx.stop = function () { clearInterval(ye), ye = null }, lt.fx.speeds = { slow: 600, fast: 200, _default: 400 }, lt.fn.delay = function (t, e) { return t = lt.fx ? lt.fx.speeds[t] || t : t, e = e || "fx", this.queue(e, function (e, i) { var n = setTimeout(e, t); i.stop = function () { clearTimeout(n) } }) }, function () { var t, e, i, n, o; e = yt.createElement("div"), e.setAttribute("className", "t"), e.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", n = e.getElementsByTagName("a")[0], i = yt.createElement("select"), o = i.appendChild(yt.createElement("option")), t = e.getElementsByTagName("input")[0], n.style.cssText = "top:1px", at.getSetAttribute = "t" !== e.className, at.style = /top/.test(n.getAttribute("style")), at.hrefNormalized = "/a" === n.getAttribute("href"), at.checkOn = !!t.value, at.optSelected = o.selected, at.enctype = !!yt.createElement("form").enctype, i.disabled = !0, at.optDisabled = !o.disabled, t = yt.createElement("input"), t.setAttribute("value", ""), at.input = "" === t.getAttribute("value"), t.value = "t", t.setAttribute("type", "radio"), at.radioValue = "t" === t.value }(); var ke = /\r/g; lt.fn.extend({ val: function (t) { var e, i, n, o = this[0]; { if (arguments.length) return n = lt.isFunction(t), this.each(function (i) { var o; 1 === this.nodeType && (o = n ? t.call(this, i, lt(this).val()) : t, null == o ? o = "" : "number" == typeof o ? o += "" : lt.isArray(o) && (o = lt.map(o, function (t) { return null == t ? "" : t + "" })), e = lt.valHooks[this.type] || lt.valHooks[this.nodeName.toLowerCase()], e && "set" in e && void 0 !== e.set(this, o, "value") || (this.value = o)) }); if (o) return e = lt.valHooks[o.type] || lt.valHooks[o.nodeName.toLowerCase()], e && "get" in e && void 0 !== (i = e.get(o, "value")) ? i : (i = o.value, "string" == typeof i ? i.replace(ke, "") : null == i ? "" : i) } } }), lt.extend({ valHooks: { option: { get: function (t) { var e = lt.find.attr(t, "value"); return null != e ? e : lt.trim(lt.text(t)) } }, select: { get: function (t) { for (var e, i, n = t.options, o = t.selectedIndex, s = "select-one" === t.type || 0 > o, a = s ? null : [], r = s ? o + 1 : n.length, l = 0 > o ? r : s ? o : 0; r > l; l++)if (i = n[l], (i.selected || l === o) && (at.optDisabled ? !i.disabled : null === i.getAttribute("disabled")) && (!i.parentNode.disabled || !lt.nodeName(i.parentNode, "optgroup"))) { if (e = lt(i).val(), s) return e; a.push(e) } return a }, set: function (t, e) { for (var i, n, o = t.options, s = lt.makeArray(e), a = o.length; a--;)if (n = o[a], lt.inArray(lt.valHooks.option.get(n), s) >= 0) try { n.selected = i = !0 } catch (r) { n.scrollHeight } else n.selected = !1; return i || (t.selectedIndex = -1), o } } } }), lt.each(["radio", "checkbox"], function () { lt.valHooks[this] = { set: function (t, e) { return lt.isArray(e) ? t.checked = lt.inArray(lt(t).val(), e) >= 0 : void 0 } }, at.checkOn || (lt.valHooks[this].get = function (t) { return null === t.getAttribute("value") ? "on" : t.value }) }); var Te, Pe, Se = lt.expr.attrHandle, Me = /^(?:checked|selected)$/i, De = at.getSetAttribute, Ee = at.input; lt.fn.extend({ attr: function (t, e) { return Nt(this, lt.attr, t, e, arguments.length > 1) }, removeAttr: function (t) { return this.each(function () { lt.removeAttr(this, t) }) } }), lt.extend({ attr: function (t, e, i) { var n, o, s = t.nodeType; if (t && 3 !== s && 8 !== s && 2 !== s) return typeof t.getAttribute === St ? lt.prop(t, e, i) : (1 === s && lt.isXMLDoc(t) || (e = e.toLowerCase(), n = lt.attrHooks[e] || (lt.expr.match.bool.test(e) ? Pe : Te)), void 0 === i ? n && "get" in n && null !== (o = n.get(t, e)) ? o : (o = lt.find.attr(t, e), null == o ? void 0 : o) : null !== i ? n && "set" in n && void 0 !== (o = n.set(t, i, e)) ? o : (t.setAttribute(e, i + ""), i) : void lt.removeAttr(t, e)) }, removeAttr: function (t, e) { var i, n, o = 0, s = e && e.match(Ct); if (s && 1 === t.nodeType) for (; i = s[o++];)n = lt.propFix[i] || i, lt.expr.match.bool.test(i) ? Ee && De || !Me.test(i) ? t[n] = !1 : t[lt.camelCase("default-" + i)] = t[n] = !1 : lt.attr(t, i, ""), t.removeAttribute(De ? i : n) }, attrHooks: { type: { set: function (t, e) { if (!at.radioValue && "radio" === e && lt.nodeName(t, "input")) { var i = t.value; return t.setAttribute("type", e), i && (t.value = i), e } } } } }), Pe = { set: function (t, e, i) { return e === !1 ? lt.removeAttr(t, i) : Ee && De || !Me.test(i) ? t.setAttribute(!De && lt.propFix[i] || i, i) : t[lt.camelCase("default-" + i)] = t[i] = !0, i } }, lt.each(lt.expr.match.bool.source.match(/\w+/g), function (t, e) { var i = Se[e] || lt.find.attr; Se[e] = Ee && De || !Me.test(e) ? function (t, e, n) { var o, s; return n || (s = Se[e], Se[e] = o, o = null != i(t, e, n) ? e.toLowerCase() : null, Se[e] = s), o } : function (t, e, i) { return i ? void 0 : t[lt.camelCase("default-" + e)] ? e.toLowerCase() : null } }), Ee && De || (lt.attrHooks.value = { set: function (t, e, i) { return lt.nodeName(t, "input") ? void (t.defaultValue = e) : Te && Te.set(t, e, i) } }), De || (Te = { set: function (t, e, i) { var n = t.getAttributeNode(i); return n || t.setAttributeNode(n = t.ownerDocument.createAttribute(i)), n.value = e += "", "value" === i || e === t.getAttribute(i) ? e : void 0 } }, Se.id = Se.name = Se.coords = function (t, e, i) { var n; return i ? void 0 : (n = t.getAttributeNode(e)) && "" !== n.value ? n.value : null }, lt.valHooks.button = { get: function (t, e) { var i = t.getAttributeNode(e); return i && i.specified ? i.value : void 0 }, set: Te.set }, lt.attrHooks.contenteditable = { set: function (t, e, i) { Te.set(t, "" === e ? !1 : e, i) } }, lt.each(["width", "height"], function (t, e) { lt.attrHooks[e] = { set: function (t, i) { return "" === i ? (t.setAttribute(e, "auto"), i) : void 0 } } })), at.style || (lt.attrHooks.style = { get: function (t) { return t.style.cssText || void 0 }, set: function (t, e) { return t.style.cssText = e + "" } }); var Ae = /^(?:input|select|textarea|button|object)$/i, Ie = /^(?:a|area)$/i; lt.fn.extend({ prop: function (t, e) { return Nt(this, lt.prop, t, e, arguments.length > 1) }, removeProp: function (t) { return t = lt.propFix[t] || t, this.each(function () { try { this[t] = void 0, delete this[t] } catch (e) { } }) } }), lt.extend({ propFix: { "for": "htmlFor", "class": "className" }, prop: function (t, e, i) { var n, o, s, a = t.nodeType; if (t && 3 !== a && 8 !== a && 2 !== a) return s = 1 !== a || !lt.isXMLDoc(t), s && (e = lt.propFix[e] || e, o = lt.propHooks[e]), void 0 !== i ? o && "set" in o && void 0 !== (n = o.set(t, i, e)) ? n : t[e] = i : o && "get" in o && null !== (n = o.get(t, e)) ? n : t[e] }, propHooks: { tabIndex: { get: function (t) { var e = lt.find.attr(t, "tabindex"); return e ? parseInt(e, 10) : Ae.test(t.nodeName) || Ie.test(t.nodeName) && t.href ? 0 : -1 } } } }), at.hrefNormalized || lt.each(["href", "src"], function (t, e) { lt.propHooks[e] = { get: function (t) { return t.getAttribute(e, 4) } } }), at.optSelected || (lt.propHooks.selected = { get: function (t) { var e = t.parentNode; return e && (e.selectedIndex, e.parentNode && e.parentNode.selectedIndex), null } }), lt.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () { lt.propFix[this.toLowerCase()] = this }), at.enctype || (lt.propFix.enctype = "encoding"); var Ne = /[\t\r\n\f]/g; lt.fn.extend({ addClass: function (t) { var e, i, n, o, s, a, r = 0, l = this.length, h = "string" == typeof t && t; if (lt.isFunction(t)) return this.each(function (e) { lt(this).addClass(t.call(this, e, this.className)) }); if (h) for (e = (t || "").match(Ct) || []; l > r; r++)if (i = this[r], n = 1 === i.nodeType && (i.className ? (" " + i.className + " ").replace(Ne, " ") : " ")) { for (s = 0; o = e[s++];)n.indexOf(" " + o + " ") < 0 && (n += o + " "); a = lt.trim(n), i.className !== a && (i.className = a) } return this }, removeClass: function (t) { var e, i, n, o, s, a, r = 0, l = this.length, h = 0 === arguments.length || "string" == typeof t && t; if (lt.isFunction(t)) return this.each(function (e) { lt(this).removeClass(t.call(this, e, this.className)) }); if (h) for (e = (t || "").match(Ct) || []; l > r; r++)if (i = this[r], n = 1 === i.nodeType && (i.className ? (" " + i.className + " ").replace(Ne, " ") : "")) { for (s = 0; o = e[s++];)for (; n.indexOf(" " + o + " ") >= 0;)n = n.replace(" " + o + " ", " "); a = t ? lt.trim(n) : "", i.className !== a && (i.className = a) } return this }, toggleClass: function (t, e) { var i = typeof t; return "boolean" == typeof e && "string" === i ? e ? this.addClass(t) : this.removeClass(t) : lt.isFunction(t) ? this.each(function (i) { lt(this).toggleClass(t.call(this, i, this.className, e), e) }) : this.each(function () { if ("string" === i) for (var e, n = 0, o = lt(this), s = t.match(Ct) || []; e = s[n++];)o.hasClass(e) ? o.removeClass(e) : o.addClass(e); else (i === St || "boolean" === i) && (this.className && lt._data(this, "__className__", this.className), this.className = this.className || t === !1 ? "" : lt._data(this, "__className__") || "") }) }, hasClass: function (t) { for (var e = " " + t + " ", i = 0, n = this.length; n > i; i++)if (1 === this[i].nodeType && (" " + this[i].className + " ").replace(Ne, " ").indexOf(e) >= 0) return !0; return !1 } }), lt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (t, e) { lt.fn[e] = function (t, i) { return arguments.length > 0 ? this.on(e, null, t, i) : this.trigger(e) } }), lt.fn.extend({ hover: function (t, e) { return this.mouseenter(t).mouseleave(e || t) }, bind: function (t, e, i) { return this.on(t, null, e, i) }, unbind: function (t, e) { return this.off(t, null, e) }, delegate: function (t, e, i, n) { return this.on(e, t, i, n) }, undelegate: function (t, e, i) { return 1 === arguments.length ? this.off(t, "**") : this.off(e, t || "**", i) } }); var Oe = lt.now(), He = /\?/, ze = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g; lt.parseJSON = function (t) { if (i.JSON && i.JSON.parse) return i.JSON.parse(t + ""); var e, n = null, o = lt.trim(t + ""); return o && !lt.trim(o.replace(ze, function (t, i, o, s) { return e && i && (n = 0), 0 === n ? t : (e = o || i, n += !s - !o, "") })) ? Function("return " + o)() : lt.error("Invalid JSON: " + t) }, lt.parseXML = function (t) { var e, n; if (!t || "string" != typeof t) return null; try { i.DOMParser ? (n = new DOMParser, e = n.parseFromString(t, "text/xml")) : (e = new ActiveXObject("Microsoft.XMLDOM"), e.async = "false", e.loadXML(t)) } catch (o) { e = void 0 } return e && e.documentElement && !e.getElementsByTagName("parsererror").length || lt.error("Invalid XML: " + t), e }; var Fe, Le, Re = /#.*$/, We = /([?&])_=[^&]*/, Be = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, je = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, Ue = /^(?:GET|HEAD)$/, qe = /^\/\//, $e = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, Ye = {}, Ve = {}, Xe = "*/".concat("*"); try { Le = location.href } catch (Ge) { Le = yt.createElement("a"), Le.href = "", Le = Le.href } Fe = $e.exec(Le.toLowerCase()) || [], lt.extend({
            active: 0, lastModified: {}, etag: {}, ajaxSettings: { url: Le, type: "GET", isLocal: je.test(Fe[1]), global: !0, processData: !0, async: !0, contentType: "application/x-www-form-urlencoded; charset=UTF-8", accepts: { "*": Xe, text: "text/plain", html: "text/html", xml: "application/xml, text/xml", json: "application/json, text/javascript" }, contents: { xml: /xml/, html: /html/, json: /json/ }, responseFields: { xml: "responseXML", text: "responseText", json: "responseJSON" }, converters: { "* text": String, "text html": !0, "text json": lt.parseJSON, "text xml": lt.parseXML }, flatOptions: { url: !0, context: !0 } }, ajaxSetup: function (t, e) { return e ? $($(t, lt.ajaxSettings), e) : $(lt.ajaxSettings, t) }, ajaxPrefilter: U(Ye), ajaxTransport: U(Ve), ajax: function (t, e) {
                function i(t, e, i, n) { var o, c, v, y, w, _ = e; 2 !== b && (b = 2, r && clearTimeout(r), h = void 0, a = n || "", x.readyState = t > 0 ? 4 : 0, o = t >= 200 && 300 > t || 304 === t, i && (y = Y(u, x, i)), y = V(u, y, x, o), o ? (u.ifModified && (w = x.getResponseHeader("Last-Modified"), w && (lt.lastModified[s] = w), w = x.getResponseHeader("etag"), w && (lt.etag[s] = w)), 204 === t || "HEAD" === u.type ? _ = "nocontent" : 304 === t ? _ = "notmodified" : (_ = y.state, c = y.data, v = y.error, o = !v)) : (v = _, (t || !_) && (_ = "error", 0 > t && (t = 0))), x.status = t, x.statusText = (e || _) + "", o ? f.resolveWith(d, [c, _, x]) : f.rejectWith(d, [x, _, v]), x.statusCode(g), g = void 0, l && p.trigger(o ? "ajaxSuccess" : "ajaxError", [x, u, o ? c : v]), m.fireWith(d, [x, _]), l && (p.trigger("ajaxComplete", [x, u]), --lt.active || lt.event.trigger("ajaxStop"))) } "object" == typeof t && (e = t, t = void 0), e = e || {}; var n, o, s, a, r, l, h, c, u = lt.ajaxSetup({}, e), d = u.context || u, p = u.context && (d.nodeType || d.jquery) ? lt(d) : lt.event, f = lt.Deferred(), m = lt.Callbacks("once memory"), g = u.statusCode || {}, v = {}, y = {}, b = 0, w = "canceled", x = { readyState: 0, getResponseHeader: function (t) { var e; if (2 === b) { if (!c) for (c = {}; e = Be.exec(a);)c[e[1].toLowerCase()] = e[2]; e = c[t.toLowerCase()] } return null == e ? null : e }, getAllResponseHeaders: function () { return 2 === b ? a : null }, setRequestHeader: function (t, e) { var i = t.toLowerCase(); return b || (t = y[i] = y[i] || t, v[t] = e), this }, overrideMimeType: function (t) { return b || (u.mimeType = t), this }, statusCode: function (t) { var e; if (t) if (2 > b) for (e in t) g[e] = [g[e], t[e]]; else x.always(t[x.status]); return this }, abort: function (t) { var e = t || w; return h && h.abort(e), i(0, e), this } }; if (f.promise(x).complete = m.add, x.success = x.done, x.error = x.fail, u.url = ((t || u.url || Le) + "").replace(Re, "").replace(qe, Fe[1] + "//"), u.type = e.method || e.type || u.method || u.type, u.dataTypes = lt.trim(u.dataType || "*").toLowerCase().match(Ct) || [""], null == u.crossDomain && (n = $e.exec(u.url.toLowerCase()), u.crossDomain = !(!n || n[1] === Fe[1] && n[2] === Fe[2] && (n[3] || ("http:" === n[1] ? "80" : "443")) === (Fe[3] || ("http:" === Fe[1] ? "80" : "443")))), u.data && u.processData && "string" != typeof u.data && (u.data = lt.param(u.data, u.traditional)), q(Ye, u, e, x), 2 === b) return x; l = u.global, l && 0 === lt.active++ && lt.event.trigger("ajaxStart"), u.type = u.type.toUpperCase(), u.hasContent = !Ue.test(u.type), s = u.url, u.hasContent || (u.data && (s = u.url += (He.test(s) ? "&" : "?") + u.data, delete u.data), u.cache === !1 && (u.url = We.test(s) ? s.replace(We, "$1_=" + Oe++) : s + (He.test(s) ? "&" : "?") + "_=" + Oe++)), u.ifModified && (lt.lastModified[s] && x.setRequestHeader("If-Modified-Since", lt.lastModified[s]), lt.etag[s] && x.setRequestHeader("If-None-Match", lt.etag[s])), (u.data && u.hasContent && u.contentType !== !1 || e.contentType) && x.setRequestHeader("Content-Type", u.contentType), x.setRequestHeader("Accept", u.dataTypes[0] && u.accepts[u.dataTypes[0]] ? u.accepts[u.dataTypes[0]] + ("*" !== u.dataTypes[0] ? ", " + Xe + "; q=0.01" : "") : u.accepts["*"]); for (o in u.headers) x.setRequestHeader(o, u.headers[o]); if (u.beforeSend && (u.beforeSend.call(d, x, u) === !1 || 2 === b)) return x.abort();
                w = "abort"; for (o in { success: 1, error: 1, complete: 1 }) x[o](u[o]); if (h = q(Ve, u, e, x)) { x.readyState = 1, l && p.trigger("ajaxSend", [x, u]), u.async && u.timeout > 0 && (r = setTimeout(function () { x.abort("timeout") }, u.timeout)); try { b = 1, h.send(v, i) } catch (_) { if (!(2 > b)) throw _; i(-1, _) } } else i(-1, "No Transport"); return x
            }, getJSON: function (t, e, i) { return lt.get(t, e, i, "json") }, getScript: function (t, e) { return lt.get(t, void 0, e, "script") }
        }), lt.each(["get", "post"], function (t, e) { lt[e] = function (t, i, n, o) { return lt.isFunction(i) && (o = o || n, n = i, i = void 0), lt.ajax({ url: t, type: e, dataType: o, data: i, success: n }) } }), lt.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (t, e) { lt.fn[e] = function (t) { return this.on(e, t) } }), lt._evalUrl = function (t) { return lt.ajax({ url: t, type: "GET", dataType: "script", async: !1, global: !1, "throws": !0 }) }, lt.fn.extend({ wrapAll: function (t) { if (lt.isFunction(t)) return this.each(function (e) { lt(this).wrapAll(t.call(this, e)) }); if (this[0]) { var e = lt(t, this[0].ownerDocument).eq(0).clone(!0); this[0].parentNode && e.insertBefore(this[0]), e.map(function () { for (var t = this; t.firstChild && 1 === t.firstChild.nodeType;)t = t.firstChild; return t }).append(this) } return this }, wrapInner: function (t) { return lt.isFunction(t) ? this.each(function (e) { lt(this).wrapInner(t.call(this, e)) }) : this.each(function () { var e = lt(this), i = e.contents(); i.length ? i.wrapAll(t) : e.append(t) }) }, wrap: function (t) { var e = lt.isFunction(t); return this.each(function (i) { lt(this).wrapAll(e ? t.call(this, i) : t) }) }, unwrap: function () { return this.parent().each(function () { lt.nodeName(this, "body") || lt(this).replaceWith(this.childNodes) }).end() } }), lt.expr.filters.hidden = function (t) { return t.offsetWidth <= 0 && t.offsetHeight <= 0 || !at.reliableHiddenOffsets() && "none" === (t.style && t.style.display || lt.css(t, "display")) }, lt.expr.filters.visible = function (t) { return !lt.expr.filters.hidden(t) }; var Ke = /%20/g, Ze = /\[\]$/, Je = /\r?\n/g, Qe = /^(?:submit|button|image|reset|file)$/i, ti = /^(?:input|select|textarea|keygen)/i; lt.param = function (t, e) { var i, n = [], o = function (t, e) { e = lt.isFunction(e) ? e() : null == e ? "" : e, n[n.length] = encodeURIComponent(t) + "=" + encodeURIComponent(e) }; if (void 0 === e && (e = lt.ajaxSettings && lt.ajaxSettings.traditional), lt.isArray(t) || t.jquery && !lt.isPlainObject(t)) lt.each(t, function () { o(this.name, this.value) }); else for (i in t) X(i, t[i], e, o); return n.join("&").replace(Ke, "+") }, lt.fn.extend({ serialize: function () { return lt.param(this.serializeArray()) }, serializeArray: function () { return this.map(function () { var t = lt.prop(this, "elements"); return t ? lt.makeArray(t) : this }).filter(function () { var t = this.type; return this.name && !lt(this).is(":disabled") && ti.test(this.nodeName) && !Qe.test(t) && (this.checked || !Ot.test(t)) }).map(function (t, e) { var i = lt(this).val(); return null == i ? null : lt.isArray(i) ? lt.map(i, function (t) { return { name: e.name, value: t.replace(Je, "\r\n") } }) : { name: e.name, value: i.replace(Je, "\r\n") } }).get() } }), lt.ajaxSettings.xhr = void 0 !== i.ActiveXObject ? function () { return !this.isLocal && /^(get|post|head|put|delete|options)$/i.test(this.type) && G() || K() } : G; var ei = 0, ii = {}, ni = lt.ajaxSettings.xhr(); i.ActiveXObject && lt(i).on("unload", function () { for (var t in ii) ii[t](void 0, !0) }), at.cors = !!ni && "withCredentials" in ni, ni = at.ajax = !!ni, ni && lt.ajaxTransport(function (t) { if (!t.crossDomain || at.cors) { var e; return { send: function (i, n) { var o, s = t.xhr(), a = ++ei; if (s.open(t.type, t.url, t.async, t.username, t.password), t.xhrFields) for (o in t.xhrFields) s[o] = t.xhrFields[o]; t.mimeType && s.overrideMimeType && s.overrideMimeType(t.mimeType), t.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest"); for (o in i) void 0 !== i[o] && s.setRequestHeader(o, i[o] + ""); s.send(t.hasContent && t.data || null), e = function (i, o) { var r, l, h; if (e && (o || 4 === s.readyState)) if (delete ii[a], e = void 0, s.onreadystatechange = lt.noop, o) 4 !== s.readyState && s.abort(); else { h = {}, r = s.status, "string" == typeof s.responseText && (h.text = s.responseText); try { l = s.statusText } catch (c) { l = "" } r || !t.isLocal || t.crossDomain ? 1223 === r && (r = 204) : r = h.text ? 200 : 404 } h && n(r, l, h, s.getAllResponseHeaders()) }, t.async ? 4 === s.readyState ? setTimeout(e) : s.onreadystatechange = ii[a] = e : e() }, abort: function () { e && e(void 0, !0) } } } }), lt.ajaxSetup({ accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" }, contents: { script: /(?:java|ecma)script/ }, converters: { "text script": function (t) { return lt.globalEval(t), t } } }), lt.ajaxPrefilter("script", function (t) { void 0 === t.cache && (t.cache = !1), t.crossDomain && (t.type = "GET", t.global = !1) }), lt.ajaxTransport("script", function (t) { if (t.crossDomain) { var e, i = yt.head || lt("head")[0] || yt.documentElement; return { send: function (n, o) { e = yt.createElement("script"), e.async = !0, t.scriptCharset && (e.charset = t.scriptCharset), e.src = t.url, e.onload = e.onreadystatechange = function (t, i) { (i || !e.readyState || /loaded|complete/.test(e.readyState)) && (e.onload = e.onreadystatechange = null, e.parentNode && e.parentNode.removeChild(e), e = null, i || o(200, "success")) }, i.insertBefore(e, i.firstChild) }, abort: function () { e && e.onload(void 0, !0) } } } }); var oi = [], si = /(=)\?(?=&|$)|\?\?/; lt.ajaxSetup({ jsonp: "callback", jsonpCallback: function () { var t = oi.pop() || lt.expando + "_" + Oe++; return this[t] = !0, t } }), lt.ajaxPrefilter("json jsonp", function (t, e, n) { var o, s, a, r = t.jsonp !== !1 && (si.test(t.url) ? "url" : "string" == typeof t.data && !(t.contentType || "").indexOf("application/x-www-form-urlencoded") && si.test(t.data) && "data"); return r || "jsonp" === t.dataTypes[0] ? (o = t.jsonpCallback = lt.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, r ? t[r] = t[r].replace(si, "$1" + o) : t.jsonp !== !1 && (t.url += (He.test(t.url) ? "&" : "?") + t.jsonp + "=" + o), t.converters["script json"] = function () { return a || lt.error(o + " was not called"), a[0] }, t.dataTypes[0] = "json", s = i[o], i[o] = function () { a = arguments }, n.always(function () { i[o] = s, t[o] && (t.jsonpCallback = e.jsonpCallback, oi.push(o)), a && lt.isFunction(s) && s(a[0]), a = s = void 0 }), "script") : void 0 }), lt.parseHTML = function (t, e, i) { if (!t || "string" != typeof t) return null; "boolean" == typeof e && (i = e, e = !1), e = e || yt; var n = mt.exec(t), o = !i && []; return n ? [e.createElement(n[1])] : (n = lt.buildFragment([t], e, o), o && o.length && lt(o).remove(), lt.merge([], n.childNodes)) }; var ai = lt.fn.load; lt.fn.load = function (t, e, i) { if ("string" != typeof t && ai) return ai.apply(this, arguments); var n, o, s, a = this, r = t.indexOf(" "); return r >= 0 && (n = lt.trim(t.slice(r, t.length)), t = t.slice(0, r)), lt.isFunction(e) ? (i = e, e = void 0) : e && "object" == typeof e && (s = "POST"), a.length > 0 && lt.ajax({ url: t, type: s, dataType: "html", data: e }).done(function (t) { o = arguments, a.html(n ? lt("<div>").append(lt.parseHTML(t)).find(n) : t) }).complete(i && function (t, e) { a.each(i, o || [t.responseText, e, t]) }), this }, lt.expr.filters.animated = function (t) { return lt.grep(lt.timers, function (e) { return t === e.elem }).length }; var ri = i.document.documentElement; lt.offset = { setOffset: function (t, e, i) { var n, o, s, a, r, l, h, c = lt.css(t, "position"), u = lt(t), d = {}; "static" === c && (t.style.position = "relative"), r = u.offset(), s = lt.css(t, "top"), l = lt.css(t, "left"), h = ("absolute" === c || "fixed" === c) && lt.inArray("auto", [s, l]) > -1, h ? (n = u.position(), a = n.top, o = n.left) : (a = parseFloat(s) || 0, o = parseFloat(l) || 0), lt.isFunction(e) && (e = e.call(t, i, r)), null != e.top && (d.top = e.top - r.top + a), null != e.left && (d.left = e.left - r.left + o), "using" in e ? e.using.call(t, d) : u.css(d) } }, lt.fn.extend({ offset: function (t) { if (arguments.length) return void 0 === t ? this : this.each(function (e) { lt.offset.setOffset(this, t, e) }); var e, i, n = { top: 0, left: 0 }, o = this[0], s = o && o.ownerDocument; if (s) return e = s.documentElement, lt.contains(e, o) ? (typeof o.getBoundingClientRect !== St && (n = o.getBoundingClientRect()), i = Z(s), { top: n.top + (i.pageYOffset || e.scrollTop) - (e.clientTop || 0), left: n.left + (i.pageXOffset || e.scrollLeft) - (e.clientLeft || 0) }) : n }, position: function () { if (this[0]) { var t, e, i = { top: 0, left: 0 }, n = this[0]; return "fixed" === lt.css(n, "position") ? e = n.getBoundingClientRect() : (t = this.offsetParent(), e = this.offset(), lt.nodeName(t[0], "html") || (i = t.offset()), i.top += lt.css(t[0], "borderTopWidth", !0), i.left += lt.css(t[0], "borderLeftWidth", !0)), { top: e.top - i.top - lt.css(n, "marginTop", !0), left: e.left - i.left - lt.css(n, "marginLeft", !0) } } }, offsetParent: function () { return this.map(function () { for (var t = this.offsetParent || ri; t && !lt.nodeName(t, "html") && "static" === lt.css(t, "position");)t = t.offsetParent; return t || ri }) } }), lt.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (t, e) { var i = /Y/.test(e); lt.fn[t] = function (n) { return Nt(this, function (t, n, o) { var s = Z(t); return void 0 === o ? s ? e in s ? s[e] : s.document.documentElement[n] : t[n] : void (s ? s.scrollTo(i ? lt(s).scrollLeft() : o, i ? o : lt(s).scrollTop()) : t[n] = o) }, t, n, arguments.length, null) } }), lt.each(["top", "left"], function (t, e) { lt.cssHooks[e] = E(at.pixelPosition, function (t, i) { return i ? (i = se(t, e), re.test(i) ? lt(t).position()[e] + "px" : i) : void 0 }) }), lt.each({ Height: "height", Width: "width" }, function (t, e) { lt.each({ padding: "inner" + t, content: e, "": "outer" + t }, function (i, n) { lt.fn[n] = function (n, o) { var s = arguments.length && (i || "boolean" != typeof n), a = i || (n === !0 || o === !0 ? "margin" : "border"); return Nt(this, function (e, i, n) { var o; return lt.isWindow(e) ? e.document.documentElement["client" + t] : 9 === e.nodeType ? (o = e.documentElement, Math.max(e.body["scroll" + t], o["scroll" + t], e.body["offset" + t], o["offset" + t], o["client" + t])) : void 0 === n ? lt.css(e, i, a) : lt.style(e, i, n, a) }, e, s ? n : void 0, s, null) } }) }), lt.fn.size = function () { return this.length }, lt.fn.andSelf = lt.fn.addBack, n = [], o = function () { return lt }.apply(e, n), !(void 0 !== o && (t.exports = o)); var li = i.jQuery, hi = i.$; return lt.noConflict = function (t) { return i.$ === lt && (i.$ = hi), t && i.jQuery === lt && (i.jQuery = li), lt }, typeof s === St && (i.jQuery = i.$ = lt), lt
    })
}, function (t, e, i) { var n; (function (o) { "use strict"; n = function (t, e, n) { i(6), i(7); var s = i(8), a = i(16), r = i(32); i(35), n.exports = s.extend({ init: function () { this._super(), this.header = new a, this.footer = new r, this.layout(), this.render(), this.bind() }, render: function () { o("#main").slimScroll({ size: "7px", color: "#a1b2bd", opacity: .3, position: "right", height: "100%", allowPageScroll: !1, disableFadeOut: !1 }) }, bind: function () { o(window).on("resize", this.onWinResize.bind(this)) }, layout: function () { var t = window.innerHeight, e = this.header.$domElement.height(); this.footer.$domElement.height(); o("#main").height(t - e) }, onWinResize: function () { this.layout(), this.render() } }) }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }).call(e, i(4)) }, function (t, e, i) { (function (t) { !function (t, e) { t.rails !== e && t.error("jquery-ujs has already been loaded!"); var i, n = t(document); t.rails = i = { linkClickSelector: "a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]", buttonClickSelector: "button[data-remote]", inputChangeSelector: "select[data-remote], input[data-remote], textarea[data-remote]", formSubmitSelector: "form", formInputClickSelector: "form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])", disableSelector: "input[data-disable-with], button[data-disable-with], textarea[data-disable-with]", enableSelector: "input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled", requiredInputSelector: "input[name][required]:not([disabled]),textarea[name][required]:not([disabled])", fileInputSelector: "input[type=file]", linkDisableSelector: "a[data-disable-with]", CSRFProtection: function (e) { var i = t('meta[name="csrf-token"]').attr("content"); i && e.setRequestHeader("X-CSRF-Token", i) }, refreshCSRFTokens: function () { var e = t("meta[name=csrf-token]").attr("content"), i = t("meta[name=csrf-param]").attr("content"); t('form input[name="' + i + '"]').val(e) }, fire: function (e, i, n) { var o = t.Event(i); return e.trigger(o, n), o.result !== !1 }, confirm: function (t) { return confirm(t) }, ajax: function (e) { return t.ajax(e) }, href: function (t) { return t.attr("href") }, handleRemote: function (n) { var o, s, a, r, l, h, c, u; if (i.fire(n, "ajax:before")) { if (r = n.data("cross-domain"), l = r === e ? null : r, h = n.data("with-credentials") || null, c = n.data("type") || t.ajaxSettings && t.ajaxSettings.dataType, n.is("form")) { o = n.attr("method"), s = n.attr("action"), a = n.serializeArray(); var d = n.data("ujs:submit-button"); d && (a.push(d), n.data("ujs:submit-button", null)) } else n.is(i.inputChangeSelector) ? (o = n.data("method"), s = n.data("url"), a = n.serialize(), n.data("params") && (a = a + "&" + n.data("params"))) : n.is(i.buttonClickSelector) ? (o = n.data("method") || "get", s = n.data("url"), a = n.serialize(), n.data("params") && (a = a + "&" + n.data("params"))) : (o = n.data("method"), s = i.href(n), a = n.data("params") || null); u = { type: o || "GET", data: a, dataType: c, beforeSend: function (t, o) { return o.dataType === e && t.setRequestHeader("accept", "*/*;q=0.5, " + o.accepts.script), i.fire(n, "ajax:beforeSend", [t, o]) }, success: function (t, e, i) { n.trigger("ajax:success", [t, e, i]) }, complete: function (t, e) { n.trigger("ajax:complete", [t, e]) }, error: function (t, e, i) { n.trigger("ajax:error", [t, e, i]) }, crossDomain: l }, h && (u.xhrFields = { withCredentials: h }), s && (u.url = s); var p = i.ajax(u); return n.trigger("ajax:send", p), p } return !1 }, handleMethod: function (n) { var o = i.href(n), s = n.data("method"), a = n.attr("target"), r = t("meta[name=csrf-token]").attr("content"), l = t("meta[name=csrf-param]").attr("content"), h = t('<form method="post" action="' + o + '"></form>'), c = '<input name="_method" value="' + s + '" type="hidden" />'; l !== e && r !== e && (c += '<input name="' + l + '" value="' + r + '" type="hidden" />'), a && h.attr("target", a), h.hide().append(c).appendTo("body"), h.submit() }, disableFormElements: function (e) { e.find(i.disableSelector).each(function () { var e = t(this), i = e.is("button") ? "html" : "val"; e.data("ujs:enable-with", e[i]()), e[i](e.data("disable-with")), e.prop("disabled", !0) }) }, enableFormElements: function (e) { e.find(i.enableSelector).each(function () { var e = t(this), i = e.is("button") ? "html" : "val"; e.data("ujs:enable-with") && e[i](e.data("ujs:enable-with")), e.prop("disabled", !1) }) }, allowAction: function (t) { var e, n = t.data("confirm"), o = !1; return n ? (i.fire(t, "confirm") && (o = i.confirm(n), e = i.fire(t, "confirm:complete", [o])), o && e) : !0 }, blankInputs: function (e, i, n) { var o, s, a = t(), r = i || "input,textarea", l = e.find(r); return l.each(function () { if (o = t(this), s = o.is("input[type=checkbox],input[type=radio]") ? o.is(":checked") : o.val(), !s == !n) { if (o.is("input[type=radio]") && l.filter('input[type=radio]:checked[name="' + o.attr("name") + '"]').length) return !0; a = a.add(o) } }), a.length ? a : !1 }, nonBlankInputs: function (t, e) { return i.blankInputs(t, e, !0) }, stopEverything: function (e) { return t(e.target).trigger("ujs:everythingStopped"), e.stopImmediatePropagation(), !1 }, disableElement: function (t) { t.data("ujs:enable-with", t.html()), t.html(t.data("disable-with")), t.bind("click.railsDisable", function (t) { return i.stopEverything(t) }) }, enableElement: function (t) { t.data("ujs:enable-with") !== e && (t.html(t.data("ujs:enable-with")), t.removeData("ujs:enable-with")), t.unbind("click.railsDisable") } }, i.fire(n, "rails:attachBindings") && (t.ajaxPrefilter(function (t, e, n) { t.crossDomain || i.CSRFProtection(n) }), n.delegate(i.linkDisableSelector, "ajax:complete", function () { i.enableElement(t(this)) }), n.delegate(i.linkClickSelector, "click.rails", function (n) { var o = t(this), s = o.data("method"), a = o.data("params"), r = n.metaKey || n.ctrlKey; if (!i.allowAction(o)) return i.stopEverything(n); if (!r && o.is(i.linkDisableSelector) && i.disableElement(o), o.data("remote") !== e) { if (r && (!s || "GET" === s) && !a) return !0; var l = i.handleRemote(o); return l === !1 ? i.enableElement(o) : l.error(function () { i.enableElement(o) }), !1 } return o.data("method") ? (i.handleMethod(o), !1) : void 0 }), n.delegate(i.buttonClickSelector, "click.rails", function (e) { var n = t(this); return i.allowAction(n) ? (i.handleRemote(n), !1) : i.stopEverything(e) }), n.delegate(i.inputChangeSelector, "change.rails", function (e) { var n = t(this); return i.allowAction(n) ? (i.handleRemote(n), !1) : i.stopEverything(e) }), n.delegate(i.formSubmitSelector, "submit.rails", function (n) { var o = t(this), s = o.data("remote") !== e, a = i.blankInputs(o, i.requiredInputSelector), r = i.nonBlankInputs(o, i.fileInputSelector); if (!i.allowAction(o)) return i.stopEverything(n); if (a && o.attr("novalidate") == e && i.fire(o, "ajax:aborted:required", [a])) return i.stopEverything(n); if (s) { if (r) { setTimeout(function () { i.disableFormElements(o) }, 13); var l = i.fire(o, "ajax:aborted:file", [r]); return l || setTimeout(function () { i.enableFormElements(o) }, 13), l } return i.handleRemote(o), !1 } setTimeout(function () { i.disableFormElements(o) }, 13) }), n.delegate(i.formInputClickSelector, "click.rails", function (e) { var n = t(this); if (!i.allowAction(n)) return i.stopEverything(e); var o = n.attr("name"), s = o ? { name: o, value: n.val() } : null; n.closest("form").data("ujs:submit-button", s) }), n.delegate(i.formSubmitSelector, "ajax:beforeSend.rails", function (e) { this == e.target && i.disableFormElements(t(this)) }), n.delegate(i.formSubmitSelector, "ajax:complete.rails", function (e) { this == e.target && i.enableFormElements(t(this)) }), t(function () { i.refreshCSRFTokens() })) }(t) }).call(e, i(4)) }, function (e, i, n) { (function (e) { !function (i) { e.fn.extend({ slimScroll: function (e) { var n = { width: "auto", height: "250px", size: "7px", color: "#000", position: "right", distance: "1px", start: "top", opacity: .4, alwaysVisible: !1, disableFadeOut: !1, railVisible: !1, railColor: "#333", railOpacity: .2, railDraggable: !0, railClass: "slimScrollRail", barClass: "slimScrollBar", wrapperClass: "slimScrollDiv", allowPageScroll: !1, wheelStep: 20, touchScrollStep: 200, borderRadius: "7px", railBorderRadius: "7px" }, o = i.extend(n, e); return this.each(function () { function n(t) { if (c) { var t = t || window.event, e = 0; t.wheelDelta && (e = -t.wheelDelta / 120), t.detail && (e = t.detail / 3); var n = t.target || t.srcTarget || t.srcElement; i(n).closest("." + o.wrapperClass).is(x.parent()) && s(e, !0), t.preventDefault && !w && t.preventDefault(), w || (t.returnValue = !1) } } function s(t, e, i) { w = !1; var n = t, s = x.outerHeight() - P.outerHeight(); if (e && (n = parseInt(P.css("top")) + t * parseInt(o.wheelStep) / 100 * P.outerHeight(), n = Math.min(Math.max(n, 0), s), n = t > 0 ? Math.ceil(n) : Math.floor(n), P.css({ top: n + "px" })), g = parseInt(P.css("top")) / (x.outerHeight() - P.outerHeight()), n = g * (x[0].scrollHeight - x.outerHeight()), i) { n = t; var a = n / x[0].scrollHeight * x.outerHeight(); a = Math.min(Math.max(a, 0), s), P.css({ top: a + "px" }) } x.scrollTop(n), x.trigger("slimscrolling", ~~n), l(), h() } function a() { window.addEventListener ? (this.addEventListener("DOMMouseScroll", n, !1), this.addEventListener("mousewheel", n, !1), this.addEventListener("MozMousePixelScroll", n, !1)) : document.attachEvent("onmousewheel", n) } function r() { m = Math.max(x.outerHeight() / x[0].scrollHeight * x.outerHeight(), b), P.css({ height: m + "px" }); var t = m == x.outerHeight() ? "none" : "block"; P.css({ display: t }) } function l() { if (r(), clearTimeout(p), g == ~~g) { if (w = o.allowPageScroll, v != g) { var t = 0 == ~~g ? "top" : "bottom"; x.trigger("slimscroll", t) } } else w = !1; return v = g, m >= x.outerHeight() ? void (w = !0) : (P.stop(!0, !0).fadeIn("fast"), void (o.railVisible && T.stop(!0, !0).fadeIn("fast"))) } function h() { o.alwaysVisible || (p = setTimeout(function () { o.disableFadeOut && c || u || d || (P.fadeOut("slow"), T.fadeOut("slow")) }, 1e3)) } var c, u, d, p, f, m, g, v, y = "<div></div>", b = 30, w = !1, x = i(this); if (x.parent().hasClass(o.wrapperClass)) { var _ = x.scrollTop(); if (P = x.parent().find("." + o.barClass), T = x.parent().find("." + o.railClass), r(), i.isPlainObject(e)) { if ("height" in e && "auto" == e.height) { x.parent().css("height", "auto"), x.css("height", "auto"); var C = x.parent().parent().height(); x.parent().css("height", C), x.css("height", C) } if ("scrollTo" in e) _ = parseInt(o.scrollTo); else if ("scrollBy" in e) _ += parseInt(o.scrollBy); else if ("destroy" in e) return P.remove(), T.remove(), void x.unwrap(); s(_, !1, !0) } } else { o.height = "auto" == o.height ? x.parent().height() : o.height; var k = i(y).addClass(o.wrapperClass).css({ position: "relative", overflow: "hidden", width: o.width, height: o.height }); x.css({ overflow: "hidden", width: o.width, height: o.height }); var T = i(y).addClass(o.railClass).css({ width: o.size, height: "100%", position: "absolute", top: 0, display: o.alwaysVisible && o.railVisible ? "block" : "none", "border-radius": o.railBorderRadius, background: o.railColor, opacity: o.railOpacity, zIndex: 90 }), P = i(y).addClass(o.barClass).css({ background: o.color, width: o.size, position: "absolute", top: 0, opacity: o.opacity, display: o.alwaysVisible ? "block" : "none", "border-radius": o.borderRadius, BorderRadius: o.borderRadius, MozBorderRadius: o.borderRadius, WebkitBorderRadius: o.borderRadius, zIndex: 99 }), S = "right" == o.position ? { right: o.distance } : { left: o.distance }; T.css(S), P.css(S), x.wrap(k), x.parent().append(P), x.parent().append(T), o.railDraggable && P.bind("mousedown", function (e) { var n = i(document); return d = !0, t = parseFloat(P.css("top")), pageY = e.pageY, n.bind("mousemove.slimscroll", function (e) { currTop = t + e.pageY - pageY, P.css("top", currTop), s(0, P.position().top, !1) }), n.bind("mouseup.slimscroll", function (t) { d = !1, h(), n.unbind(".slimscroll") }), !1 }).bind("selectstart.slimscroll", function (t) { return t.stopPropagation(), t.preventDefault(), !1 }), T.hover(function () { l() }, function () { h() }), P.hover(function () { u = !0 }, function () { u = !1 }), x.hover(function () { c = !0, l(), h() }, function () { c = !1, h() }), x.bind("touchstart", function (t, e) { t.originalEvent.touches.length && (f = t.originalEvent.touches[0].pageY) }), x.bind("touchmove", function (t) { if (w || t.originalEvent.preventDefault(), t.originalEvent.touches.length) { var e = (f - t.originalEvent.touches[0].pageY) / o.touchScrollStep; s(e, !0), f = t.originalEvent.touches[0].pageY } }), r(), "bottom" === o.start ? (P.css({ top: x.outerHeight() - P.outerHeight() }), s(0, !0)) : "top" !== o.start && (s(i(o.start).position().top, null, !0), o.alwaysVisible || P.hide()), a() } }), this } }), e.fn.extend({ slimscroll: e.fn.slimScroll }) }(e) }).call(i, n(4)) }, function (t, e, i) { var n; (function (o) { "use strict"; n = function (t, e, n) { var s = i(9), a = i(10); n.exports = s.extend({ init: function () { this._parseNotifications() }, _parseNotifications: function () { var t = o(".flash-notification"); t.length && a(t.remove().text(), t.attr("data-notification-type")) } }) }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }).call(e, i(4)) }, function (t, e, i) { var n; n = function (t, e, i) { !function () { var t = !1, e = /xyz/.test(function () { xyz }) ? /\b_super\b/ : /.*/, n = window.Class = function () { }; n.extend = function (i) { function n() { !t && this.init && this.init.apply(this, arguments) } var o = this.prototype; t = !0; var s = new this; t = !1; for (var a in i) s[a] = "function" == typeof i[a] && "function" == typeof o[a] && e.test(i[a]) ? function (t, e) { return function () { var i = this._super; this._super = o[t]; var n = e.apply(this, arguments); return this._super = i, n } }(a, i[a]) : i[a]; return n.prototype = s, n.prototype.constructor = n, n.extend = arguments.callee, n }, i.exports = n }() }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }, function (t, e, i) { var n; (function (o) { "use strict"; n = function (t, e, n) { i(11); var s = i(15); n.exports = function (t, e) { function i() { clearTimeout(l), r.remove(), h.dispatch() } function n() { clearTimeout(l), r.stop().css("opacity", "") } function a() { n(), l = setTimeout(function () { r.addClass("no-transition").fadeOut(600, i) }, e.duration) } 0 === o(".notifications").length && o(document.body).append('<div class="notifications"></div>'), o(".notifications>").last().html() === t && o(".notifications>").last().remove(), "string" == typeof e && (e = { type: e }), e = o.extend({ type: "", duration: 2500 + 15 * t.length, autoHide: !0 }, e), "negative" === e.type && (e.duration = 1.5 * e.duration); var r = o("<p>").html(t).addClass(e.type).appendTo(o(".notifications")).on("click", i); e.autoHide && (r.on("mouseover", n), r.on("mouseout", a)); var l = -1, h = new s.Signal; return setTimeout(function () { r.addClass("show"), e.autoHide && a() }, 1), { $domElement: r, destroy: i, destroyed: h } } }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }).call(e, i(4)) }, function (t, e) { }, , , , function (t, e, i) { var n; !function (o) { function s(t, e, i, n, o) { this._listener = e, this._isOnce = i, this.context = n, this._signal = t, this._priority = o || 0 } function a(t, e) { if ("function" != typeof t) throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}", e)) } function r() { this._bindings = [], this._prevParams = null; var t = this; this.dispatch = function () { r.prototype.dispatch.apply(t, arguments) } } s.prototype = { active: !0, params: null, execute: function (t) { var e, i; return this.active && this._listener && (i = this.params ? this.params.concat(t) : t, e = this._listener.apply(this.context, i), this._isOnce && this.detach()), e }, detach: function () { return this.isBound() ? this._signal.remove(this._listener, this.context) : null }, isBound: function () { return !!this._signal && !!this._listener }, isOnce: function () { return this._isOnce }, getListener: function () { return this._listener }, getSignal: function () { return this._signal }, _destroy: function () { delete this._signal, delete this._listener, delete this.context }, toString: function () { return "[SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]" } }, r.prototype = { VERSION: "1.0.0", memorize: !1, _shouldPropagate: !0, active: !0, _registerListener: function (t, e, i, n) { var o, a = this._indexOfListener(t, i); if (-1 !== a) { if (o = this._bindings[a], o.isOnce() !== e) throw new Error("You cannot add" + (e ? "" : "Once") + "() then add" + (e ? "Once" : "") + "() the same listener without removing the relationship first.") } else o = new s(this, t, e, i, n), this._addBinding(o); return this.memorize && this._prevParams && o.execute(this._prevParams), o }, _addBinding: function (t) { var e = this._bindings.length; do --e; while (this._bindings[e] && t._priority <= this._bindings[e]._priority); this._bindings.splice(e + 1, 0, t) }, _indexOfListener: function (t, e) { for (var i, n = this._bindings.length; n--;)if (i = this._bindings[n], i._listener === t && i.context === e) return n; return -1 }, has: function (t, e) { return -1 !== this._indexOfListener(t, e) }, add: function (t, e, i) { return a(t, "add"), this._registerListener(t, !1, e, i) }, addOnce: function (t, e, i) { return a(t, "addOnce"), this._registerListener(t, !0, e, i) }, remove: function (t, e) { a(t, "remove"); var i = this._indexOfListener(t, e); return -1 !== i && (this._bindings[i]._destroy(), this._bindings.splice(i, 1)), t }, removeAll: function () { for (var t = this._bindings.length; t--;)this._bindings[t]._destroy(); this._bindings.length = 0 }, getNumListeners: function () { return this._bindings.length }, halt: function () { this._shouldPropagate = !1 }, dispatch: function (t) { if (this.active) { var e, i = Array.prototype.slice.call(arguments), n = this._bindings.length; if (this.memorize && (this._prevParams = i), n) { e = this._bindings.slice(), this._shouldPropagate = !0; do n--; while (e[n] && this._shouldPropagate && e[n].execute(i) !== !1) } } }, forget: function () { this._prevParams = null }, dispose: function () { this.removeAll(), delete this._bindings, delete this._prevParams }, toString: function () { return "[Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]" } }; var l = r; l.Signal = r, n = function () { return l }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }(this) }, function (t, e, i) { var n; (function (o) { "use strict"; n = function (t, e, n) { var s = i(17).KEY, a = i(20), r = i(9), l = i(10); i(23), n.exports = r.extend({ init: function () { this.$domElement = o(".global-header"), this.$searchElement = this.$domElement.find(".nav-item.search"), this.$profileElement = this.$domElement.find(".nav-item.profile"), this.$messageElement = this.$domElement.find(".nav-item.message"), this.render(), this.bind() }, render: function () { var t = [{ label: "", icon: "", url: "javascript: void(0);" }, { label: "个人空间", icon: "my-space", url: "/MySpace" }, { label: "退出系统", icon: "logout", url: "/Sign/SignOut", attributes: { rel: "nofollow", "data-method": "post" } }]; this.profileDropdown = new a({ anchor: this.$profileElement, anchorSpacing: 10, alignment: "auto", offsetY: -20, minWidth: 160, showOnHover: !0, options: t, styles: { "z-index": 4 } }), o.get("/Api/TecStudy/GetMessage").done(function (t) { var e = [{ label: "", icon: "", url: "javascript: void(0);" }]; t.length ? (t.forEach(function (t, i) { e.push({ label: t.info + t.countStr, icon: "", url: t.href }) }), this.$messageElement.find(".nav-item-badge").html(t.length).show()) : (e.push({ label: "没有收到消息", icon: "", url: "javascript: void(0);" }), this.$messageElement.find(".nav-item-badge").hide()), this.messageDropdown = new a({ anchor: this.$messageElement, anchorSpacing: 10, alignment: "auto", minWidth: 160, showOnHover: !0, options: e }) }.bind(this)).fail(function () { l("用户消息请求失败!", "negative") }) }, bind: function () { this.$searchElement.find(".nav-item-label").on("click", this.onSearchClk.bind(this)), this.$searchElement.on("click", function (t) { o(t.delegateTarget).addClass("focus") }), this.$searchElement.on("blur", function (t) { o(t.delegateTarget).removeClass("focus") }), o(document).on("keydown", this.onDocKeyDown.bind(this)) }, onSearchClk: function (t) { var e = this.$searchElement.find("form input").val(); return "" === e ? window.location.href = "/search" : this.$searchElement.find("form").trigger("submit"), t.preventDefault(), !1 }, onDocKeyDown: function (t) { return t.keyCode === s.Enter && this.$searchElement.hasClass("focus") ? (this.$searchElement.find("form").trigger("submit"), t.preventDefault(), !1) : void 0 } }) }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }).call(e, i(4)) }, function (t, e, i) { var n; (function (o) { "use strict"; n = function (t, e, n) { var s = i(18), a = { D0: 48, D1: 49, D2: 50, D3: 51, D4: 52, D5: 53, D6: 54, D7: 55, D8: 56, D9: 57, A: 65, B: 66, C: 67, D: 68, E: 69, F: 70, G: 71, H: 72, I: 73, J: 74, K: 75, L: 76, M: 77, N: 78, O: 79, P: 80, Q: 81, R: 82, S: 83, T: 84, U: 85, V: 86, W: 87, X: 88, Y: 89, Z: 90, Alt: 18, CapsLock: 20, Ctrl: 17, Shift: 16, ContextMenu: 93, Enter: 13, Space: 32, Tab: 9, Delete: 46, End: 35, Home: 36, Insert: 45, PageDown: 34, PageUp: 33, Down: 40, Left: 37, Right: 39, Up: 38, Escape: 27, PrintScreen: 44, Pause: 19, ScrollLock: 145, F1: 112, F2: 113, F3: 114, F4: 115, F5: 116, F6: 117, F7: 118, F8: 119, F9: 120, F10: 121, F11: 122, F12: 123, F13: 124, F14: 125, F15: 126, F16: 127, F17: 128, F18: 129, F19: 130, F20: 131, F21: 132, F22: 133, F23: 134, F24: 135 }, r = { init: function () { this.initialized = !1, this.keyupConsumers = new s, this.keydownConsumers = new s, o(document).on("keydown", this.onDocumentKeyDown.bind(this)), o(document).on("keyup", this.onDocumentKeyUp.bind(this)) }, keyDown: function (t) { this.keydownConsumers.push(t) }, keyUp: function (t) { this.keyupConsumers.push(t) }, release: function (t) { this.keydownConsumers.remove(t), this.keyupConsumers.remove(t) }, onDocumentKeyDown: function (t) { var e = null, i = !1, n = this.keydownConsumers.size(); for (n -= 1, e = this.keydownConsumers.at(n); e;) { if (!e(t)) { i = !0; break } n -= 1, e = this.keydownConsumers.at(n) } return i ? (t.preventDefault(), t.stopImmediatePropagation(), !1) : void 0 }, onDocumentKeyUp: function (t) { var e = null, i = !1, n = this.keyupConsumers.size(); for (n -= 1, e = this.keyupConsumers.at(n); e;) { if (!e(t)) { i = !0; break } n -= 1, e = this.keyupConsumers.at(n) } return i ? (t.preventDefault(), t.stopImmediatePropagation(), !1) : void 0 } }; r.initialized || r.init(), n.exports = r, n.exports.KEY = a }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }).call(e, i(4)) }, function (t, e, i) {
    var n; (function (o) {
        "use strict"; n = function (t, e, n) {
            var s = i(15), a = i(19), r = i(9); n.exports = r.extend({
                init: function (t, e, i) { this.data = [], this.factory = e, this.crud = i || {}, this.changed = new s.Signal, this.setData(t) }, setData: function (t) { if (this.data = t || [], "function" == typeof this.factory) { var e = this.data; this.data = []; for (var i = 0, n = e.length; n > i; i += 1) { var o = e[i], s = null; s = o instanceof this.factory ? e[i] : this.createModelInstance(e[i]), this.data.push(s) } } }, createModelInstance: function (t, e) { return new this.factory(t, e) }, find: function (t) { for (var e = 0, i = this.data.length; i > e; e += 1) { var n = this.data[e]; if (n === t) return e } return -1 }, contains: function (t) { return -1 !== this.find(t) }, findByProperties: function (t) { for (var e = 0, i = this.data.length; i > e; e += 1) { var n = !0, o = this.data[e]; for (var s in t) t.hasOwnProperty(s) && ("function" == typeof o.get ? o.get(s) !== t[s] && (n = !1) : o[s] !== t[s] && (n = !1)); if (n) return e } return -1 }, getByProperties: function (t) { return this.data[this.findByProperties(t)] }, remove: function (t) { for (var e, i = 0, n = this.data.length; n > i; i += 1)this.data[i] === t && (e = this.data.splice(i, 1)[0], i -= 1); "undefined" != typeof e && this.changed.dispatch(null, [e]) }, removeByProperties: function (t) { for (var e = null, i = this.findByProperties(t), n = 0; -1 !== i && 1e3 > n; n += 1)e = this.data.splice(i, 1)[0], i = this.findByProperties(t); "undefined" != typeof e && this.changed.dispatch(null, [e]) }, removeByIndex: function (t) { var e = this.data.splice(t, 1); return "undefined" == typeof e && this.changed.dispatch(null, [e]), e }, create: function (t, e) { if ("function" == typeof this.factory) { if (!this.crud.create) { var i = this.createModel(t, e); return e && a.callback(e.success, i), i } o.ajax({ type: "POST", context: this, url: this.crud.create, data: t }).done(function (t) { a.callback(e.success, this.createModel(t, e)) }).fail(function () { a.callback(e.error) }) } }, createModel: function (t, e) { if (e = o.extend({ prepend: !1 }, e), "function" == typeof this.factory) { var i = this.createModelInstance(t); return e.prepend ? this.unshift(i) : this.push(i), i } }, clear: function () { this.data.length = 0, this.changed.dispatch() }, swap: function (t, e) { var i = "number" == typeof t && t >= 0 && t < this.size(), n = "number" == typeof e && e >= 0 && e < this.size(); if (i && n) { var o = this.data[t], s = this.data[e]; this.data[t] = s, this.data[e] = o } this.changed.dispatch() }, shiftLeft: function (t) { "number" == typeof t && t > 0 && this.swap(t, t - 1) },
                shiftRight: function (t) { "number" == typeof t && t < this.size() - 1 && this.swap(t, t + 1) }, at: function (t) { return this.data[t] }, first: function () { return this.at(0) }, last: function () { return this.at(this.size() - 1) }, size: function () { return this.data.length }, isEmpty: function () { return 0 === this.size() }, unshift: function (t) { var e = this.data.unshift(t); return this.changed.dispatch(t), e }, push: function (t) { var e = this.data.push(t); return this.changed.dispatch([t]), e }, pop: function () { var t = this.data.pop(); return "undefined" != typeof t && this.changed.dispatch(null, [t]), t }, map: function (t) { return this.data.map(t) }, some: function (t) { return this.data.some(t) }, filter: function (t) { return this.data.filter(t) }, forEach: function (t) { return this.data.forEach(t) }, getUniqueName: function (t, e, i) { for (var n = -1, o = 0, s = this.data.length; s > o; o += 1) { var a = this.data[o], r = "function" == typeof a.get ? a.get(e) : a[e]; if (r) { var l = r.match(new RegExp("^" + t + "\\s?(\\d+)?$")); l && 2 === l.length && (n = Math.max(l[1] ? parseInt(l[1], 10) : 0, n)) } } return -1 === n ? t + (i ? " 1" : "") : t + " " + (n + 1) }, toJSON: function () { return this.map(function (t) { return "function" == typeof t.toJSON ? t.toJSON() : t }) }, destroy: function () { this.changed.dispose(), this.data = null }
            })
        }.call(e, i, e, t), !(void 0 !== n && (t.exports = n))
    }).call(e, i(4))
}, function (t, e, i) { var n; n = function (t, e, i) { i.exports = { loop: function () { }, callback: function () { "function" == typeof arguments[0] && arguments[0].apply(null, [].slice.call(arguments, 1)) } } }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }, function (t, e, i) { var n; (function (o) { "use strict"; n = function (t, e, n) { i(21); var s = i(15), a = i(19), r = i(17).KEY, l = i(9), h = /(iphone|ipod|ipad|android|windows\sphone)/gi.test(navigator.userAgent), c = l.extend({ init: function (t) { if (this.config = o.extend({ anchor: "body", anchorSpacing: 10, alignment: "auto", minWidth: 0, offsetX: 0, offsetY: 0, styles: {}, options: [], showOnHover: !1, touch: h }, t), this.config.anchor = o(this.config.anchor), this.show = this.show.bind(this), this.hide = this.hide.bind(this), this.layout = this.layout.bind(this), this.toggle = this.toggle.bind(this), this.onMouseOver = this.onMouseOver.bind(this), this.onDocMouseMove = this.onDocMouseMove.bind(this), this.onDocMouseDown = this.onDocMouseDown.bind(this), this.onDocKeyDown = this.onDocKeyDown.bind(this), this.submenus = [], this.destroyed = new s.Signal, this.render(), this.renderList(), this.config.anchor.length) if (this.config.touch) this.config.anchor.addClass("menu-show-on-touch"), this.config.anchor.on("touchstart pointerdown", function (t) { t.preventDefault(), this.toggle() }.bind(this)), this.config.anchor.on("click", function (t) { t.preventDefault() }.bind(this)); else { if (this.config.showOnHover) { this.config.anchor.on("mouseover", this.onMouseOver); try { this.config.anchor.is(":hover") && this.onMouseOver() } catch (e) { new Error(e) } } this.config.anchor.on("click", this.toggle) } }, render: function () { this.$domElement = o('<div class="menu">'), this.$domElement.css(this.config.styles), this.$listElement = o('<div class="menu-list">'), this.$listElement.appendTo(this.$domElement), this.$arrowElement = o('<div class="menu-arrow">'), this.$arrowElement.appendTo(this.$domElement), this.$hitareaElement = o('<div class="menu-hitarea">'), this.$hitareaElement.appendTo(this.$domElement), this.$listElement.css("minWidth", this.config.minWidth + "px") }, renderList: function () { this.config.options.forEach(function (t) { var e = null; e = o("string" == typeof t.url ? '<a class="menu-item" href="' + t.url + '">' : '<div class="menu-item">'), e.html('<span class="label">' + t.label + "</span>"), e.data("callback", t.callback || a.loop), e.appendTo(this.$listElement), e.on("click", function (t) { var e = o(t.currentTarget).data("callback"); "function" == typeof e && e.apply(null), this.hide() }.bind(this)), t.icon && e.append('<span class="icon i-' + t.icon + '"></span>'), t.attributes && e.attr(t.attributes), t.submenu && !this.config.touch && this.submenus.push(new c({ anchor: e, anchorSpacing: 10, alignment: t.submenuAlignment || "rl", minWidth: t.submenuWidth || 160, showOnHover: !0, options: t.submenu })) }.bind(this)), this.$listElement.find(".menu-item:not(:first-child)").after('<div class="menu-divider">') }, bind: function () { o(window).on("resize scroll", this.layout), o(document).on("keydown", this.onDocKeyDown), o(document).on("mousedown touchstart pointerdown", this.onDocMouseDown) }, unbind: function () { o(window).off("resize scroll", this.layout), o(document).off("keydown", this.onDocKeyDown), o(document).off("mousedown touchstart pointerdown", this.onDocMouseDown) }, layout: function () { var t = this.config.alignment, e = this.config.anchor.offset(), i = this.config.anchorSpacing, n = o(window).scrollLeft(), s = o(window).scrollTop(), a = this.$domElement.outerWidth(), r = this.$domElement.outerHeight(), l = 8; "auto" === t && (t = e.top - (r + i + l) < s ? "b" : "t"); var h = this.config.anchor.outerWidth(), c = this.config.anchor.outerHeight(), u = window.innerWidth, d = window.innerHeight; "rl" === t && (t = e.left + h + i + l + a < u ? "r" : "l"), this.$domElement.attr("data-alignment", t); var p = e.left + this.config.offsetX, f = e.top + this.config.offsetY; switch (t) { case "t": p += (h - a) / 2, f -= r + i; break; case "b": p -= a - h, f += c; break; case "l": p -= a + i, f += (c - r) / 2; break; case "r": p += a + i, f += (c - r) / 2 }p = Math.min(Math.max(p, n + i), u + n - a - i), f = Math.min(Math.max(f, s + i), d + s - r - i); var m = a / 2, g = r / 2; switch (t) { case "t": m = e.left - p + h / 2, g = r; break; case "b": m = e.left - p + h / 2, g = -l; break; case "l": m = a, g = e.top - f + c / 2; break; case "r": m = -l, g = e.top - f + c / 2 }this.$domElement.css({ left: p, top: f }), this.$arrowElement.css({ left: m, top: g }), this.$hitareaElement.css({ top: -i, right: -i, bottom: -i, left: -i }) }, show: function () { this.$domElement.removeClass("visible").appendTo(document.body), setTimeout(function () { this.$domElement.addClass("visible") }.bind(this), 1), this.config.anchor.addClass("menu-is-open"), this.layout(), this.bind(), this.$arrowElement.hide() }, hide: function () { this.$listElement.find(".focus").removeClass("focus"), this.config.anchor.removeClass("menu-is-open"), this.$domElement.detach(), this.unbind(), o(document).off("mousemove", this.onDocMouseMove), this.isMouseOver = !1, clearTimeout(this.hideTimeout) }, toggle: function () { this.isVisible() ? this.hide() : this.show() }, focus: function (t) { var e = this.$listElement.find(".focus"); if (e.length) { var i = null; i = t > 0 ? e.nextAll(".menu-item").first() : e.prevAll(".menu-item").first(), i.length && (e.removeClass("focous"), i.addClass("focus")) } else this.$listElement.find(".menu-item").first().addClass("focus") }, isVisible: function () { return this.$domElement.parent().length > 0 }, hasSubMenu: function () { return this.submenus.length > 0 }, onMouseOver: function () { this.isMouseOver || (o(document).on("mousemove", this.onDocMouseMove), this.hideTimeout = -1, this.isMouseOver = !0, this.show()) }, onDocMouseMove: function (t) { var e = o(t.target), i = 0 === e.closest(this.$domElement).length && 0 === e.closest(this.config.anchor).length; this.hasSubMenu() && (i = 0 === e.closest(".menu").length && 0 === e.closest(this.config.anchor).length), i ? -1 === this.hideTimeout && (clearTimeout(this.hideTimeout), this.hideTimeout = setTimeout(this.hide, 150)) : this.hideTimeout && (clearTimeout(this.hideTimeout), this.hideTimeout = -1) }, onDocMouseDown: function (t) { var e = o(t.target); this.isVisible() && 0 === e.closest(this.$domElement).length && 0 === e.closest(this.config.anchor).length && this.hide() }, onDocKeyDown: function (t) { if (t.keyCode === r.Escape && (this.hide(), t.preventDefault()), t.keyCode === r.Enter) { var e = this.$domElement.find(".focus"); e.length && (e.trigger("click"), t.preventDefault()) } else t.keyCode === r.Up ? (this.focus(-1), t.preventDefault()) : t.keyCode === r.Down ? (this.focus(1), t.preventDefault()) : t.keyCode === r.Tab ? (this.focus(1), t.preventDefault()) : t.keyCode === r.Tab && t.shiftKey && (this.focus(-1), t.preventDefault()) }, destroy: function () { this.destroyed.dispatch(), this.destroyed.dispose(), this.$domElement.remove(), this.unbind(), this.config.anchor.off("click", this.toggle), this.config.anchor.off("hover", this.toggle), this.submenus.forEach(function (t) { t.destroy() }) } }); n.exports = c }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }).call(e, i(4)) }, function (t, e) { }, , function (t, e) { }, , , , , , , , , function (t, e, i) { var n; (function (o) { "use strict"; n = function (t, e, n) { i(33); var s = i(9), a = i(10); n.exports = s.extend({ init: function () { this.$domElement = o(".global-footer"), this.render(), this.bind(), this.layout() }, render: function () { o.get("/Api/Auth/GetAppSetsInfo").done(function (t) { var e = "&copy;2015&nbsp;&nbsp; "; e += t.BottomTitle + "&nbsp;&nbsp", e += "v" + t.CurrentVersion + "&nbsp;&nbsp", e += "访问量:" + t.VisitCount, this.$domElement.html(e) }.bind(this)).fail(function () { a("系统信息获取失败!", "negative") }) }, bind: function () { o(window).on("resize", this._onWindowResize.bind(this)) }, layout: function () { if (this.$domElement.is(":hidden")) return !1; this.$domElement.hide().css("top", 0); var t = window.innerHeight, e = t - this.$domElement.height(); this.$domElement.css("top", e).show() }, _onWindowResize: function () { this.layout() } }) }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }).call(e, i(4)) }, function (t, e) { }, , function (t, e) { }, , , , , , , , , , , , , , , , , function (t, e, i) { var n; (function (o) { "use strict"; n = function (t, e, n) { var s = i(3); n.exports = function (t) { o.ajax({ url: "/Api/Auth/GetUser?id", dataType: "json", success: function (t) { s.init(t) } }).then(function () { o(document).ready(function () { function e() { var e = new t, i = e.header.$profileElement; i.find(".nav-item-anchor").fadeIn(), i.find(".nav-item-label").css("background-image", "url(" + s.icon + ")") } setTimeout(function () { e() }, 1) }) }) } }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)) }).call(e, i(4)) }, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (t, e, i) { var n, o, s; !function (a) { o = [i(4)], n = a, s = "function" == typeof n ? n.apply(e, o) : n, !(void 0 !== s && (t.exports = s)) }(function (t) { function e(t) { return r.raw ? t : encodeURIComponent(t) } function i(t) { return r.raw ? t : decodeURIComponent(t) } function n(t) { return e(r.json ? JSON.stringify(t) : String(t)) } function o(t) { 0 === t.indexOf('"') && (t = t.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\")); try { return t = decodeURIComponent(t.replace(a, " ")), r.json ? JSON.parse(t) : t } catch (e) { } } function s(e, i) { var n = r.raw ? e : o(e); return t.isFunction(i) ? i(n) : n } var a = /\+/g, r = t.cookie = function (o, a, l) { if (arguments.length > 1 && !t.isFunction(a)) { if (l = t.extend({}, r.defaults, l), "number" == typeof l.expires) { var h = l.expires, c = l.expires = new Date; c.setTime(+c + 864e5 * h) } return document.cookie = [e(o), "=", n(a), l.expires ? "; expires=" + l.expires.toUTCString() : "", l.path ? "; path=" + l.path : "", l.domain ? "; domain=" + l.domain : "", l.secure ? "; secure" : ""].join("") } for (var u = o ? void 0 : {}, d = document.cookie ? document.cookie.split("; ") : [], p = 0, f = d.length; f > p; p++) { var m = d[p].split("="), g = i(m.shift()), v = m.join("="); if (o && o === g) { u = s(v, a); break } o || void 0 === (v = s(v)) || (u[g] = v) } return u }; r.defaults = {}, t.removeCookie = function (e, i) { return void 0 === t.cookie(e) ? !1 : (t.cookie(e, "", t.extend({}, i, { expires: -1 })), !t.cookie(e)) } }) }, function (t, e, i) { (function (t, e) { e.fn.farbtastic = function (e) { return t.farbtastic(this, e), this }, e.farbtastic = function (i, n) { var i = t(i).get(0); return i.farbtastic || (i.farbtastic = new e._farbtastic(i, n)) }, e._farbtastic = function (e, i) { var n = this; t(e).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>'); var o = t(".farbtastic", e); n.wheel = t(".wheel", e).get(0), n.radius = 84, n.square = 100, n.width = 194, navigator.appVersion.match(/MSIE [0-6]\./) && t("*", o).each(function () { if ("none" != this.currentStyle.backgroundImage) { var e = this.currentStyle.backgroundImage; e = this.currentStyle.backgroundImage.substring(5, e.length - 2), t(this).css({ backgroundImage: "none", filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='" + e + "')" }) } }), n.linkTo = function (e) { return "object" == typeof n.callback && t(n.callback).unbind("keyup", n.updateValue), n.color = null, "function" == typeof e ? n.callback = e : ("object" == typeof e || "string" == typeof e) && (n.callback = t(e), n.callback.bind("keyup", n.updateValue), n.callback.get(0).value && n.setColor(n.callback.get(0).value)), this }, n.updateValue = function (t) { this.value && this.value != n.color && n.setColor(this.value) }, n.setColor = function (t) { var e = n.unpack(t); return n.color != t && e && (n.color = t, n.rgb = e, n.hsl = n.RGBToHSL(n.rgb), n.updateDisplay()), this }, n.setHSL = function (t) { return n.hsl = t, n.rgb = n.HSLToRGB(t), n.color = n.pack(n.rgb), n.updateDisplay(), this }, n.widgetCoords = function (e) { var i, o, s = e.target || e.srcElement, a = n.wheel; if ("undefined" != typeof e.offsetX) { for (var r = { x: e.offsetX, y: e.offsetY }, l = s; l;)l.mouseX = r.x, l.mouseY = r.y, r.x += l.offsetLeft, r.y += l.offsetTop, l = l.offsetParent; for (var l = a, h = { x: 0, y: 0 }; l;) { if ("undefined" != typeof l.mouseX) { i = l.mouseX - h.x, o = l.mouseY - h.y; break } h.x += l.offsetLeft, h.y += l.offsetTop, l = l.offsetParent } for (l = s; l;)l.mouseX = void 0, l.mouseY = void 0, l = l.offsetParent } else { var r = n.absolutePosition(a); i = (e.pageX || 0 * (e.clientX + t("html").get(0).scrollLeft)) - r.x, o = (e.pageY || 0 * (e.clientY + t("html").get(0).scrollTop)) - r.y } return { x: i - n.width / 2, y: o - n.width / 2 } }, n.mousedown = function (e) { document.dragging || (t(document).bind("mousemove", n.mousemove).bind("mouseup", n.mouseup), document.dragging = !0); var i = n.widgetCoords(e); return n.circleDrag = 2 * Math.max(Math.abs(i.x), Math.abs(i.y)) > n.square, n.mousemove(e), !1 }, n.mousemove = function (t) { var e = n.widgetCoords(t); if (n.circleDrag) { var i = Math.atan2(e.x, -e.y) / 6.28; 0 > i && (i += 1), n.setHSL([i, n.hsl[1], n.hsl[2]]) } else { var o = Math.max(0, Math.min(1, -(e.x / n.square) + .5)), s = Math.max(0, Math.min(1, -(e.y / n.square) + .5)); n.setHSL([n.hsl[0], o, s]) } return !1 }, n.mouseup = function () { t(document).unbind("mousemove", n.mousemove), t(document).unbind("mouseup", n.mouseup), document.dragging = !1 }, n.updateDisplay = function () { var e = 6.28 * n.hsl[0]; t(".h-marker", o).css({ left: Math.round(Math.sin(e) * n.radius + n.width / 2) + "px", top: Math.round(-Math.cos(e) * n.radius + n.width / 2) + "px" }), t(".sl-marker", o).css({ left: Math.round(n.square * (.5 - n.hsl[1]) + n.width / 2) + "px", top: Math.round(n.square * (.5 - n.hsl[2]) + n.width / 2) + "px" }), t(".color", o).css("backgroundColor", n.pack(n.HSLToRGB([n.hsl[0], 1, .5]))), "object" == typeof n.callback ? (t(n.callback).css({ backgroundColor: n.color, color: n.hsl[2] > .5 ? "#000" : "#fff" }), t(n.callback).each(function () { this.value && this.value != n.color && (this.value = n.color) })) : "function" == typeof n.callback && n.callback.call(n, n.color) }, n.absolutePosition = function (t) { var e = { x: t.offsetLeft, y: t.offsetTop }; if (t.offsetParent) { var i = n.absolutePosition(t.offsetParent); e.x += i.x, e.y += i.y } return e }, n.pack = function (t) { var e = Math.round(255 * t[0]), i = Math.round(255 * t[1]), n = Math.round(255 * t[2]); return "#" + (16 > e ? "0" : "") + e.toString(16) + (16 > i ? "0" : "") + i.toString(16) + (16 > n ? "0" : "") + n.toString(16) }, n.unpack = function (t) { return 7 == t.length ? [parseInt("0x" + t.substring(1, 3)) / 255, parseInt("0x" + t.substring(3, 5)) / 255, parseInt("0x" + t.substring(5, 7)) / 255] : 4 == t.length ? [parseInt("0x" + t.substring(1, 2)) / 15, parseInt("0x" + t.substring(2, 3)) / 15, parseInt("0x" + t.substring(3, 4)) / 15] : void 0 }, n.HSLToRGB = function (t) { var e, i, n = t[0], o = t[1], s = t[2]; return i = .5 >= s ? s * (o + 1) : s + o - s * o, e = 2 * s - i, [this.hueToRGB(e, i, n + .33333), this.hueToRGB(e, i, n), this.hueToRGB(e, i, n - .33333)] }, n.hueToRGB = function (t, e, i) { return i = 0 > i ? i + 1 : i > 1 ? i - 1 : i, 1 > 6 * i ? t + (e - t) * i * 6 : 1 > 2 * i ? e : 2 > 3 * i ? t + (e - t) * (.66666 - i) * 6 : t }, n.RGBToHSL = function (t) { var e, i, n, o, s, a, r = t[0], l = t[1], h = t[2]; return e = Math.min(r, Math.min(l, h)), i = Math.max(r, Math.max(l, h)), n = i - e, a = (e + i) / 2, s = 0, a > 0 && 1 > a && (s = n / (.5 > a ? 2 * a : 2 - 2 * a)), o = 0, n > 0 && (i == r && i != l && (o += (l - h) / n), i == l && i != h && (o += 2 + (h - r) / n), i == h && i != r && (o += 4 + (r - l) / n), o /= 6), [o, s, a] }, t("*", o).mousedown(n.mousedown), n.setColor("#000000"), i && n.linkTo(i) } }).call(e, i(4), i(4)) }, function (t, e) { }, , , , , function (t, e, i) {
    var n, o, s; !function (a) { o = [i(4)], n = a, s = "function" == typeof n ? n.apply(e, o) : n, !(void 0 !== s && (t.exports = s)) }(function (t) {
        function e(e, n) { var o, s, a, r = e.nodeName.toLowerCase(); return "area" === r ? (o = e.parentNode, s = o.name, e.href && s && "map" === o.nodeName.toLowerCase() ? (a = t("img[usemap='#" + s + "']")[0], !!a && i(a)) : !1) : (/input|select|textarea|button|object/.test(r) ? !e.disabled : "a" === r ? e.href || n : n) && i(e) } function i(e) { return t.expr.filters.visible(e) && !t(e).parents().addBack().filter(function () { return "hidden" === t.css(this, "visibility") }).length } function n(t) { for (var e, i; t.length && t[0] !== document;) { if (e = t.css("position"), ("absolute" === e || "relative" === e || "fixed" === e) && (i = parseInt(t.css("zIndex"), 10), !isNaN(i) && 0 !== i)) return i; t = t.parent() } return 0 } function o() { this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = { closeText: "Done", prevText: "Prev", nextText: "Next", currentText: "Today", monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], weekHeader: "Wk", dateFormat: "mm/dd/yy", firstDay: 0, isRTL: !1, showMonthAfterYear: !1, yearSuffix: "" }, this._defaults = { showOn: "focus", showAnim: "fadeIn", showOptions: {}, defaultDate: null, appendText: "", buttonText: "...", buttonImage: "", buttonImageOnly: !1, hideIfNoPrevNext: !1, navigationAsDateFormat: !1, gotoCurrent: !1, changeMonth: !1, changeYear: !1, yearRange: "c-10:c+10", showOtherMonths: !1, selectOtherMonths: !1, showWeek: !1, calculateWeek: this.iso8601Week, shortYearCutoff: "+10", minDate: null, maxDate: null, duration: "fast", beforeShowDay: null, beforeShow: null, onSelect: null, onChangeMonthYear: null, onClose: null, numberOfMonths: 1, showCurrentAtPos: 0, stepMonths: 1, stepBigMonths: 12, altField: "", altFormat: "", constrainInput: !0, showButtonPanel: !1, autoSize: !1, disabled: !1 }, t.extend(this._defaults, this.regional[""]), this.regional.en = t.extend(!0, {}, this.regional[""]), this.regional["en-US"] = t.extend(!0, {}, this.regional.en), this.dpDiv = s(t("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) } function s(e) { var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a"; return e.delegate(i, "mouseout", function () { t(this).removeClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && t(this).removeClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && t(this).removeClass("ui-datepicker-next-hover") }).delegate(i, "mouseover", a) } function a() { t.datepicker._isDisabledDatepicker(v.inline ? v.dpDiv.parent()[0] : v.input[0]) || (t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), t(this).addClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && t(this).addClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && t(this).addClass("ui-datepicker-next-hover")) } function r(e, i) { t.extend(e, i); for (var n in i) null == i[n] && (e[n] = i[n]); return e } function l(t) { return function () { var e = this.element.val(); t.apply(this, arguments), this._refresh(), e !== this.element.val() && this._trigger("change") } } t.ui = t.ui || {}, t.extend(t.ui, { version: "1.11.1", keyCode: { BACKSPACE: 8, COMMA: 188, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, LEFT: 37, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SPACE: 32, TAB: 9, UP: 38 } }), t.fn.extend({ scrollParent: function (e) { var i = this.css("position"), n = "absolute" === i, o = e ? /(auto|scroll|hidden)/ : /(auto|scroll)/, s = this.parents().filter(function () { var e = t(this); return n && "static" === e.css("position") ? !1 : o.test(e.css("overflow") + e.css("overflow-y") + e.css("overflow-x")) }).eq(0); return "fixed" !== i && s.length ? s : t(this[0].ownerDocument || document) }, uniqueId: function () { var t = 0; return function () { return this.each(function () { this.id || (this.id = "ui-id-" + ++t) }) } }(), removeUniqueId: function () { return this.each(function () { /^ui-id-\d+$/.test(this.id) && t(this).removeAttr("id") }) } }), t.extend(t.expr[":"], { data: t.expr.createPseudo ? t.expr.createPseudo(function (e) { return function (i) { return !!t.data(i, e) } }) : function (e, i, n) { return !!t.data(e, n[3]) }, focusable: function (i) { return e(i, !isNaN(t.attr(i, "tabindex"))) }, tabbable: function (i) { var n = t.attr(i, "tabindex"), o = isNaN(n); return (o || n >= 0) && e(i, !o) } }), t("<a>").outerWidth(1).jquery || t.each(["Width", "Height"], function (e, i) { function n(e, i, n, s) { return t.each(o, function () { i -= parseFloat(t.css(e, "padding" + this)) || 0, n && (i -= parseFloat(t.css(e, "border" + this + "Width")) || 0), s && (i -= parseFloat(t.css(e, "margin" + this)) || 0) }), i } var o = "Width" === i ? ["Left", "Right"] : ["Top", "Bottom"], s = i.toLowerCase(), a = { innerWidth: t.fn.innerWidth, innerHeight: t.fn.innerHeight, outerWidth: t.fn.outerWidth, outerHeight: t.fn.outerHeight }; t.fn["inner" + i] = function (e) { return void 0 === e ? a["inner" + i].call(this) : this.each(function () { t(this).css(s, n(this, e) + "px") }) }, t.fn["outer" + i] = function (e, o) { return "number" != typeof e ? a["outer" + i].call(this, e) : this.each(function () { t(this).css(s, n(this, e, !0, o) + "px") }) } }), t.fn.addBack || (t.fn.addBack = function (t) { return this.add(null == t ? this.prevObject : this.prevObject.filter(t)) }), t("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (t.fn.removeData = function (e) { return function (i) { return arguments.length ? e.call(this, t.camelCase(i)) : e.call(this) } }(t.fn.removeData)), t.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), t.fn.extend({ focus: function (e) { return function (i, n) { return "number" == typeof i ? this.each(function () { var e = this; setTimeout(function () { t(e).focus(), n && n.call(e) }, i) }) : e.apply(this, arguments) } }(t.fn.focus), disableSelection: function () { var t = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown"; return function () { return this.bind(t + ".ui-disableSelection", function (t) { t.preventDefault() }) } }(), enableSelection: function () { return this.unbind(".ui-disableSelection") }, zIndex: function (e) { if (void 0 !== e) return this.css("zIndex", e); if (this.length) for (var i, n, o = t(this[0]); o.length && o[0] !== document;) { if (i = o.css("position"), ("absolute" === i || "relative" === i || "fixed" === i) && (n = parseInt(o.css("zIndex"), 10), !isNaN(n) && 0 !== n)) return n; o = o.parent() } return 0 } }), t.ui.plugin = { add: function (e, i, n) { var o, s = t.ui[e].prototype; for (o in n) s.plugins[o] = s.plugins[o] || [], s.plugins[o].push([i, n[o]]) }, call: function (t, e, i, n) { var o, s = t.plugins[e]; if (s && (n || t.element[0].parentNode && 11 !== t.element[0].parentNode.nodeType)) for (o = 0; o < s.length; o++)t.options[s[o][0]] && s[o][1].apply(t.element, i) } }; var h = 0, c = Array.prototype.slice; t.cleanData = function (e) { return function (i) { var n, o, s; for (s = 0; null != (o = i[s]); s++)try { n = t._data(o, "events"), n && n.remove && t(o).triggerHandler("remove") } catch (a) { } e(i) } }(t.cleanData), t.widget = function (e, i, n) { var o, s, a, r, l = {}, h = e.split(".")[0]; return e = e.split(".")[1], o = h + "-" + e, n || (n = i, i = t.Widget), t.expr[":"][o.toLowerCase()] = function (e) { return !!t.data(e, o) }, t[h] = t[h] || {}, s = t[h][e], a = t[h][e] = function (t, e) { return this._createWidget ? void (arguments.length && this._createWidget(t, e)) : new a(t, e) }, t.extend(a, s, { version: n.version, _proto: t.extend({}, n), _childConstructors: [] }), r = new i, r.options = t.widget.extend({}, r.options), t.each(n, function (e, n) { return t.isFunction(n) ? void (l[e] = function () { var t = function () { return i.prototype[e].apply(this, arguments) }, o = function (t) { return i.prototype[e].apply(this, t) }; return function () { var e, i = this._super, s = this._superApply; return this._super = t, this._superApply = o, e = n.apply(this, arguments), this._super = i, this._superApply = s, e } }()) : void (l[e] = n) }), a.prototype = t.widget.extend(r, { widgetEventPrefix: s ? r.widgetEventPrefix || e : e }, l, { constructor: a, namespace: h, widgetName: e, widgetFullName: o }), s ? (t.each(s._childConstructors, function (e, i) { var n = i.prototype; t.widget(n.namespace + "." + n.widgetName, a, i._proto) }), delete s._childConstructors) : i._childConstructors.push(a), t.widget.bridge(e, a), a }, t.widget.extend = function (e) { for (var i, n, o = c.call(arguments, 1), s = 0, a = o.length; a > s; s++)for (i in o[s]) n = o[s][i], o[s].hasOwnProperty(i) && void 0 !== n && (t.isPlainObject(n) ? e[i] = t.isPlainObject(e[i]) ? t.widget.extend({}, e[i], n) : t.widget.extend({}, n) : e[i] = n); return e }, t.widget.bridge = function (e, i) { var n = i.prototype.widgetFullName || e; t.fn[e] = function (o) { var s = "string" == typeof o, a = c.call(arguments, 1), r = this; return o = !s && a.length ? t.widget.extend.apply(null, [o].concat(a)) : o, s ? this.each(function () { var i, s = t.data(this, n); return "instance" === o ? (r = s, !1) : s ? t.isFunction(s[o]) && "_" !== o.charAt(0) ? (i = s[o].apply(s, a), i !== s && void 0 !== i ? (r = i && i.jquery ? r.pushStack(i.get()) : i, !1) : void 0) : t.error("no such method '" + o + "' for " + e + " widget instance") : t.error("cannot call methods on " + e + " prior to initialization; attempted to call method '" + o + "'") }) : this.each(function () { var e = t.data(this, n); e ? (e.option(o || {}), e._init && e._init()) : t.data(this, n, new i(o, this)) }), r } }, t.Widget = function () { }, t.Widget._childConstructors = [], t.Widget.prototype = { widgetName: "widget", widgetEventPrefix: "", defaultElement: "<div>", options: { disabled: !1, create: null }, _createWidget: function (e, i) { i = t(i || this.defaultElement || this)[0], this.element = t(i), this.uuid = h++ , this.eventNamespace = "." + this.widgetName + this.uuid, this.options = t.widget.extend({}, this.options, this._getCreateOptions(), e), this.bindings = t(), this.hoverable = t(), this.focusable = t(), i !== this && (t.data(i, this.widgetFullName, this), this._on(!0, this.element, { remove: function (t) { t.target === i && this.destroy() } }), this.document = t(i.style ? i.ownerDocument : i.document || i), this.window = t(this.document[0].defaultView || this.document[0].parentWindow)), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init() }, _getCreateOptions: t.noop, _getCreateEventData: t.noop, _create: t.noop, _init: t.noop, destroy: function () { this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus") }, _destroy: t.noop, widget: function () { return this.element }, option: function (e, i) { var n, o, s, a = e; if (0 === arguments.length) return t.widget.extend({}, this.options); if ("string" == typeof e) if (a = {}, n = e.split("."), e = n.shift(), n.length) { for (o = a[e] = t.widget.extend({}, this.options[e]), s = 0; s < n.length - 1; s++)o[n[s]] = o[n[s]] || {}, o = o[n[s]]; if (e = n.pop(), 1 === arguments.length) return void 0 === o[e] ? null : o[e]; o[e] = i } else { if (1 === arguments.length) return void 0 === this.options[e] ? null : this.options[e]; a[e] = i } return this._setOptions(a), this }, _setOptions: function (t) { var e; for (e in t) this._setOption(e, t[e]); return this }, _setOption: function (t, e) { return this.options[t] = e, "disabled" === t && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!e), e && (this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus"))), this }, enable: function () { return this._setOptions({ disabled: !1 }) }, disable: function () { return this._setOptions({ disabled: !0 }) }, _on: function (e, i, n) { var o, s = this; "boolean" != typeof e && (n = i, i = e, e = !1), n ? (i = o = t(i), this.bindings = this.bindings.add(i)) : (n = i, i = this.element, o = this.widget()), t.each(n, function (n, a) { function r() { return e || s.options.disabled !== !0 && !t(this).hasClass("ui-state-disabled") ? ("string" == typeof a ? s[a] : a).apply(s, arguments) : void 0 } "string" != typeof a && (r.guid = a.guid = a.guid || r.guid || t.guid++); var l = n.match(/^([\w:-]*)\s*(.*)$/), h = l[1] + s.eventNamespace, c = l[2]; c ? o.delegate(c, h, r) : i.bind(h, r) }) }, _off: function (t, e) { e = (e || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, t.unbind(e).undelegate(e) }, _delay: function (t, e) { function i() { return ("string" == typeof t ? n[t] : t).apply(n, arguments) } var n = this; return setTimeout(i, e || 0) }, _hoverable: function (e) { this.hoverable = this.hoverable.add(e), this._on(e, { mouseenter: function (e) { t(e.currentTarget).addClass("ui-state-hover") }, mouseleave: function (e) { t(e.currentTarget).removeClass("ui-state-hover") } }) }, _focusable: function (e) { this.focusable = this.focusable.add(e), this._on(e, { focusin: function (e) { t(e.currentTarget).addClass("ui-state-focus") }, focusout: function (e) { t(e.currentTarget).removeClass("ui-state-focus") } }) }, _trigger: function (e, i, n) { var o, s, a = this.options[e]; if (n = n || {}, i = t.Event(i), i.type = (e === this.widgetEventPrefix ? e : this.widgetEventPrefix + e).toLowerCase(), i.target = this.element[0], s = i.originalEvent) for (o in s) o in i || (i[o] = s[o]); return this.element.trigger(i, n), !(t.isFunction(a) && a.apply(this.element[0], [i].concat(n)) === !1 || i.isDefaultPrevented()) } }, t.each({ show: "fadeIn", hide: "fadeOut" }, function (e, i) { t.Widget.prototype["_" + e] = function (n, o, s) { "string" == typeof o && (o = { effect: o }); var a, r = o ? o === !0 || "number" == typeof o ? i : o.effect || i : e; o = o || {}, "number" == typeof o && (o = { duration: o }), a = !t.isEmptyObject(o), o.complete = s, o.delay && n.delay(o.delay), a && t.effects && t.effects.effect[r] ? n[e](o) : r !== e && n[r] ? n[r](o.duration, o.easing, s) : n.queue(function (i) { t(this)[e](), s && s.call(n[0]), i() }) } }); var u = (t.widget, !1); t(document).mouseup(function () { u = !1 }); t.widget("ui.mouse", { version: "1.11.1", options: { cancel: "input,textarea,button,select,option", distance: 1, delay: 0 }, _mouseInit: function () { var e = this; this.element.bind("mousedown." + this.widgetName, function (t) { return e._mouseDown(t) }).bind("click." + this.widgetName, function (i) { return !0 === t.data(i.target, e.widgetName + ".preventClickEvent") ? (t.removeData(i.target, e.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1) : void 0 }), this.started = !1 }, _mouseDestroy: function () { this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate) }, _mouseDown: function (e) { if (!u) { this._mouseStarted && this._mouseUp(e), this._mouseDownEvent = e; var i = this, n = 1 === e.which, o = "string" == typeof this.options.cancel && e.target.nodeName ? t(e.target).closest(this.options.cancel).length : !1; return n && !o && this._mouseCapture(e) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () { i.mouseDelayMet = !0 }, this.options.delay)), this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(e) !== !1, !this._mouseStarted) ? (e.preventDefault(), !0) : (!0 === t.data(e.target, this.widgetName + ".preventClickEvent") && t.removeData(e.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (t) { return i._mouseMove(t) }, this._mouseUpDelegate = function (t) { return i._mouseUp(t) }, this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), e.preventDefault(), u = !0, !0)) : !0 } }, _mouseMove: function (e) { return t.ui.ie && (!document.documentMode || document.documentMode < 9) && !e.button ? this._mouseUp(e) : e.which ? this._mouseStarted ? (this._mouseDrag(e), e.preventDefault()) : (this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, e) !== !1, this._mouseStarted ? this._mouseDrag(e) : this._mouseUp(e)), !this._mouseStarted) : this._mouseUp(e) }, _mouseUp: function (e) { return this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, e.target === this._mouseDownEvent.target && t.data(e.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(e)), u = !1, !1 }, _mouseDistanceMet: function (t) { return Math.max(Math.abs(this._mouseDownEvent.pageX - t.pageX), Math.abs(this._mouseDownEvent.pageY - t.pageY)) >= this.options.distance }, _mouseDelayMet: function () { return this.mouseDelayMet }, _mouseStart: function () { }, _mouseDrag: function () { }, _mouseStop: function () { }, _mouseCapture: function () { return !0 } }); !function () {
            function e(t, e, i) { return [parseFloat(t[0]) * (p.test(t[0]) ? e / 100 : 1), parseFloat(t[1]) * (p.test(t[1]) ? i / 100 : 1)] } function i(e, i) { return parseInt(t.css(e, i), 10) || 0 } function n(e) { var i = e[0]; return 9 === i.nodeType ? { width: e.width(), height: e.height(), offset: { top: 0, left: 0 } } : t.isWindow(i) ? { width: e.width(), height: e.height(), offset: { top: e.scrollTop(), left: e.scrollLeft() } } : i.preventDefault ? { width: 0, height: 0, offset: { top: i.pageY, left: i.pageX } } : { width: e.outerWidth(), height: e.outerHeight(), offset: e.offset() } } t.ui = t.ui || {}; var o, s, a = Math.max, r = Math.abs, l = Math.round, h = /left|center|right/, c = /top|center|bottom/, u = /[\+\-]\d+(\.[\d]+)?%?/, d = /^\w+/, p = /%$/, f = t.fn.position;
            t.position = { scrollbarWidth: function () { if (void 0 !== o) return o; var e, i, n = t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), s = n.children()[0]; return t("body").append(n), e = s.offsetWidth, n.css("overflow", "scroll"), i = s.offsetWidth, e === i && (i = n[0].clientWidth), n.remove(), o = e - i }, getScrollInfo: function (e) { var i = e.isWindow || e.isDocument ? "" : e.element.css("overflow-x"), n = e.isWindow || e.isDocument ? "" : e.element.css("overflow-y"), o = "scroll" === i || "auto" === i && e.width < e.element[0].scrollWidth, s = "scroll" === n || "auto" === n && e.height < e.element[0].scrollHeight; return { width: s ? t.position.scrollbarWidth() : 0, height: o ? t.position.scrollbarWidth() : 0 } }, getWithinInfo: function (e) { var i = t(e || window), n = t.isWindow(i[0]), o = !!i[0] && 9 === i[0].nodeType; return { element: i, isWindow: n, isDocument: o, offset: i.offset() || { left: 0, top: 0 }, scrollLeft: i.scrollLeft(), scrollTop: i.scrollTop(), width: n || o ? i.width() : i.outerWidth(), height: n || o ? i.height() : i.outerHeight() } } }, t.fn.position = function (o) { if (!o || !o.of) return f.apply(this, arguments); o = t.extend({}, o); var p, m, g, v, y, b, w = t(o.of), x = t.position.getWithinInfo(o.within), _ = t.position.getScrollInfo(x), C = (o.collision || "flip").split(" "), k = {}; return b = n(w), w[0].preventDefault && (o.at = "left top"), m = b.width, g = b.height, v = b.offset, y = t.extend({}, v), t.each(["my", "at"], function () { var t, e, i = (o[this] || "").split(" "); 1 === i.length && (i = h.test(i[0]) ? i.concat(["center"]) : c.test(i[0]) ? ["center"].concat(i) : ["center", "center"]), i[0] = h.test(i[0]) ? i[0] : "center", i[1] = c.test(i[1]) ? i[1] : "center", t = u.exec(i[0]), e = u.exec(i[1]), k[this] = [t ? t[0] : 0, e ? e[0] : 0], o[this] = [d.exec(i[0])[0], d.exec(i[1])[0]] }), 1 === C.length && (C[1] = C[0]), "right" === o.at[0] ? y.left += m : "center" === o.at[0] && (y.left += m / 2), "bottom" === o.at[1] ? y.top += g : "center" === o.at[1] && (y.top += g / 2), p = e(k.at, m, g), y.left += p[0], y.top += p[1], this.each(function () { var n, h, c = t(this), u = c.outerWidth(), d = c.outerHeight(), f = i(this, "marginLeft"), b = i(this, "marginTop"), T = u + f + i(this, "marginRight") + _.width, P = d + b + i(this, "marginBottom") + _.height, S = t.extend({}, y), M = e(k.my, c.outerWidth(), c.outerHeight()); "right" === o.my[0] ? S.left -= u : "center" === o.my[0] && (S.left -= u / 2), "bottom" === o.my[1] ? S.top -= d : "center" === o.my[1] && (S.top -= d / 2), S.left += M[0], S.top += M[1], s || (S.left = l(S.left), S.top = l(S.top)), n = { marginLeft: f, marginTop: b }, t.each(["left", "top"], function (e, i) { t.ui.position[C[e]] && t.ui.position[C[e]][i](S, { targetWidth: m, targetHeight: g, elemWidth: u, elemHeight: d, collisionPosition: n, collisionWidth: T, collisionHeight: P, offset: [p[0] + M[0], p[1] + M[1]], my: o.my, at: o.at, within: x, elem: c }) }), o.using && (h = function (t) { var e = v.left - S.left, i = e + m - u, n = v.top - S.top, s = n + g - d, l = { target: { element: w, left: v.left, top: v.top, width: m, height: g }, element: { element: c, left: S.left, top: S.top, width: u, height: d }, horizontal: 0 > i ? "left" : e > 0 ? "right" : "center", vertical: 0 > s ? "top" : n > 0 ? "bottom" : "middle" }; u > m && r(e + i) < m && (l.horizontal = "center"), d > g && r(n + s) < g && (l.vertical = "middle"), a(r(e), r(i)) > a(r(n), r(s)) ? l.important = "horizontal" : l.important = "vertical", o.using.call(this, t, l) }), c.offset(t.extend(S, { using: h })) }) }, t.ui.position = { fit: { left: function (t, e) { var i, n = e.within, o = n.isWindow ? n.scrollLeft : n.offset.left, s = n.width, r = t.left - e.collisionPosition.marginLeft, l = o - r, h = r + e.collisionWidth - s - o; e.collisionWidth > s ? l > 0 && 0 >= h ? (i = t.left + l + e.collisionWidth - s - o, t.left += l - i) : h > 0 && 0 >= l ? t.left = o : l > h ? t.left = o + s - e.collisionWidth : t.left = o : l > 0 ? t.left += l : h > 0 ? t.left -= h : t.left = a(t.left - r, t.left) }, top: function (t, e) { var i, n = e.within, o = n.isWindow ? n.scrollTop : n.offset.top, s = e.within.height, r = t.top - e.collisionPosition.marginTop, l = o - r, h = r + e.collisionHeight - s - o; e.collisionHeight > s ? l > 0 && 0 >= h ? (i = t.top + l + e.collisionHeight - s - o, t.top += l - i) : h > 0 && 0 >= l ? t.top = o : l > h ? t.top = o + s - e.collisionHeight : t.top = o : l > 0 ? t.top += l : h > 0 ? t.top -= h : t.top = a(t.top - r, t.top) } }, flip: { left: function (t, e) { var i, n, o = e.within, s = o.offset.left + o.scrollLeft, a = o.width, l = o.isWindow ? o.scrollLeft : o.offset.left, h = t.left - e.collisionPosition.marginLeft, c = h - l, u = h + e.collisionWidth - a - l, d = "left" === e.my[0] ? -e.elemWidth : "right" === e.my[0] ? e.elemWidth : 0, p = "left" === e.at[0] ? e.targetWidth : "right" === e.at[0] ? -e.targetWidth : 0, f = -2 * e.offset[0]; 0 > c ? (i = t.left + d + p + f + e.collisionWidth - a - s, (0 > i || i < r(c)) && (t.left += d + p + f)) : u > 0 && (n = t.left - e.collisionPosition.marginLeft + d + p + f - l, (n > 0 || r(n) < u) && (t.left += d + p + f)) }, top: function (t, e) { var i, n, o = e.within, s = o.offset.top + o.scrollTop, a = o.height, l = o.isWindow ? o.scrollTop : o.offset.top, h = t.top - e.collisionPosition.marginTop, c = h - l, u = h + e.collisionHeight - a - l, d = "top" === e.my[1], p = d ? -e.elemHeight : "bottom" === e.my[1] ? e.elemHeight : 0, f = "top" === e.at[1] ? e.targetHeight : "bottom" === e.at[1] ? -e.targetHeight : 0, m = -2 * e.offset[1]; 0 > c ? (n = t.top + p + f + m + e.collisionHeight - a - s, t.top + p + f + m > c && (0 > n || n < r(c)) && (t.top += p + f + m)) : u > 0 && (i = t.top - e.collisionPosition.marginTop + p + f + m - l, t.top + p + f + m > u && (i > 0 || r(i) < u) && (t.top += p + f + m)) } }, flipfit: { left: function () { t.ui.position.flip.left.apply(this, arguments), t.ui.position.fit.left.apply(this, arguments) }, top: function () { t.ui.position.flip.top.apply(this, arguments), t.ui.position.fit.top.apply(this, arguments) } } }, function () { var e, i, n, o, a, r = document.getElementsByTagName("body")[0], l = document.createElement("div"); e = document.createElement(r ? "div" : "body"), n = { visibility: "hidden", width: 0, height: 0, border: 0, margin: 0, background: "none" }, r && t.extend(n, { position: "absolute", left: "-1000px", top: "-1000px" }); for (a in n) e.style[a] = n[a]; e.appendChild(l), i = r || document.documentElement, i.insertBefore(e, i.firstChild), l.style.cssText = "position: absolute; left: 10.7432222px;", o = t(l).offset().left, s = o > 10 && 11 > o, e.innerHTML = "", i.removeChild(e) }()
        }(); t.ui.position; t.widget("ui.draggable", t.ui.mouse, { version: "1.11.1", widgetEventPrefix: "drag", options: { addClasses: !0, appendTo: "parent", axis: !1, connectToSortable: !1, containment: !1, cursor: "auto", cursorAt: !1, grid: !1, handle: !1, helper: "original", iframeFix: !1, opacity: !1, refreshPositions: !1, revert: !1, revertDuration: 500, scope: "default", scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, snap: !1, snapMode: "both", snapTolerance: 20, stack: !1, zIndex: !1, drag: null, start: null, stop: null }, _create: function () { "original" !== this.options.helper || /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative"), this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._setHandleClassName(), this._mouseInit() }, _setOption: function (t, e) { this._super(t, e), "handle" === t && (this._removeHandleClassName(), this._setHandleClassName()) }, _destroy: function () { return (this.helper || this.element).is(".ui-draggable-dragging") ? void (this.destroyOnClear = !0) : (this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), this._removeHandleClassName(), void this._mouseDestroy()) }, _mouseCapture: function (e) { var i = this.document[0], n = this.options; try { i.activeElement && "body" !== i.activeElement.nodeName.toLowerCase() && t(i.activeElement).blur() } catch (o) { } return this.helper || n.disabled || t(e.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(e), this.handle ? (t(n.iframeFix === !0 ? "iframe" : n.iframeFix).each(function () { t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({ width: this.offsetWidth + "px", height: this.offsetHeight + "px", position: "absolute", opacity: "0.001", zIndex: 1e3 }).css(t(this).offset()).appendTo("body") }), !0) : !1) }, _mouseStart: function (e) { var i = this.options; return this.helper = this._createHelper(e), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), t.ui.ddmanager && (t.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), this.offsetParent = this.helper.offsetParent(), this.offsetParentCssPosition = this.offsetParent.css("position"), this.offset = this.positionAbs = this.element.offset(), this.offset = { top: this.offset.top - this.margins.top, left: this.offset.left - this.margins.left }, this.offset.scroll = !1, t.extend(this.offset, { click: { left: e.pageX - this.offset.left, top: e.pageY - this.offset.top }, parent: this._getParentOffset(), relative: this._getRelativeOffset() }), this.originalPosition = this.position = this._generatePosition(e, !1), this.originalPageX = e.pageX, this.originalPageY = e.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this._setContainment(), this._trigger("start", e) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), t.ui.ddmanager && !i.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e), this._mouseDrag(e, !0), t.ui.ddmanager && t.ui.ddmanager.dragStart(this, e), !0) }, _mouseDrag: function (e, i) { if ("fixed" === this.offsetParentCssPosition && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(e, !0), this.positionAbs = this._convertPositionTo("absolute"), !i) { var n = this._uiHash(); if (this._trigger("drag", e, n) === !1) return this._mouseUp({}), !1; this.position = n.position } return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", t.ui.ddmanager && t.ui.ddmanager.drag(this, e), !1 }, _mouseStop: function (e) { var i = this, n = !1; return t.ui.ddmanager && !this.options.dropBehaviour && (n = t.ui.ddmanager.drop(this, e)), this.dropped && (n = this.dropped, this.dropped = !1), "invalid" === this.options.revert && !n || "valid" === this.options.revert && n || this.options.revert === !0 || t.isFunction(this.options.revert) && this.options.revert.call(this.element, n) ? t(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () { i._trigger("stop", e) !== !1 && i._clear() }) : this._trigger("stop", e) !== !1 && this._clear(), !1 }, _mouseUp: function (e) { return t("div.ui-draggable-iframeFix").each(function () { this.parentNode.removeChild(this) }), t.ui.ddmanager && t.ui.ddmanager.dragStop(this, e), this.element.focus(), t.ui.mouse.prototype._mouseUp.call(this, e) }, cancel: function () { return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this }, _getHandle: function (e) { return this.options.handle ? !!t(e.target).closest(this.element.find(this.options.handle)).length : !0 }, _setHandleClassName: function () { this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element, this.handleElement.addClass("ui-draggable-handle") }, _removeHandleClassName: function () { this.handleElement.removeClass("ui-draggable-handle") }, _createHelper: function (e) { var i = this.options, n = t.isFunction(i.helper) ? t(i.helper.apply(this.element[0], [e])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element; return n.parents("body").length || n.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo), n[0] === this.element[0] || /(fixed|absolute)/.test(n.css("position")) || n.css("position", "absolute"), n }, _adjustOffsetFromHelper: function (e) { "string" == typeof e && (e = e.split(" ")), t.isArray(e) && (e = { left: +e[0], top: +e[1] || 0 }), "left" in e && (this.offset.click.left = e.left + this.margins.left), "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left), "top" in e && (this.offset.click.top = e.top + this.margins.top), "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top) }, _isRootNode: function (t) { return /(html|body)/i.test(t.tagName) || t === this.document[0] }, _getParentOffset: function () { var e = this.offsetParent.offset(), i = this.document[0]; return "absolute" === this.cssPosition && this.scrollParent[0] !== i && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(), e.top += this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (e = { top: 0, left: 0 }), { top: e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) } }, _getRelativeOffset: function () { if ("relative" !== this.cssPosition) return { top: 0, left: 0 }; var t = this.element.position(), e = this._isRootNode(this.scrollParent[0]); return { top: t.top - (parseInt(this.helper.css("top"), 10) || 0) + (e ? 0 : this.scrollParent.scrollTop()), left: t.left - (parseInt(this.helper.css("left"), 10) || 0) + (e ? 0 : this.scrollParent.scrollLeft()) } }, _cacheMargins: function () { this.margins = { left: parseInt(this.element.css("marginLeft"), 10) || 0, top: parseInt(this.element.css("marginTop"), 10) || 0, right: parseInt(this.element.css("marginRight"), 10) || 0, bottom: parseInt(this.element.css("marginBottom"), 10) || 0 } }, _cacheHelperProportions: function () { this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() } }, _setContainment: function () { var e, i, n, o = this.options, s = this.document[0]; return this.relativeContainer = null, o.containment ? "window" === o.containment ? void (this.containment = [t(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, t(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, t(window).scrollLeft() + t(window).width() - this.helperProportions.width - this.margins.left, t(window).scrollTop() + (t(window).height() || s.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]) : "document" === o.containment ? void (this.containment = [0, 0, t(s).width() - this.helperProportions.width - this.margins.left, (t(s).height() || s.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]) : o.containment.constructor === Array ? void (this.containment = o.containment) : ("parent" === o.containment && (o.containment = this.helper[0].parentNode), i = t(o.containment), n = i[0], void (n && (e = "hidden" !== i.css("overflow"), this.containment = [(parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (e ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (e ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relativeContainer = i))) : void (this.containment = null) }, _convertPositionTo: function (t, e) { e || (e = this.position); var i = "absolute" === t ? 1 : -1, n = this._isRootNode(this.scrollParent[0]); return { top: e.top + this.offset.relative.top * i + this.offset.parent.top * i - ("fixed" === this.cssPosition ? -this.offset.scroll.top : n ? 0 : this.offset.scroll.top) * i, left: e.left + this.offset.relative.left * i + this.offset.parent.left * i - ("fixed" === this.cssPosition ? -this.offset.scroll.left : n ? 0 : this.offset.scroll.left) * i } }, _generatePosition: function (t, e) { var i, n, o, s, a = this.options, r = this._isRootNode(this.scrollParent[0]), l = t.pageX, h = t.pageY; return r && this.offset.scroll || (this.offset.scroll = { top: this.scrollParent.scrollTop(), left: this.scrollParent.scrollLeft() }), e && (this.containment && (this.relativeContainer ? (n = this.relativeContainer.offset(), i = [this.containment[0] + n.left, this.containment[1] + n.top, this.containment[2] + n.left, this.containment[3] + n.top]) : i = this.containment, t.pageX - this.offset.click.left < i[0] && (l = i[0] + this.offset.click.left), t.pageY - this.offset.click.top < i[1] && (h = i[1] + this.offset.click.top), t.pageX - this.offset.click.left > i[2] && (l = i[2] + this.offset.click.left), t.pageY - this.offset.click.top > i[3] && (h = i[3] + this.offset.click.top)), a.grid && (o = a.grid[1] ? this.originalPageY + Math.round((h - this.originalPageY) / a.grid[1]) * a.grid[1] : this.originalPageY, h = i ? o - this.offset.click.top >= i[1] || o - this.offset.click.top > i[3] ? o : o - this.offset.click.top >= i[1] ? o - a.grid[1] : o + a.grid[1] : o, s = a.grid[0] ? this.originalPageX + Math.round((l - this.originalPageX) / a.grid[0]) * a.grid[0] : this.originalPageX, l = i ? s - this.offset.click.left >= i[0] || s - this.offset.click.left > i[2] ? s : s - this.offset.click.left >= i[0] ? s - a.grid[0] : s + a.grid[0] : s), "y" === a.axis && (l = this.originalPageX), "x" === a.axis && (h = this.originalPageY)), { top: h - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top), left: l - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left) } }, _clear: function () { this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1, this.destroyOnClear && this.destroy() }, _trigger: function (e, i, n) { return n = n || this._uiHash(), t.ui.plugin.call(this, e, [i, n, this], !0), "drag" === e && (this.positionAbs = this._convertPositionTo("absolute")), t.Widget.prototype._trigger.call(this, e, i, n) }, plugins: {}, _uiHash: function () { return { helper: this.helper, position: this.position, originalPosition: this.originalPosition, offset: this.positionAbs } } }), t.ui.plugin.add("draggable", "connectToSortable", { start: function (e, i, n) { var o = n.options, s = t.extend({}, i, { item: n.element }); n.sortables = [], t(o.connectToSortable).each(function () { var i = t(this).sortable("instance"); i && !i.options.disabled && (n.sortables.push({ instance: i, shouldRevert: i.options.revert }), i.refreshPositions(), i._trigger("activate", e, s)) }) }, stop: function (e, i, n) { var o = t.extend({}, i, { item: n.element }); t.each(n.sortables, function () { this.instance.isOver ? (this.instance.isOver = 0, n.cancelHelperRemoval = !0, this.instance.cancelHelperRemoval = !1, this.shouldRevert && (this.instance.options.revert = this.shouldRevert), this.instance._mouseStop(e), this.instance.options.helper = this.instance.options._helper, "original" === n.options.helper && this.instance.currentItem.css({ top: "auto", left: "auto" })) : (this.instance.cancelHelperRemoval = !1, this.instance._trigger("deactivate", e, o)) }) }, drag: function (e, i, n) { var o = this; t.each(n.sortables, function () { var s = !1, a = this; this.instance.positionAbs = n.positionAbs, this.instance.helperProportions = n.helperProportions, this.instance.offset.click = n.offset.click, this.instance._intersectsWith(this.instance.containerCache) && (s = !0, t.each(n.sortables, function () { return this.instance.positionAbs = n.positionAbs, this.instance.helperProportions = n.helperProportions, this.instance.offset.click = n.offset.click, this !== a && this.instance._intersectsWith(this.instance.containerCache) && t.contains(a.instance.element[0], this.instance.element[0]) && (s = !1), s })), s ? (this.instance.isOver || (this.instance.isOver = 1, this.instance.currentItem = t(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", !0), this.instance.options._helper = this.instance.options.helper, this.instance.options.helper = function () { return i.helper[0] }, e.target = this.instance.currentItem[0], this.instance._mouseCapture(e, !0), this.instance._mouseStart(e, !0, !0), this.instance.offset.click.top = n.offset.click.top, this.instance.offset.click.left = n.offset.click.left, this.instance.offset.parent.left -= n.offset.parent.left - this.instance.offset.parent.left, this.instance.offset.parent.top -= n.offset.parent.top - this.instance.offset.parent.top, n._trigger("toSortable", e), n.dropped = this.instance.element, n.currentItem = n.element, this.instance.fromOutside = n), this.instance.currentItem && this.instance._mouseDrag(e)) : this.instance.isOver && (this.instance.isOver = 0, this.instance.cancelHelperRemoval = !0, this.instance.options.revert = !1, this.instance._trigger("out", e, this.instance._uiHash(this.instance)), this.instance._mouseStop(e, !0), this.instance.options.helper = this.instance.options._helper, this.instance.currentItem.remove(), this.instance.placeholder && this.instance.placeholder.remove(), n._trigger("fromSortable", e), n.dropped = !1) }) } }), t.ui.plugin.add("draggable", "cursor", { start: function (e, i, n) { var o = t("body"), s = n.options; o.css("cursor") && (s._cursor = o.css("cursor")), o.css("cursor", s.cursor) }, stop: function (e, i, n) { var o = n.options; o._cursor && t("body").css("cursor", o._cursor) } }), t.ui.plugin.add("draggable", "opacity", { start: function (e, i, n) { var o = t(i.helper), s = n.options; o.css("opacity") && (s._opacity = o.css("opacity")), o.css("opacity", s.opacity) }, stop: function (e, i, n) { var o = n.options; o._opacity && t(i.helper).css("opacity", o._opacity) } }), t.ui.plugin.add("draggable", "scroll", { start: function (t, e, i) { i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)), i.scrollParentNotHidden[0] !== i.document[0] && "HTML" !== i.scrollParentNotHidden[0].tagName && (i.overflowOffset = i.scrollParentNotHidden.offset()) }, drag: function (e, i, n) { var o = n.options, s = !1, a = n.scrollParentNotHidden[0], r = n.document[0]; a !== r && "HTML" !== a.tagName ? (o.axis && "x" === o.axis || (n.overflowOffset.top + a.offsetHeight - e.pageY < o.scrollSensitivity ? a.scrollTop = s = a.scrollTop + o.scrollSpeed : e.pageY - n.overflowOffset.top < o.scrollSensitivity && (a.scrollTop = s = a.scrollTop - o.scrollSpeed)), o.axis && "y" === o.axis || (n.overflowOffset.left + a.offsetWidth - e.pageX < o.scrollSensitivity ? a.scrollLeft = s = a.scrollLeft + o.scrollSpeed : e.pageX - n.overflowOffset.left < o.scrollSensitivity && (a.scrollLeft = s = a.scrollLeft - o.scrollSpeed))) : (o.axis && "x" === o.axis || (e.pageY - t(r).scrollTop() < o.scrollSensitivity ? s = t(r).scrollTop(t(r).scrollTop() - o.scrollSpeed) : t(window).height() - (e.pageY - t(r).scrollTop()) < o.scrollSensitivity && (s = t(r).scrollTop(t(r).scrollTop() + o.scrollSpeed))), o.axis && "y" === o.axis || (e.pageX - t(r).scrollLeft() < o.scrollSensitivity ? s = t(r).scrollLeft(t(r).scrollLeft() - o.scrollSpeed) : t(window).width() - (e.pageX - t(r).scrollLeft()) < o.scrollSensitivity && (s = t(r).scrollLeft(t(r).scrollLeft() + o.scrollSpeed)))), s !== !1 && t.ui.ddmanager && !o.dropBehaviour && t.ui.ddmanager.prepareOffsets(n, e) } }), t.ui.plugin.add("draggable", "snap", { start: function (e, i, n) { var o = n.options; n.snapElements = [], t(o.snap.constructor !== String ? o.snap.items || ":data(ui-draggable)" : o.snap).each(function () { var e = t(this), i = e.offset(); this !== n.element[0] && n.snapElements.push({ item: this, width: e.outerWidth(), height: e.outerHeight(), top: i.top, left: i.left }) }) }, drag: function (e, i, n) { var o, s, a, r, l, h, c, u, d, p, f = n.options, m = f.snapTolerance, g = i.offset.left, v = g + n.helperProportions.width, y = i.offset.top, b = y + n.helperProportions.height; for (d = n.snapElements.length - 1; d >= 0; d--)l = n.snapElements[d].left, h = l + n.snapElements[d].width, c = n.snapElements[d].top, u = c + n.snapElements[d].height, l - m > v || g > h + m || c - m > b || y > u + m || !t.contains(n.snapElements[d].item.ownerDocument, n.snapElements[d].item) ? (n.snapElements[d].snapping && n.options.snap.release && n.options.snap.release.call(n.element, e, t.extend(n._uiHash(), { snapItem: n.snapElements[d].item })), n.snapElements[d].snapping = !1) : ("inner" !== f.snapMode && (o = Math.abs(c - b) <= m, s = Math.abs(u - y) <= m, a = Math.abs(l - v) <= m, r = Math.abs(h - g) <= m, o && (i.position.top = n._convertPositionTo("relative", { top: c - n.helperProportions.height, left: 0 }).top - n.margins.top), s && (i.position.top = n._convertPositionTo("relative", { top: u, left: 0 }).top - n.margins.top), a && (i.position.left = n._convertPositionTo("relative", { top: 0, left: l - n.helperProportions.width }).left - n.margins.left), r && (i.position.left = n._convertPositionTo("relative", { top: 0, left: h }).left - n.margins.left)), p = o || s || a || r, "outer" !== f.snapMode && (o = Math.abs(c - y) <= m, s = Math.abs(u - b) <= m, a = Math.abs(l - g) <= m, r = Math.abs(h - v) <= m, o && (i.position.top = n._convertPositionTo("relative", { top: c, left: 0 }).top - n.margins.top), s && (i.position.top = n._convertPositionTo("relative", { top: u - n.helperProportions.height, left: 0 }).top - n.margins.top), a && (i.position.left = n._convertPositionTo("relative", { top: 0, left: l }).left - n.margins.left), r && (i.position.left = n._convertPositionTo("relative", { top: 0, left: h - n.helperProportions.width }).left - n.margins.left)), !n.snapElements[d].snapping && (o || s || a || r || p) && n.options.snap.snap && n.options.snap.snap.call(n.element, e, t.extend(n._uiHash(), { snapItem: n.snapElements[d].item })), n.snapElements[d].snapping = o || s || a || r || p) } }), t.ui.plugin.add("draggable", "stack", { start: function (e, i, n) { var o, s = n.options, a = t.makeArray(t(s.stack)).sort(function (e, i) { return (parseInt(t(e).css("zIndex"), 10) || 0) - (parseInt(t(i).css("zIndex"), 10) || 0) }); a.length && (o = parseInt(t(a[0]).css("zIndex"), 10) || 0, t(a).each(function (e) { t(this).css("zIndex", o + e) }), this.css("zIndex", o + a.length)) } }), t.ui.plugin.add("draggable", "zIndex", { start: function (e, i, n) { var o = t(i.helper), s = n.options; o.css("zIndex") && (s._zIndex = o.css("zIndex")), o.css("zIndex", s.zIndex) }, stop: function (e, i, n) { var o = n.options; o._zIndex && t(i.helper).css("zIndex", o._zIndex) } }); t.ui.draggable; t.widget("ui.droppable", { version: "1.11.1", widgetEventPrefix: "drop", options: { accept: "*", activeClass: !1, addClasses: !0, greedy: !1, hoverClass: !1, scope: "default", tolerance: "intersect", activate: null, deactivate: null, drop: null, out: null, over: null }, _create: function () { var e, i = this.options, n = i.accept; this.isover = !1, this.isout = !0, this.accept = t.isFunction(n) ? n : function (t) { return t.is(n) }, this.proportions = function () { return arguments.length ? void (e = arguments[0]) : e ? e : e = { width: this.element[0].offsetWidth, height: this.element[0].offsetHeight } }, this._addToManager(i.scope), i.addClasses && this.element.addClass("ui-droppable") }, _addToManager: function (e) { t.ui.ddmanager.droppables[e] = t.ui.ddmanager.droppables[e] || [], t.ui.ddmanager.droppables[e].push(this) }, _splice: function (t) { for (var e = 0; e < t.length; e++)t[e] === this && t.splice(e, 1) }, _destroy: function () { var e = t.ui.ddmanager.droppables[this.options.scope]; this._splice(e), this.element.removeClass("ui-droppable ui-droppable-disabled") }, _setOption: function (e, i) { if ("accept" === e) this.accept = t.isFunction(i) ? i : function (t) { return t.is(i) }; else if ("scope" === e) { var n = t.ui.ddmanager.droppables[this.options.scope]; this._splice(n), this._addToManager(i) } this._super(e, i) }, _activate: function (e) { var i = t.ui.ddmanager.current; this.options.activeClass && this.element.addClass(this.options.activeClass), i && this._trigger("activate", e, this.ui(i)) }, _deactivate: function (e) { var i = t.ui.ddmanager.current; this.options.activeClass && this.element.removeClass(this.options.activeClass), i && this._trigger("deactivate", e, this.ui(i)) }, _over: function (e) { var i = t.ui.ddmanager.current; i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", e, this.ui(i))) }, _out: function (e) { var i = t.ui.ddmanager.current; i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("out", e, this.ui(i))) }, _drop: function (e, i) { var n = i || t.ui.ddmanager.current, o = !1; return n && (n.currentItem || n.element)[0] !== this.element[0] ? (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function () { var i = t(this).droppable("instance"); return i.options.greedy && !i.options.disabled && i.options.scope === n.options.scope && i.accept.call(i.element[0], n.currentItem || n.element) && t.ui.intersect(n, t.extend(i, { offset: i.element.offset() }), i.options.tolerance, e) ? (o = !0, !1) : void 0 }), o ? !1 : this.accept.call(this.element[0], n.currentItem || n.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", e, this.ui(n)), this.element) : !1) : !1 }, ui: function (t) { return { draggable: t.currentItem || t.element, helper: t.helper, position: t.position, offset: t.positionAbs } } }), t.ui.intersect = function () { function t(t, e, i) { return t >= e && e + i > t } return function (e, i, n, o) { if (!i.offset) return !1; var s = (e.positionAbs || e.position.absolute).left, a = (e.positionAbs || e.position.absolute).top, r = s + e.helperProportions.width, l = a + e.helperProportions.height, h = i.offset.left, c = i.offset.top, u = h + i.proportions().width, d = c + i.proportions().height; switch (n) { case "fit": return s >= h && u >= r && a >= c && d >= l; case "intersect": return h < s + e.helperProportions.width / 2 && r - e.helperProportions.width / 2 < u && c < a + e.helperProportions.height / 2 && l - e.helperProportions.height / 2 < d; case "pointer": return t(o.pageY, c, i.proportions().height) && t(o.pageX, h, i.proportions().width); case "touch": return (a >= c && d >= a || l >= c && d >= l || c > a && l > d) && (s >= h && u >= s || r >= h && u >= r || h > s && r > u); default: return !1 } } }(), t.ui.ddmanager = { current: null, droppables: { "default": [] }, prepareOffsets: function (e, i) { var n, o, s = t.ui.ddmanager.droppables[e.options.scope] || [], a = i ? i.type : null, r = (e.currentItem || e.element).find(":data(ui-droppable)").addBack(); t: for (n = 0; n < s.length; n++)if (!(s[n].options.disabled || e && !s[n].accept.call(s[n].element[0], e.currentItem || e.element))) { for (o = 0; o < r.length; o++)if (r[o] === s[n].element[0]) { s[n].proportions().height = 0; continue t } s[n].visible = "none" !== s[n].element.css("display"), s[n].visible && ("mousedown" === a && s[n]._activate.call(s[n], i), s[n].offset = s[n].element.offset(), s[n].proportions({ width: s[n].element[0].offsetWidth, height: s[n].element[0].offsetHeight })) } }, drop: function (e, i) { var n = !1; return t.each((t.ui.ddmanager.droppables[e.options.scope] || []).slice(), function () { this.options && (!this.options.disabled && this.visible && t.ui.intersect(e, this, this.options.tolerance, i) && (n = this._drop.call(this, i) || n), !this.options.disabled && this.visible && this.accept.call(this.element[0], e.currentItem || e.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, i))) }), n }, dragStart: function (e, i) { e.element.parentsUntil("body").bind("scroll.droppable", function () { e.options.refreshPositions || t.ui.ddmanager.prepareOffsets(e, i) }) }, drag: function (e, i) { e.options.refreshPositions && t.ui.ddmanager.prepareOffsets(e, i), t.each(t.ui.ddmanager.droppables[e.options.scope] || [], function () { if (!this.options.disabled && !this.greedyChild && this.visible) { var n, o, s, a = t.ui.intersect(e, this, this.options.tolerance, i), r = !a && this.isover ? "isout" : a && !this.isover ? "isover" : null; r && (this.options.greedy && (o = this.options.scope, s = this.element.parents(":data(ui-droppable)").filter(function () { return t(this).droppable("instance").options.scope === o }), s.length && (n = t(s[0]).droppable("instance"), n.greedyChild = "isover" === r)), n && "isover" === r && (n.isover = !1, n.isout = !0, n._out.call(n, i)), this[r] = !0, this["isout" === r ? "isover" : "isout"] = !1, this["isover" === r ? "_over" : "_out"].call(this, i), n && "isout" === r && (n.isout = !1, n.isover = !0, n._over.call(n, i))) } }) }, dragStop: function (e, i) { e.element.parentsUntil("body").unbind("scroll.droppable"), e.options.refreshPositions || t.ui.ddmanager.prepareOffsets(e, i) } }; t.ui.droppable; t.widget("ui.resizable", t.ui.mouse, {
            version: "1.11.1", widgetEventPrefix: "resize", options: { alsoResize: !1, animate: !1, animateDuration: "slow", animateEasing: "swing", aspectRatio: !1, autoHide: !1, containment: !1, ghost: !1, grid: !1, handles: "e,s,se", helper: !1, maxHeight: null, maxWidth: null, minHeight: 10, minWidth: 10, zIndex: 90, resize: null, start: null, stop: null }, _num: function (t) { return parseInt(t, 10) || 0 }, _isNumber: function (t) { return !isNaN(parseInt(t, 10)) }, _hasScroll: function (e, i) { if ("hidden" === t(e).css("overflow")) return !1; var n = i && "left" === i ? "scrollLeft" : "scrollTop", o = !1; return e[n] > 0 ? !0 : (e[n] = 1, o = e[n] > 0, e[n] = 0, o) }, _create: function () {
                var e, i, n, o, s, a = this, r = this.options; if (this.element.addClass("ui-resizable"), t.extend(this, { _aspectRatio: !!r.aspectRatio, aspectRatio: r.aspectRatio, originalElement: this.element, _proportionallyResizeElements: [], _helper: r.helper || r.ghost || r.animate ? r.helper || "ui-resizable-helper" : null }), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({ position: this.element.css("position"), width: this.element.outerWidth(), height: this.element.outerHeight(), top: this.element.css("top"), left: this.element.css("left") })), this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance")), this.elementIsWrapper = !0, this.element.css({ marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom") }), this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0 }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" })), this.originalElement.css({ margin: this.originalElement.css("margin") }), this._proportionallyResize()), this.handles = r.handles || (t(".ui-resizable-handle", this.element).length ? { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw" } : "e,s,se"), this.handles.constructor === String) for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"),
                    e = this.handles.split(","), this.handles = {}, i = 0; i < e.length; i++)n = t.trim(e[i]), s = "ui-resizable-" + n, o = t("<div class='ui-resizable-handle " + s + "'></div>"), o.css({ zIndex: r.zIndex }), "se" === n && o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[n] = ".ui-resizable-" + n, this.element.append(o); this._renderAxis = function (e) { var i, n, o, s; e = e || this.element; for (i in this.handles) this.handles[i].constructor === String && (this.handles[i] = this.element.children(this.handles[i]).first().show()), this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (n = t(this.handles[i], this.element), s = /sw|ne|nw|se|n|s/.test(i) ? n.outerHeight() : n.outerWidth(), o = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""), e.css(o, s), this._proportionallyResize()), t(this.handles[i]).length }, this._renderAxis(this.element), this._handles = t(".ui-resizable-handle", this.element).disableSelection(), this._handles.mouseover(function () { a.resizing || (this.className && (o = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), a.axis = o && o[1] ? o[1] : "se") }), r.autoHide && (this._handles.hide(), t(this.element).addClass("ui-resizable-autohide").mouseenter(function () { r.disabled || (t(this).removeClass("ui-resizable-autohide"), a._handles.show()) }).mouseleave(function () { r.disabled || a.resizing || (t(this).addClass("ui-resizable-autohide"), a._handles.hide()) })), this._mouseInit()
            }, _destroy: function () { this._mouseDestroy(); var e, i = function (e) { t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove() }; return this.elementIsWrapper && (i(this.element), e = this.element, this.originalElement.css({ position: e.css("position"), width: e.outerWidth(), height: e.outerHeight(), top: e.css("top"), left: e.css("left") }).insertAfter(e), e.remove()), this.originalElement.css("resize", this.originalResizeStyle), i(this.originalElement), this }, _mouseCapture: function (e) { var i, n, o = !1; for (i in this.handles) n = t(this.handles[i])[0], (n === e.target || t.contains(n, e.target)) && (o = !0); return !this.options.disabled && o }, _mouseStart: function (e) { var i, n, o, s = this.options, a = this.element; return this.resizing = !0, this._renderProxy(), i = this._num(this.helper.css("left")), n = this._num(this.helper.css("top")), s.containment && (i += t(s.containment).scrollLeft() || 0, n += t(s.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = { left: i, top: n }, this.size = this._helper ? { width: this.helper.width(), height: this.helper.height() } : { width: a.width(), height: a.height() }, this.originalSize = this._helper ? { width: a.outerWidth(), height: a.outerHeight() } : { width: a.width(), height: a.height() }, this.sizeDiff = { width: a.outerWidth() - a.width(), height: a.outerHeight() - a.height() }, this.originalPosition = { left: i, top: n }, this.originalMousePosition = { left: e.pageX, top: e.pageY }, this.aspectRatio = "number" == typeof s.aspectRatio ? s.aspectRatio : this.originalSize.width / this.originalSize.height || 1, o = t(".ui-resizable-" + this.axis).css("cursor"), t("body").css("cursor", "auto" === o ? this.axis + "-resize" : o), a.addClass("ui-resizable-resizing"), this._propagate("start", e), !0 }, _mouseDrag: function (e) { var i, n, o = this.originalMousePosition, s = this.axis, a = e.pageX - o.left || 0, r = e.pageY - o.top || 0, l = this._change[s]; return this._updatePrevProperties(), l ? (i = l.apply(this, [e, a, r]), this._updateVirtualBoundaries(e.shiftKey), (this._aspectRatio || e.shiftKey) && (i = this._updateRatio(i, e)), i = this._respectSize(i, e), this._updateCache(i), this._propagate("resize", e), n = this._applyChanges(), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), t.isEmptyObject(n) || (this._updatePrevProperties(), this._trigger("resize", e, this.ui()), this._applyChanges()), !1) : !1 }, _mouseStop: function (e) { this.resizing = !1; var i, n, o, s, a, r, l, h = this.options, c = this; return this._helper && (i = this._proportionallyResizeElements, n = i.length && /textarea/i.test(i[0].nodeName), o = n && this._hasScroll(i[0], "left") ? 0 : c.sizeDiff.height, s = n ? 0 : c.sizeDiff.width, a = { width: c.helper.width() - s, height: c.helper.height() - o }, r = parseInt(c.element.css("left"), 10) + (c.position.left - c.originalPosition.left) || null, l = parseInt(c.element.css("top"), 10) + (c.position.top - c.originalPosition.top) || null, h.animate || this.element.css(t.extend(a, { top: l, left: r })), c.helper.height(c.size.height), c.helper.width(c.size.width), this._helper && !h.animate && this._proportionallyResize()), t("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", e), this._helper && this.helper.remove(), !1 }, _updatePrevProperties: function () { this.prevPosition = { top: this.position.top, left: this.position.left }, this.prevSize = { width: this.size.width, height: this.size.height } }, _applyChanges: function () { var t = {}; return this.position.top !== this.prevPosition.top && (t.top = this.position.top + "px"), this.position.left !== this.prevPosition.left && (t.left = this.position.left + "px"), this.size.width !== this.prevSize.width && (t.width = this.size.width + "px"), this.size.height !== this.prevSize.height && (t.height = this.size.height + "px"), this.helper.css(t), t }, _updateVirtualBoundaries: function (t) { var e, i, n, o, s, a = this.options; s = { minWidth: this._isNumber(a.minWidth) ? a.minWidth : 0, maxWidth: this._isNumber(a.maxWidth) ? a.maxWidth : 1 / 0, minHeight: this._isNumber(a.minHeight) ? a.minHeight : 0, maxHeight: this._isNumber(a.maxHeight) ? a.maxHeight : 1 / 0 }, (this._aspectRatio || t) && (e = s.minHeight * this.aspectRatio, n = s.minWidth / this.aspectRatio, i = s.maxHeight * this.aspectRatio, o = s.maxWidth / this.aspectRatio, e > s.minWidth && (s.minWidth = e), n > s.minHeight && (s.minHeight = n), i < s.maxWidth && (s.maxWidth = i), o < s.maxHeight && (s.maxHeight = o)), this._vBoundaries = s }, _updateCache: function (t) { this.offset = this.helper.offset(), this._isNumber(t.left) && (this.position.left = t.left), this._isNumber(t.top) && (this.position.top = t.top), this._isNumber(t.height) && (this.size.height = t.height), this._isNumber(t.width) && (this.size.width = t.width) }, _updateRatio: function (t) { var e = this.position, i = this.size, n = this.axis; return this._isNumber(t.height) ? t.width = t.height * this.aspectRatio : this._isNumber(t.width) && (t.height = t.width / this.aspectRatio), "sw" === n && (t.left = e.left + (i.width - t.width), t.top = null), "nw" === n && (t.top = e.top + (i.height - t.height), t.left = e.left + (i.width - t.width)), t }, _respectSize: function (t) { var e = this._vBoundaries, i = this.axis, n = this._isNumber(t.width) && e.maxWidth && e.maxWidth < t.width, o = this._isNumber(t.height) && e.maxHeight && e.maxHeight < t.height, s = this._isNumber(t.width) && e.minWidth && e.minWidth > t.width, a = this._isNumber(t.height) && e.minHeight && e.minHeight > t.height, r = this.originalPosition.left + this.originalSize.width, l = this.position.top + this.size.height, h = /sw|nw|w/.test(i), c = /nw|ne|n/.test(i); return s && (t.width = e.minWidth), a && (t.height = e.minHeight), n && (t.width = e.maxWidth), o && (t.height = e.maxHeight), s && h && (t.left = r - e.minWidth), n && h && (t.left = r - e.maxWidth), a && c && (t.top = l - e.minHeight), o && c && (t.top = l - e.maxHeight), t.width || t.height || t.left || !t.top ? t.width || t.height || t.top || !t.left || (t.left = null) : t.top = null, t }, _getPaddingPlusBorderDimensions: function (t) { for (var e = 0, i = [], n = [t.css("borderTopWidth"), t.css("borderRightWidth"), t.css("borderBottomWidth"), t.css("borderLeftWidth")], o = [t.css("paddingTop"), t.css("paddingRight"), t.css("paddingBottom"), t.css("paddingLeft")]; 4 > e; e++)i[e] = parseInt(n[e], 10) || 0, i[e] += parseInt(o[e], 10) || 0; return { height: i[0] + i[2], width: i[1] + i[3] } }, _proportionallyResize: function () { if (this._proportionallyResizeElements.length) for (var t, e = 0, i = this.helper || this.element; e < this._proportionallyResizeElements.length; e++)t = this._proportionallyResizeElements[e], this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(t)), t.css({ height: i.height() - this.outerDimensions.height || 0, width: i.width() - this.outerDimensions.width || 0 }) }, _renderProxy: function () { var e = this.element, i = this.options; this.elementOffset = e.offset(), this._helper ? (this.helper = this.helper || t("<div style='overflow:hidden;'></div>"), this.helper.addClass(this._helper).css({ width: this.element.outerWidth() - 1, height: this.element.outerHeight() - 1, position: "absolute", left: this.elementOffset.left + "px", top: this.elementOffset.top + "px", zIndex: ++i.zIndex }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element }, _change: { e: function (t, e) { return { width: this.originalSize.width + e } }, w: function (t, e) { var i = this.originalSize, n = this.originalPosition; return { left: n.left + e, width: i.width - e } }, n: function (t, e, i) { var n = this.originalSize, o = this.originalPosition; return { top: o.top + i, height: n.height - i } }, s: function (t, e, i) { return { height: this.originalSize.height + i } }, se: function (e, i, n) { return t.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [e, i, n])) }, sw: function (e, i, n) { return t.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [e, i, n])) }, ne: function (e, i, n) { return t.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [e, i, n])) }, nw: function (e, i, n) { return t.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [e, i, n])) } }, _propagate: function (e, i) { t.ui.plugin.call(this, e, [i, this.ui()]), "resize" !== e && this._trigger(e, i, this.ui()) }, plugins: {}, ui: function () { return { originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize, originalPosition: this.originalPosition } }
        }), t.ui.plugin.add("resizable", "animate", { stop: function (e) { var i = t(this).resizable("instance"), n = i.options, o = i._proportionallyResizeElements, s = o.length && /textarea/i.test(o[0].nodeName), a = s && i._hasScroll(o[0], "left") ? 0 : i.sizeDiff.height, r = s ? 0 : i.sizeDiff.width, l = { width: i.size.width - r, height: i.size.height - a }, h = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null, c = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null; i.element.animate(t.extend(l, c && h ? { top: c, left: h } : {}), { duration: n.animateDuration, easing: n.animateEasing, step: function () { var n = { width: parseInt(i.element.css("width"), 10), height: parseInt(i.element.css("height"), 10), top: parseInt(i.element.css("top"), 10), left: parseInt(i.element.css("left"), 10) }; o && o.length && t(o[0]).css({ width: n.width, height: n.height }), i._updateCache(n), i._propagate("resize", e) } }) } }), t.ui.plugin.add("resizable", "containment", { start: function () { var e, i, n, o, s, a, r, l = t(this).resizable("instance"), h = l.options, c = l.element, u = h.containment, d = u instanceof t ? u.get(0) : /parent/.test(u) ? c.parent().get(0) : u; d && (l.containerElement = t(d), /document/.test(u) || u === document ? (l.containerOffset = { left: 0, top: 0 }, l.containerPosition = { left: 0, top: 0 }, l.parentData = { element: t(document), left: 0, top: 0, width: t(document).width(), height: t(document).height() || document.body.parentNode.scrollHeight }) : (e = t(d), i = [], t(["Top", "Right", "Left", "Bottom"]).each(function (t, n) { i[t] = l._num(e.css("padding" + n)) }), l.containerOffset = e.offset(), l.containerPosition = e.position(), l.containerSize = { height: e.innerHeight() - i[3], width: e.innerWidth() - i[1] }, n = l.containerOffset, o = l.containerSize.height, s = l.containerSize.width, a = l._hasScroll(d, "left") ? d.scrollWidth : s, r = l._hasScroll(d) ? d.scrollHeight : o, l.parentData = { element: d, left: n.left, top: n.top, width: a, height: r })) }, resize: function (e) { var i, n, o, s, a = t(this).resizable("instance"), r = a.options, l = a.containerOffset, h = a.position, c = a._aspectRatio || e.shiftKey, u = { top: 0, left: 0 }, d = a.containerElement, p = !0; d[0] !== document && /static/.test(d.css("position")) && (u = l), h.left < (a._helper ? l.left : 0) && (a.size.width = a.size.width + (a._helper ? a.position.left - l.left : a.position.left - u.left), c && (a.size.height = a.size.width / a.aspectRatio, p = !1), a.position.left = r.helper ? l.left : 0), h.top < (a._helper ? l.top : 0) && (a.size.height = a.size.height + (a._helper ? a.position.top - l.top : a.position.top), c && (a.size.width = a.size.height * a.aspectRatio, p = !1), a.position.top = a._helper ? l.top : 0), o = a.containerElement.get(0) === a.element.parent().get(0), s = /relative|absolute/.test(a.containerElement.css("position")), o && s ? (a.offset.left = a.parentData.left + a.position.left, a.offset.top = a.parentData.top + a.position.top) : (a.offset.left = a.element.offset().left, a.offset.top = a.element.offset().top), i = Math.abs(a.sizeDiff.width + (a._helper ? a.offset.left - u.left : a.offset.left - l.left)), n = Math.abs(a.sizeDiff.height + (a._helper ? a.offset.top - u.top : a.offset.top - l.top)), i + a.size.width >= a.parentData.width && (a.size.width = a.parentData.width - i, c && (a.size.height = a.size.width / a.aspectRatio, p = !1)), n + a.size.height >= a.parentData.height && (a.size.height = a.parentData.height - n, c && (a.size.width = a.size.height * a.aspectRatio, p = !1)), p || (a.position.left = a.prevPosition.left, a.position.top = a.prevPosition.top, a.size.width = a.prevSize.width, a.size.height = a.prevSize.height) }, stop: function () { var e = t(this).resizable("instance"), i = e.options, n = e.containerOffset, o = e.containerPosition, s = e.containerElement, a = t(e.helper), r = a.offset(), l = a.outerWidth() - e.sizeDiff.width, h = a.outerHeight() - e.sizeDiff.height; e._helper && !i.animate && /relative/.test(s.css("position")) && t(this).css({ left: r.left - o.left - n.left, width: l, height: h }), e._helper && !i.animate && /static/.test(s.css("position")) && t(this).css({ left: r.left - o.left - n.left, width: l, height: h }) } }), t.ui.plugin.add("resizable", "alsoResize", { start: function () { var e = t(this).resizable("instance"), i = e.options, n = function (e) { t(e).each(function () { var e = t(this); e.data("ui-resizable-alsoresize", { width: parseInt(e.width(), 10), height: parseInt(e.height(), 10), left: parseInt(e.css("left"), 10), top: parseInt(e.css("top"), 10) }) }) }; "object" != typeof i.alsoResize || i.alsoResize.parentNode ? n(i.alsoResize) : i.alsoResize.length ? (i.alsoResize = i.alsoResize[0], n(i.alsoResize)) : t.each(i.alsoResize, function (t) { n(t) }) }, resize: function (e, i) { var n = t(this).resizable("instance"), o = n.options, s = n.originalSize, a = n.originalPosition, r = { height: n.size.height - s.height || 0, width: n.size.width - s.width || 0, top: n.position.top - a.top || 0, left: n.position.left - a.left || 0 }, l = function (e, n) { t(e).each(function () { var e = t(this), o = t(this).data("ui-resizable-alsoresize"), s = {}, a = n && n.length ? n : e.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"]; t.each(a, function (t, e) { var i = (o[e] || 0) + (r[e] || 0); i && i >= 0 && (s[e] = i || null) }), e.css(s) }) }; "object" != typeof o.alsoResize || o.alsoResize.nodeType ? l(o.alsoResize) : t.each(o.alsoResize, function (t, e) { l(t, e) }) }, stop: function () { t(this).removeData("resizable-alsoresize") } }), t.ui.plugin.add("resizable", "ghost", { start: function () { var e = t(this).resizable("instance"), i = e.options, n = e.size; e.ghost = e.originalElement.clone(), e.ghost.css({ opacity: .25, display: "block", position: "relative", height: n.height, width: n.width, margin: 0, left: 0, top: 0 }).addClass("ui-resizable-ghost").addClass("string" == typeof i.ghost ? i.ghost : ""), e.ghost.appendTo(e.helper) }, resize: function () { var e = t(this).resizable("instance"); e.ghost && e.ghost.css({ position: "relative", height: e.size.height, width: e.size.width }) }, stop: function () { var e = t(this).resizable("instance"); e.ghost && e.helper && e.helper.get(0).removeChild(e.ghost.get(0)) } }), t.ui.plugin.add("resizable", "grid", { resize: function () { var e, i = t(this).resizable("instance"), n = i.options, o = i.size, s = i.originalSize, a = i.originalPosition, r = i.axis, l = "number" == typeof n.grid ? [n.grid, n.grid] : n.grid, h = l[0] || 1, c = l[1] || 1, u = Math.round((o.width - s.width) / h) * h, d = Math.round((o.height - s.height) / c) * c, p = s.width + u, f = s.height + d, m = n.maxWidth && n.maxWidth < p, g = n.maxHeight && n.maxHeight < f, v = n.minWidth && n.minWidth > p, y = n.minHeight && n.minHeight > f; n.grid = l, v && (p += h), y && (f += c), m && (p -= h), g && (f -= c), /^(se|s|e)$/.test(r) ? (i.size.width = p, i.size.height = f) : /^(ne)$/.test(r) ? (i.size.width = p, i.size.height = f, i.position.top = a.top - d) : /^(sw)$/.test(r) ? (i.size.width = p, i.size.height = f, i.position.left = a.left - u) : ((0 >= f - c || 0 >= p - h) && (e = i._getPaddingPlusBorderDimensions(this)), f - c > 0 ? (i.size.height = f, i.position.top = a.top - d) : (f = c - e.height, i.size.height = f, i.position.top = a.top + s.height - f), p - h > 0 ? (i.size.width = p, i.position.left = a.left - u) : (p = c - e.height, i.size.width = p, i.position.left = a.left + s.width - p)) } }); t.ui.resizable, t.widget("ui.selectable", t.ui.mouse, { version: "1.11.1", options: { appendTo: "body", autoRefresh: !0, distance: 0, filter: "*", tolerance: "touch", selected: null, selecting: null, start: null, stop: null, unselected: null, unselecting: null }, _create: function () { var e, i = this; this.element.addClass("ui-selectable"), this.dragged = !1, this.refresh = function () { e = t(i.options.filter, i.element[0]), e.addClass("ui-selectee"), e.each(function () { var e = t(this), i = e.offset(); t.data(this, "selectable-item", { element: this, $element: e, left: i.left, top: i.top, right: i.left + e.outerWidth(), bottom: i.top + e.outerHeight(), startselected: !1, selected: e.hasClass("ui-selected"), selecting: e.hasClass("ui-selecting"), unselecting: e.hasClass("ui-unselecting") }) }) }, this.refresh(), this.selectees = e.addClass("ui-selectee"), this._mouseInit(), this.helper = t("<div class='ui-selectable-helper'></div>") }, _destroy: function () { this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), this._mouseDestroy() }, _mouseStart: function (e) { var i = this, n = this.options; this.opos = [e.pageX, e.pageY], this.options.disabled || (this.selectees = t(n.filter, this.element[0]), this._trigger("start", e), t(n.appendTo).append(this.helper), this.helper.css({ left: e.pageX, top: e.pageY, width: 0, height: 0 }), n.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function () { var n = t.data(this, "selectable-item"); n.startselected = !0, e.metaKey || e.ctrlKey || (n.$element.removeClass("ui-selected"), n.selected = !1, n.$element.addClass("ui-unselecting"), n.unselecting = !0, i._trigger("unselecting", e, { unselecting: n.element })) }), t(e.target).parents().addBack().each(function () { var n, o = t.data(this, "selectable-item"); return o ? (n = !e.metaKey && !e.ctrlKey || !o.$element.hasClass("ui-selected"), o.$element.removeClass(n ? "ui-unselecting" : "ui-selected").addClass(n ? "ui-selecting" : "ui-unselecting"), o.unselecting = !n, o.selecting = n, o.selected = n, n ? i._trigger("selecting", e, { selecting: o.element }) : i._trigger("unselecting", e, { unselecting: o.element }), !1) : void 0 })) }, _mouseDrag: function (e) { if (this.dragged = !0, !this.options.disabled) { var i, n = this, o = this.options, s = this.opos[0], a = this.opos[1], r = e.pageX, l = e.pageY; return s > r && (i = r, r = s, s = i), a > l && (i = l, l = a, a = i), this.helper.css({ left: s, top: a, width: r - s, height: l - a }), this.selectees.each(function () { var i = t.data(this, "selectable-item"), h = !1; i && i.element !== n.element[0] && ("touch" === o.tolerance ? h = !(i.left > r || i.right < s || i.top > l || i.bottom < a) : "fit" === o.tolerance && (h = i.left > s && i.right < r && i.top > a && i.bottom < l), h ? (i.selected && (i.$element.removeClass("ui-selected"), i.selected = !1), i.unselecting && (i.$element.removeClass("ui-unselecting"), i.unselecting = !1), i.selecting || (i.$element.addClass("ui-selecting"), i.selecting = !0, n._trigger("selecting", e, { selecting: i.element }))) : (i.selecting && ((e.metaKey || e.ctrlKey) && i.startselected ? (i.$element.removeClass("ui-selecting"), i.selecting = !1, i.$element.addClass("ui-selected"), i.selected = !0) : (i.$element.removeClass("ui-selecting"), i.selecting = !1, i.startselected && (i.$element.addClass("ui-unselecting"), i.unselecting = !0), n._trigger("unselecting", e, { unselecting: i.element }))), i.selected && (e.metaKey || e.ctrlKey || i.startselected || (i.$element.removeClass("ui-selected"), i.selected = !1, i.$element.addClass("ui-unselecting"), i.unselecting = !0, n._trigger("unselecting", e, { unselecting: i.element }))))) }), !1 } }, _mouseStop: function (e) { var i = this; return this.dragged = !1, t(".ui-unselecting", this.element[0]).each(function () { var n = t.data(this, "selectable-item"); n.$element.removeClass("ui-unselecting"), n.unselecting = !1, n.startselected = !1, i._trigger("unselected", e, { unselected: n.element }) }), t(".ui-selecting", this.element[0]).each(function () { var n = t.data(this, "selectable-item"); n.$element.removeClass("ui-selecting").addClass("ui-selected"), n.selecting = !1, n.selected = !0, n.startselected = !0, i._trigger("selected", e, { selected: n.element }) }), this._trigger("stop", e), this.helper.remove(), !1 } }), t.widget("ui.sortable", t.ui.mouse, {
            version: "1.11.1", widgetEventPrefix: "sort", ready: !1, options: { appendTo: "parent", axis: !1, connectWith: !1, containment: !1, cursor: "auto", cursorAt: !1, dropOnEmpty: !0, forcePlaceholderSize: !1, forceHelperSize: !1, grid: !1, handle: !1, helper: "original", items: "> *", opacity: !1, placeholder: !1, revert: !1, scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, scope: "default", tolerance: "intersect", zIndex: 1e3, activate: null, beforeStop: null, change: null, deactivate: null, out: null, over: null, receive: null, remove: null, sort: null, start: null, stop: null, update: null }, _isOverAxis: function (t, e, i) { return t >= e && e + i > t }, _isFloating: function (t) { return /left|right/.test(t.css("float")) || /inline|table-cell/.test(t.css("display")) }, _create: function () { var t = this.options; this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.floating = this.items.length ? "x" === t.axis || this._isFloating(this.items[0].item) : !1, this.offset = this.element.offset(), this._mouseInit(), this._setHandleClassName(), this.ready = !0 }, _setOption: function (t, e) { this._super(t, e), "handle" === t && this._setHandleClassName() }, _setHandleClassName: function () { this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"), t.each(this.items, function () { (this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item).addClass("ui-sortable-handle") }) }, _destroy: function () { this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"), this._mouseDestroy(); for (var t = this.items.length - 1; t >= 0; t--)this.items[t].item.removeData(this.widgetName + "-item"); return this }, _mouseCapture: function (e, i) { var n = null, o = !1, s = this; return this.reverting ? !1 : this.options.disabled || "static" === this.options.type ? !1 : (this._refreshItems(e), t(e.target).parents().each(function () { return t.data(this, s.widgetName + "-item") === s ? (n = t(this), !1) : void 0 }), t.data(e.target, s.widgetName + "-item") === s && (n = t(e.target)), n && (!this.options.handle || i || (t(this.options.handle, n).find("*").addBack().each(function () { this === e.target && (o = !0) }), o)) ? (this.currentItem = n, this._removeCurrentsFromItems(), !0) : !1) }, _mouseStart: function (e, i, n) { var o, s, a = this.options; if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(e), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = { top: this.offset.top - this.margins.top, left: this.offset.left - this.margins.left }, t.extend(this.offset, { click: { left: e.pageX - this.offset.left, top: e.pageY - this.offset.top }, parent: this._getParentOffset(), relative: this._getRelativeOffset() }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(e), this.originalPageX = e.pageX, this.originalPageY = e.pageY, a.cursorAt && this._adjustOffsetFromHelper(a.cursorAt), this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), a.containment && this._setContainment(), a.cursor && "auto" !== a.cursor && (s = this.document.find("body"), this.storedCursor = s.css("cursor"), s.css("cursor", a.cursor), this.storedStylesheet = t("<style>*{ cursor: " + a.cursor + " !important; }</style>").appendTo(s)), a.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", a.opacity)), a.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", a.zIndex)), this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", e, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !n) for (o = this.containers.length - 1; o >= 0; o--)this.containers[o]._trigger("activate", e, this._uiHash(this)); return t.ui.ddmanager && (t.ui.ddmanager.current = this), t.ui.ddmanager && !a.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(e), !0 }, _mouseDrag: function (e) { var i, n, o, s, a = this.options, r = !1; for (this.position = this._generatePosition(e), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - e.pageY < a.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + a.scrollSpeed : e.pageY - this.overflowOffset.top < a.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - a.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - e.pageX < a.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + a.scrollSpeed : e.pageX - this.overflowOffset.left < a.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - a.scrollSpeed)) : (e.pageY - t(document).scrollTop() < a.scrollSensitivity ? r = t(document).scrollTop(t(document).scrollTop() - a.scrollSpeed) : t(window).height() - (e.pageY - t(document).scrollTop()) < a.scrollSensitivity && (r = t(document).scrollTop(t(document).scrollTop() + a.scrollSpeed)), e.pageX - t(document).scrollLeft() < a.scrollSensitivity ? r = t(document).scrollLeft(t(document).scrollLeft() - a.scrollSpeed) : t(window).width() - (e.pageX - t(document).scrollLeft()) < a.scrollSensitivity && (r = t(document).scrollLeft(t(document).scrollLeft() + a.scrollSpeed))), r !== !1 && t.ui.ddmanager && !a.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e)), this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), i = this.items.length - 1; i >= 0; i--)if (n = this.items[i], o = n.item[0], s = this._intersectsWithPointer(n), s && n.instance === this.currentContainer && o !== this.currentItem[0] && this.placeholder[1 === s ? "next" : "prev"]()[0] !== o && !t.contains(this.placeholder[0], o) && ("semi-dynamic" === this.options.type ? !t.contains(this.element[0], o) : !0)) { if (this.direction = 1 === s ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(n)) break; this._rearrange(e, n), this._trigger("change", e, this._uiHash()); break } return this._contactContainers(e), t.ui.ddmanager && t.ui.ddmanager.drag(this, e), this._trigger("sort", e, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1 }, _mouseStop: function (e, i) { if (e) { if (t.ui.ddmanager && !this.options.dropBehaviour && t.ui.ddmanager.drop(this, e), this.options.revert) { var n = this, o = this.placeholder.offset(), s = this.options.axis, a = {}; s && "x" !== s || (a.left = o.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft)), s && "y" !== s || (a.top = o.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)), this.reverting = !0, t(this.helper).animate(a, parseInt(this.options.revert, 10) || 500, function () { n._clear(e) }) } else this._clear(e, i); return !1 } }, cancel: function () { if (this.dragging) { this._mouseUp({ target: null }), "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show(); for (var e = this.containers.length - 1; e >= 0; e--)this.containers[e]._trigger("deactivate", null, this._uiHash(this)), this.containers[e].containerCache.over && (this.containers[e]._trigger("out", null, this._uiHash(this)), this.containers[e].containerCache.over = 0) } return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), t.extend(this, { helper: null, dragging: !1, reverting: !1, _noFinalSort: null }), this.domPosition.prev ? t(this.domPosition.prev).after(this.currentItem) : t(this.domPosition.parent).prepend(this.currentItem)), this }, serialize: function (e) { var i = this._getItemsAsjQuery(e && e.connected), n = []; return e = e || {}, t(i).each(function () { var i = (t(e.item || this).attr(e.attribute || "id") || "").match(e.expression || /(.+)[\-=_](.+)/); i && n.push((e.key || i[1] + "[]") + "=" + (e.key && e.expression ? i[1] : i[2])) }), !n.length && e.key && n.push(e.key + "="), n.join("&") }, toArray: function (e) { var i = this._getItemsAsjQuery(e && e.connected), n = []; return e = e || {}, i.each(function () { n.push(t(e.item || this).attr(e.attribute || "id") || "") }), n }, _intersectsWith: function (t) { var e = this.positionAbs.left, i = e + this.helperProportions.width, n = this.positionAbs.top, o = n + this.helperProportions.height, s = t.left, a = s + t.width, r = t.top, l = r + t.height, h = this.offset.click.top, c = this.offset.click.left, u = "x" === this.options.axis || n + h > r && l > n + h, d = "y" === this.options.axis || e + c > s && a > e + c, p = u && d; return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > t[this.floating ? "width" : "height"] ? p : s < e + this.helperProportions.width / 2 && i - this.helperProportions.width / 2 < a && r < n + this.helperProportions.height / 2 && o - this.helperProportions.height / 2 < l }, _intersectsWithPointer: function (t) { var e = "x" === this.options.axis || this._isOverAxis(this.positionAbs.top + this.offset.click.top, t.top, t.height), i = "y" === this.options.axis || this._isOverAxis(this.positionAbs.left + this.offset.click.left, t.left, t.width), n = e && i, o = this._getDragVerticalDirection(), s = this._getDragHorizontalDirection(); return n ? this.floating ? s && "right" === s || "down" === o ? 2 : 1 : o && ("down" === o ? 2 : 1) : !1 }, _intersectsWithSides: function (t) { var e = this._isOverAxis(this.positionAbs.top + this.offset.click.top, t.top + t.height / 2, t.height), i = this._isOverAxis(this.positionAbs.left + this.offset.click.left, t.left + t.width / 2, t.width), n = this._getDragVerticalDirection(), o = this._getDragHorizontalDirection(); return this.floating && o ? "right" === o && i || "left" === o && !i : n && ("down" === n && e || "up" === n && !e) }, _getDragVerticalDirection: function () { var t = this.positionAbs.top - this.lastPositionAbs.top; return 0 !== t && (t > 0 ? "down" : "up") }, _getDragHorizontalDirection: function () { var t = this.positionAbs.left - this.lastPositionAbs.left; return 0 !== t && (t > 0 ? "right" : "left") }, refresh: function (t) { return this._refreshItems(t), this._setHandleClassName(), this.refreshPositions(), this }, _connectWith: function () { var t = this.options; return t.connectWith.constructor === String ? [t.connectWith] : t.connectWith }, _getItemsAsjQuery: function (e) { function i() { r.push(this) } var n, o, s, a, r = [], l = [], h = this._connectWith(); if (h && e) for (n = h.length - 1; n >= 0; n--)for (s = t(h[n]), o = s.length - 1; o >= 0; o--)a = t.data(s[o], this.widgetFullName), a && a !== this && !a.options.disabled && l.push([t.isFunction(a.options.items) ? a.options.items.call(a.element) : t(a.options.items, a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), a]); for (l.push([t.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : t(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]), n = l.length - 1; n >= 0; n--)l[n][0].each(i); return t(r) }, _removeCurrentsFromItems: function () { var e = this.currentItem.find(":data(" + this.widgetName + "-item)"); this.items = t.grep(this.items, function (t) { for (var i = 0; i < e.length; i++)if (e[i] === t.item[0]) return !1; return !0 }) }, _refreshItems: function (e) { this.items = [], this.containers = [this]; var i, n, o, s, a, r, l, h, c = this.items, u = [[t.isFunction(this.options.items) ? this.options.items.call(this.element[0], e, { item: this.currentItem }) : t(this.options.items, this.element), this]], d = this._connectWith(); if (d && this.ready) for (i = d.length - 1; i >= 0; i--)for (o = t(d[i]), n = o.length - 1; n >= 0; n--)s = t.data(o[n], this.widgetFullName), s && s !== this && !s.options.disabled && (u.push([t.isFunction(s.options.items) ? s.options.items.call(s.element[0], e, { item: this.currentItem }) : t(s.options.items, s.element), s]), this.containers.push(s)); for (i = u.length - 1; i >= 0; i--)for (a = u[i][1], r = u[i][0], n = 0, h = r.length; h > n; n++)l = t(r[n]), l.data(this.widgetName + "-item", a), c.push({ item: l, instance: a, width: 0, height: 0, left: 0, top: 0 }) }, refreshPositions: function (e) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset()); var i, n, o, s; for (i = this.items.length - 1; i >= 0; i--)n = this.items[i], n.instance !== this.currentContainer && this.currentContainer && n.item[0] !== this.currentItem[0] || (o = this.options.toleranceElement ? t(this.options.toleranceElement, n.item) : n.item,
                e || (n.width = o.outerWidth(), n.height = o.outerHeight()), s = o.offset(), n.left = s.left, n.top = s.top); if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this); else for (i = this.containers.length - 1; i >= 0; i--)s = this.containers[i].element.offset(), this.containers[i].containerCache.left = s.left, this.containers[i].containerCache.top = s.top, this.containers[i].containerCache.width = this.containers[i].element.outerWidth(), this.containers[i].containerCache.height = this.containers[i].element.outerHeight(); return this
            }, _createPlaceholder: function (e) { e = e || this; var i, n = e.options; n.placeholder && n.placeholder.constructor !== String || (i = n.placeholder, n.placeholder = { element: function () { var n = e.currentItem[0].nodeName.toLowerCase(), o = t("<" + n + ">", e.document[0]).addClass(i || e.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper"); return "tr" === n ? e.currentItem.children().each(function () { t("<td>&#160;</td>", e.document[0]).attr("colspan", t(this).attr("colspan") || 1).appendTo(o) }) : "img" === n && o.attr("src", e.currentItem.attr("src")), i || o.css("visibility", "hidden"), o }, update: function (t, o) { (!i || n.forcePlaceholderSize) && (o.height() || o.height(e.currentItem.innerHeight() - parseInt(e.currentItem.css("paddingTop") || 0, 10) - parseInt(e.currentItem.css("paddingBottom") || 0, 10)), o.width() || o.width(e.currentItem.innerWidth() - parseInt(e.currentItem.css("paddingLeft") || 0, 10) - parseInt(e.currentItem.css("paddingRight") || 0, 10))) } }), e.placeholder = t(n.placeholder.element.call(e.element, e.currentItem)), e.currentItem.after(e.placeholder), n.placeholder.update(e, e.placeholder) }, _contactContainers: function (e) { var i, n, o, s, a, r, l, h, c, u, d = null, p = null; for (i = this.containers.length - 1; i >= 0; i--)if (!t.contains(this.currentItem[0], this.containers[i].element[0])) if (this._intersectsWith(this.containers[i].containerCache)) { if (d && t.contains(this.containers[i].element[0], d.element[0])) continue; d = this.containers[i], p = i } else this.containers[i].containerCache.over && (this.containers[i]._trigger("out", e, this._uiHash(this)), this.containers[i].containerCache.over = 0); if (d) if (1 === this.containers.length) this.containers[p].containerCache.over || (this.containers[p]._trigger("over", e, this._uiHash(this)), this.containers[p].containerCache.over = 1); else { for (o = 1e4, s = null, c = d.floating || this._isFloating(this.currentItem), a = c ? "left" : "top", r = c ? "width" : "height", u = c ? "clientX" : "clientY", n = this.items.length - 1; n >= 0; n--)t.contains(this.containers[p].element[0], this.items[n].item[0]) && this.items[n].item[0] !== this.currentItem[0] && (l = this.items[n].item.offset()[a], h = !1, e[u] - l > this.items[n][r] / 2 && (h = !0), Math.abs(e[u] - l) < o && (o = Math.abs(e[u] - l), s = this.items[n], this.direction = h ? "up" : "down")); if (!s && !this.options.dropOnEmpty) return; if (this.currentContainer === this.containers[p]) return; s ? this._rearrange(e, s, null, !0) : this._rearrange(e, null, this.containers[p].element, !0), this._trigger("change", e, this._uiHash()), this.containers[p]._trigger("change", e, this._uiHash(this)), this.currentContainer = this.containers[p], this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[p]._trigger("over", e, this._uiHash(this)), this.containers[p].containerCache.over = 1 } }, _createHelper: function (e) { var i = this.options, n = t.isFunction(i.helper) ? t(i.helper.apply(this.element[0], [e, this.currentItem])) : "clone" === i.helper ? this.currentItem.clone() : this.currentItem; return n.parents("body").length || t("parent" !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(n[0]), n[0] === this.currentItem[0] && (this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") }), (!n[0].style.width || i.forceHelperSize) && n.width(this.currentItem.width()), (!n[0].style.height || i.forceHelperSize) && n.height(this.currentItem.height()), n }, _adjustOffsetFromHelper: function (e) { "string" == typeof e && (e = e.split(" ")), t.isArray(e) && (e = { left: +e[0], top: +e[1] || 0 }), "left" in e && (this.offset.click.left = e.left + this.margins.left), "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left), "top" in e && (this.offset.click.top = e.top + this.margins.top), "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top) }, _getParentOffset: function () { this.offsetParent = this.helper.offsetParent(); var e = this.offsetParent.offset(); return "absolute" === this.cssPosition && this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(), e.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && t.ui.ie) && (e = { top: 0, left: 0 }), { top: e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) } }, _getRelativeOffset: function () { if ("relative" === this.cssPosition) { var t = this.currentItem.position(); return { top: t.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(), left: t.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft() } } return { top: 0, left: 0 } }, _cacheMargins: function () { this.margins = { left: parseInt(this.currentItem.css("marginLeft"), 10) || 0, top: parseInt(this.currentItem.css("marginTop"), 10) || 0 } }, _cacheHelperProportions: function () { this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() } }, _setContainment: function () { var e, i, n, o = this.options; "parent" === o.containment && (o.containment = this.helper[0].parentNode), ("document" === o.containment || "window" === o.containment) && (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, t("document" === o.containment ? document : window).width() - this.helperProportions.width - this.margins.left, (t("document" === o.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]), /^(document|window|parent)$/.test(o.containment) || (e = t(o.containment)[0], i = t(o.containment).offset(), n = "hidden" !== t(e).css("overflow"), this.containment = [i.left + (parseInt(t(e).css("borderLeftWidth"), 10) || 0) + (parseInt(t(e).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(t(e).css("borderTopWidth"), 10) || 0) + (parseInt(t(e).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (n ? Math.max(e.scrollWidth, e.offsetWidth) : e.offsetWidth) - (parseInt(t(e).css("borderLeftWidth"), 10) || 0) - (parseInt(t(e).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (n ? Math.max(e.scrollHeight, e.offsetHeight) : e.offsetHeight) - (parseInt(t(e).css("borderTopWidth"), 10) || 0) - (parseInt(t(e).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top]) }, _convertPositionTo: function (e, i) { i || (i = this.position); var n = "absolute" === e ? 1 : -1, o = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, s = /(html|body)/i.test(o[0].tagName); return { top: i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : s ? 0 : o.scrollTop()) * n, left: i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : s ? 0 : o.scrollLeft()) * n } }, _generatePosition: function (e) { var i, n, o = this.options, s = e.pageX, a = e.pageY, r = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, l = /(html|body)/i.test(r[0].tagName); return "relative" !== this.cssPosition || this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), this.originalPosition && (this.containment && (e.pageX - this.offset.click.left < this.containment[0] && (s = this.containment[0] + this.offset.click.left), e.pageY - this.offset.click.top < this.containment[1] && (a = this.containment[1] + this.offset.click.top), e.pageX - this.offset.click.left > this.containment[2] && (s = this.containment[2] + this.offset.click.left), e.pageY - this.offset.click.top > this.containment[3] && (a = this.containment[3] + this.offset.click.top)), o.grid && (i = this.originalPageY + Math.round((a - this.originalPageY) / o.grid[1]) * o.grid[1], a = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - o.grid[1] : i + o.grid[1] : i, n = this.originalPageX + Math.round((s - this.originalPageX) / o.grid[0]) * o.grid[0], s = this.containment ? n - this.offset.click.left >= this.containment[0] && n - this.offset.click.left <= this.containment[2] ? n : n - this.offset.click.left >= this.containment[0] ? n - o.grid[0] : n + o.grid[0] : n)), { top: a - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : l ? 0 : r.scrollTop()), left: s - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : l ? 0 : r.scrollLeft()) } }, _rearrange: function (t, e, i, n) { i ? i[0].appendChild(this.placeholder[0]) : e.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? e.item[0] : e.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1; var o = this.counter; this._delay(function () { o === this.counter && this.refreshPositions(!n) }) }, _clear: function (t, e) { function i(t, e, i) { return function (n) { i._trigger(t, n, e._uiHash(e)) } } this.reverting = !1; var n, o = []; if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null, this.helper[0] === this.currentItem[0]) { for (n in this._storedCSS) ("auto" === this._storedCSS[n] || "static" === this._storedCSS[n]) && (this._storedCSS[n] = ""); this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") } else this.currentItem.show(); for (this.fromOutside && !e && o.push(function (t) { this._trigger("receive", t, this._uiHash(this.fromOutside)) }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || e || o.push(function (t) { this._trigger("update", t, this._uiHash()) }), this !== this.currentContainer && (e || (o.push(function (t) { this._trigger("remove", t, this._uiHash()) }), o.push(function (t) { return function (e) { t._trigger("receive", e, this._uiHash(this)) } }.call(this, this.currentContainer)), o.push(function (t) { return function (e) { t._trigger("update", e, this._uiHash(this)) } }.call(this, this.currentContainer)))), n = this.containers.length - 1; n >= 0; n--)e || o.push(i("deactivate", this, this.containers[n])), this.containers[n].containerCache.over && (o.push(i("out", this, this.containers[n])), this.containers[n].containerCache.over = 0); if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), this.dragging = !1, this.cancelHelperRemoval) { if (!e) { for (this._trigger("beforeStop", t, this._uiHash()), n = 0; n < o.length; n++)o[n].call(this, t); this._trigger("stop", t, this._uiHash()) } return this.fromOutside = !1, !1 } if (e || this._trigger("beforeStop", t, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null, !e) { for (n = 0; n < o.length; n++)o[n].call(this, t); this._trigger("stop", t, this._uiHash()) } return this.fromOutside = !1, !0 }, _trigger: function () { t.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel() }, _uiHash: function (e) { var i = e || this; return { helper: i.helper, placeholder: i.placeholder || t([]), position: i.position, originalPosition: i.originalPosition, offset: i.positionAbs, item: i.currentItem, sender: e ? e.element : null } }
        }), t.widget("ui.accordion", { version: "1.11.1", options: { active: 0, animate: {}, collapsible: !1, event: "click", header: "> li > :first-child,> :not(li):even", heightStyle: "auto", icons: { activeHeader: "ui-icon-triangle-1-s", header: "ui-icon-triangle-1-e" }, activate: null, beforeActivate: null }, hideProps: { borderTopWidth: "hide", borderBottomWidth: "hide", paddingTop: "hide", paddingBottom: "hide", height: "hide" }, showProps: { borderTopWidth: "show", borderBottomWidth: "show", paddingTop: "show", paddingBottom: "show", height: "show" }, _create: function () { var e = this.options; this.prevShow = this.prevHide = t(), this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role", "tablist"), e.collapsible || e.active !== !1 && null != e.active || (e.active = 0), this._processPanels(), e.active < 0 && (e.active += this.headers.length), this._refresh() }, _getCreateEventData: function () { return { header: this.active, panel: this.active.length ? this.active.next() : t() } }, _createIcons: function () { var e = this.options.icons; e && (t("<span>").addClass("ui-accordion-header-icon ui-icon " + e.header).prependTo(this.headers), this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader), this.headers.addClass("ui-accordion-icons")) }, _destroyIcons: function () { this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove() }, _destroy: function () { var t; this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"), this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(), this._destroyIcons(), t = this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display", "").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(), "content" !== this.options.heightStyle && t.css("height", "") }, _setOption: function (t, e) { return "active" === t ? void this._activate(e) : ("event" === t && (this.options.event && this._off(this.headers, this.options.event), this._setupEvents(e)), this._super(t, e), "collapsible" !== t || e || this.options.active !== !1 || this._activate(0), "icons" === t && (this._destroyIcons(), e && this._createIcons()), void ("disabled" === t && (this.element.toggleClass("ui-state-disabled", !!e).attr("aria-disabled", e), this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!e)))) }, _keydown: function (e) { if (!e.altKey && !e.ctrlKey) { var i = t.ui.keyCode, n = this.headers.length, o = this.headers.index(e.target), s = !1; switch (e.keyCode) { case i.RIGHT: case i.DOWN: s = this.headers[(o + 1) % n]; break; case i.LEFT: case i.UP: s = this.headers[(o - 1 + n) % n]; break; case i.SPACE: case i.ENTER: this._eventHandler(e); break; case i.HOME: s = this.headers[0]; break; case i.END: s = this.headers[n - 1] }s && (t(e.target).attr("tabIndex", -1), t(s).attr("tabIndex", 0), s.focus(), e.preventDefault()) } }, _panelKeyDown: function (e) { e.keyCode === t.ui.keyCode.UP && e.ctrlKey && t(e.currentTarget).prev().focus() }, refresh: function () { var e = this.options; this._processPanels(), e.active === !1 && e.collapsible === !0 || !this.headers.length ? (e.active = !1, this.active = t()) : e.active === !1 ? this._activate(0) : this.active.length && !t.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find(".ui-state-disabled").length ? (e.active = !1, this.active = t()) : this._activate(Math.max(0, e.active - 1)) : e.active = this.headers.index(this.active), this._destroyIcons(), this._refresh() }, _processPanels: function () { this.headers = this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"), this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide() }, _refresh: function () { var e, i = this.options, n = i.heightStyle, o = this.element.parent(); this.active = this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"), this.active.next().addClass("ui-accordion-content-active").show(), this.headers.attr("role", "tab").each(function () { var e = t(this), i = e.uniqueId().attr("id"), n = e.next(), o = n.uniqueId().attr("id"); e.attr("aria-controls", o), n.attr("aria-labelledby", i) }).next().attr("role", "tabpanel"), this.headers.not(this.active).attr({ "aria-selected": "false", "aria-expanded": "false", tabIndex: -1 }).next().attr({ "aria-hidden": "true" }).hide(), this.active.length ? this.active.attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }).next().attr({ "aria-hidden": "false" }) : this.headers.eq(0).attr("tabIndex", 0), this._createIcons(), this._setupEvents(i.event), "fill" === n ? (e = o.height(), this.element.siblings(":visible").each(function () { var i = t(this), n = i.css("position"); "absolute" !== n && "fixed" !== n && (e -= i.outerHeight(!0)) }), this.headers.each(function () { e -= t(this).outerHeight(!0) }), this.headers.next().each(function () { t(this).height(Math.max(0, e - t(this).innerHeight() + t(this).height())) }).css("overflow", "auto")) : "auto" === n && (e = 0, this.headers.next().each(function () { e = Math.max(e, t(this).css("height", "").height()) }).height(e)) }, _activate: function (e) { var i = this._findActive(e)[0]; i !== this.active[0] && (i = i || this.active[0], this._eventHandler({ target: i, currentTarget: i, preventDefault: t.noop })) }, _findActive: function (e) { return "number" == typeof e ? this.headers.eq(e) : t() }, _setupEvents: function (e) { var i = { keydown: "_keydown" }; e && t.each(e.split(" "), function (t, e) { i[e] = "_eventHandler" }), this._off(this.headers.add(this.headers.next())), this._on(this.headers, i), this._on(this.headers.next(), { keydown: "_panelKeyDown" }), this._hoverable(this.headers), this._focusable(this.headers) }, _eventHandler: function (e) { var i = this.options, n = this.active, o = t(e.currentTarget), s = o[0] === n[0], a = s && i.collapsible, r = a ? t() : o.next(), l = n.next(), h = { oldHeader: n, oldPanel: l, newHeader: a ? t() : o, newPanel: r }; e.preventDefault(), s && !i.collapsible || this._trigger("beforeActivate", e, h) === !1 || (i.active = a ? !1 : this.headers.index(o), this.active = s ? t() : o, this._toggle(h), n.removeClass("ui-accordion-header-active ui-state-active"), i.icons && n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header), s || (o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"), i.icons && o.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader), o.next().addClass("ui-accordion-content-active"))) }, _toggle: function (e) { var i = e.newPanel, n = this.prevShow.length ? this.prevShow : e.oldPanel; this.prevShow.add(this.prevHide).stop(!0, !0), this.prevShow = i, this.prevHide = n, this.options.animate ? this._animate(i, n, e) : (n.hide(), i.show(), this._toggleComplete(e)), n.attr({ "aria-hidden": "true" }), n.prev().attr("aria-selected", "false"), i.length && n.length ? n.prev().attr({ tabIndex: -1, "aria-expanded": "false" }) : i.length && this.headers.filter(function () { return 0 === t(this).attr("tabIndex") }).attr("tabIndex", -1), i.attr("aria-hidden", "false").prev().attr({ "aria-selected": "true", tabIndex: 0, "aria-expanded": "true" }) }, _animate: function (t, e, i) { var n, o, s, a = this, r = 0, l = t.length && (!e.length || t.index() < e.index()), h = this.options.animate || {}, c = l && h.down || h, u = function () { a._toggleComplete(i) }; return "number" == typeof c && (s = c), "string" == typeof c && (o = c), o = o || c.easing || h.easing, s = s || c.duration || h.duration, e.length ? t.length ? (n = t.show().outerHeight(), e.animate(this.hideProps, { duration: s, easing: o, step: function (t, e) { e.now = Math.round(t) } }), void t.hide().animate(this.showProps, { duration: s, easing: o, complete: u, step: function (t, i) { i.now = Math.round(t), "height" !== i.prop ? r += i.now : "content" !== a.options.heightStyle && (i.now = Math.round(n - e.outerHeight() - r), r = 0) } })) : e.animate(this.hideProps, s, o, u) : t.animate(this.showProps, s, o, u) }, _toggleComplete: function (t) { var e = t.oldPanel; e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"), e.length && (e.parent()[0].className = e.parent()[0].className), this._trigger("activate", null, t) } }), t.widget("ui.menu", { version: "1.11.1", defaultElement: "<ul>", delay: 300, options: { icons: { submenu: "ui-icon-carat-1-e" }, items: "> *", menus: "ul", position: { my: "left-1 top", at: "right top" }, role: "menu", blur: null, focus: null, select: null }, _create: function () { this.activeMenu = this.element, this.mouseHandled = !1, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({ role: this.options.role, tabIndex: 0 }), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), this._on({ "mousedown .ui-menu-item": function (t) { t.preventDefault() }, "click .ui-menu-item": function (e) { var i = t(e.target); !this.mouseHandled && i.not(".ui-state-disabled").length && (this.select(e), e.isPropagationStopped() || (this.mouseHandled = !0), i.has(".ui-menu").length ? this.expand(e) : !this.element.is(":focus") && t(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [!0]), this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer))) }, "mouseenter .ui-menu-item": function (e) { var i = t(e.currentTarget); i.siblings(".ui-state-active").removeClass("ui-state-active"), this.focus(e, i) }, mouseleave: "collapseAll", "mouseleave .ui-menu": "collapseAll", focus: function (t, e) { var i = this.active || this.element.find(this.options.items).eq(0); e || this.focus(t, i) }, blur: function (e) { this._delay(function () { t.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(e) }) }, keydown: "_keydown" }), this.refresh(), this._on(this.document, { click: function (t) { this._closeOnDocumentClick(t) && this.collapseAll(t), this.mouseHandled = !1 } }) }, _destroy: function () { this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function () { var e = t(this); e.data("ui-menu-submenu-carat") && e.remove() }), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content") }, _keydown: function (e) { function i(t) { return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&") } var n, o, s, a, r, l = !0; switch (e.keyCode) { case t.ui.keyCode.PAGE_UP: this.previousPage(e); break; case t.ui.keyCode.PAGE_DOWN: this.nextPage(e); break; case t.ui.keyCode.HOME: this._move("first", "first", e); break; case t.ui.keyCode.END: this._move("last", "last", e); break; case t.ui.keyCode.UP: this.previous(e); break; case t.ui.keyCode.DOWN: this.next(e); break; case t.ui.keyCode.LEFT: this.collapse(e); break; case t.ui.keyCode.RIGHT: this.active && !this.active.is(".ui-state-disabled") && this.expand(e); break; case t.ui.keyCode.ENTER: case t.ui.keyCode.SPACE: this._activate(e); break; case t.ui.keyCode.ESCAPE: this.collapse(e); break; default: l = !1, o = this.previousFilter || "", s = String.fromCharCode(e.keyCode), a = !1, clearTimeout(this.filterTimer), s === o ? a = !0 : s = o + s, r = new RegExp("^" + i(s), "i"), n = this.activeMenu.find(this.options.items).filter(function () { return r.test(t(this).text()) }), n = a && -1 !== n.index(this.active.next()) ? this.active.nextAll(".ui-menu-item") : n, n.length || (s = String.fromCharCode(e.keyCode), r = new RegExp("^" + i(s), "i"), n = this.activeMenu.find(this.options.items).filter(function () { return r.test(t(this).text()) })), n.length ? (this.focus(e, n), n.length > 1 ? (this.previousFilter = s, this.filterTimer = this._delay(function () { delete this.previousFilter }, 1e3)) : delete this.previousFilter) : delete this.previousFilter }l && e.preventDefault() }, _activate: function (t) { this.active.is(".ui-state-disabled") || (this.active.is("[aria-haspopup='true']") ? this.expand(t) : this.select(t)) }, refresh: function () { var e, i, n = this, o = this.options.icons.submenu, s = this.element.find(this.options.menus); this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length), s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({ role: this.options.role, "aria-hidden": "true", "aria-expanded": "false" }).each(function () { var e = t(this), i = e.parent(), n = t("<span>").addClass("ui-menu-icon ui-icon " + o).data("ui-menu-submenu-carat", !0); i.attr("aria-haspopup", "true").prepend(n), e.attr("aria-labelledby", i.attr("id")) }), e = s.add(this.element), i = e.find(this.options.items), i.not(".ui-menu-item").each(function () { var e = t(this); n._isDivider(e) && e.addClass("ui-widget-content ui-menu-divider") }), i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({ tabIndex: -1, role: this._itemRole() }), i.filter(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !t.contains(this.element[0], this.active[0]) && this.blur() }, _itemRole: function () { return { menu: "menuitem", listbox: "option" }[this.options.role] }, _setOption: function (t, e) { "icons" === t && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu), "disabled" === t && this.element.toggleClass("ui-state-disabled", !!e).attr("aria-disabled", e), this._super(t, e) }, focus: function (t, e) { var i, n; this.blur(t, t && "focus" === t.type), this._scrollIntoView(e), this.active = e.first(), n = this.active.addClass("ui-state-focus").removeClass("ui-state-active"), this.options.role && this.element.attr("aria-activedescendant", n.attr("id")), this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"), t && "keydown" === t.type ? this._close() : this.timer = this._delay(function () { this._close() }, this.delay), i = e.children(".ui-menu"), i.length && t && /^mouse/.test(t.type) && this._startOpening(i), this.activeMenu = e.parent(), this._trigger("focus", t, { item: e }) }, _scrollIntoView: function (e) { var i, n, o, s, a, r; this._hasScroll() && (i = parseFloat(t.css(this.activeMenu[0], "borderTopWidth")) || 0, n = parseFloat(t.css(this.activeMenu[0], "paddingTop")) || 0, o = e.offset().top - this.activeMenu.offset().top - i - n, s = this.activeMenu.scrollTop(), a = this.activeMenu.height(), r = e.outerHeight(), 0 > o ? this.activeMenu.scrollTop(s + o) : o + r > a && this.activeMenu.scrollTop(s + o - a + r)) }, blur: function (t, e) { e || clearTimeout(this.timer), this.active && (this.active.removeClass("ui-state-focus"), this.active = null, this._trigger("blur", t, { item: this.active })) }, _startOpening: function (t) { clearTimeout(this.timer), "true" === t.attr("aria-hidden") && (this.timer = this._delay(function () { this._close(), this._open(t) }, this.delay)) }, _open: function (e) { var i = t.extend({ of: this.active }, this.options.position); clearTimeout(this.timer), this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden", "true"), e.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i) }, collapseAll: function (e, i) { clearTimeout(this.timer), this.timer = this._delay(function () { var n = i ? this.element : t(e && e.target).closest(this.element.find(".ui-menu")); n.length || (n = this.element), this._close(n), this.blur(e), this.activeMenu = n }, this.delay) }, _close: function (t) { t || (t = this.active ? this.active.parent() : this.element), t.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active") }, _closeOnDocumentClick: function (e) { return !t(e.target).closest(".ui-menu").length }, _isDivider: function (t) { return !/[^\-\u2014\u2013\s]/.test(t.text()) }, collapse: function (t) { var e = this.active && this.active.parent().closest(".ui-menu-item", this.element); e && e.length && (this._close(), this.focus(t, e)) }, expand: function (t) { var e = this.active && this.active.children(".ui-menu ").find(this.options.items).first(); e && e.length && (this._open(e.parent()), this._delay(function () { this.focus(t, e) })) }, next: function (t) { this._move("next", "first", t) }, previous: function (t) { this._move("prev", "last", t) }, isFirstItem: function () { return this.active && !this.active.prevAll(".ui-menu-item").length }, isLastItem: function () { return this.active && !this.active.nextAll(".ui-menu-item").length }, _move: function (t, e, i) { var n; this.active && (n = "first" === t || "last" === t ? this.active["first" === t ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[t + "All"](".ui-menu-item").eq(0)), n && n.length && this.active || (n = this.activeMenu.find(this.options.items)[e]()), this.focus(i, n) }, nextPage: function (e) { var i, n, o; return this.active ? void (this.isLastItem() || (this._hasScroll() ? (n = this.active.offset().top, o = this.element.height(), this.active.nextAll(".ui-menu-item").each(function () { return i = t(this), i.offset().top - n - o < 0 }), this.focus(e, i)) : this.focus(e, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]()))) : void this.next(e) }, previousPage: function (e) { var i, n, o; return this.active ? void (this.isFirstItem() || (this._hasScroll() ? (n = this.active.offset().top, o = this.element.height(), this.active.prevAll(".ui-menu-item").each(function () { return i = t(this), i.offset().top - n + o > 0 }), this.focus(e, i)) : this.focus(e, this.activeMenu.find(this.options.items).first()))) : void this.next(e) }, _hasScroll: function () { return this.element.outerHeight() < this.element.prop("scrollHeight") }, select: function (e) { this.active = this.active || t(e.target).closest(".ui-menu-item"); var i = { item: this.active }; this.active.has(".ui-menu").length || this.collapseAll(e, !0), this._trigger("select", e, i) } }); t.widget("ui.autocomplete", {
            version: "1.11.1", defaultElement: "<input>", options: { appendTo: null, autoFocus: !1, delay: 300, minLength: 1, position: { my: "left top", at: "left bottom", collision: "none" }, source: null, change: null, close: null, focus: null, open: null, response: null, search: null, select: null }, requestIndex: 0, pending: 0, _create: function () {
                var e, i, n, o = this.element[0].nodeName.toLowerCase(), s = "textarea" === o, a = "input" === o; this.isMultiLine = s ? !0 : a ? !1 : this.element.prop("isContentEditable"), this.valueMethod = this.element[s || a ? "val" : "text"], this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), this._on(this.element, { keydown: function (o) { if (this.element.prop("readOnly")) return e = !0, n = !0, void (i = !0); e = !1, n = !1, i = !1; var s = t.ui.keyCode; switch (o.keyCode) { case s.PAGE_UP: e = !0, this._move("previousPage", o); break; case s.PAGE_DOWN: e = !0, this._move("nextPage", o); break; case s.UP: e = !0, this._keyEvent("previous", o); break; case s.DOWN: e = !0, this._keyEvent("next", o); break; case s.ENTER: this.menu.active && (e = !0, o.preventDefault(), this.menu.select(o)); break; case s.TAB: this.menu.active && this.menu.select(o); break; case s.ESCAPE: this.menu.element.is(":visible") && (this.isMultiLine || this._value(this.term), this.close(o), o.preventDefault()); break; default: i = !0, this._searchTimeout(o) } }, keypress: function (n) { if (e) return e = !1, void ((!this.isMultiLine || this.menu.element.is(":visible")) && n.preventDefault()); if (!i) { var o = t.ui.keyCode; switch (n.keyCode) { case o.PAGE_UP: this._move("previousPage", n); break; case o.PAGE_DOWN: this._move("nextPage", n); break; case o.UP: this._keyEvent("previous", n); break; case o.DOWN: this._keyEvent("next", n) } } }, input: function (t) { return n ? (n = !1, void t.preventDefault()) : void this._searchTimeout(t) }, focus: function () { this.selectedItem = null, this.previous = this._value() }, blur: function (t) { return this.cancelBlur ? void delete this.cancelBlur : (clearTimeout(this.searching), this.close(t), void this._change(t)) } }), this._initSource(), this.menu = t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({ role: null }).hide().menu("instance"), this._on(this.menu.element, {
                    mousedown: function (e) { e.preventDefault(), this.cancelBlur = !0, this._delay(function () { delete this.cancelBlur }); var i = this.menu.element[0]; t(e.target).closest(".ui-menu-item").length || this._delay(function () { var e = this; this.document.one("mousedown", function (n) { n.target === e.element[0] || n.target === i || t.contains(i, n.target) || e.close() }) }) }, menufocus: function (e, i) {
                        var n, o; return this.isNewMenu && (this.isNewMenu = !1, e.originalEvent && /^mouse/.test(e.originalEvent.type)) ? (this.menu.blur(), void this.document.one("mousemove", function () { t(e.target).trigger(e.originalEvent) })) : (o = i.item.data("ui-autocomplete-item"), !1 !== this._trigger("focus", e, { item: o }) && e.originalEvent && /^key/.test(e.originalEvent.type) && this._value(o.value), n = i.item.attr("aria-label") || o.value,
                            void (n && t.trim(n).length && (this.liveRegion.children().hide(), t("<div>").text(n).appendTo(this.liveRegion))))
                    }, menuselect: function (t, e) { var i = e.item.data("ui-autocomplete-item"), n = this.previous; this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = n, this._delay(function () { this.previous = n, this.selectedItem = i })), !1 !== this._trigger("select", t, { item: i }) && this._value(i.value), this.term = this._value(), this.close(t), this.selectedItem = i }
                }), this.liveRegion = t("<span>", { role: "status", "aria-live": "assertive", "aria-relevant": "additions" }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body), this._on(this.window, { beforeunload: function () { this.element.removeAttr("autocomplete") } })
            }, _destroy: function () { clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), this.menu.element.remove(), this.liveRegion.remove() }, _setOption: function (t, e) { this._super(t, e), "source" === t && this._initSource(), "appendTo" === t && this.menu.element.appendTo(this._appendTo()), "disabled" === t && e && this.xhr && this.xhr.abort() }, _appendTo: function () { var e = this.options.appendTo; return e && (e = e.jquery || e.nodeType ? t(e) : this.document.find(e).eq(0)), e && e[0] || (e = this.element.closest(".ui-front")), e.length || (e = this.document[0].body), e }, _initSource: function () { var e, i, n = this; t.isArray(this.options.source) ? (e = this.options.source, this.source = function (i, n) { n(t.ui.autocomplete.filter(e, i.term)) }) : "string" == typeof this.options.source ? (i = this.options.source, this.source = function (e, o) { n.xhr && n.xhr.abort(), n.xhr = t.ajax({ url: i, data: e, dataType: "json", success: function (t) { o(t) }, error: function () { o([]) } }) }) : this.source = this.options.source }, _searchTimeout: function (t) { clearTimeout(this.searching), this.searching = this._delay(function () { var e = this.term === this._value(), i = this.menu.element.is(":visible"), n = t.altKey || t.ctrlKey || t.metaKey || t.shiftKey; (!e || e && !i && !n) && (this.selectedItem = null, this.search(null, t)) }, this.options.delay) }, search: function (t, e) { return t = null != t ? t : this._value(), this.term = this._value(), t.length < this.options.minLength ? this.close(e) : this._trigger("search", e) !== !1 ? this._search(t) : void 0 }, _search: function (t) { this.pending++ , this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, this.source({ term: t }, this._response()) }, _response: function () { var e = ++this.requestIndex; return t.proxy(function (t) { e === this.requestIndex && this.__response(t), this.pending-- , this.pending || this.element.removeClass("ui-autocomplete-loading") }, this) }, __response: function (t) { t && (t = this._normalize(t)), this._trigger("response", null, { content: t }), !this.options.disabled && t && t.length && !this.cancelSearch ? (this._suggest(t), this._trigger("open")) : this._close() }, close: function (t) { this.cancelSearch = !0, this._close(t) }, _close: function (t) { this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", t)) }, _change: function (t) { this.previous !== this._value() && this._trigger("change", t, { item: this.selectedItem }) }, _normalize: function (e) { return e.length && e[0].label && e[0].value ? e : t.map(e, function (e) { return "string" == typeof e ? { label: e, value: e } : t.extend({}, e, { label: e.label || e.value, value: e.value || e.label }) }) }, _suggest: function (e) { var i = this.menu.element.empty(); this._renderMenu(i, e), this.isNewMenu = !0, this.menu.refresh(), i.show(), this._resizeMenu(), i.position(t.extend({ of: this.element }, this.options.position)), this.options.autoFocus && this.menu.next() }, _resizeMenu: function () { var t = this.menu.element; t.outerWidth(Math.max(t.width("").outerWidth() + 1, this.element.outerWidth())) }, _renderMenu: function (e, i) { var n = this; t.each(i, function (t, i) { n._renderItemData(e, i) }) }, _renderItemData: function (t, e) { return this._renderItem(t, e).data("ui-autocomplete-item", e) }, _renderItem: function (e, i) { return t("<li>").text(i.label).appendTo(e) }, _move: function (t, e) { return this.menu.element.is(":visible") ? this.menu.isFirstItem() && /^previous/.test(t) || this.menu.isLastItem() && /^next/.test(t) ? (this.isMultiLine || this._value(this.term), void this.menu.blur()) : void this.menu[t](e) : void this.search(null, e) }, widget: function () { return this.menu.element }, _value: function () { return this.valueMethod.apply(this.element, arguments) }, _keyEvent: function (t, e) { (!this.isMultiLine || this.menu.element.is(":visible")) && (this._move(t, e), e.preventDefault()) }
        }), t.extend(t.ui.autocomplete, { escapeRegex: function (t) { return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&") }, filter: function (e, i) { var n = new RegExp(t.ui.autocomplete.escapeRegex(i), "i"); return t.grep(e, function (t) { return n.test(t.label || t.value || t) }) } }), t.widget("ui.autocomplete", t.ui.autocomplete, { options: { messages: { noResults: "No search results.", results: function (t) { return t + (t > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate." } } }, __response: function (e) { var i; this._superApply(arguments), this.options.disabled || this.cancelSearch || (i = e && e.length ? this.options.messages.results(e.length) : this.options.messages.noResults, this.liveRegion.children().hide(), t("<div>").text(i).appendTo(this.liveRegion)) } }); var d, p = (t.ui.autocomplete, "ui-button ui-widget ui-state-default ui-corner-all"), f = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", m = function () { var e = t(this); setTimeout(function () { e.find(":ui-button").button("refresh") }, 1) }, g = function (e) { var i = e.name, n = e.form, o = t([]); return i && (i = i.replace(/'/g, "\\'"), o = n ? t(n).find("[name='" + i + "'][type=radio]") : t("[name='" + i + "'][type=radio]", e.ownerDocument).filter(function () { return !this.form })), o }; t.widget("ui.button", { version: "1.11.1", defaultElement: "<button>", options: { disabled: null, text: !0, label: null, icons: { primary: null, secondary: null } }, _create: function () { this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, m), "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled), this._determineButtonType(), this.hasTitle = !!this.buttonElement.attr("title"); var e = this, i = this.options, n = "checkbox" === this.type || "radio" === this.type, o = n ? "" : "ui-state-active"; null === i.label && (i.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html()), this._hoverable(this.buttonElement), this.buttonElement.addClass(p).attr("role", "button").bind("mouseenter" + this.eventNamespace, function () { i.disabled || this === d && t(this).addClass("ui-state-active") }).bind("mouseleave" + this.eventNamespace, function () { i.disabled || t(this).removeClass(o) }).bind("click" + this.eventNamespace, function (t) { i.disabled && (t.preventDefault(), t.stopImmediatePropagation()) }), this._on({ focus: function () { this.buttonElement.addClass("ui-state-focus") }, blur: function () { this.buttonElement.removeClass("ui-state-focus") } }), n && this.element.bind("change" + this.eventNamespace, function () { e.refresh() }), "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function () { return i.disabled ? !1 : void 0 }) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function () { if (i.disabled) return !1; t(this).addClass("ui-state-active"), e.buttonElement.attr("aria-pressed", "true"); var n = e.element[0]; g(n).not(n).map(function () { return t(this).button("widget")[0] }).removeClass("ui-state-active").attr("aria-pressed", "false") }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function () { return i.disabled ? !1 : (t(this).addClass("ui-state-active"), d = this, void e.document.one("mouseup", function () { d = null })) }).bind("mouseup" + this.eventNamespace, function () { return i.disabled ? !1 : void t(this).removeClass("ui-state-active") }).bind("keydown" + this.eventNamespace, function (e) { return i.disabled ? !1 : void ((e.keyCode === t.ui.keyCode.SPACE || e.keyCode === t.ui.keyCode.ENTER) && t(this).addClass("ui-state-active")) }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function () { t(this).removeClass("ui-state-active") }), this.buttonElement.is("a") && this.buttonElement.keyup(function (e) { e.keyCode === t.ui.keyCode.SPACE && t(this).click() })), this._setOption("disabled", i.disabled), this._resetButton() }, _determineButtonType: function () { var t, e, i; this.element.is("[type=checkbox]") ? this.type = "checkbox" : this.element.is("[type=radio]") ? this.type = "radio" : this.element.is("input") ? this.type = "input" : this.type = "button", "checkbox" === this.type || "radio" === this.type ? (t = this.element.parents().last(), e = "label[for='" + this.element.attr("id") + "']", this.buttonElement = t.find(e), this.buttonElement.length || (t = t.length ? t.siblings() : this.element.siblings(), this.buttonElement = t.filter(e), this.buttonElement.length || (this.buttonElement = t.find(e))), this.element.addClass("ui-helper-hidden-accessible"), i = this.element.is(":checked"), i && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", i)) : this.buttonElement = this.element }, widget: function () { return this.buttonElement }, _destroy: function () { this.element.removeClass("ui-helper-hidden-accessible"), this.buttonElement.removeClass(p + " ui-state-active " + f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()), this.hasTitle || this.buttonElement.removeAttr("title") }, _setOption: function (t, e) { return this._super(t, e), "disabled" === t ? (this.widget().toggleClass("ui-state-disabled", !!e), this.element.prop("disabled", !!e), void (e && ("checkbox" === this.type || "radio" === this.type ? this.buttonElement.removeClass("ui-state-focus") : this.buttonElement.removeClass("ui-state-focus ui-state-active")))) : void this._resetButton() }, refresh: function () { var e = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled"); e !== this.options.disabled && this._setOption("disabled", e), "radio" === this.type ? g(this.element[0]).each(function () { t(this).is(":checked") ? t(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false") }) : "checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false")) }, _resetButton: function () { if ("input" === this.type) return void (this.options.label && this.element.val(this.options.label)); var e = this.buttonElement.removeClass(f), i = t("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(), n = this.options.icons, o = n.primary && n.secondary, s = []; n.primary || n.secondary ? (this.options.text && s.push("ui-button-text-icon" + (o ? "s" : n.primary ? "-primary" : "-secondary")), n.primary && e.prepend("<span class='ui-button-icon-primary ui-icon " + n.primary + "'></span>"), n.secondary && e.append("<span class='ui-button-icon-secondary ui-icon " + n.secondary + "'></span>"), this.options.text || (s.push(o ? "ui-button-icons-only" : "ui-button-icon-only"), this.hasTitle || e.attr("title", t.trim(i)))) : s.push("ui-button-text-only"), e.addClass(s.join(" ")) } }), t.widget("ui.buttonset", { version: "1.11.1", options: { items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)" }, _create: function () { this.element.addClass("ui-buttonset") }, _init: function () { this.refresh() }, _setOption: function (t, e) { "disabled" === t && this.buttons.button("option", t, e), this._super(t, e) }, refresh: function () { var e = "rtl" === this.element.css("direction"), i = this.element.find(this.options.items), n = i.filter(":ui-button"); i.not(":ui-button").button(), n.button("refresh"), this.buttons = i.map(function () { return t(this).button("widget")[0] }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(e ? "ui-corner-left" : "ui-corner-right").end().end() }, _destroy: function () { this.element.removeClass("ui-buttonset"), this.buttons.map(function () { return t(this).button("widget")[0] }).removeClass("ui-corner-left ui-corner-right").end().button("destroy") } }); t.ui.button; t.extend(t.ui, { datepicker: { version: "1.11.1" } }); var v; t.extend(o.prototype, {
            markerClassName: "hasDatepicker", maxRows: 4, _widgetDatepicker: function () { return this.dpDiv }, setDefaults: function (t) { return r(this._defaults, t || {}), this }, _attachDatepicker: function (e, i) { var n, o, s; n = e.nodeName.toLowerCase(), o = "div" === n || "span" === n, e.id || (this.uuid += 1, e.id = "dp" + this.uuid), s = this._newInst(t(e), o), s.settings = t.extend({}, i || {}), "input" === n ? this._connectDatepicker(e, s) : o && this._inlineDatepicker(e, s) }, _newInst: function (e, i) { var n = e[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"); return { id: n, input: e, selectedDay: 0, selectedMonth: 0, selectedYear: 0, drawMonth: 0, drawYear: 0, inline: i, dpDiv: i ? s(t("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv } }, _connectDatepicker: function (e, i) { var n = t(e); i.append = t([]), i.trigger = t([]), n.hasClass(this.markerClassName) || (this._attachments(n, i), n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp), this._autoSize(i), t.data(e, "datepicker", i), i.settings.disabled && this._disableDatepicker(e)) }, _attachments: function (e, i) { var n, o, s, a = this._get(i, "appendText"), r = this._get(i, "isRTL"); i.append && i.append.remove(), a && (i.append = t("<span class='" + this._appendClass + "'>" + a + "</span>"), e[r ? "before" : "after"](i.append)), e.unbind("focus", this._showDatepicker), i.trigger && i.trigger.remove(), n = this._get(i, "showOn"), ("focus" === n || "both" === n) && e.focus(this._showDatepicker), ("button" === n || "both" === n) && (o = this._get(i, "buttonText"), s = this._get(i, "buttonImage"), i.trigger = t(this._get(i, "buttonImageOnly") ? t("<img/>").addClass(this._triggerClass).attr({ src: s, alt: o, title: o }) : t("<button type='button'></button>").addClass(this._triggerClass).html(s ? t("<img/>").attr({ src: s, alt: o, title: o }) : o)), e[r ? "before" : "after"](i.trigger), i.trigger.click(function () { return t.datepicker._datepickerShowing && t.datepicker._lastInput === e[0] ? t.datepicker._hideDatepicker() : t.datepicker._datepickerShowing && t.datepicker._lastInput !== e[0] ? (t.datepicker._hideDatepicker(), t.datepicker._showDatepicker(e[0])) : t.datepicker._showDatepicker(e[0]), !1 })) }, _autoSize: function (t) { if (this._get(t, "autoSize") && !t.inline) { var e, i, n, o, s = new Date(2009, 11, 20), a = this._get(t, "dateFormat"); a.match(/[DM]/) && (e = function (t) { for (i = 0, n = 0, o = 0; o < t.length; o++)t[o].length > i && (i = t[o].length, n = o); return n }, s.setMonth(e(this._get(t, a.match(/MM/) ? "monthNames" : "monthNamesShort"))), s.setDate(e(this._get(t, a.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - s.getDay())), t.input.attr("size", this._formatDate(t, s).length) } }, _inlineDatepicker: function (e, i) { var n = t(e); n.hasClass(this.markerClassName) || (n.addClass(this.markerClassName).append(i.dpDiv), t.data(e, "datepicker", i), this._setDate(i, this._getDefaultDate(i), !0), this._updateDatepicker(i), this._updateAlternate(i), i.settings.disabled && this._disableDatepicker(e), i.dpDiv.css("display", "block")) }, _dialogDatepicker: function (e, i, n, o, s) { var a, l, h, c, u, d = this._dialogInst; return d || (this.uuid += 1, a = "dp" + this.uuid, this._dialogInput = t("<input type='text' id='" + a + "' style='position: absolute; top: -100px; width: 0px;'/>"), this._dialogInput.keydown(this._doKeyDown), t("body").append(this._dialogInput), d = this._dialogInst = this._newInst(this._dialogInput, !1), d.settings = {}, t.data(this._dialogInput[0], "datepicker", d)), r(d.settings, o || {}), i = i && i.constructor === Date ? this._formatDate(d, i) : i, this._dialogInput.val(i), this._pos = s ? s.length ? s : [s.pageX, s.pageY] : null, this._pos || (l = document.documentElement.clientWidth, h = document.documentElement.clientHeight, c = document.documentElement.scrollLeft || document.body.scrollLeft, u = document.documentElement.scrollTop || document.body.scrollTop, this._pos = [l / 2 - 100 + c, h / 2 - 150 + u]), this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), d.settings.onSelect = n, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), t.blockUI && t.blockUI(this.dpDiv), t.data(this._dialogInput[0], "datepicker", d), this }, _destroyDatepicker: function (e) { var i, n = t(e), o = t.data(e, "datepicker"); n.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(), t.removeData(e, "datepicker"), "input" === i ? (o.append.remove(), o.trigger.remove(), n.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : ("div" === i || "span" === i) && n.removeClass(this.markerClassName).empty()) }, _enableDatepicker: function (e) { var i, n, o = t(e), s = t.data(e, "datepicker"); o.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(), "input" === i ? (e.disabled = !1, s.trigger.filter("button").each(function () { this.disabled = !1 }).end().filter("img").css({ opacity: "1.0", cursor: "" })) : ("div" === i || "span" === i) && (n = o.children("." + this._inlineClass), n.children().removeClass("ui-state-disabled"), n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)), this._disabledInputs = t.map(this._disabledInputs, function (t) { return t === e ? null : t })) }, _disableDatepicker: function (e) { var i, n, o = t(e), s = t.data(e, "datepicker"); o.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(), "input" === i ? (e.disabled = !0, s.trigger.filter("button").each(function () { this.disabled = !0 }).end().filter("img").css({ opacity: "0.5", cursor: "default" })) : ("div" === i || "span" === i) && (n = o.children("." + this._inlineClass), n.children().addClass("ui-state-disabled"), n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)), this._disabledInputs = t.map(this._disabledInputs, function (t) { return t === e ? null : t }), this._disabledInputs[this._disabledInputs.length] = e) }, _isDisabledDatepicker: function (t) { if (!t) return !1; for (var e = 0; e < this._disabledInputs.length; e++)if (this._disabledInputs[e] === t) return !0; return !1 }, _getInst: function (e) { try { return t.data(e, "datepicker") } catch (i) { throw "Missing instance data for this datepicker" } }, _optionDatepicker: function (e, i, n) { var o, s, a, l, h = this._getInst(e); return 2 === arguments.length && "string" == typeof i ? "defaults" === i ? t.extend({}, t.datepicker._defaults) : h ? "all" === i ? t.extend({}, h.settings) : this._get(h, i) : null : (o = i || {}, "string" == typeof i && (o = {}, o[i] = n), void (h && (this._curInst === h && this._hideDatepicker(), s = this._getDateDatepicker(e, !0), a = this._getMinMaxDate(h, "min"), l = this._getMinMaxDate(h, "max"), r(h.settings, o), null !== a && void 0 !== o.dateFormat && void 0 === o.minDate && (h.settings.minDate = this._formatDate(h, a)), null !== l && void 0 !== o.dateFormat && void 0 === o.maxDate && (h.settings.maxDate = this._formatDate(h, l)), "disabled" in o && (o.disabled ? this._disableDatepicker(e) : this._enableDatepicker(e)), this._attachments(t(e), h), this._autoSize(h), this._setDate(h, s), this._updateAlternate(h), this._updateDatepicker(h)))) }, _changeDatepicker: function (t, e, i) { this._optionDatepicker(t, e, i) }, _refreshDatepicker: function (t) { var e = this._getInst(t); e && this._updateDatepicker(e) }, _setDateDatepicker: function (t, e) { var i = this._getInst(t); i && (this._setDate(i, e), this._updateDatepicker(i), this._updateAlternate(i)) }, _getDateDatepicker: function (t, e) { var i = this._getInst(t); return i && !i.inline && this._setDateFromField(i, e), i ? this._getDate(i) : null }, _doKeyDown: function (e) { var i, n, o, s = t.datepicker._getInst(e.target), a = !0, r = s.dpDiv.is(".ui-datepicker-rtl"); if (s._keyEvent = !0, t.datepicker._datepickerShowing) switch (e.keyCode) { case 9: t.datepicker._hideDatepicker(), a = !1; break; case 13: return o = t("td." + t.datepicker._dayOverClass + ":not(." + t.datepicker._currentClass + ")", s.dpDiv), o[0] && t.datepicker._selectDay(e.target, s.selectedMonth, s.selectedYear, o[0]), i = t.datepicker._get(s, "onSelect"), i ? (n = t.datepicker._formatDate(s), i.apply(s.input ? s.input[0] : null, [n, s])) : t.datepicker._hideDatepicker(), !1; case 27: t.datepicker._hideDatepicker(); break; case 33: t.datepicker._adjustDate(e.target, e.ctrlKey ? -t.datepicker._get(s, "stepBigMonths") : -t.datepicker._get(s, "stepMonths"), "M"); break; case 34: t.datepicker._adjustDate(e.target, e.ctrlKey ? +t.datepicker._get(s, "stepBigMonths") : +t.datepicker._get(s, "stepMonths"), "M"); break; case 35: (e.ctrlKey || e.metaKey) && t.datepicker._clearDate(e.target), a = e.ctrlKey || e.metaKey; break; case 36: (e.ctrlKey || e.metaKey) && t.datepicker._gotoToday(e.target), a = e.ctrlKey || e.metaKey; break; case 37: (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, r ? 1 : -1, "D"), a = e.ctrlKey || e.metaKey, e.originalEvent.altKey && t.datepicker._adjustDate(e.target, e.ctrlKey ? -t.datepicker._get(s, "stepBigMonths") : -t.datepicker._get(s, "stepMonths"), "M"); break; case 38: (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, -7, "D"), a = e.ctrlKey || e.metaKey; break; case 39: (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, r ? -1 : 1, "D"), a = e.ctrlKey || e.metaKey, e.originalEvent.altKey && t.datepicker._adjustDate(e.target, e.ctrlKey ? +t.datepicker._get(s, "stepBigMonths") : +t.datepicker._get(s, "stepMonths"), "M"); break; case 40: (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, 7, "D"), a = e.ctrlKey || e.metaKey; break; default: a = !1 } else 36 === e.keyCode && e.ctrlKey ? t.datepicker._showDatepicker(this) : a = !1; a && (e.preventDefault(), e.stopPropagation()) }, _doKeyPress: function (e) { var i, n, o = t.datepicker._getInst(e.target); return t.datepicker._get(o, "constrainInput") ? (i = t.datepicker._possibleChars(t.datepicker._get(o, "dateFormat")), n = String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), e.ctrlKey || e.metaKey || " " > n || !i || i.indexOf(n) > -1) : void 0 }, _doKeyUp: function (e) { var i, n = t.datepicker._getInst(e.target); if (n.input.val() !== n.lastVal) try { i = t.datepicker.parseDate(t.datepicker._get(n, "dateFormat"), n.input ? n.input.val() : null, t.datepicker._getFormatConfig(n)), i && (t.datepicker._setDateFromField(n), t.datepicker._updateAlternate(n), t.datepicker._updateDatepicker(n)) } catch (o) { } return !0 }, _showDatepicker: function (e) { if (e = e.target || e, "input" !== e.nodeName.toLowerCase() && (e = t("input", e.parentNode)[0]), !t.datepicker._isDisabledDatepicker(e) && t.datepicker._lastInput !== e) { var i, o, s, a, l, h, c; i = t.datepicker._getInst(e), t.datepicker._curInst && t.datepicker._curInst !== i && (t.datepicker._curInst.dpDiv.stop(!0, !0), i && t.datepicker._datepickerShowing && t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])), o = t.datepicker._get(i, "beforeShow"), s = o ? o.apply(e, [e, i]) : {}, s !== !1 && (r(i.settings, s), i.lastVal = null, t.datepicker._lastInput = e, t.datepicker._setDateFromField(i), t.datepicker._inDialog && (e.value = ""), t.datepicker._pos || (t.datepicker._pos = t.datepicker._findPos(e), t.datepicker._pos[1] += e.offsetHeight), a = !1, t(e).parents().each(function () { return a |= "fixed" === t(this).css("position"), !a }), l = { left: t.datepicker._pos[0], top: t.datepicker._pos[1] }, t.datepicker._pos = null, i.dpDiv.empty(), i.dpDiv.css({ position: "absolute", display: "block", top: "-1000px" }), t.datepicker._updateDatepicker(i), l = t.datepicker._checkOffset(i, l, a), i.dpDiv.css({ position: t.datepicker._inDialog && t.blockUI ? "static" : a ? "fixed" : "absolute", display: "none", left: l.left + "px", top: l.top + "px" }), i.inline || (h = t.datepicker._get(i, "showAnim"), c = t.datepicker._get(i, "duration"), i.dpDiv.css("z-index", n(t(e)) + 1), t.datepicker._datepickerShowing = !0, t.effects && t.effects.effect[h] ? i.dpDiv.show(h, t.datepicker._get(i, "showOptions"), c) : i.dpDiv[h || "show"](h ? c : null), t.datepicker._shouldFocusInput(i) && i.input.focus(), t.datepicker._curInst = i)) } }, _updateDatepicker: function (e) { this.maxRows = 4, v = e, e.dpDiv.empty().append(this._generateHTML(e)), this._attachHandlers(e); var i, n = this._getNumberOfMonths(e), o = n[1], s = 17, r = e.dpDiv.find("." + this._dayOverClass + " a"); r.length > 0 && a.apply(r.get(0)), e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), o > 1 && e.dpDiv.addClass("ui-datepicker-multi-" + o).css("width", s * o + "em"), e.dpDiv[(1 !== n[0] || 1 !== n[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"), e.dpDiv[(this._get(e, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), e === t.datepicker._curInst && t.datepicker._datepickerShowing && t.datepicker._shouldFocusInput(e) && e.input.focus(), e.yearshtml && (i = e.yearshtml, setTimeout(function () { i === e.yearshtml && e.yearshtml && e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml), i = e.yearshtml = null }, 0)) }, _shouldFocusInput: function (t) { return t.input && t.input.is(":visible") && !t.input.is(":disabled") && !t.input.is(":focus") }, _checkOffset: function (e, i, n) { var o = e.dpDiv.outerWidth(), s = e.dpDiv.outerHeight(), a = e.input ? e.input.outerWidth() : 0, r = e.input ? e.input.outerHeight() : 0, l = document.documentElement.clientWidth + (n ? 0 : t(document).scrollLeft()), h = document.documentElement.clientHeight + (n ? 0 : t(document).scrollTop()); return i.left -= this._get(e, "isRTL") ? o - a : 0, i.left -= n && i.left === e.input.offset().left ? t(document).scrollLeft() : 0, i.top -= n && i.top === e.input.offset().top + r ? t(document).scrollTop() : 0, i.left -= Math.min(i.left, i.left + o > l && l > o ? Math.abs(i.left + o - l) : 0), i.top -= Math.min(i.top, i.top + s > h && h > s ? Math.abs(s + r) : 0), i }, _findPos: function (e) { for (var i, n = this._getInst(e), o = this._get(n, "isRTL"); e && ("hidden" === e.type || 1 !== e.nodeType || t.expr.filters.hidden(e));)e = e[o ? "previousSibling" : "nextSibling"]; return i = t(e).offset(), [i.left, i.top] }, _hideDatepicker: function (e) { var i, n, o, s, a = this._curInst; !a || e && a !== t.data(e, "datepicker") || this._datepickerShowing && (i = this._get(a, "showAnim"), n = this._get(a, "duration"), o = function () { t.datepicker._tidyDialog(a) }, t.effects && (t.effects.effect[i] || t.effects[i]) ? a.dpDiv.hide(i, t.datepicker._get(a, "showOptions"), n, o) : a.dpDiv["slideDown" === i ? "slideUp" : "fadeIn" === i ? "fadeOut" : "hide"](i ? n : null, o), i || o(), this._datepickerShowing = !1, s = this._get(a, "onClose"), s && s.apply(a.input ? a.input[0] : null, [a.input ? a.input.val() : "", a]), this._lastInput = null, this._inDialog && (this._dialogInput.css({ position: "absolute", left: "0", top: "-100px" }), t.blockUI && (t.unblockUI(), t("body").append(this.dpDiv))), this._inDialog = !1) }, _tidyDialog: function (t) { t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar") }, _checkExternalClick: function (e) { if (t.datepicker._curInst) { var i = t(e.target), n = t.datepicker._getInst(i[0]); (i[0].id !== t.datepicker._mainDivId && 0 === i.parents("#" + t.datepicker._mainDivId).length && !i.hasClass(t.datepicker.markerClassName) && !i.closest("." + t.datepicker._triggerClass).length && t.datepicker._datepickerShowing && (!t.datepicker._inDialog || !t.blockUI) || i.hasClass(t.datepicker.markerClassName) && t.datepicker._curInst !== n) && t.datepicker._hideDatepicker() } }, _adjustDate: function (e, i, n) { var o = t(e), s = this._getInst(o[0]); this._isDisabledDatepicker(o[0]) || (this._adjustInstDate(s, i + ("M" === n ? this._get(s, "showCurrentAtPos") : 0), n), this._updateDatepicker(s)) }, _gotoToday: function (e) { var i, n = t(e), o = this._getInst(n[0]); this._get(o, "gotoCurrent") && o.currentDay ? (o.selectedDay = o.currentDay, o.drawMonth = o.selectedMonth = o.currentMonth, o.drawYear = o.selectedYear = o.currentYear) : (i = new Date, o.selectedDay = i.getDate(), o.drawMonth = o.selectedMonth = i.getMonth(), o.drawYear = o.selectedYear = i.getFullYear()), this._notifyChange(o), this._adjustDate(n) }, _selectMonthYear: function (e, i, n) { var o = t(e), s = this._getInst(o[0]); s["selected" + ("M" === n ? "Month" : "Year")] = s["draw" + ("M" === n ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10), this._notifyChange(s), this._adjustDate(o) }, _selectDay: function (e, i, n, o) { var s, a = t(e); t(o).hasClass(this._unselectableClass) || this._isDisabledDatepicker(a[0]) || (s = this._getInst(a[0]), s.selectedDay = s.currentDay = t("a", o).html(), s.selectedMonth = s.currentMonth = i, s.selectedYear = s.currentYear = n, this._selectDate(e, this._formatDate(s, s.currentDay, s.currentMonth, s.currentYear))) }, _clearDate: function (e) { var i = t(e); this._selectDate(i, "") }, _selectDate: function (e, i) { var n, o = t(e), s = this._getInst(o[0]); i = null != i ? i : this._formatDate(s), s.input && s.input.val(i), this._updateAlternate(s), n = this._get(s, "onSelect"), n ? n.apply(s.input ? s.input[0] : null, [i, s]) : s.input && s.input.trigger("change"), s.inline ? this._updateDatepicker(s) : (this._hideDatepicker(), this._lastInput = s.input[0], "object" != typeof s.input[0] && s.input.focus(), this._lastInput = null) }, _updateAlternate: function (e) { var i, n, o, s = this._get(e, "altField"); s && (i = this._get(e, "altFormat") || this._get(e, "dateFormat"), n = this._getDate(e), o = this.formatDate(i, n, this._getFormatConfig(e)), t(s).each(function () { t(this).val(o) })) }, noWeekends: function (t) { var e = t.getDay(); return [e > 0 && 6 > e, ""] }, iso8601Week: function (t) { var e, i = new Date(t.getTime()); return i.setDate(i.getDate() + 4 - (i.getDay() || 7)), e = i.getTime(), i.setMonth(0), i.setDate(1), Math.floor(Math.round((e - i) / 864e5) / 7) + 1 }, parseDate: function (e, i, n) { if (null == e || null == i) throw "Invalid arguments"; if (i = "object" == typeof i ? i.toString() : i + "", "" === i) return null; var o, s, a, r, l = 0, h = (n ? n.shortYearCutoff : null) || this._defaults.shortYearCutoff, c = "string" != typeof h ? h : (new Date).getFullYear() % 100 + parseInt(h, 10), u = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort, d = (n ? n.dayNames : null) || this._defaults.dayNames, p = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort, f = (n ? n.monthNames : null) || this._defaults.monthNames, m = -1, g = -1, v = -1, y = -1, b = !1, w = function (t) { var i = o + 1 < e.length && e.charAt(o + 1) === t; return i && o++ , i }, x = function (t) { var e = w(t), n = "@" === t ? 14 : "!" === t ? 20 : "y" === t && e ? 4 : "o" === t ? 3 : 2, o = "y" === t ? n : 1, s = new RegExp("^\\d{" + o + "," + n + "}"), a = i.substring(l).match(s); if (!a) throw "Missing number at position " + l; return l += a[0].length, parseInt(a[0], 10) }, _ = function (e, n, o) { var s = -1, a = t.map(w(e) ? o : n, function (t, e) { return [[e, t]] }).sort(function (t, e) { return -(t[1].length - e[1].length) }); if (t.each(a, function (t, e) { var n = e[1]; return i.substr(l, n.length).toLowerCase() === n.toLowerCase() ? (s = e[0], l += n.length, !1) : void 0 }), -1 !== s) return s + 1; throw "Unknown name at position " + l }, C = function () { if (i.charAt(l) !== e.charAt(o)) throw "Unexpected literal at position " + l; l++ }; for (o = 0; o < e.length; o++)if (b) "'" !== e.charAt(o) || w("'") ? C() : b = !1; else switch (e.charAt(o)) { case "d": v = x("d"); break; case "D": _("D", u, d); break; case "o": y = x("o"); break; case "m": g = x("m"); break; case "M": g = _("M", p, f); break; case "y": m = x("y"); break; case "@": r = new Date(x("@")), m = r.getFullYear(), g = r.getMonth() + 1, v = r.getDate(); break; case "!": r = new Date((x("!") - this._ticksTo1970) / 1e4), m = r.getFullYear(), g = r.getMonth() + 1, v = r.getDate(); break; case "'": w("'") ? C() : b = !0; break; default: C() }if (l < i.length && (a = i.substr(l), !/^\s+/.test(a))) throw "Extra/unparsed characters found in date: " + a; if (-1 === m ? m = (new Date).getFullYear() : 100 > m && (m += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (c >= m ? 0 : -100)), y > -1) for (g = 1, v = y; ;) { if (s = this._getDaysInMonth(m, g - 1), s >= v) break; g++ , v -= s } if (r = this._daylightSavingAdjust(new Date(m, g - 1, v)), r.getFullYear() !== m || r.getMonth() + 1 !== g || r.getDate() !== v) throw "Invalid date"; return r }, ATOM: "yy-mm-dd", COOKIE: "D, dd M yy", ISO_8601: "yy-mm-dd", RFC_822: "D, d M y", RFC_850: "DD, dd-M-y", RFC_1036: "D, d M y", RFC_1123: "D, d M yy", RFC_2822: "D, d M yy", RSS: "D, d M y", TICKS: "!", TIMESTAMP: "@", W3C: "yy-mm-dd", _ticksTo1970: 24 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 60 * 60 * 1e7, formatDate: function (t, e, i) { if (!e) return ""; var n, o = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort, s = (i ? i.dayNames : null) || this._defaults.dayNames, a = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort, r = (i ? i.monthNames : null) || this._defaults.monthNames, l = function (e) { var i = n + 1 < t.length && t.charAt(n + 1) === e; return i && n++ , i }, h = function (t, e, i) { var n = "" + e; if (l(t)) for (; n.length < i;)n = "0" + n; return n }, c = function (t, e, i, n) { return l(t) ? n[e] : i[e] }, u = "", d = !1; if (e) for (n = 0; n < t.length; n++)if (d) "'" !== t.charAt(n) || l("'") ? u += t.charAt(n) : d = !1; else switch (t.charAt(n)) { case "d": u += h("d", e.getDate(), 2); break; case "D": u += c("D", e.getDay(), o, s); break; case "o": u += h("o", Math.round((new Date(e.getFullYear(), e.getMonth(), e.getDate()).getTime() - new Date(e.getFullYear(), 0, 0).getTime()) / 864e5), 3); break; case "m": u += h("m", e.getMonth() + 1, 2); break; case "M": u += c("M", e.getMonth(), a, r); break; case "y": u += l("y") ? e.getFullYear() : (e.getYear() % 100 < 10 ? "0" : "") + e.getYear() % 100; break; case "@": u += e.getTime(); break; case "!": u += 1e4 * e.getTime() + this._ticksTo1970; break; case "'": l("'") ? u += "'" : d = !0; break; default: u += t.charAt(n) }return u }, _possibleChars: function (t) {
                var e, i = "", n = !1, o = function (i) { var n = e + 1 < t.length && t.charAt(e + 1) === i; return n && e++ , n }; for (e = 0; e < t.length; e++)if (n) "'" !== t.charAt(e) || o("'") ? i += t.charAt(e) : n = !1; else switch (t.charAt(e)) {
                    case "d": case "m": case "y": case "@": i += "0123456789"; break; case "D": case "M": return null; case "'":
                        o("'") ? i += "'" : n = !0; break; default: i += t.charAt(e)
                }return i
            }, _get: function (t, e) { return void 0 !== t.settings[e] ? t.settings[e] : this._defaults[e] }, _setDateFromField: function (t, e) { if (t.input.val() !== t.lastVal) { var i = this._get(t, "dateFormat"), n = t.lastVal = t.input ? t.input.val() : null, o = this._getDefaultDate(t), s = o, a = this._getFormatConfig(t); try { s = this.parseDate(i, n, a) || o } catch (r) { n = e ? "" : n } t.selectedDay = s.getDate(), t.drawMonth = t.selectedMonth = s.getMonth(), t.drawYear = t.selectedYear = s.getFullYear(), t.currentDay = n ? s.getDate() : 0, t.currentMonth = n ? s.getMonth() : 0, t.currentYear = n ? s.getFullYear() : 0, this._adjustInstDate(t) } }, _getDefaultDate: function (t) { return this._restrictMinMax(t, this._determineDate(t, this._get(t, "defaultDate"), new Date)) }, _determineDate: function (e, i, n) { var o = function (t) { var e = new Date; return e.setDate(e.getDate() + t), e }, s = function (i) { try { return t.datepicker.parseDate(t.datepicker._get(e, "dateFormat"), i, t.datepicker._getFormatConfig(e)) } catch (n) { } for (var o = (i.toLowerCase().match(/^c/) ? t.datepicker._getDate(e) : null) || new Date, s = o.getFullYear(), a = o.getMonth(), r = o.getDate(), l = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, h = l.exec(i); h;) { switch (h[2] || "d") { case "d": case "D": r += parseInt(h[1], 10); break; case "w": case "W": r += 7 * parseInt(h[1], 10); break; case "m": case "M": a += parseInt(h[1], 10), r = Math.min(r, t.datepicker._getDaysInMonth(s, a)); break; case "y": case "Y": s += parseInt(h[1], 10), r = Math.min(r, t.datepicker._getDaysInMonth(s, a)) }h = l.exec(i) } return new Date(s, a, r) }, a = null == i || "" === i ? n : "string" == typeof i ? s(i) : "number" == typeof i ? isNaN(i) ? n : o(i) : new Date(i.getTime()); return a = a && "Invalid Date" === a.toString() ? n : a, a && (a.setHours(0), a.setMinutes(0), a.setSeconds(0), a.setMilliseconds(0)), this._daylightSavingAdjust(a) }, _daylightSavingAdjust: function (t) { return t ? (t.setHours(t.getHours() > 12 ? t.getHours() + 2 : 0), t) : null }, _setDate: function (t, e, i) { var n = !e, o = t.selectedMonth, s = t.selectedYear, a = this._restrictMinMax(t, this._determineDate(t, e, new Date)); t.selectedDay = t.currentDay = a.getDate(), t.drawMonth = t.selectedMonth = t.currentMonth = a.getMonth(), t.drawYear = t.selectedYear = t.currentYear = a.getFullYear(), o === t.selectedMonth && s === t.selectedYear || i || this._notifyChange(t), this._adjustInstDate(t), t.input && t.input.val(n ? "" : this._formatDate(t)) }, _getDate: function (t) { var e = !t.currentYear || t.input && "" === t.input.val() ? null : this._daylightSavingAdjust(new Date(t.currentYear, t.currentMonth, t.currentDay)); return e }, _attachHandlers: function (e) { var i = this._get(e, "stepMonths"), n = "#" + e.id.replace(/\\\\/g, "\\"); e.dpDiv.find("[data-handler]").map(function () { var e = { prev: function () { t.datepicker._adjustDate(n, -i, "M") }, next: function () { t.datepicker._adjustDate(n, +i, "M") }, hide: function () { t.datepicker._hideDatepicker() }, today: function () { t.datepicker._gotoToday(n) }, selectDay: function () { return t.datepicker._selectDay(n, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), !1 }, selectMonth: function () { return t.datepicker._selectMonthYear(n, this, "M"), !1 }, selectYear: function () { return t.datepicker._selectMonthYear(n, this, "Y"), !1 } }; t(this).bind(this.getAttribute("data-event"), e[this.getAttribute("data-handler")]) }) }, _generateHTML: function (t) { var e, i, n, o, s, a, r, l, h, c, u, d, p, f, m, g, v, y, b, w, x, _, C, k, T, P, S, M, D, E, A, I, N, O, H, z, F, L, R, W = new Date, B = this._daylightSavingAdjust(new Date(W.getFullYear(), W.getMonth(), W.getDate())), j = this._get(t, "isRTL"), U = this._get(t, "showButtonPanel"), q = this._get(t, "hideIfNoPrevNext"), $ = this._get(t, "navigationAsDateFormat"), Y = this._getNumberOfMonths(t), V = this._get(t, "showCurrentAtPos"), X = this._get(t, "stepMonths"), G = 1 !== Y[0] || 1 !== Y[1], K = this._daylightSavingAdjust(t.currentDay ? new Date(t.currentYear, t.currentMonth, t.currentDay) : new Date(9999, 9, 9)), Z = this._getMinMaxDate(t, "min"), J = this._getMinMaxDate(t, "max"), Q = t.drawMonth - V, tt = t.drawYear; if (0 > Q && (Q += 12, tt--), J) for (e = this._daylightSavingAdjust(new Date(J.getFullYear(), J.getMonth() - Y[0] * Y[1] + 1, J.getDate())), e = Z && Z > e ? Z : e; this._daylightSavingAdjust(new Date(tt, Q, 1)) > e;)Q-- , 0 > Q && (Q = 11, tt--); for (t.drawMonth = Q, t.drawYear = tt, i = this._get(t, "prevText"), i = $ ? this.formatDate(i, this._daylightSavingAdjust(new Date(tt, Q - X, 1)), this._getFormatConfig(t)) : i, n = this._canAdjustMonth(t, -1, tt, Q) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (j ? "e" : "w") + "'>" + i + "</span></a>" : q ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (j ? "e" : "w") + "'>" + i + "</span></a>", o = this._get(t, "nextText"), o = $ ? this.formatDate(o, this._daylightSavingAdjust(new Date(tt, Q + X, 1)), this._getFormatConfig(t)) : o, s = this._canAdjustMonth(t, 1, tt, Q) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + o + "'><span class='ui-icon ui-icon-circle-triangle-" + (j ? "w" : "e") + "'>" + o + "</span></a>" : q ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + o + "'><span class='ui-icon ui-icon-circle-triangle-" + (j ? "w" : "e") + "'>" + o + "</span></a>", a = this._get(t, "currentText"), r = this._get(t, "gotoCurrent") && t.currentDay ? K : B, a = $ ? this.formatDate(a, r, this._getFormatConfig(t)) : a, l = t.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(t, "closeText") + "</button>", h = U ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (j ? l : "") + (this._isInRange(t, r) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + a + "</button>" : "") + (j ? "" : l) + "</div>" : "", c = parseInt(this._get(t, "firstDay"), 10), c = isNaN(c) ? 0 : c, u = this._get(t, "showWeek"), d = this._get(t, "dayNames"), p = this._get(t, "dayNamesMin"), f = this._get(t, "monthNames"), m = this._get(t, "monthNamesShort"), g = this._get(t, "beforeShowDay"), v = this._get(t, "showOtherMonths"), y = this._get(t, "selectOtherMonths"), b = this._getDefaultDate(t), w = "", _ = 0; _ < Y[0]; _++) { for (C = "", this.maxRows = 4, k = 0; k < Y[1]; k++) { if (T = this._daylightSavingAdjust(new Date(tt, Q, t.selectedDay)), P = " ui-corner-all", S = "", G) { if (S += "<div class='ui-datepicker-group", Y[1] > 1) switch (k) { case 0: S += " ui-datepicker-group-first", P = " ui-corner-" + (j ? "right" : "left"); break; case Y[1] - 1: S += " ui-datepicker-group-last", P = " ui-corner-" + (j ? "left" : "right"); break; default: S += " ui-datepicker-group-middle", P = "" }S += "'>" } for (S += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + P + "'>" + (/all|left/.test(P) && 0 === _ ? j ? s : n : "") + (/all|right/.test(P) && 0 === _ ? j ? n : s : "") + this._generateMonthYearHeader(t, Q, tt, Z, J, _ > 0 || k > 0, f, m) + "</div><table class='ui-datepicker-calendar'><thead><tr>", M = u ? "<th class='ui-datepicker-week-col'>" + this._get(t, "weekHeader") + "</th>" : "", x = 0; 7 > x; x++)D = (x + c) % 7, M += "<th scope='col'" + ((x + c + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + d[D] + "'>" + p[D] + "</span></th>"; for (S += M + "</tr></thead><tbody>", E = this._getDaysInMonth(tt, Q), tt === t.selectedYear && Q === t.selectedMonth && (t.selectedDay = Math.min(t.selectedDay, E)), A = (this._getFirstDayOfMonth(tt, Q) - c + 7) % 7, I = Math.ceil((A + E) / 7), N = G && this.maxRows > I ? this.maxRows : I, this.maxRows = N, O = this._daylightSavingAdjust(new Date(tt, Q, 1 - A)), H = 0; N > H; H++) { for (S += "<tr>", z = u ? "<td class='ui-datepicker-week-col'>" + this._get(t, "calculateWeek")(O) + "</td>" : "", x = 0; 7 > x; x++)F = g ? g.apply(t.input ? t.input[0] : null, [O]) : [!0, ""], L = O.getMonth() !== Q, R = L && !y || !F[0] || Z && Z > O || J && O > J, z += "<td class='" + ((x + c + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (L ? " ui-datepicker-other-month" : "") + (O.getTime() === T.getTime() && Q === t.selectedMonth && t._keyEvent || b.getTime() === O.getTime() && b.getTime() === T.getTime() ? " " + this._dayOverClass : "") + (R ? " " + this._unselectableClass + " ui-state-disabled" : "") + (L && !v ? "" : " " + F[1] + (O.getTime() === K.getTime() ? " " + this._currentClass : "") + (O.getTime() === B.getTime() ? " ui-datepicker-today" : "")) + "'" + (L && !v || !F[2] ? "" : " title='" + F[2].replace(/'/g, "&#39;") + "'") + (R ? "" : " data-handler='selectDay' data-event='click' data-month='" + O.getMonth() + "' data-year='" + O.getFullYear() + "'") + ">" + (L && !v ? "&#xa0;" : R ? "<span class='ui-state-default'>" + O.getDate() + "</span>" : "<a class='ui-state-default" + (O.getTime() === B.getTime() ? " ui-state-highlight" : "") + (O.getTime() === K.getTime() ? " ui-state-active" : "") + (L ? " ui-priority-secondary" : "") + "' href='#'>" + O.getDate() + "</a>") + "</td>", O.setDate(O.getDate() + 1), O = this._daylightSavingAdjust(O); S += z + "</tr>" } Q++ , Q > 11 && (Q = 0, tt++), S += "</tbody></table>" + (G ? "</div>" + (Y[0] > 0 && k === Y[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : ""), C += S } w += C } return w += h, t._keyEvent = !1, w }, _generateMonthYearHeader: function (t, e, i, n, o, s, a, r) { var l, h, c, u, d, p, f, m, g = this._get(t, "changeMonth"), v = this._get(t, "changeYear"), y = this._get(t, "showMonthAfterYear"), b = "<div class='ui-datepicker-title'>", w = ""; if (s || !g) w += "<span class='ui-datepicker-month'>" + a[e] + "</span>"; else { for (l = n && n.getFullYear() === i, h = o && o.getFullYear() === i, w += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>", c = 0; 12 > c; c++)(!l || c >= n.getMonth()) && (!h || c <= o.getMonth()) && (w += "<option value='" + c + "'" + (c === e ? " selected='selected'" : "") + ">" + r[c] + "</option>"); w += "</select>" } if (y || (b += w + (!s && g && v ? "" : "&#xa0;")), !t.yearshtml) if (t.yearshtml = "", s || !v) b += "<span class='ui-datepicker-year'>" + i + "</span>"; else { for (u = this._get(t, "yearRange").split(":"), d = (new Date).getFullYear(), p = function (t) { var e = t.match(/c[+\-].*/) ? i + parseInt(t.substring(1), 10) : t.match(/[+\-].*/) ? d + parseInt(t, 10) : parseInt(t, 10); return isNaN(e) ? d : e }, f = p(u[0]), m = Math.max(f, p(u[1] || "")), f = n ? Math.max(f, n.getFullYear()) : f, m = o ? Math.min(m, o.getFullYear()) : m, t.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; m >= f; f++)t.yearshtml += "<option value='" + f + "'" + (f === i ? " selected='selected'" : "") + ">" + f + "</option>"; t.yearshtml += "</select>", b += t.yearshtml, t.yearshtml = null } return b += this._get(t, "yearSuffix"), y && (b += (!s && g && v ? "" : "&#xa0;") + w), b += "</div>" }, _adjustInstDate: function (t, e, i) { var n = t.drawYear + ("Y" === i ? e : 0), o = t.drawMonth + ("M" === i ? e : 0), s = Math.min(t.selectedDay, this._getDaysInMonth(n, o)) + ("D" === i ? e : 0), a = this._restrictMinMax(t, this._daylightSavingAdjust(new Date(n, o, s))); t.selectedDay = a.getDate(), t.drawMonth = t.selectedMonth = a.getMonth(), t.drawYear = t.selectedYear = a.getFullYear(), ("M" === i || "Y" === i) && this._notifyChange(t) }, _restrictMinMax: function (t, e) { var i = this._getMinMaxDate(t, "min"), n = this._getMinMaxDate(t, "max"), o = i && i > e ? i : e; return n && o > n ? n : o }, _notifyChange: function (t) { var e = this._get(t, "onChangeMonthYear"); e && e.apply(t.input ? t.input[0] : null, [t.selectedYear, t.selectedMonth + 1, t]) }, _getNumberOfMonths: function (t) { var e = this._get(t, "numberOfMonths"); return null == e ? [1, 1] : "number" == typeof e ? [1, e] : e }, _getMinMaxDate: function (t, e) { return this._determineDate(t, this._get(t, e + "Date"), null) }, _getDaysInMonth: function (t, e) { return 32 - this._daylightSavingAdjust(new Date(t, e, 32)).getDate() }, _getFirstDayOfMonth: function (t, e) { return new Date(t, e, 1).getDay() }, _canAdjustMonth: function (t, e, i, n) { var o = this._getNumberOfMonths(t), s = this._daylightSavingAdjust(new Date(i, n + (0 > e ? e : o[0] * o[1]), 1)); return 0 > e && s.setDate(this._getDaysInMonth(s.getFullYear(), s.getMonth())), this._isInRange(t, s) }, _isInRange: function (t, e) { var i, n, o = this._getMinMaxDate(t, "min"), s = this._getMinMaxDate(t, "max"), a = null, r = null, l = this._get(t, "yearRange"); return l && (i = l.split(":"), n = (new Date).getFullYear(), a = parseInt(i[0], 10), r = parseInt(i[1], 10), i[0].match(/[+\-].*/) && (a += n), i[1].match(/[+\-].*/) && (r += n)), (!o || e.getTime() >= o.getTime()) && (!s || e.getTime() <= s.getTime()) && (!a || e.getFullYear() >= a) && (!r || e.getFullYear() <= r) }, _getFormatConfig: function (t) { var e = this._get(t, "shortYearCutoff"); return e = "string" != typeof e ? e : (new Date).getFullYear() % 100 + parseInt(e, 10), { shortYearCutoff: e, dayNamesShort: this._get(t, "dayNamesShort"), dayNames: this._get(t, "dayNames"), monthNamesShort: this._get(t, "monthNamesShort"), monthNames: this._get(t, "monthNames") } }, _formatDate: function (t, e, i, n) { e || (t.currentDay = t.selectedDay, t.currentMonth = t.selectedMonth, t.currentYear = t.selectedYear); var o = e ? "object" == typeof e ? e : this._daylightSavingAdjust(new Date(n, i, e)) : this._daylightSavingAdjust(new Date(t.currentYear, t.currentMonth, t.currentDay)); return this.formatDate(this._get(t, "dateFormat"), o, this._getFormatConfig(t)) }
        }), t.fn.datepicker = function (e) { if (!this.length) return this; t.datepicker.initialized || (t(document).mousedown(t.datepicker._checkExternalClick), t.datepicker.initialized = !0), 0 === t("#" + t.datepicker._mainDivId).length && t("body").append(t.datepicker.dpDiv); var i = Array.prototype.slice.call(arguments, 1); return "string" != typeof e || "isDisabled" !== e && "getDate" !== e && "widget" !== e ? "option" === e && 2 === arguments.length && "string" == typeof arguments[1] ? t.datepicker["_" + e + "Datepicker"].apply(t.datepicker, [this[0]].concat(i)) : this.each(function () { "string" == typeof e ? t.datepicker["_" + e + "Datepicker"].apply(t.datepicker, [this].concat(i)) : t.datepicker._attachDatepicker(this, e) }) : t.datepicker["_" + e + "Datepicker"].apply(t.datepicker, [this[0]].concat(i)) }, t.datepicker = new o, t.datepicker.initialized = !1, t.datepicker.uuid = (new Date).getTime(), t.datepicker.version = "1.11.1"; var y = (t.datepicker, t.widget("ui.dialog", { version: "1.11.1", options: { appendTo: "body", autoOpen: !0, buttons: [], closeOnEscape: !0, closeText: "Close", dialogClass: "", draggable: !0, hide: null, height: "auto", maxHeight: null, maxWidth: null, minHeight: 150, minWidth: 150, modal: !1, position: { my: "center", at: "center", of: window, collision: "fit", using: function (e) { var i = t(this).css(e).offset().top; 0 > i && t(this).css("top", e.top - i) } }, resizable: !0, show: null, title: null, width: 300, beforeClose: null, close: null, drag: null, dragStart: null, dragStop: null, focus: null, open: null, resize: null, resizeStart: null, resizeStop: null }, sizeRelatedOptions: { buttons: !0, height: !0, maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0, width: !0 }, resizableRelatedOptions: { maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0 }, _create: function () { this.originalCss = { display: this.element[0].style.display, width: this.element[0].style.width, minHeight: this.element[0].style.minHeight, maxHeight: this.element[0].style.maxHeight, height: this.element[0].style.height }, this.originalPosition = { parent: this.element.parent(), index: this.element.parent().children().index(this.element) }, this.originalTitle = this.element.attr("title"), this.options.title = this.options.title || this.originalTitle, this._createWrapper(), this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog), this._createTitlebar(), this._createButtonPane(), this.options.draggable && t.fn.draggable && this._makeDraggable(), this.options.resizable && t.fn.resizable && this._makeResizable(), this._isOpen = !1, this._trackFocus() }, _init: function () { this.options.autoOpen && this.open() }, _appendTo: function () { var e = this.options.appendTo; return e && (e.jquery || e.nodeType) ? t(e) : this.document.find(e || "body").eq(0) }, _destroy: function () { var t, e = this.originalPosition; this._destroyOverlay(), this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(), this.uiDialog.stop(!0, !0).remove(), this.originalTitle && this.element.attr("title", this.originalTitle), t = e.parent.children().eq(e.index), t.length && t[0] !== this.element[0] ? t.before(this.element) : e.parent.append(this.element) }, widget: function () { return this.uiDialog }, disable: t.noop, enable: t.noop, close: function (e) { var i, n = this; if (this._isOpen && this._trigger("beforeClose", e) !== !1) { if (this._isOpen = !1, this._focusedElement = null, this._destroyOverlay(), this._untrackInstance(), !this.opener.filter(":focusable").focus().length) try { i = this.document[0].activeElement, i && "body" !== i.nodeName.toLowerCase() && t(i).blur() } catch (o) { } this._hide(this.uiDialog, this.options.hide, function () { n._trigger("close", e) }) } }, isOpen: function () { return this._isOpen }, moveToTop: function () { this._moveToTop() }, _moveToTop: function (e, i) { var n = !1, o = this.uiDialog.siblings(".ui-front:visible").map(function () { return +t(this).css("z-index") }).get(), s = Math.max.apply(null, o); return s >= +this.uiDialog.css("z-index") && (this.uiDialog.css("z-index", s + 1), n = !0), n && !i && this._trigger("focus", e), n }, open: function () { var e = this; return this._isOpen ? void (this._moveToTop() && this._focusTabbable()) : (this._isOpen = !0, this.opener = t(this.document[0].activeElement), this._size(), this._position(), this._createOverlay(), this._moveToTop(null, !0), this.overlay && this.overlay.css("z-index", this.uiDialog.css("z-index") - 1), this._show(this.uiDialog, this.options.show, function () { e._focusTabbable(), e._trigger("focus") }), this._makeFocusTarget(), void this._trigger("open")) }, _focusTabbable: function () { var t = this._focusedElement; t || (t = this.element.find("[autofocus]")), t.length || (t = this.element.find(":tabbable")), t.length || (t = this.uiDialogButtonPane.find(":tabbable")), t.length || (t = this.uiDialogTitlebarClose.filter(":tabbable")), t.length || (t = this.uiDialog), t.eq(0).focus() }, _keepFocus: function (e) { function i() { var e = this.document[0].activeElement, i = this.uiDialog[0] === e || t.contains(this.uiDialog[0], e); i || this._focusTabbable() } e.preventDefault(), i.call(this), this._delay(i) }, _createWrapper: function () { this.uiDialog = t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({ tabIndex: -1, role: "dialog" }).appendTo(this._appendTo()), this._on(this.uiDialog, { keydown: function (e) { if (this.options.closeOnEscape && !e.isDefaultPrevented() && e.keyCode && e.keyCode === t.ui.keyCode.ESCAPE) return e.preventDefault(), void this.close(e); if (e.keyCode === t.ui.keyCode.TAB && !e.isDefaultPrevented()) { var i = this.uiDialog.find(":tabbable"), n = i.filter(":first"), o = i.filter(":last"); e.target !== o[0] && e.target !== this.uiDialog[0] || e.shiftKey ? e.target !== n[0] && e.target !== this.uiDialog[0] || !e.shiftKey || (this._delay(function () { o.focus() }), e.preventDefault()) : (this._delay(function () { n.focus() }), e.preventDefault()) } }, mousedown: function (t) { this._moveToTop(t) && this._focusTabbable() } }), this.element.find("[aria-describedby]").length || this.uiDialog.attr({ "aria-describedby": this.element.uniqueId().attr("id") }) }, _createTitlebar: function () { var e; this.uiDialogTitlebar = t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog), this._on(this.uiDialogTitlebar, { mousedown: function (e) { t(e.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus() } }), this.uiDialogTitlebarClose = t("<button type='button'></button>").button({ label: this.options.closeText, icons: { primary: "ui-icon-closethick" }, text: !1 }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar), this._on(this.uiDialogTitlebarClose, { click: function (t) { t.preventDefault(), this.close(t) } }), e = t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar), this._title(e), this.uiDialog.attr({ "aria-labelledby": e.attr("id") }) }, _title: function (t) { this.options.title || t.html("&#160;"), t.text(this.options.title) }, _createButtonPane: function () { this.uiDialogButtonPane = t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), this.uiButtonSet = t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane), this._createButtons() }, _createButtons: function () { var e = this, i = this.options.buttons; return this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), t.isEmptyObject(i) || t.isArray(i) && !i.length ? void this.uiDialog.removeClass("ui-dialog-buttons") : (t.each(i, function (i, n) { var o, s; n = t.isFunction(n) ? { click: n, text: i } : n, n = t.extend({ type: "button" }, n), o = n.click, n.click = function () { o.apply(e.element[0], arguments) }, s = { icons: n.icons, text: n.showText }, delete n.icons, delete n.showText, t("<button></button>", n).button(s).appendTo(e.uiButtonSet) }), this.uiDialog.addClass("ui-dialog-buttons"), void this.uiDialogButtonPane.appendTo(this.uiDialog)) }, _makeDraggable: function () { function e(t) { return { position: t.position, offset: t.offset } } var i = this, n = this.options; this.uiDialog.draggable({ cancel: ".ui-dialog-content, .ui-dialog-titlebar-close", handle: ".ui-dialog-titlebar", containment: "document", start: function (n, o) { t(this).addClass("ui-dialog-dragging"), i._blockFrames(), i._trigger("dragStart", n, e(o)) }, drag: function (t, n) { i._trigger("drag", t, e(n)) }, stop: function (o, s) { var a = s.offset.left - i.document.scrollLeft(), r = s.offset.top - i.document.scrollTop(); n.position = { my: "left top", at: "left" + (a >= 0 ? "+" : "") + a + " top" + (r >= 0 ? "+" : "") + r, of: i.window }, t(this).removeClass("ui-dialog-dragging"), i._unblockFrames(), i._trigger("dragStop", o, e(s)) } }) }, _makeResizable: function () { function e(t) { return { originalPosition: t.originalPosition, originalSize: t.originalSize, position: t.position, size: t.size } } var i = this, n = this.options, o = n.resizable, s = this.uiDialog.css("position"), a = "string" == typeof o ? o : "n,e,s,w,se,sw,ne,nw"; this.uiDialog.resizable({ cancel: ".ui-dialog-content", containment: "document", alsoResize: this.element, maxWidth: n.maxWidth, maxHeight: n.maxHeight, minWidth: n.minWidth, minHeight: this._minHeight(), handles: a, start: function (n, o) { t(this).addClass("ui-dialog-resizing"), i._blockFrames(), i._trigger("resizeStart", n, e(o)) }, resize: function (t, n) { i._trigger("resize", t, e(n)) }, stop: function (o, s) { var a = i.uiDialog.offset(), r = a.left - i.document.scrollLeft(), l = a.top - i.document.scrollTop(); n.height = i.uiDialog.height(), n.width = i.uiDialog.width(), n.position = { my: "left top", at: "left" + (r >= 0 ? "+" : "") + r + " top" + (l >= 0 ? "+" : "") + l, of: i.window }, t(this).removeClass("ui-dialog-resizing"), i._unblockFrames(), i._trigger("resizeStop", o, e(s)) } }).css("position", s) }, _trackFocus: function () { this._on(this.widget(), { focusin: function (e) { this._makeFocusTarget(), this._focusedElement = t(e.target) } }) }, _makeFocusTarget: function () { this._untrackInstance(), this._trackingInstances().unshift(this) }, _untrackInstance: function () { var e = this._trackingInstances(), i = t.inArray(this, e); -1 !== i && e.splice(i, 1) }, _trackingInstances: function () { var t = this.document.data("ui-dialog-instances"); return t || (t = [], this.document.data("ui-dialog-instances", t)), t }, _minHeight: function () { var t = this.options; return "auto" === t.height ? t.minHeight : Math.min(t.minHeight, t.height) }, _position: function () { var t = this.uiDialog.is(":visible"); t || this.uiDialog.show(), this.uiDialog.position(this.options.position), t || this.uiDialog.hide() }, _setOptions: function (e) { var i = this, n = !1, o = {}; t.each(e, function (t, e) { i._setOption(t, e), t in i.sizeRelatedOptions && (n = !0), t in i.resizableRelatedOptions && (o[t] = e) }), n && (this._size(), this._position()), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", o) }, _setOption: function (t, e) { var i, n, o = this.uiDialog; "dialogClass" === t && o.removeClass(this.options.dialogClass).addClass(e), "disabled" !== t && (this._super(t, e), "appendTo" === t && this.uiDialog.appendTo(this._appendTo()), "buttons" === t && this._createButtons(), "closeText" === t && this.uiDialogTitlebarClose.button({ label: "" + e }), "draggable" === t && (i = o.is(":data(ui-draggable)"), i && !e && o.draggable("destroy"), !i && e && this._makeDraggable()), "position" === t && this._position(), "resizable" === t && (n = o.is(":data(ui-resizable)"), n && !e && o.resizable("destroy"), n && "string" == typeof e && o.resizable("option", "handles", e), n || e === !1 || this._makeResizable()), "title" === t && this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))) }, _size: function () { var t, e, i, n = this.options; this.element.show().css({ width: "auto", minHeight: 0, maxHeight: "none", height: 0 }), n.minWidth > n.width && (n.width = n.minWidth), t = this.uiDialog.css({ height: "auto", width: n.width }).outerHeight(), e = Math.max(0, n.minHeight - t), i = "number" == typeof n.maxHeight ? Math.max(0, n.maxHeight - t) : "none", "auto" === n.height ? this.element.css({ minHeight: e, maxHeight: i, height: "auto" }) : this.element.height(Math.max(0, n.height - t)), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight()) }, _blockFrames: function () { this.iframeBlocks = this.document.find("iframe").map(function () { var e = t(this); return t("<div>").css({ position: "absolute", width: e.outerWidth(), height: e.outerHeight() }).appendTo(e.parent()).offset(e.offset())[0] }) }, _unblockFrames: function () { this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks) }, _allowInteraction: function (e) { return t(e.target).closest(".ui-dialog").length ? !0 : !!t(e.target).closest(".ui-datepicker").length }, _createOverlay: function () { if (this.options.modal) { var e = !0; this._delay(function () { e = !1 }), this.document.data("ui-dialog-overlays") || this._on(this.document, { focusin: function (t) { e || this._allowInteraction(t) || (t.preventDefault(), this._trackingInstances()[0]._focusTabbable()) } }), this.overlay = t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()), this._on(this.overlay, { mousedown: "_keepFocus" }), this.document.data("ui-dialog-overlays", (this.document.data("ui-dialog-overlays") || 0) + 1) } }, _destroyOverlay: function () { if (this.options.modal && this.overlay) { var t = this.document.data("ui-dialog-overlays") - 1; t ? this.document.data("ui-dialog-overlays", t) : this.document.unbind("focusin").removeData("ui-dialog-overlays"), this.overlay.remove(), this.overlay = null } } }), t.widget("ui.progressbar", { version: "1.11.1", options: { max: 100, value: 0, change: null, complete: null }, min: 0, _create: function () { this.oldValue = this.options.value = this._constrainedValue(), this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({ role: "progressbar", "aria-valuemin": this.min }), this.valueDiv = t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element), this._refreshValue() }, _destroy: function () { this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.valueDiv.remove() }, value: function (t) { return void 0 === t ? this.options.value : (this.options.value = this._constrainedValue(t), void this._refreshValue()) }, _constrainedValue: function (t) { return void 0 === t && (t = this.options.value), this.indeterminate = t === !1, "number" != typeof t && (t = 0), this.indeterminate ? !1 : Math.min(this.options.max, Math.max(this.min, t)) }, _setOptions: function (t) { var e = t.value; delete t.value, this._super(t), this.options.value = this._constrainedValue(e), this._refreshValue() }, _setOption: function (t, e) { "max" === t && (e = Math.max(this.min, e)), "disabled" === t && this.element.toggleClass("ui-state-disabled", !!e).attr("aria-disabled", e), this._super(t, e) }, _percentage: function () { return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min) }, _refreshValue: function () { var e = this.options.value, i = this._percentage(); this.valueDiv.toggle(this.indeterminate || e > this.min).toggleClass("ui-corner-right", e === this.options.max).width(i.toFixed(0) + "%"), this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate), this.indeterminate ? (this.element.removeAttr("aria-valuenow"), this.overlayDiv || (this.overlayDiv = t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))) : (this.element.attr({ "aria-valuemax": this.options.max, "aria-valuenow": e }), this.overlayDiv && (this.overlayDiv.remove(), this.overlayDiv = null)), this.oldValue !== e && (this.oldValue = e, this._trigger("change")), e === this.options.max && this._trigger("complete") } }), t.widget("ui.selectmenu", {
            version: "1.11.1", defaultElement: "<select>", options: { appendTo: null, disabled: null, icons: { button: "ui-icon-triangle-1-s" }, position: { my: "left top", at: "left bottom", collision: "none" }, width: null, change: null, close: null, focus: null, open: null, select: null }, _create: function () { var t = this.element.uniqueId().attr("id"); this.ids = { element: t, button: t + "-button", menu: t + "-menu" }, this._drawButton(), this._drawMenu(), this.options.disabled && this.disable() }, _drawButton: function () { var e = this, i = this.element.attr("tabindex"); this.label = t("label[for='" + this.ids.element + "']").attr("for", this.ids.button), this._on(this.label, { click: function (t) { this.button.focus(), t.preventDefault() } }), this.element.hide(), this.button = t("<span>", { "class": "ui-selectmenu-button ui-widget ui-state-default ui-corner-all", tabindex: i || this.options.disabled ? -1 : 0, id: this.ids.button, role: "combobox", "aria-expanded": "false", "aria-autocomplete": "list", "aria-owns": this.ids.menu, "aria-haspopup": "true" }).insertAfter(this.element), t("<span>", { "class": "ui-icon " + this.options.icons.button }).prependTo(this.button), this.buttonText = t("<span>", { "class": "ui-selectmenu-text" }).appendTo(this.button), this._setText(this.buttonText, this.element.find("option:selected").text()), this._resizeButton(), this._on(this.button, this._buttonEvents), this.button.one("focusin", function () { e.menuItems || e._refreshMenu() }), this._hoverable(this.button), this._focusable(this.button) }, _drawMenu: function () { var e = this; this.menu = t("<ul>", { "aria-hidden": "true", "aria-labelledby": this.ids.button, id: this.ids.menu }), this.menuWrap = t("<div>", { "class": "ui-selectmenu-menu ui-front" }).append(this.menu).appendTo(this._appendTo()), this.menuInstance = this.menu.menu({ role: "listbox", select: function (t, i) { t.preventDefault(), e._select(i.item.data("ui-selectmenu-item"), t) }, focus: function (t, i) { var n = i.item.data("ui-selectmenu-item"); null != e.focusIndex && n.index !== e.focusIndex && (e._trigger("focus", t, { item: n }), e.isOpen || e._select(n, t)), e.focusIndex = n.index, e.button.attr("aria-activedescendant", e.menuItems.eq(n.index).attr("id")) } }).menu("instance"), this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"), this.menuInstance._off(this.menu, "mouseleave"), this.menuInstance._closeOnDocumentClick = function () { return !1 }, this.menuInstance._isDivider = function () { return !1 } }, refresh: function () { this._refreshMenu(), this._setText(this.buttonText, this._getSelectedItem().text()), this.options.width || this._resizeButton() }, _refreshMenu: function () { this.menu.empty(); var t, e = this.element.find("option"); e.length && (this._parseOptions(e), this._renderMenu(this.menu, this.items), this.menuInstance.refresh(), this.menuItems = this.menu.find("li").not(".ui-selectmenu-optgroup"), t = this._getSelectedItem(), this.menuInstance.focus(null, t), this._setAria(t.data("ui-selectmenu-item")), this._setOption("disabled", this.element.prop("disabled"))) }, open: function (t) { this.options.disabled || (this.menuItems ? (this.menu.find(".ui-state-focus").removeClass("ui-state-focus"), this.menuInstance.focus(null, this._getSelectedItem())) : this._refreshMenu(), this.isOpen = !0, this._toggleAttr(), this._resizeMenu(), this._position(), this._on(this.document, this._documentClick), this._trigger("open", t)) }, _position: function () { this.menuWrap.position(t.extend({ of: this.button }, this.options.position)) }, close: function (t) { this.isOpen && (this.isOpen = !1, this._toggleAttr(), this._off(this.document), this._trigger("close", t)) }, widget: function () { return this.button }, menuWidget: function () { return this.menu }, _renderMenu: function (e, i) { var n = this, o = ""; t.each(i, function (i, s) { s.optgroup !== o && (t("<li>", { "class": "ui-selectmenu-optgroup ui-menu-divider" + (s.element.parent("optgroup").prop("disabled") ? " ui-state-disabled" : ""), text: s.optgroup }).appendTo(e), o = s.optgroup), n._renderItemData(e, s) }) }, _renderItemData: function (t, e) { return this._renderItem(t, e).data("ui-selectmenu-item", e) }, _renderItem: function (e, i) { var n = t("<li>"); return i.disabled && n.addClass("ui-state-disabled"), this._setText(n, i.label), n.appendTo(e) }, _setText: function (t, e) { e ? t.text(e) : t.html("&#160;") }, _move: function (t, e) { var i, n, o = ".ui-menu-item"; this.isOpen ? i = this.menuItems.eq(this.focusIndex) : (i = this.menuItems.eq(this.element[0].selectedIndex), o += ":not(.ui-state-disabled)"), n = "first" === t || "last" === t ? i["first" === t ? "prevAll" : "nextAll"](o).eq(-1) : i[t + "All"](o).eq(0), n.length && this.menuInstance.focus(e, n) }, _getSelectedItem: function () { return this.menuItems.eq(this.element[0].selectedIndex) }, _toggle: function (t) { this[this.isOpen ? "close" : "open"](t) }, _documentClick: { mousedown: function (e) { this.isOpen && (t(e.target).closest(".ui-selectmenu-menu, #" + this.ids.button).length || this.close(e)) } }, _buttonEvents: {
                mousedown: function (t) { t.preventDefault() }, click: "_toggle", keydown: function (e) {
                    var i = !0; switch (e.keyCode) {
                        case t.ui.keyCode.TAB: case t.ui.keyCode.ESCAPE: this.close(e), i = !1; break; case t.ui.keyCode.ENTER: this.isOpen && this._selectFocusedItem(e); break; case t.ui.keyCode.UP: e.altKey ? this._toggle(e) : this._move("prev", e); break; case t.ui.keyCode.DOWN: e.altKey ? this._toggle(e) : this._move("next", e); break; case t.ui.keyCode.SPACE: this.isOpen ? this._selectFocusedItem(e) : this._toggle(e); break; case t.ui.keyCode.LEFT:
                            this._move("prev", e); break; case t.ui.keyCode.RIGHT: this._move("next", e); break; case t.ui.keyCode.HOME: case t.ui.keyCode.PAGE_UP: this._move("first", e); break; case t.ui.keyCode.END: case t.ui.keyCode.PAGE_DOWN: this._move("last", e); break; default: this.menu.trigger(e), i = !1
                    }i && e.preventDefault()
                }
            }, _selectFocusedItem: function (t) { var e = this.menuItems.eq(this.focusIndex); e.hasClass("ui-state-disabled") || this._select(e.data("ui-selectmenu-item"), t) }, _select: function (t, e) { var i = this.element[0].selectedIndex; this.element[0].selectedIndex = t.index, this._setText(this.buttonText, t.label), this._setAria(t), this._trigger("select", e, { item: t }), t.index !== i && this._trigger("change", e, { item: t }), this.close(e) }, _setAria: function (t) { var e = this.menuItems.eq(t.index).attr("id"); this.button.attr({ "aria-labelledby": e, "aria-activedescendant": e }), this.menu.attr("aria-activedescendant", e) }, _setOption: function (t, e) { "icons" === t && this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(e.button), this._super(t, e), "appendTo" === t && this.menuWrap.appendTo(this._appendTo()), "disabled" === t && (this.menuInstance.option("disabled", e), this.button.toggleClass("ui-state-disabled", e).attr("aria-disabled", e), this.element.prop("disabled", e), e ? (this.button.attr("tabindex", -1), this.close()) : this.button.attr("tabindex", 0)), "width" === t && this._resizeButton() }, _appendTo: function () { var e = this.options.appendTo; return e && (e = e.jquery || e.nodeType ? t(e) : this.document.find(e).eq(0)), e && e[0] || (e = this.element.closest(".ui-front")), e.length || (e = this.document[0].body), e }, _toggleAttr: function () { this.button.toggleClass("ui-corner-top", this.isOpen).toggleClass("ui-corner-all", !this.isOpen).attr("aria-expanded", this.isOpen), this.menuWrap.toggleClass("ui-selectmenu-open", this.isOpen), this.menu.attr("aria-hidden", !this.isOpen) }, _resizeButton: function () { var t = this.options.width; t || (t = this.element.show().outerWidth(), this.element.hide()), this.button.outerWidth(t) }, _resizeMenu: function () { this.menu.outerWidth(Math.max(this.button.outerWidth(), this.menu.width("").outerWidth() + 1)) }, _getCreateOptions: function () { return { disabled: this.element.prop("disabled") } }, _parseOptions: function (e) { var i = []; e.each(function (e, n) { var o = t(n), s = o.parent("optgroup"); i.push({ element: o, index: e, value: o.attr("value"), label: o.text(), optgroup: s.attr("label") || "", disabled: s.prop("disabled") || o.prop("disabled") }) }), this.items = i }, _destroy: function () { this.menuWrap.remove(), this.button.remove(), this.element.show(), this.element.removeUniqueId(), this.label.attr("for", this.ids.element) }
        }), t.widget("ui.slider", t.ui.mouse, { version: "1.11.1", widgetEventPrefix: "slide", options: { animate: !1, distance: 0, max: 100, min: 0, orientation: "horizontal", range: !1, step: 1, value: 0, values: null, change: null, slide: null, start: null, stop: null }, numPages: 5, _create: function () { this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all"), this._refresh(), this._setOption("disabled", this.options.disabled), this._animateOff = !1 }, _refresh: function () { this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue() }, _createHandles: function () { var e, i, n = this.options, o = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"), s = "<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>", a = []; for (i = n.values && n.values.length || 1, o.length > i && (o.slice(i).remove(), o = o.slice(0, i)), e = o.length; i > e; e++)a.push(s); this.handles = o.add(t(a.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), this.handles.each(function (e) { t(this).data("ui-slider-handle-index", e) }) }, _createRange: function () { var e = this.options, i = ""; e.range ? (e.range === !0 && (e.values ? e.values.length && 2 !== e.values.length ? e.values = [e.values[0], e.values[0]] : t.isArray(e.values) && (e.values = e.values.slice(0)) : e.values = [this._valueMin(), this._valueMin()]), this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({ left: "", bottom: "" }) : (this.range = t("<div></div>").appendTo(this.element), i = "ui-slider-range ui-widget-header ui-corner-all"), this.range.addClass(i + ("min" === e.range || "max" === e.range ? " ui-slider-range-" + e.range : ""))) : (this.range && this.range.remove(), this.range = null) }, _setupEvents: function () { this._off(this.handles), this._on(this.handles, this._handleEvents), this._hoverable(this.handles), this._focusable(this.handles) }, _destroy: function () { this.handles.remove(), this.range && this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"), this._mouseDestroy() }, _mouseCapture: function (e) { var i, n, o, s, a, r, l, h, c = this, u = this.options; return u.disabled ? !1 : (this.elementSize = { width: this.element.outerWidth(), height: this.element.outerHeight() }, this.elementOffset = this.element.offset(), i = { x: e.pageX, y: e.pageY }, n = this._normValueFromMouse(i), o = this._valueMax() - this._valueMin() + 1, this.handles.each(function (e) { var i = Math.abs(n - c.values(e)); (o > i || o === i && (e === c._lastChangedValue || c.values(e) === u.min)) && (o = i, s = t(this), a = e) }), r = this._start(e, a), r === !1 ? !1 : (this._mouseSliding = !0, this._handleIndex = a, s.addClass("ui-state-active").focus(), l = s.offset(), h = !t(e.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = h ? { left: 0, top: 0 } : { left: e.pageX - l.left - s.width() / 2, top: e.pageY - l.top - s.height() / 2 - (parseInt(s.css("borderTopWidth"), 10) || 0) - (parseInt(s.css("borderBottomWidth"), 10) || 0) + (parseInt(s.css("marginTop"), 10) || 0) }, this.handles.hasClass("ui-state-hover") || this._slide(e, a, n), this._animateOff = !0, !0)) }, _mouseStart: function () { return !0 }, _mouseDrag: function (t) { var e = { x: t.pageX, y: t.pageY }, i = this._normValueFromMouse(e); return this._slide(t, this._handleIndex, i), !1 }, _mouseStop: function (t) { return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(t, this._handleIndex), this._change(t, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1 }, _detectOrientation: function () { this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal" }, _normValueFromMouse: function (t) { var e, i, n, o, s; return "horizontal" === this.orientation ? (e = this.elementSize.width, i = t.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (e = this.elementSize.height, i = t.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), n = i / e, n > 1 && (n = 1), 0 > n && (n = 0), "vertical" === this.orientation && (n = 1 - n), o = this._valueMax() - this._valueMin(), s = this._valueMin() + n * o, this._trimAlignValue(s) }, _start: function (t, e) { var i = { handle: this.handles[e], value: this.value() }; return this.options.values && this.options.values.length && (i.value = this.values(e), i.values = this.values()), this._trigger("start", t, i) }, _slide: function (t, e, i) { var n, o, s; this.options.values && this.options.values.length ? (n = this.values(e ? 0 : 1), 2 === this.options.values.length && this.options.range === !0 && (0 === e && i > n || 1 === e && n > i) && (i = n), i !== this.values(e) && (o = this.values(), o[e] = i, s = this._trigger("slide", t, { handle: this.handles[e], value: i, values: o }), n = this.values(e ? 0 : 1), s !== !1 && this.values(e, i))) : i !== this.value() && (s = this._trigger("slide", t, { handle: this.handles[e], value: i }), s !== !1 && this.value(i)) }, _stop: function (t, e) { var i = { handle: this.handles[e], value: this.value() }; this.options.values && this.options.values.length && (i.value = this.values(e), i.values = this.values()), this._trigger("stop", t, i) }, _change: function (t, e) { if (!this._keySliding && !this._mouseSliding) { var i = { handle: this.handles[e], value: this.value() }; this.options.values && this.options.values.length && (i.value = this.values(e), i.values = this.values()), this._lastChangedValue = e, this._trigger("change", t, i) } }, value: function (t) { return arguments.length ? (this.options.value = this._trimAlignValue(t), this._refreshValue(), void this._change(null, 0)) : this._value() }, values: function (e, i) { var n, o, s; if (arguments.length > 1) return this.options.values[e] = this._trimAlignValue(i), this._refreshValue(), void this._change(null, e); if (!arguments.length) return this._values(); if (!t.isArray(arguments[0])) return this.options.values && this.options.values.length ? this._values(e) : this.value(); for (n = this.options.values, o = arguments[0], s = 0; s < n.length; s += 1)n[s] = this._trimAlignValue(o[s]), this._change(null, s); this._refreshValue() }, _setOption: function (e, i) { var n, o = 0; switch ("range" === e && this.options.range === !0 && ("min" === i ? (this.options.value = this._values(0), this.options.values = null) : "max" === i && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), t.isArray(this.options.values) && (o = this.options.values.length), "disabled" === e && this.element.toggleClass("ui-state-disabled", !!i), this._super(e, i), e) { case "orientation": this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), this._refreshValue(), this.handles.css("horizontal" === i ? "bottom" : "left", ""); break; case "value": this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1; break; case "values": for (this._animateOff = !0, this._refreshValue(), n = 0; o > n; n += 1)this._change(null, n); this._animateOff = !1; break; case "min": case "max": this._animateOff = !0, this._refreshValue(), this._animateOff = !1; break; case "range": this._animateOff = !0, this._refresh(), this._animateOff = !1 } }, _value: function () { var t = this.options.value; return t = this._trimAlignValue(t) }, _values: function (t) { var e, i, n; if (arguments.length) return e = this.options.values[t], e = this._trimAlignValue(e); if (this.options.values && this.options.values.length) { for (i = this.options.values.slice(), n = 0; n < i.length; n += 1)i[n] = this._trimAlignValue(i[n]); return i } return [] }, _trimAlignValue: function (t) { if (t <= this._valueMin()) return this._valueMin(); if (t >= this._valueMax()) return this._valueMax(); var e = this.options.step > 0 ? this.options.step : 1, i = (t - this._valueMin()) % e, n = t - i; return 2 * Math.abs(i) >= e && (n += i > 0 ? e : -e), parseFloat(n.toFixed(5)) }, _valueMin: function () { return this.options.min }, _valueMax: function () { return this.options.max }, _refreshValue: function () { var e, i, n, o, s, a = this.options.range, r = this.options, l = this, h = this._animateOff ? !1 : r.animate, c = {}; this.options.values && this.options.values.length ? this.handles.each(function (n) { i = (l.values(n) - l._valueMin()) / (l._valueMax() - l._valueMin()) * 100, c["horizontal" === l.orientation ? "left" : "bottom"] = i + "%", t(this).stop(1, 1)[h ? "animate" : "css"](c, r.animate), l.options.range === !0 && ("horizontal" === l.orientation ? (0 === n && l.range.stop(1, 1)[h ? "animate" : "css"]({ left: i + "%" }, r.animate), 1 === n && l.range[h ? "animate" : "css"]({ width: i - e + "%" }, { queue: !1, duration: r.animate })) : (0 === n && l.range.stop(1, 1)[h ? "animate" : "css"]({ bottom: i + "%" }, r.animate), 1 === n && l.range[h ? "animate" : "css"]({ height: i - e + "%" }, { queue: !1, duration: r.animate }))), e = i }) : (n = this.value(), o = this._valueMin(), s = this._valueMax(), i = s !== o ? (n - o) / (s - o) * 100 : 0, c["horizontal" === this.orientation ? "left" : "bottom"] = i + "%", this.handle.stop(1, 1)[h ? "animate" : "css"](c, r.animate), "min" === a && "horizontal" === this.orientation && this.range.stop(1, 1)[h ? "animate" : "css"]({ width: i + "%" }, r.animate), "max" === a && "horizontal" === this.orientation && this.range[h ? "animate" : "css"]({ width: 100 - i + "%" }, { queue: !1, duration: r.animate }), "min" === a && "vertical" === this.orientation && this.range.stop(1, 1)[h ? "animate" : "css"]({ height: i + "%" }, r.animate), "max" === a && "vertical" === this.orientation && this.range[h ? "animate" : "css"]({ height: 100 - i + "%" }, { queue: !1, duration: r.animate })) }, _handleEvents: { keydown: function (e) { var i, n, o, s, a = t(e.target).data("ui-slider-handle-index"); switch (e.keyCode) { case t.ui.keyCode.HOME: case t.ui.keyCode.END: case t.ui.keyCode.PAGE_UP: case t.ui.keyCode.PAGE_DOWN: case t.ui.keyCode.UP: case t.ui.keyCode.RIGHT: case t.ui.keyCode.DOWN: case t.ui.keyCode.LEFT: if (e.preventDefault(), !this._keySliding && (this._keySliding = !0, t(e.target).addClass("ui-state-active"), i = this._start(e, a), i === !1)) return }switch (s = this.options.step, n = o = this.options.values && this.options.values.length ? this.values(a) : this.value(), e.keyCode) { case t.ui.keyCode.HOME: o = this._valueMin(); break; case t.ui.keyCode.END: o = this._valueMax(); break; case t.ui.keyCode.PAGE_UP: o = this._trimAlignValue(n + (this._valueMax() - this._valueMin()) / this.numPages); break; case t.ui.keyCode.PAGE_DOWN: o = this._trimAlignValue(n - (this._valueMax() - this._valueMin()) / this.numPages); break; case t.ui.keyCode.UP: case t.ui.keyCode.RIGHT: if (n === this._valueMax()) return; o = this._trimAlignValue(n + s); break; case t.ui.keyCode.DOWN: case t.ui.keyCode.LEFT: if (n === this._valueMin()) return; o = this._trimAlignValue(n - s) }this._slide(e, a, o) }, keyup: function (e) { var i = t(e.target).data("ui-slider-handle-index"); this._keySliding && (this._keySliding = !1, this._stop(e, i), this._change(e, i), t(e.target).removeClass("ui-state-active")) } } }), t.widget("ui.spinner", { version: "1.11.1", defaultElement: "<input>", widgetEventPrefix: "spin", options: { culture: null, icons: { down: "ui-icon-triangle-1-s", up: "ui-icon-triangle-1-n" }, incremental: !0, max: null, min: null, numberFormat: null, page: 10, step: 1, change: null, spin: null, start: null, stop: null }, _create: function () { this._setOption("max", this.options.max), this._setOption("min", this.options.min), this._setOption("step", this.options.step), "" !== this.value() && this._value(this.element.val(), !0), this._draw(), this._on(this._events), this._refresh(), this._on(this.window, { beforeunload: function () { this.element.removeAttr("autocomplete") } }) }, _getCreateOptions: function () { var e = {}, i = this.element; return t.each(["min", "max", "step"], function (t, n) { var o = i.attr(n); void 0 !== o && o.length && (e[n] = o) }), e }, _events: { keydown: function (t) { this._start(t) && this._keydown(t) && t.preventDefault() }, keyup: "_stop", focus: function () { this.previous = this.element.val() }, blur: function (t) { return this.cancelBlur ? void delete this.cancelBlur : (this._stop(), this._refresh(), void (this.previous !== this.element.val() && this._trigger("change", t))) }, mousewheel: function (t, e) { if (e) { if (!this.spinning && !this._start(t)) return !1; this._spin((e > 0 ? 1 : -1) * this.options.step, t), clearTimeout(this.mousewheelTimer), this.mousewheelTimer = this._delay(function () { this.spinning && this._stop(t) }, 100), t.preventDefault() } }, "mousedown .ui-spinner-button": function (e) { function i() { var t = this.element[0] === this.document[0].activeElement; t || (this.element.focus(), this.previous = n, this._delay(function () { this.previous = n })) } var n; n = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val(), e.preventDefault(), i.call(this), this.cancelBlur = !0, this._delay(function () { delete this.cancelBlur, i.call(this) }), this._start(e) !== !1 && this._repeat(null, t(e.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, e) }, "mouseup .ui-spinner-button": "_stop", "mouseenter .ui-spinner-button": function (e) { return t(e.currentTarget).hasClass("ui-state-active") ? this._start(e) === !1 ? !1 : void this._repeat(null, t(e.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, e) : void 0 }, "mouseleave .ui-spinner-button": "_stop" }, _draw: function () { var t = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml()); this.element.attr("role", "spinbutton"), this.buttons = t.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all"), this.buttons.height() > Math.ceil(.5 * t.height()) && t.height() > 0 && t.height(t.height()), this.options.disabled && this.disable() }, _keydown: function (e) { var i = this.options, n = t.ui.keyCode; switch (e.keyCode) { case n.UP: return this._repeat(null, 1, e), !0; case n.DOWN: return this._repeat(null, -1, e), !0; case n.PAGE_UP: return this._repeat(null, i.page, e), !0; case n.PAGE_DOWN: return this._repeat(null, -i.page, e), !0 }return !1 }, _uiSpinnerHtml: function () { return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>" }, _buttonHtml: function () { return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon " + this.options.icons.down + "'>&#9660;</span></a>" }, _start: function (t) { return this.spinning || this._trigger("start", t) !== !1 ? (this.counter || (this.counter = 1), this.spinning = !0, !0) : !1 }, _repeat: function (t, e, i) { t = t || 500, clearTimeout(this.timer), this.timer = this._delay(function () { this._repeat(40, e, i) }, t), this._spin(e * this.options.step, i) }, _spin: function (t, e) { var i = this.value() || 0; this.counter || (this.counter = 1), i = this._adjustValue(i + t * this._increment(this.counter)), this.spinning && this._trigger("spin", e, { value: i }) === !1 || (this._value(i), this.counter++) }, _increment: function (e) { var i = this.options.incremental; return i ? t.isFunction(i) ? i(e) : Math.floor(e * e * e / 5e4 - e * e / 500 + 17 * e / 200 + 1) : 1 }, _precision: function () { var t = this._precisionOf(this.options.step); return null !== this.options.min && (t = Math.max(t, this._precisionOf(this.options.min))), t }, _precisionOf: function (t) { var e = t.toString(), i = e.indexOf("."); return -1 === i ? 0 : e.length - i - 1 }, _adjustValue: function (t) { var e, i, n = this.options; return e = null !== n.min ? n.min : 0, i = t - e, i = Math.round(i / n.step) * n.step, t = e + i, t = parseFloat(t.toFixed(this._precision())), null !== n.max && t > n.max ? n.max : null !== n.min && t < n.min ? n.min : t }, _stop: function (t) { this.spinning && (clearTimeout(this.timer), clearTimeout(this.mousewheelTimer), this.counter = 0, this.spinning = !1, this._trigger("stop", t)) }, _setOption: function (t, e) { if ("culture" === t || "numberFormat" === t) { var i = this._parse(this.element.val()); return this.options[t] = e, void this.element.val(this._format(i)) } ("max" === t || "min" === t || "step" === t) && "string" == typeof e && (e = this._parse(e)), "icons" === t && (this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up), this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)), this._super(t, e), "disabled" === t && (this.widget().toggleClass("ui-state-disabled", !!e), this.element.prop("disabled", !!e), this.buttons.button(e ? "disable" : "enable")) }, _setOptions: l(function (t) { this._super(t) }), _parse: function (t) { return "string" == typeof t && "" !== t && (t = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(t, 10, this.options.culture) : +t), "" === t || isNaN(t) ? null : t }, _format: function (t) { return "" === t ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(t, this.options.numberFormat, this.options.culture) : t }, _refresh: function () { this.element.attr({ "aria-valuemin": this.options.min, "aria-valuemax": this.options.max, "aria-valuenow": this._parse(this.element.val()) }) }, isValid: function () { var t = this.value(); return null === t ? !1 : t === this._adjustValue(t) }, _value: function (t, e) { var i; "" !== t && (i = this._parse(t), null !== i && (e || (i = this._adjustValue(i)), t = this._format(i))), this.element.val(t), this._refresh() }, _destroy: function () { this.element.removeClass("ui-spinner-input").prop("disabled", !1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.uiSpinner.replaceWith(this.element) }, stepUp: l(function (t) { this._stepUp(t) }), _stepUp: function (t) { this._start() && (this._spin((t || 1) * this.options.step), this._stop()) }, stepDown: l(function (t) { this._stepDown(t) }), _stepDown: function (t) { this._start() && (this._spin((t || 1) * -this.options.step), this._stop()) }, pageUp: l(function (t) { this._stepUp((t || 1) * this.options.page) }), pageDown: l(function (t) { this._stepDown((t || 1) * this.options.page) }), value: function (t) { return arguments.length ? void l(this._value).call(this, t) : this._parse(this.element.val()) }, widget: function () { return this.uiSpinner } }), t.widget("ui.tabs", { version: "1.11.1", delay: 300, options: { active: null, collapsible: !1, event: "click", heightStyle: "content", hide: null, show: null, activate: null, beforeActivate: null, beforeLoad: null, load: null }, _isLocal: function () { var t = /#.*$/; return function (e) { var i, n; e = e.cloneNode(!1), i = e.href.replace(t, ""), n = location.href.replace(t, ""); try { i = decodeURIComponent(i) } catch (o) { } try { n = decodeURIComponent(n) } catch (o) { } return e.hash.length > 1 && i === n } }(), _create: function () { var e = this, i = this.options; this.running = !1, this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", i.collapsible), this._processTabs(), i.active = this._initialActive(), t.isArray(i.disabled) && (i.disabled = t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"), function (t) { return e.tabs.index(t) }))).sort()), this.options.active !== !1 && this.anchors.length ? this.active = this._findActive(i.active) : this.active = t(), this._refresh(), this.active.length && this.load(i.active) }, _initialActive: function () { var e = this.options.active, i = this.options.collapsible, n = location.hash.substring(1); return null === e && (n && this.tabs.each(function (i, o) { return t(o).attr("aria-controls") === n ? (e = i, !1) : void 0 }), null === e && (e = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), (null === e || -1 === e) && (e = this.tabs.length ? 0 : !1)), e !== !1 && (e = this.tabs.index(this.tabs.eq(e)), -1 === e && (e = i ? !1 : 0)), !i && e === !1 && this.anchors.length && (e = 0), e }, _getCreateEventData: function () { return { tab: this.active, panel: this.active.length ? this._getPanelForTab(this.active) : t() } }, _tabKeydown: function (e) { var i = t(this.document[0].activeElement).closest("li"), n = this.tabs.index(i), o = !0; if (!this._handlePageNav(e)) { switch (e.keyCode) { case t.ui.keyCode.RIGHT: case t.ui.keyCode.DOWN: n++; break; case t.ui.keyCode.UP: case t.ui.keyCode.LEFT: o = !1, n--; break; case t.ui.keyCode.END: n = this.anchors.length - 1; break; case t.ui.keyCode.HOME: n = 0; break; case t.ui.keyCode.SPACE: return e.preventDefault(), clearTimeout(this.activating), void this._activate(n); case t.ui.keyCode.ENTER: return e.preventDefault(), clearTimeout(this.activating), void this._activate(n === this.options.active ? !1 : n); default: return }e.preventDefault(), clearTimeout(this.activating), n = this._focusNextTab(n, o), e.ctrlKey || (i.attr("aria-selected", "false"), this.tabs.eq(n).attr("aria-selected", "true"), this.activating = this._delay(function () { this.option("active", n) }, this.delay)) } }, _panelKeydown: function (e) { this._handlePageNav(e) || e.ctrlKey && e.keyCode === t.ui.keyCode.UP && (e.preventDefault(), this.active.focus()) }, _handlePageNav: function (e) { return e.altKey && e.keyCode === t.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), !0) : e.altKey && e.keyCode === t.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), !0) : void 0 }, _findNextTab: function (e, i) { function n() { return e > o && (e = 0), 0 > e && (e = o), e } for (var o = this.tabs.length - 1; -1 !== t.inArray(n(), this.options.disabled);)e = i ? e + 1 : e - 1; return e }, _focusNextTab: function (t, e) { return t = this._findNextTab(t, e), this.tabs.eq(t).focus(), t }, _setOption: function (t, e) { return "active" === t ? void this._activate(e) : "disabled" === t ? void this._setupDisabled(e) : (this._super(t, e), "collapsible" === t && (this.element.toggleClass("ui-tabs-collapsible", e), e || this.options.active !== !1 || this._activate(0)), "event" === t && this._setupEvents(e), void ("heightStyle" === t && this._setupHeightStyle(e))) }, _sanitizeSelector: function (t) { return t ? t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : "" }, refresh: function () { var e = this.options, i = this.tablist.children(":has(a[href])"); e.disabled = t.map(i.filter(".ui-state-disabled"), function (t) { return i.index(t) }), this._processTabs(), e.active !== !1 && this.anchors.length ? this.active.length && !t.contains(this.tablist[0], this.active[0]) ? this.tabs.length === e.disabled.length ? (e.active = !1, this.active = t()) : this._activate(this._findNextTab(Math.max(0, e.active - 1), !1)) : e.active = this.tabs.index(this.active) : (e.active = !1, this.active = t()), this._refresh() }, _refresh: function () { this._setupDisabled(this.options.disabled), this._setupEvents(this.options.event), this._setupHeightStyle(this.options.heightStyle), this.tabs.not(this.active).attr({ "aria-selected": "false", "aria-expanded": "false", tabIndex: -1 }), this.panels.not(this._getPanelForTab(this.active)).hide().attr({ "aria-hidden": "true" }), this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }), this._getPanelForTab(this.active).show().attr({ "aria-hidden": "false" })) : this.tabs.eq(0).attr("tabIndex", 0) }, _processTabs: function () { var e = this; this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist").delegate("> li", "mousedown" + this.eventNamespace, function (e) { t(this).is(".ui-state-disabled") && e.preventDefault() }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function () { t(this).closest("li").is(".ui-state-disabled") && this.blur() }), this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({ role: "tab", tabIndex: -1 }), this.anchors = this.tabs.map(function () { return t("a", this)[0] }).addClass("ui-tabs-anchor").attr({ role: "presentation", tabIndex: -1 }), this.panels = t(), this.anchors.each(function (i, n) { var o, s, a, r = t(n).uniqueId().attr("id"), l = t(n).closest("li"), h = l.attr("aria-controls"); e._isLocal(n) ? (o = n.hash, a = o.substring(1), s = e.element.find(e._sanitizeSelector(o))) : (a = l.attr("aria-controls") || t({}).uniqueId()[0].id, o = "#" + a, s = e.element.find(o), s.length || (s = e._createPanel(a), s.insertAfter(e.panels[i - 1] || e.tablist)), s.attr("aria-live", "polite")), s.length && (e.panels = e.panels.add(s)), h && l.data("ui-tabs-aria-controls", h), l.attr({ "aria-controls": a, "aria-labelledby": r }), s.attr("aria-labelledby", r) }), this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel") }, _getList: function () { return this.tablist || this.element.find("ol,ul").eq(0) }, _createPanel: function (e) { return t("<div>").attr("id", e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0) }, _setupDisabled: function (e) { t.isArray(e) && (e.length ? e.length === this.anchors.length && (e = !0) : e = !1); for (var i, n = 0; i = this.tabs[n]; n++)e === !0 || -1 !== t.inArray(n, e) ? t(i).addClass("ui-state-disabled").attr("aria-disabled", "true") : t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled"); this.options.disabled = e }, _setupEvents: function (e) { var i = {}; e && t.each(e.split(" "), function (t, e) { i[e] = "_eventHandler" }), this._off(this.anchors.add(this.tabs).add(this.panels)), this._on(!0, this.anchors, { click: function (t) { t.preventDefault() } }), this._on(this.anchors, i), this._on(this.tabs, { keydown: "_tabKeydown" }), this._on(this.panels, { keydown: "_panelKeydown" }), this._focusable(this.tabs), this._hoverable(this.tabs) }, _setupHeightStyle: function (e) { var i, n = this.element.parent(); "fill" === e ? (i = n.height(), i -= this.element.outerHeight() - this.element.height(), this.element.siblings(":visible").each(function () { var e = t(this), n = e.css("position"); "absolute" !== n && "fixed" !== n && (i -= e.outerHeight(!0)) }), this.element.children().not(this.panels).each(function () { i -= t(this).outerHeight(!0) }), this.panels.each(function () { t(this).height(Math.max(0, i - t(this).innerHeight() + t(this).height())) }).css("overflow", "auto")) : "auto" === e && (i = 0, this.panels.each(function () { i = Math.max(i, t(this).height("").height()) }).height(i)) }, _eventHandler: function (e) { var i = this.options, n = this.active, o = t(e.currentTarget), s = o.closest("li"), a = s[0] === n[0], r = a && i.collapsible, l = r ? t() : this._getPanelForTab(s), h = n.length ? this._getPanelForTab(n) : t(), c = { oldTab: n, oldPanel: h, newTab: r ? t() : s, newPanel: l }; e.preventDefault(), s.hasClass("ui-state-disabled") || s.hasClass("ui-tabs-loading") || this.running || a && !i.collapsible || this._trigger("beforeActivate", e, c) === !1 || (i.active = r ? !1 : this.tabs.index(s), this.active = a ? t() : s, this.xhr && this.xhr.abort(), h.length || l.length || t.error("jQuery UI Tabs: Mismatching fragment identifier."), l.length && this.load(this.tabs.index(s), e), this._toggle(e, c)) }, _toggle: function (e, i) { function n() { s.running = !1, s._trigger("activate", e, i) } function o() { i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"), a.length && s.options.show ? s._show(a, s.options.show, n) : (a.show(), n()) } var s = this, a = i.newPanel, r = i.oldPanel; this.running = !0, r.length && this.options.hide ? this._hide(r, this.options.hide, function () { i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), o() }) : (i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), r.hide(), o()), r.attr("aria-hidden", "true"), i.oldTab.attr({ "aria-selected": "false", "aria-expanded": "false" }), a.length && r.length ? i.oldTab.attr("tabIndex", -1) : a.length && this.tabs.filter(function () { return 0 === t(this).attr("tabIndex") }).attr("tabIndex", -1), a.attr("aria-hidden", "false"), i.newTab.attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }) }, _activate: function (e) { var i, n = this._findActive(e); n[0] !== this.active[0] && (n.length || (n = this.active), i = n.find(".ui-tabs-anchor")[0], this._eventHandler({ target: i, currentTarget: i, preventDefault: t.noop })) }, _findActive: function (e) { return e === !1 ? t() : this.tabs.eq(e) }, _getIndex: function (t) { return "string" == typeof t && (t = this.anchors.index(this.anchors.filter("[href$='" + t + "']"))), t }, _destroy: function () { this.xhr && this.xhr.abort(), this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"), this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"), this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(), this.tablist.unbind(this.eventNamespace), this.tabs.add(this.panels).each(function () { t.data(this, "ui-tabs-destroy") ? t(this).remove() : t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role") }), this.tabs.each(function () { var e = t(this), i = e.data("ui-tabs-aria-controls"); i ? e.attr("aria-controls", i).removeData("ui-tabs-aria-controls") : e.removeAttr("aria-controls") }), this.panels.show(), "content" !== this.options.heightStyle && this.panels.css("height", "") }, enable: function (e) { var i = this.options.disabled; i !== !1 && (void 0 === e ? i = !1 : (e = this._getIndex(e), i = t.isArray(i) ? t.map(i, function (t) { return t !== e ? t : null }) : t.map(this.tabs, function (t, i) { return i !== e ? i : null })), this._setupDisabled(i)) }, disable: function (e) { var i = this.options.disabled; if (i !== !0) { if (void 0 === e) i = !0; else { if (e = this._getIndex(e), -1 !== t.inArray(e, i)) return; i = t.isArray(i) ? t.merge([e], i).sort() : [e] } this._setupDisabled(i) } }, load: function (e, i) { e = this._getIndex(e); var n = this, o = this.tabs.eq(e), s = o.find(".ui-tabs-anchor"), a = this._getPanelForTab(o), r = { tab: o, panel: a }; this._isLocal(s[0]) || (this.xhr = t.ajax(this._ajaxSettings(s, i, r)), this.xhr && "canceled" !== this.xhr.statusText && (o.addClass("ui-tabs-loading"), a.attr("aria-busy", "true"), this.xhr.success(function (t) { setTimeout(function () { a.html(t), n._trigger("load", i, r) }, 1) }).complete(function (t, e) { setTimeout(function () { "abort" === e && n.panels.stop(!1, !0), o.removeClass("ui-tabs-loading"), a.removeAttr("aria-busy"), t === n.xhr && delete n.xhr }, 1) }))) }, _ajaxSettings: function (e, i, n) { var o = this; return { url: e.attr("href"), beforeSend: function (e, s) { return o._trigger("beforeLoad", i, t.extend({ jqXHR: e, ajaxSettings: s }, n)) } } }, _getPanelForTab: function (e) { var i = t(e).attr("aria-controls"); return this.element.find(this._sanitizeSelector("#" + i)) } }), t.widget("ui.tooltip", {
            version: "1.11.1", options: { content: function () { var e = t(this).attr("title") || ""; return t("<a>").text(e).html() }, hide: !0, items: "[title]:not([disabled])", position: { my: "left top+15", at: "left bottom", collision: "flipfit flip" }, show: !0, tooltipClass: null, track: !1, close: null, open: null }, _addDescribedBy: function (e, i) { var n = (e.attr("aria-describedby") || "").split(/\s+/); n.push(i), e.data("ui-tooltip-id", i).attr("aria-describedby", t.trim(n.join(" "))) }, _removeDescribedBy: function (e) { var i = e.data("ui-tooltip-id"), n = (e.attr("aria-describedby") || "").split(/\s+/), o = t.inArray(i, n); -1 !== o && n.splice(o, 1), e.removeData("ui-tooltip-id"), n = t.trim(n.join(" ")), n ? e.attr("aria-describedby", n) : e.removeAttr("aria-describedby") }, _create: function () { this._on({ mouseover: "open", focusin: "open" }), this.tooltips = {}, this.parents = {}, this.options.disabled && this._disable(), this.liveRegion = t("<div>").attr({ role: "log", "aria-live": "assertive", "aria-relevant": "additions" }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body) }, _setOption: function (e, i) {
                var n = this; return "disabled" === e ? (this[i ? "_disable" : "_enable"](),
                    void (this.options[e] = i)) : (this._super(e, i), void ("content" === e && t.each(this.tooltips, function (t, e) { n._updateContent(e) })))
            }, _disable: function () { var e = this; t.each(this.tooltips, function (i, n) { var o = t.Event("blur"); o.target = o.currentTarget = n[0], e.close(o, !0) }), this.element.find(this.options.items).addBack().each(function () { var e = t(this); e.is("[title]") && e.data("ui-tooltip-title", e.attr("title")).removeAttr("title") }) }, _enable: function () { this.element.find(this.options.items).addBack().each(function () { var e = t(this); e.data("ui-tooltip-title") && e.attr("title", e.data("ui-tooltip-title")) }) }, open: function (e) { var i = this, n = t(e ? e.target : this.element).closest(this.options.items); n.length && !n.data("ui-tooltip-id") && (n.attr("title") && n.data("ui-tooltip-title", n.attr("title")), n.data("ui-tooltip-open", !0), e && "mouseover" === e.type && n.parents().each(function () { var e, n = t(this); n.data("ui-tooltip-open") && (e = t.Event("blur"), e.target = e.currentTarget = this, i.close(e, !0)), n.attr("title") && (n.uniqueId(), i.parents[this.id] = { element: this, title: n.attr("title") }, n.attr("title", "")) }), this._updateContent(n, e)) }, _updateContent: function (t, e) { var i, n = this.options.content, o = this, s = e ? e.type : null; return "string" == typeof n ? this._open(e, t, n) : (i = n.call(t[0], function (i) { t.data("ui-tooltip-open") && o._delay(function () { e && (e.type = s), this._open(e, t, i) }) }), void (i && this._open(e, t, i))) }, _open: function (e, i, n) { function o(t) { h.of = t, s.is(":hidden") || s.position(h) } var s, a, r, l, h = t.extend({}, this.options.position); if (n) { if (s = this._find(i), s.length) return void s.find(".ui-tooltip-content").html(n); i.is("[title]") && (e && "mouseover" === e.type ? i.attr("title", "") : i.removeAttr("title")), s = this._tooltip(i), this._addDescribedBy(i, s.attr("id")), s.find(".ui-tooltip-content").html(n), this.liveRegion.children().hide(), n.clone ? (l = n.clone(), l.removeAttr("id").find("[id]").removeAttr("id")) : l = n, t("<div>").html(l).appendTo(this.liveRegion), this.options.track && e && /^mouse/.test(e.type) ? (this._on(this.document, { mousemove: o }), o(e)) : s.position(t.extend({ of: i }, this.options.position)), this.hiding = !1, this.closing = !1, s.hide(), this._show(s, this.options.show), this.options.show && this.options.show.delay && (r = this.delayedShow = setInterval(function () { s.is(":visible") && (o(h.of), clearInterval(r)) }, t.fx.interval)), this._trigger("open", e, { tooltip: s }), a = { keyup: function (e) { if (e.keyCode === t.ui.keyCode.ESCAPE) { var n = t.Event(e); n.currentTarget = i[0], this.close(n, !0) } } }, i[0] !== this.element[0] && (a.remove = function () { this._removeTooltip(s) }), e && "mouseover" !== e.type || (a.mouseleave = "close"), e && "focusin" !== e.type || (a.focusout = "close"), this._on(!0, i, a) } }, close: function (e) { var i = this, n = t(e ? e.currentTarget : this.element), o = this._find(n); this.closing || (clearInterval(this.delayedShow), n.data("ui-tooltip-title") && !n.attr("title") && n.attr("title", n.data("ui-tooltip-title")), this._removeDescribedBy(n), this.hiding = !0, o.stop(!0), this._hide(o, this.options.hide, function () { i._removeTooltip(t(this)), this.hiding = !1, this.closing = !1 }), n.removeData("ui-tooltip-open"), this._off(n, "mouseleave focusout keyup"), n[0] !== this.element[0] && this._off(n, "remove"), this._off(this.document, "mousemove"), e && "mouseleave" === e.type && t.each(this.parents, function (e, n) { t(n.element).attr("title", n.title), delete i.parents[e] }), this.closing = !0, this._trigger("close", e, { tooltip: o }), this.hiding || (this.closing = !1)) }, _tooltip: function (e) { var i = t("<div>").attr("role", "tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || "")), n = i.uniqueId().attr("id"); return t("<div>").addClass("ui-tooltip-content").appendTo(i), i.appendTo(this.document[0].body), this.tooltips[n] = e, i }, _find: function (e) { var i = e.data("ui-tooltip-id"); return i ? t("#" + i) : t() }, _removeTooltip: function (t) { t.remove(), delete this.tooltips[t.attr("id")] }, _destroy: function () { var e = this; t.each(this.tooltips, function (i, n) { var o = t.Event("blur"); o.target = o.currentTarget = n[0], e.close(o, !0), t("#" + i).remove(), n.data("ui-tooltip-title") && (n.attr("title") || n.attr("title", n.data("ui-tooltip-title")), n.removeData("ui-tooltip-title")) }), this.liveRegion.remove() }
        }), "ui-effects-"), b = t; t.effects = { effect: {} }, function (t, e) { function i(t, e, i) { var n = u[e.type] || {}; return null == t ? i || !e.def ? null : e.def : (t = n.floor ? ~~t : parseFloat(t), isNaN(t) ? e.def : n.mod ? (t + n.mod) % n.mod : 0 > t ? 0 : n.max < t ? n.max : t) } function n(e) { var i = h(), n = i._rgba = []; return e = e.toLowerCase(), f(l, function (t, o) { var s, a = o.re.exec(e), r = a && o.parse(a), l = o.space || "rgba"; return r ? (s = i[l](r), i[c[l].cache] = s[c[l].cache], n = i._rgba = s._rgba, !1) : void 0 }), n.length ? ("0,0,0,0" === n.join() && t.extend(n, s.transparent), i) : s[e] } function o(t, e, i) { return i = (i + 1) % 1, 1 > 6 * i ? t + (e - t) * i * 6 : 1 > 2 * i ? e : 2 > 3 * i ? t + (e - t) * (2 / 3 - i) * 6 : t } var s, a = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor", r = /^([\-+])=\s*(\d+\.?\d*)/, l = [{ re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/, parse: function (t) { return [t[1], t[2], t[3], t[4]] } }, { re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/, parse: function (t) { return [2.55 * t[1], 2.55 * t[2], 2.55 * t[3], t[4]] } }, { re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/, parse: function (t) { return [parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)] } }, { re: /#([a-f0-9])([a-f0-9])([a-f0-9])/, parse: function (t) { return [parseInt(t[1] + t[1], 16), parseInt(t[2] + t[2], 16), parseInt(t[3] + t[3], 16)] } }, { re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/, space: "hsla", parse: function (t) { return [t[1], t[2] / 100, t[3] / 100, t[4]] } }], h = t.Color = function (e, i, n, o) { return new t.Color.fn.parse(e, i, n, o) }, c = { rgba: { props: { red: { idx: 0, type: "byte" }, green: { idx: 1, type: "byte" }, blue: { idx: 2, type: "byte" } } }, hsla: { props: { hue: { idx: 0, type: "degrees" }, saturation: { idx: 1, type: "percent" }, lightness: { idx: 2, type: "percent" } } } }, u = { "byte": { floor: !0, max: 255 }, percent: { max: 1 }, degrees: { mod: 360, floor: !0 } }, d = h.support = {}, p = t("<p>")[0], f = t.each; p.style.cssText = "background-color:rgba(1,1,1,.5)", d.rgba = p.style.backgroundColor.indexOf("rgba") > -1, f(c, function (t, e) { e.cache = "_" + t, e.props.alpha = { idx: 3, type: "percent", def: 1 } }), h.fn = t.extend(h.prototype, { parse: function (o, a, r, l) { if (o === e) return this._rgba = [null, null, null, null], this; (o.jquery || o.nodeType) && (o = t(o).css(a), a = e); var u = this, d = t.type(o), p = this._rgba = []; return a !== e && (o = [o, a, r, l], d = "array"), "string" === d ? this.parse(n(o) || s._default) : "array" === d ? (f(c.rgba.props, function (t, e) { p[e.idx] = i(o[e.idx], e) }), this) : "object" === d ? (o instanceof h ? f(c, function (t, e) { o[e.cache] && (u[e.cache] = o[e.cache].slice()) }) : f(c, function (e, n) { var s = n.cache; f(n.props, function (t, e) { if (!u[s] && n.to) { if ("alpha" === t || null == o[t]) return; u[s] = n.to(u._rgba) } u[s][e.idx] = i(o[t], e, !0) }), u[s] && t.inArray(null, u[s].slice(0, 3)) < 0 && (u[s][3] = 1, n.from && (u._rgba = n.from(u[s]))) }), this) : void 0 }, is: function (t) { var e = h(t), i = !0, n = this; return f(c, function (t, o) { var s, a = e[o.cache]; return a && (s = n[o.cache] || o.to && o.to(n._rgba) || [], f(o.props, function (t, e) { return null != a[e.idx] ? i = a[e.idx] === s[e.idx] : void 0 })), i }), i }, _space: function () { var t = [], e = this; return f(c, function (i, n) { e[n.cache] && t.push(i) }), t.pop() }, transition: function (t, e) { var n = h(t), o = n._space(), s = c[o], a = 0 === this.alpha() ? h("transparent") : this, r = a[s.cache] || s.to(a._rgba), l = r.slice(); return n = n[s.cache], f(s.props, function (t, o) { var s = o.idx, a = r[s], h = n[s], c = u[o.type] || {}; null !== h && (null === a ? l[s] = h : (c.mod && (h - a > c.mod / 2 ? a += c.mod : a - h > c.mod / 2 && (a -= c.mod)), l[s] = i((h - a) * e + a, o))) }), this[o](l) }, blend: function (e) { if (1 === this._rgba[3]) return this; var i = this._rgba.slice(), n = i.pop(), o = h(e)._rgba; return h(t.map(i, function (t, e) { return (1 - n) * o[e] + n * t })) }, toRgbaString: function () { var e = "rgba(", i = t.map(this._rgba, function (t, e) { return null == t ? e > 2 ? 1 : 0 : t }); return 1 === i[3] && (i.pop(), e = "rgb("), e + i.join() + ")" }, toHslaString: function () { var e = "hsla(", i = t.map(this.hsla(), function (t, e) { return null == t && (t = e > 2 ? 1 : 0), e && 3 > e && (t = Math.round(100 * t) + "%"), t }); return 1 === i[3] && (i.pop(), e = "hsl("), e + i.join() + ")" }, toHexString: function (e) { var i = this._rgba.slice(), n = i.pop(); return e && i.push(~~(255 * n)), "#" + t.map(i, function (t) { return t = (t || 0).toString(16), 1 === t.length ? "0" + t : t }).join("") }, toString: function () { return 0 === this._rgba[3] ? "transparent" : this.toRgbaString() } }), h.fn.parse.prototype = h.fn, c.hsla.to = function (t) { if (null == t[0] || null == t[1] || null == t[2]) return [null, null, null, t[3]]; var e, i, n = t[0] / 255, o = t[1] / 255, s = t[2] / 255, a = t[3], r = Math.max(n, o, s), l = Math.min(n, o, s), h = r - l, c = r + l, u = .5 * c; return e = l === r ? 0 : n === r ? 60 * (o - s) / h + 360 : o === r ? 60 * (s - n) / h + 120 : 60 * (n - o) / h + 240, i = 0 === h ? 0 : .5 >= u ? h / c : h / (2 - c), [Math.round(e) % 360, i, u, null == a ? 1 : a] }, c.hsla.from = function (t) { if (null == t[0] || null == t[1] || null == t[2]) return [null, null, null, t[3]]; var e = t[0] / 360, i = t[1], n = t[2], s = t[3], a = .5 >= n ? n * (1 + i) : n + i - n * i, r = 2 * n - a; return [Math.round(255 * o(r, a, e + 1 / 3)), Math.round(255 * o(r, a, e)), Math.round(255 * o(r, a, e - 1 / 3)), s] }, f(c, function (n, o) { var s = o.props, a = o.cache, l = o.to, c = o.from; h.fn[n] = function (n) { if (l && !this[a] && (this[a] = l(this._rgba)), n === e) return this[a].slice(); var o, r = t.type(n), u = "array" === r || "object" === r ? n : arguments, d = this[a].slice(); return f(s, function (t, e) { var n = u["object" === r ? t : e.idx]; null == n && (n = d[e.idx]), d[e.idx] = i(n, e) }), c ? (o = h(c(d)), o[a] = d, o) : h(d) }, f(s, function (e, i) { h.fn[e] || (h.fn[e] = function (o) { var s, a = t.type(o), l = "alpha" === e ? this._hsla ? "hsla" : "rgba" : n, h = this[l](), c = h[i.idx]; return "undefined" === a ? c : ("function" === a && (o = o.call(this, c), a = t.type(o)), null == o && i.empty ? this : ("string" === a && (s = r.exec(o), s && (o = c + parseFloat(s[2]) * ("+" === s[1] ? 1 : -1))), h[i.idx] = o, this[l](h))) }) }) }), h.hook = function (e) { var i = e.split(" "); f(i, function (e, i) { t.cssHooks[i] = { set: function (e, o) { var s, a, r = ""; if ("transparent" !== o && ("string" !== t.type(o) || (s = n(o)))) { if (o = h(s || o), !d.rgba && 1 !== o._rgba[3]) { for (a = "backgroundColor" === i ? e.parentNode : e; ("" === r || "transparent" === r) && a && a.style;)try { r = t.css(a, "backgroundColor"), a = a.parentNode } catch (l) { } o = o.blend(r && "transparent" !== r ? r : "_default") } o = o.toRgbaString() } try { e.style[i] = o } catch (l) { } } }, t.fx.step[i] = function (e) { e.colorInit || (e.start = h(e.elem, i), e.end = h(e.end), e.colorInit = !0), t.cssHooks[i].set(e.elem, e.start.transition(e.end, e.pos)) } }) }, h.hook(a), t.cssHooks.borderColor = { expand: function (t) { var e = {}; return f(["Top", "Right", "Bottom", "Left"], function (i, n) { e["border" + n + "Color"] = t }), e } }, s = t.Color.names = { aqua: "#00ffff", black: "#000000", blue: "#0000ff", fuchsia: "#ff00ff", gray: "#808080", green: "#008000", lime: "#00ff00", maroon: "#800000", navy: "#000080", olive: "#808000", purple: "#800080", red: "#ff0000", silver: "#c0c0c0", teal: "#008080", white: "#ffffff", yellow: "#ffff00", transparent: [null, null, null, 0], _default: "#ffffff" } }(b), function () { function e(e) { var i, n, o = e.ownerDocument.defaultView ? e.ownerDocument.defaultView.getComputedStyle(e, null) : e.currentStyle, s = {}; if (o && o.length && o[0] && o[o[0]]) for (n = o.length; n--;)i = o[n], "string" == typeof o[i] && (s[t.camelCase(i)] = o[i]); else for (i in o) "string" == typeof o[i] && (s[i] = o[i]); return s } function i(e, i) { var n, s, a = {}; for (n in i) s = i[n], e[n] !== s && (o[n] || (t.fx.step[n] || !isNaN(parseFloat(s))) && (a[n] = s)); return a } var n = ["add", "remove", "toggle"], o = { border: 1, borderBottom: 1, borderColor: 1, borderLeft: 1, borderRight: 1, borderTop: 1, borderWidth: 1, margin: 1, padding: 1 }; t.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function (e, i) { t.fx.step[i] = function (t) { ("none" !== t.end && !t.setAttr || 1 === t.pos && !t.setAttr) && (b.style(t.elem, i, t.end), t.setAttr = !0) } }), t.fn.addBack || (t.fn.addBack = function (t) { return this.add(null == t ? this.prevObject : this.prevObject.filter(t)) }), t.effects.animateClass = function (o, s, a, r) { var l = t.speed(s, a, r); return this.queue(function () { var s, a = t(this), r = a.attr("class") || "", h = l.children ? a.find("*").addBack() : a; h = h.map(function () { var i = t(this); return { el: i, start: e(this) } }), s = function () { t.each(n, function (t, e) { o[e] && a[e + "Class"](o[e]) }) }, s(), h = h.map(function () { return this.end = e(this.el[0]), this.diff = i(this.start, this.end), this }), a.attr("class", r), h = h.map(function () { var e = this, i = t.Deferred(), n = t.extend({}, l, { queue: !1, complete: function () { i.resolve(e) } }); return this.el.animate(this.diff, n), i.promise() }), t.when.apply(t, h.get()).done(function () { s(), t.each(arguments, function () { var e = this.el; t.each(this.diff, function (t) { e.css(t, "") }) }), l.complete.call(a[0]) }) }) }, t.fn.extend({ addClass: function (e) { return function (i, n, o, s) { return n ? t.effects.animateClass.call(this, { add: i }, n, o, s) : e.apply(this, arguments) } }(t.fn.addClass), removeClass: function (e) { return function (i, n, o, s) { return arguments.length > 1 ? t.effects.animateClass.call(this, { remove: i }, n, o, s) : e.apply(this, arguments) } }(t.fn.removeClass), toggleClass: function (e) { return function (i, n, o, s, a) { return "boolean" == typeof n || void 0 === n ? o ? t.effects.animateClass.call(this, n ? { add: i } : { remove: i }, o, s, a) : e.apply(this, arguments) : t.effects.animateClass.call(this, { toggle: i }, n, o, s) } }(t.fn.toggleClass), switchClass: function (e, i, n, o, s) { return t.effects.animateClass.call(this, { add: i, remove: e }, n, o, s) } }) }(), function () { function e(e, i, n, o) { return t.isPlainObject(e) && (i = e, e = e.effect), e = { effect: e }, null == i && (i = {}), t.isFunction(i) && (o = i, n = null, i = {}), ("number" == typeof i || t.fx.speeds[i]) && (o = n, n = i, i = {}), t.isFunction(n) && (o = n, n = null), i && t.extend(e, i), n = n || i.duration, e.duration = t.fx.off ? 0 : "number" == typeof n ? n : n in t.fx.speeds ? t.fx.speeds[n] : t.fx.speeds._default, e.complete = o || i.complete, e } function i(e) { return !e || "number" == typeof e || t.fx.speeds[e] ? !0 : "string" != typeof e || t.effects.effect[e] ? t.isFunction(e) ? !0 : "object" != typeof e || e.effect ? !1 : !0 : !0 } t.extend(t.effects, { version: "1.11.1", save: function (t, e) { for (var i = 0; i < e.length; i++)null !== e[i] && t.data(y + e[i], t[0].style[e[i]]) }, restore: function (t, e) { var i, n; for (n = 0; n < e.length; n++)null !== e[n] && (i = t.data(y + e[n]), void 0 === i && (i = ""), t.css(e[n], i)) }, setMode: function (t, e) { return "toggle" === e && (e = t.is(":hidden") ? "show" : "hide"), e }, getBaseline: function (t, e) { var i, n; switch (t[0]) { case "top": i = 0; break; case "middle": i = .5; break; case "bottom": i = 1; break; default: i = t[0] / e.height }switch (t[1]) { case "left": n = 0; break; case "center": n = .5; break; case "right": n = 1; break; default: n = t[1] / e.width }return { x: n, y: i } }, createWrapper: function (e) { if (e.parent().is(".ui-effects-wrapper")) return e.parent(); var i = { width: e.outerWidth(!0), height: e.outerHeight(!0), "float": e.css("float") }, n = t("<div></div>").addClass("ui-effects-wrapper").css({ fontSize: "100%", background: "transparent", border: "none", margin: 0, padding: 0 }), o = { width: e.width(), height: e.height() }, s = document.activeElement; try { s.id } catch (a) { s = document.body } return e.wrap(n), (e[0] === s || t.contains(e[0], s)) && t(s).focus(), n = e.parent(), "static" === e.css("position") ? (n.css({ position: "relative" }), e.css({ position: "relative" })) : (t.extend(i, { position: e.css("position"), zIndex: e.css("z-index") }), t.each(["top", "left", "bottom", "right"], function (t, n) { i[n] = e.css(n), isNaN(parseInt(i[n], 10)) && (i[n] = "auto") }), e.css({ position: "relative", top: 0, left: 0, right: "auto", bottom: "auto" })), e.css(o), n.css(i).show() }, removeWrapper: function (e) { var i = document.activeElement; return e.parent().is(".ui-effects-wrapper") && (e.parent().replaceWith(e), (e[0] === i || t.contains(e[0], i)) && t(i).focus()), e }, setTransition: function (e, i, n, o) { return o = o || {}, t.each(i, function (t, i) { var s = e.cssUnit(i); s[0] > 0 && (o[i] = s[0] * n + s[1]) }), o } }), t.fn.extend({ effect: function () { function i(e) { function i() { t.isFunction(s) && s.call(o[0]), t.isFunction(e) && e() } var o = t(this), s = n.complete, r = n.mode; (o.is(":hidden") ? "hide" === r : "show" === r) ? (o[r](), i()) : a.call(o[0], n, i) } var n = e.apply(this, arguments), o = n.mode, s = n.queue, a = t.effects.effect[n.effect]; return t.fx.off || !a ? o ? this[o](n.duration, n.complete) : this.each(function () { n.complete && n.complete.call(this) }) : s === !1 ? this.each(i) : this.queue(s || "fx", i) }, show: function (t) { return function (n) { if (i(n)) return t.apply(this, arguments); var o = e.apply(this, arguments); return o.mode = "show", this.effect.call(this, o) } }(t.fn.show), hide: function (t) { return function (n) { if (i(n)) return t.apply(this, arguments); var o = e.apply(this, arguments); return o.mode = "hide", this.effect.call(this, o) } }(t.fn.hide), toggle: function (t) { return function (n) { if (i(n) || "boolean" == typeof n) return t.apply(this, arguments); var o = e.apply(this, arguments); return o.mode = "toggle", this.effect.call(this, o) } }(t.fn.toggle), cssUnit: function (e) { var i = this.css(e), n = []; return t.each(["em", "px", "%", "pt"], function (t, e) { i.indexOf(e) > 0 && (n = [parseFloat(i), e]) }), n } }) }(), function () { var e = {}; t.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function (t, i) { e[i] = function (e) { return Math.pow(e, t + 2) } }), t.extend(e, { Sine: function (t) { return 1 - Math.cos(t * Math.PI / 2) }, Circ: function (t) { return 1 - Math.sqrt(1 - t * t) }, Elastic: function (t) { return 0 === t || 1 === t ? t : -Math.pow(2, 8 * (t - 1)) * Math.sin((80 * (t - 1) - 7.5) * Math.PI / 15) }, Back: function (t) { return t * t * (3 * t - 2) }, Bounce: function (t) { for (var e, i = 4; t < ((e = Math.pow(2, --i)) - 1) / 11;); return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * e - 2) / 22 - t, 2) } }), t.each(e, function (e, i) { t.easing["easeIn" + e] = i, t.easing["easeOut" + e] = function (t) { return 1 - i(1 - t) }, t.easing["easeInOut" + e] = function (t) { return .5 > t ? i(2 * t) / 2 : 1 - i(-2 * t + 2) / 2 } }) }(); t.effects, t.effects.effect.blind = function (e, i) { var n, o, s, a = t(this), r = /up|down|vertical/, l = /up|left|vertical|horizontal/, h = ["position", "top", "bottom", "left", "right", "height", "width"], c = t.effects.setMode(a, e.mode || "hide"), u = e.direction || "up", d = r.test(u), p = d ? "height" : "width", f = d ? "top" : "left", m = l.test(u), g = {}, v = "show" === c; a.parent().is(".ui-effects-wrapper") ? t.effects.save(a.parent(), h) : t.effects.save(a, h), a.show(), n = t.effects.createWrapper(a).css({ overflow: "hidden" }), o = n[p](), s = parseFloat(n.css(f)) || 0, g[p] = v ? o : 0, m || (a.css(d ? "bottom" : "right", 0).css(d ? "top" : "left", "auto").css({ position: "absolute" }), g[f] = v ? s : o + s), v && (n.css(p, 0), m || n.css(f, s + o)), n.animate(g, { duration: e.duration, easing: e.easing, queue: !1, complete: function () { "hide" === c && a.hide(), t.effects.restore(a, h), t.effects.removeWrapper(a), i() } }) }, t.effects.effect.bounce = function (e, i) { var n, o, s, a = t(this), r = ["position", "top", "bottom", "left", "right", "height", "width"], l = t.effects.setMode(a, e.mode || "effect"), h = "hide" === l, c = "show" === l, u = e.direction || "up", d = e.distance, p = e.times || 5, f = 2 * p + (c || h ? 1 : 0), m = e.duration / f, g = e.easing, v = "up" === u || "down" === u ? "top" : "left", y = "up" === u || "left" === u, b = a.queue(), w = b.length; for ((c || h) && r.push("opacity"), t.effects.save(a, r), a.show(), t.effects.createWrapper(a), d || (d = a["top" === v ? "outerHeight" : "outerWidth"]() / 3), c && (s = { opacity: 1 }, s[v] = 0, a.css("opacity", 0).css(v, y ? 2 * -d : 2 * d).animate(s, m, g)), h && (d /= Math.pow(2, p - 1)), s = {}, s[v] = 0, n = 0; p > n; n++)o = {}, o[v] = (y ? "-=" : "+=") + d, a.animate(o, m, g).animate(s, m, g), d = h ? 2 * d : d / 2; h && (o = { opacity: 0 }, o[v] = (y ? "-=" : "+=") + d, a.animate(o, m, g)), a.queue(function () { h && a.hide(), t.effects.restore(a, r), t.effects.removeWrapper(a), i() }), w > 1 && b.splice.apply(b, [1, 0].concat(b.splice(w, f + 1))), a.dequeue() }, t.effects.effect.clip = function (e, i) { var n, o, s, a = t(this), r = ["position", "top", "bottom", "left", "right", "height", "width"], l = t.effects.setMode(a, e.mode || "hide"), h = "show" === l, c = e.direction || "vertical", u = "vertical" === c, d = u ? "height" : "width", p = u ? "top" : "left", f = {}; t.effects.save(a, r), a.show(), n = t.effects.createWrapper(a).css({ overflow: "hidden" }), o = "IMG" === a[0].tagName ? n : a, s = o[d](), h && (o.css(d, 0), o.css(p, s / 2)), f[d] = h ? s : 0, f[p] = h ? 0 : s / 2, o.animate(f, { queue: !1, duration: e.duration, easing: e.easing, complete: function () { h || a.hide(), t.effects.restore(a, r), t.effects.removeWrapper(a), i() } }) }, t.effects.effect.drop = function (e, i) { var n, o = t(this), s = ["position", "top", "bottom", "left", "right", "opacity", "height", "width"], a = t.effects.setMode(o, e.mode || "hide"), r = "show" === a, l = e.direction || "left", h = "up" === l || "down" === l ? "top" : "left", c = "up" === l || "left" === l ? "pos" : "neg", u = { opacity: r ? 1 : 0 }; t.effects.save(o, s), o.show(), t.effects.createWrapper(o), n = e.distance || o["top" === h ? "outerHeight" : "outerWidth"](!0) / 2, r && o.css("opacity", 0).css(h, "pos" === c ? -n : n), u[h] = (r ? "pos" === c ? "+=" : "-=" : "pos" === c ? "-=" : "+=") + n, o.animate(u, { queue: !1, duration: e.duration, easing: e.easing, complete: function () { "hide" === a && o.hide(), t.effects.restore(o, s), t.effects.removeWrapper(o), i() } }) }, t.effects.effect.explode = function (e, i) { function n() { b.push(this), b.length === u * d && o() } function o() { p.css({ visibility: "visible" }), t(b).remove(), m || p.hide(), i() } var s, a, r, l, h, c, u = e.pieces ? Math.round(Math.sqrt(e.pieces)) : 3, d = u, p = t(this), f = t.effects.setMode(p, e.mode || "hide"), m = "show" === f, g = p.show().css("visibility", "hidden").offset(), v = Math.ceil(p.outerWidth() / d), y = Math.ceil(p.outerHeight() / u), b = []; for (s = 0; u > s; s++)for (l = g.top + s * y, c = s - (u - 1) / 2, a = 0; d > a; a++)r = g.left + a * v, h = a - (d - 1) / 2, p.clone().appendTo("body").wrap("<div></div>").css({ position: "absolute", visibility: "visible", left: -a * v, top: -s * y }).parent().addClass("ui-effects-explode").css({ position: "absolute", overflow: "hidden", width: v, height: y, left: r + (m ? h * v : 0), top: l + (m ? c * y : 0), opacity: m ? 0 : 1 }).animate({ left: r + (m ? 0 : h * v), top: l + (m ? 0 : c * y), opacity: m ? 1 : 0 }, e.duration || 500, e.easing, n) }, t.effects.effect.fade = function (e, i) { var n = t(this), o = t.effects.setMode(n, e.mode || "toggle"); n.animate({ opacity: o }, { queue: !1, duration: e.duration, easing: e.easing, complete: i }) }, t.effects.effect.fold = function (e, i) { var n, o, s = t(this), a = ["position", "top", "bottom", "left", "right", "height", "width"], r = t.effects.setMode(s, e.mode || "hide"), l = "show" === r, h = "hide" === r, c = e.size || 15, u = /([0-9]+)%/.exec(c), d = !!e.horizFirst, p = l !== d, f = p ? ["width", "height"] : ["height", "width"], m = e.duration / 2, g = {}, v = {}; t.effects.save(s, a), s.show(), n = t.effects.createWrapper(s).css({ overflow: "hidden" }), o = p ? [n.width(), n.height()] : [n.height(), n.width()], u && (c = parseInt(u[1], 10) / 100 * o[h ? 0 : 1]), l && n.css(d ? { height: 0, width: c } : { height: c, width: 0 }), g[f[0]] = l ? o[0] : c, v[f[1]] = l ? o[1] : 0, n.animate(g, m, e.easing).animate(v, m, e.easing, function () { h && s.hide(), t.effects.restore(s, a), t.effects.removeWrapper(s), i() }) }, t.effects.effect.highlight = function (e, i) { var n = t(this), o = ["backgroundImage", "backgroundColor", "opacity"], s = t.effects.setMode(n, e.mode || "show"), a = { backgroundColor: n.css("backgroundColor") }; "hide" === s && (a.opacity = 0), t.effects.save(n, o), n.show().css({ backgroundImage: "none", backgroundColor: e.color || "#ffff99" }).animate(a, { queue: !1, duration: e.duration, easing: e.easing, complete: function () { "hide" === s && n.hide(), t.effects.restore(n, o), i() } }) }, t.effects.effect.size = function (e, i) { var n, o, s, a = t(this), r = ["position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity"], l = ["position", "top", "bottom", "left", "right", "overflow", "opacity"], h = ["width", "height", "overflow"], c = ["fontSize"], u = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"], d = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"], p = t.effects.setMode(a, e.mode || "effect"), f = e.restore || "effect" !== p, m = e.scale || "both", g = e.origin || ["middle", "center"], v = a.css("position"), y = f ? r : l, b = { height: 0, width: 0, outerHeight: 0, outerWidth: 0 }; "show" === p && a.show(), n = { height: a.height(), width: a.width(), outerHeight: a.outerHeight(), outerWidth: a.outerWidth() }, "toggle" === e.mode && "show" === p ? (a.from = e.to || b, a.to = e.from || n) : (a.from = e.from || ("show" === p ? b : n), a.to = e.to || ("hide" === p ? b : n)), s = { from: { y: a.from.height / n.height, x: a.from.width / n.width }, to: { y: a.to.height / n.height, x: a.to.width / n.width } }, ("box" === m || "both" === m) && (s.from.y !== s.to.y && (y = y.concat(u), a.from = t.effects.setTransition(a, u, s.from.y, a.from), a.to = t.effects.setTransition(a, u, s.to.y, a.to)), s.from.x !== s.to.x && (y = y.concat(d), a.from = t.effects.setTransition(a, d, s.from.x, a.from), a.to = t.effects.setTransition(a, d, s.to.x, a.to))), ("content" === m || "both" === m) && s.from.y !== s.to.y && (y = y.concat(c).concat(h), a.from = t.effects.setTransition(a, c, s.from.y, a.from), a.to = t.effects.setTransition(a, c, s.to.y, a.to)), t.effects.save(a, y), a.show(), t.effects.createWrapper(a), a.css("overflow", "hidden").css(a.from), g && (o = t.effects.getBaseline(g, n), a.from.top = (n.outerHeight - a.outerHeight()) * o.y, a.from.left = (n.outerWidth - a.outerWidth()) * o.x, a.to.top = (n.outerHeight - a.to.outerHeight) * o.y, a.to.left = (n.outerWidth - a.to.outerWidth) * o.x), a.css(a.from), ("content" === m || "both" === m) && (u = u.concat(["marginTop", "marginBottom"]).concat(c), d = d.concat(["marginLeft", "marginRight"]), h = r.concat(u).concat(d), a.find("*[width]").each(function () { var i = t(this), n = { height: i.height(), width: i.width(), outerHeight: i.outerHeight(), outerWidth: i.outerWidth() }; f && t.effects.save(i, h), i.from = { height: n.height * s.from.y, width: n.width * s.from.x, outerHeight: n.outerHeight * s.from.y, outerWidth: n.outerWidth * s.from.x }, i.to = { height: n.height * s.to.y, width: n.width * s.to.x, outerHeight: n.height * s.to.y, outerWidth: n.width * s.to.x }, s.from.y !== s.to.y && (i.from = t.effects.setTransition(i, u, s.from.y, i.from), i.to = t.effects.setTransition(i, u, s.to.y, i.to)), s.from.x !== s.to.x && (i.from = t.effects.setTransition(i, d, s.from.x, i.from), i.to = t.effects.setTransition(i, d, s.to.x, i.to)), i.css(i.from), i.animate(i.to, e.duration, e.easing, function () { f && t.effects.restore(i, h) }) })), a.animate(a.to, { queue: !1, duration: e.duration, easing: e.easing, complete: function () { 0 === a.to.opacity && a.css("opacity", a.from.opacity), "hide" === p && a.hide(), t.effects.restore(a, y), f || ("static" === v ? a.css({ position: "relative", top: a.to.top, left: a.to.left }) : t.each(["top", "left"], function (t, e) { a.css(e, function (e, i) { var n = parseInt(i, 10), o = t ? a.to.left : a.to.top; return "auto" === i ? o + "px" : n + o + "px" }) })), t.effects.removeWrapper(a), i() } }) }, t.effects.effect.scale = function (e, i) { var n = t(this), o = t.extend(!0, {}, e), s = t.effects.setMode(n, e.mode || "effect"), a = parseInt(e.percent, 10) || (0 === parseInt(e.percent, 10) ? 0 : "hide" === s ? 0 : 100), r = e.direction || "both", l = e.origin, h = { height: n.height(), width: n.width(), outerHeight: n.outerHeight(), outerWidth: n.outerWidth() }, c = { y: "horizontal" !== r ? a / 100 : 1, x: "vertical" !== r ? a / 100 : 1 }; o.effect = "size", o.queue = !1, o.complete = i, "effect" !== s && (o.origin = l || ["middle", "center"], o.restore = !0), o.from = e.from || ("show" === s ? { height: 0, width: 0, outerHeight: 0, outerWidth: 0 } : h), o.to = { height: h.height * c.y, width: h.width * c.x, outerHeight: h.outerHeight * c.y, outerWidth: h.outerWidth * c.x }, o.fade && ("show" === s && (o.from.opacity = 0, o.to.opacity = 1), "hide" === s && (o.from.opacity = 1, o.to.opacity = 0)), n.effect(o) }, t.effects.effect.puff = function (e, i) { var n = t(this), o = t.effects.setMode(n, e.mode || "hide"), s = "hide" === o, a = parseInt(e.percent, 10) || 150, r = a / 100, l = { height: n.height(), width: n.width(), outerHeight: n.outerHeight(), outerWidth: n.outerWidth() }; t.extend(e, { effect: "scale", queue: !1, fade: !0, mode: o, complete: i, percent: s ? a : 100, from: s ? l : { height: l.height * r, width: l.width * r, outerHeight: l.outerHeight * r, outerWidth: l.outerWidth * r } }), n.effect(e) }, t.effects.effect.pulsate = function (e, i) { var n, o = t(this), s = t.effects.setMode(o, e.mode || "show"), a = "show" === s, r = "hide" === s, l = a || "hide" === s, h = 2 * (e.times || 5) + (l ? 1 : 0), c = e.duration / h, u = 0, d = o.queue(), p = d.length; for ((a || !o.is(":visible")) && (o.css("opacity", 0).show(), u = 1), n = 1; h > n; n++)o.animate({ opacity: u }, c, e.easing), u = 1 - u; o.animate({ opacity: u }, c, e.easing), o.queue(function () { r && o.hide(), i() }), p > 1 && d.splice.apply(d, [1, 0].concat(d.splice(p, h + 1))), o.dequeue() }, t.effects.effect.shake = function (e, i) { var n, o = t(this), s = ["position", "top", "bottom", "left", "right", "height", "width"], a = t.effects.setMode(o, e.mode || "effect"), r = e.direction || "left", l = e.distance || 20, h = e.times || 3, c = 2 * h + 1, u = Math.round(e.duration / c), d = "up" === r || "down" === r ? "top" : "left", p = "up" === r || "left" === r, f = {}, m = {}, g = {}, v = o.queue(), y = v.length; for (t.effects.save(o, s), o.show(), t.effects.createWrapper(o), f[d] = (p ? "-=" : "+=") + l, m[d] = (p ? "+=" : "-=") + 2 * l, g[d] = (p ? "-=" : "+=") + 2 * l, o.animate(f, u, e.easing), n = 1; h > n; n++)o.animate(m, u, e.easing).animate(g, u, e.easing); o.animate(m, u, e.easing).animate(f, u / 2, e.easing).queue(function () { "hide" === a && o.hide(), t.effects.restore(o, s), t.effects.removeWrapper(o), i() }), y > 1 && v.splice.apply(v, [1, 0].concat(v.splice(y, c + 1))), o.dequeue() }, t.effects.effect.slide = function (e, i) { var n, o = t(this), s = ["position", "top", "bottom", "left", "right", "width", "height"], a = t.effects.setMode(o, e.mode || "show"), r = "show" === a, l = e.direction || "left", h = "up" === l || "down" === l ? "top" : "left", c = "up" === l || "left" === l, u = {}; t.effects.save(o, s), o.show(), n = e.distance || o["top" === h ? "outerHeight" : "outerWidth"](!0), t.effects.createWrapper(o).css({ overflow: "hidden" }), r && o.css(h, c ? isNaN(n) ? "-" + n : -n : n), u[h] = (r ? c ? "+=" : "-=" : c ? "-=" : "+=") + n, o.animate(u, { queue: !1, duration: e.duration, easing: e.easing, complete: function () { "hide" === a && o.hide(), t.effects.restore(o, s), t.effects.removeWrapper(o), i() } }) }, t.effects.effect.transfer = function (e, i) { var n = t(this), o = t(e.to), s = "fixed" === o.css("position"), a = t("body"), r = s ? a.scrollTop() : 0, l = s ? a.scrollLeft() : 0, h = o.offset(), c = { top: h.top - r, left: h.left - l, height: o.innerHeight(), width: o.innerWidth() }, u = n.offset(), d = t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({ top: u.top - r, left: u.left - l, height: n.innerHeight(), width: n.innerWidth(), position: s ? "fixed" : "absolute" }).animate(c, e.duration, e.easing, function () { d.remove(), i() }) }
    })
}, function (t, e) { }, , , , , , , , , , , , , , , , function (t, e, i) {
    (function (t) {
    !function (t, e, i, n) {
    t.Seadragon || (t.Seadragon = {}); var o = t.Seadragon, s = o.Config; !function () { s || (s = o.Config = { debugMode: !0, animationTime: 1.5, blendTime: .5, alwaysBlend: !1, autoHideControls: !0, constrainDuringPan: !0, immediateRender: !1, logarithmicZoom: !0, wrapHorizontal: !1, wrapVertical: !1, wrapOverlays: !1, transformOverlays: !1, minZoomDimension: null, minZoomImageRatio: .8, maxZoomPixelRatio: 2, visibilityRatio: .8, springStiffness: 5, imageLoaderLimit: 2, clickTimeThreshold: 200, clickDistThreshold: 5, zoomPerClick: 2, zoomPerScroll: i.pow(2, 1 / 3), zoomPerSecond: 2, proxyUrl: null, imagePath: "Seadragon/img/", showNavBtnGroup: !0 }) }(); var a = o.Strings; !function () { a || (a = o.Strings = { Errors: { Failure: "Sorry, but Seadragon Ajax can't run on your browser!\nPlease try using IE 8 or Firefox 3.\n", Dzc: "Sorry, we don't support Deep Zoom Collections!", Dzi: "Hmm, this doesn't appear to be a valid Deep Zoom Image.", Xml: "Hmm, this doesn't appear to be a valid Deep Zoom Image.", Empty: "You asked us to open nothing, so we did just that.", ImageFormat: "Sorry, we don't support {0}-based Deep Zoom Images.", Security: "It looks like a security restriction stopped us from loading this Deep Zoom Image.", Status: "This space unintentionally left blank ({0} {1}).", Unknown: "Whoops, something inexplicably went wrong. Sorry!" }, Messages: { Loading: "Loading..." }, Tooltips: { FullPage: "Toggle full page", Home: "Go home", ZoomIn: "Zoom in (you can also use your mouse's scroll wheel)", ZoomOut: "Zoom out (you can also use your mouse's scroll wheel)" } }, a.getString = function (t) { for (var e = t.split("."), i = a, n = 0; n < e.length; n++)i = i[e[n]] || {}; "string" != typeof i && (i = ""); var o = arguments; return i.replace(/\{\d+\}/g, function (t) { var e = parseInt(t.match(/\d+/)) + 1; return e < o.length ? o[e] : "" }) }, a.setString = function (t, e) { for (var i = t.split("."), n = a, o = 0; o < i.length - 1; o++)n[i[o]] || (n[i[o]] = {}), n = n[i[o]]; n[i[o]] = e }) }(); var r = function () { this.log = function (e, i) { var n = t.console || {}, o = s.debugMode; o && n.log ? n.log(e) : o && i && alert(e) }, this.error = function (e, i) { var n = t.console || {}, o = s.debugMode; if (o && n.error ? n.error(e) : o && alert(e), o) throw i || new Error(e) }, this.fail = function (t) { throw alert(a.getString("Errors.Failure")), new Error(t) } }; r = o.Debug = new r; var l = o.Profiler = function () { var t = this, e = !1, i = 0, n = null, o = null, s = 1 / 0, a = 0, r = 0, l = 1 / 0, h = 0, c = 0; this.getAvgUpdateTime = function () { return a }, this.getMinUpdateTime = function () { return s }, this.getMaxUpdateTime = function () { return r }, this.getAvgIdleTime = function () { return h }, this.getMinIdleTime = function () { return l }, this.getMaxIdleTime = function () { return c }, this.isMidUpdate = function () { return e }, this.getNumUpdates = function () { return i }, this.beginUpdate = function () { if (e && t.endUpdate(), e = !0, n = (new Date).getTime(), !(1 > i)) { var s = n - o; h = (h * (i - 1) + s) / i, l > s && (l = s), s > c && (c = s) } }, this.endUpdate = function () { if (e) { o = (new Date).getTime(), e = !1; var t = o - n; i++ , a = (a * (i - 1) + t) / i, s > t && (s = t), t > r && (r = t) } }, this.clearProfile = function () { e = !1, i = 0, n = null, o = null, s = 1 / 0, a = 0, r = 0, l = 1 / 0, h = 0, c = 0 } }, h = o.Point; !function () {
        if (!h) {
            h = o.Point = function (t, e) { this.x = "number" == typeof t ? t : 0, this.y = "number" == typeof e ? e : 0 }; var t = h.prototype; t.plus = function (t) { return new h(this.x + t.x, this.y + t.y) }, t.minus = function (t) { return new h(this.x - t.x, this.y - t.y) }, t.times = function (t) { return new h(this.x * t, this.y * t) }, t.divide = function (t) { return new h(this.x / t, this.y / t) }, t.negate = function () { return new h(-this.x, -this.y) }, t.distanceTo = function (t) { return i.sqrt(i.pow(this.x - t.x, 2) + i.pow(this.y - t.y, 2)) }, t.apply = function (t) { return new h(t(this.x), t(this.y)) }, t.equals = function (t) {
                return t instanceof h && this.x === t.x && this.y === t.y
            }, t.toString = function () { return "(" + this.x + "," + this.y + ")" }
        }
    }(); var c = o.Rect; !function () { if (!c) { c = o.Rect = function (t, e, i, n) { this.x = "number" == typeof t ? t : 0, this.y = "number" == typeof e ? e : 0, this.width = "number" == typeof i ? i : 0, this.height = "number" == typeof n ? n : 0 }; var t = c.prototype; t.getAspectRatio = function () { return this.width / this.height }, t.getTopLeft = function () { return new h(this.x, this.y) }, t.getBottomRight = function () { return new h(this.x + this.width, this.y + this.height) }, t.getCenter = function () { return new h(this.x + this.width / 2, this.y + this.height / 2) }, t.getSize = function () { return new h(this.width, this.height) }, t.equals = function (t) { return t instanceof c && this.x === t.x && this.y === t.y && this.width === t.width && this.height === t.height }, t.toString = function () { return "[" + this.x + "," + this.y + "," + this.width + "x" + this.height + "]" } } }(); var u = o.Spring = function (t) { function e(t) { var e = s.springStiffness; return (1 - i.exp(-t * e)) / (1 - i.exp(-e)) } var n = "number" == typeof t ? t : 0, o = n, a = n, r = (new Date).getTime(), l = r, h = r; this.getCurrent = function () { return n }, this.getTarget = function () { return a }, this.resetTo = function (t) { a = t, h = r, o = a, l = h }, this.springTo = function (t) { o = n, l = r, a = t, h = l + 1e3 * s.animationTime }, this.shiftBy = function (t) { o += t, a += t }, this.update = function () { r = (new Date).getTime(), n = r >= h ? a : o + (a - o) * e((r - l) / (h - l)) } }, d = o.Browser = { UNKNOWN: 0, IE: 1, FIREFOX: 2, SAFARI: 3, CHROME: 4, OPERA: 5 }, p = function () { function n(t, i) { return i && t != e.body ? e.body : t.offsetParent } var o = this, a = ["Msxml2.XMLHTTP", "Msxml3.XMLHTTP", "Microsoft.XMLHTTP"], l = { bmp: !1, jpeg: !0, jpg: !0, png: !0, tif: !1, wdp: !1 }, c = d.UNKNOWN, u = 0, f = !1, m = {}; !function () { var i = navigator.appName, n = navigator.appVersion, o = navigator.userAgent; if ("Microsoft Internet Explorer" == i && t.attachEvent && t.ActiveXObject) { var s = o.indexOf("MSIE"); c = d.IE, u = parseFloat(o.substring(s + 5, o.indexOf(";", s))); var a = e.documentMode; "undefined" != typeof a && (u = a) } else if ("Netscape" == i && t.addEventListener) { var r = o.indexOf("Firefox"), l = o.indexOf("Safari"), h = o.indexOf("Chrome"); if (r >= 0) c = d.FIREFOX, u = parseFloat(o.substring(r + 8)); else if (l >= 0) { var p = o.substring(0, l).lastIndexOf("/"); c = h >= 0 ? d.CHROME : d.SAFARI, u = parseFloat(o.substring(p + 1, l)) } } else "Opera" == i && t.opera && t.attachEvent && (c = d.OPERA, u = parseFloat(n)); for (var g = t.location.search.substring(1), v = g.split("&"), y = 0; y < v.length; y++) { var b = v[y], w = b.indexOf("="); w > 0 && (m[b.substring(0, w)] = decodeURIComponent(b.substring(w + 1))) } f = c == d.IE && 9 > u || c == d.CHROME && 2 > u }(), this.getBrowser = function () { return c }, this.getBrowserVersion = function () { return u }, this.getElement = function (t) { return "string" == typeof t && (t = e.getElementById(t)), t }, this.getElementPosition = function (t) { for (var t = o.getElement(t), e = new h, i = "fixed" == o.getElementStyle(t).position, s = n(t, i); s;)e.x += t.offsetLeft, e.y += t.offsetTop, i && (e = e.plus(o.getPageScroll())), t = s, i = "fixed" == o.getElementStyle(t).position, s = n(t, i); return e }, this.getElementSize = function (t) { var t = o.getElement(t); return new h(t.clientWidth, t.clientHeight) }, this.getElementStyle = function (e) { var e = o.getElement(e); return e.currentStyle ? e.currentStyle : t.getComputedStyle ? t.getComputedStyle(e, "") : void r.fail("Unknown element style, no known technique.") }, this.getEvent = function (e) { return e ? e : t.event }, this.getMousePosition = function (t) { var t = o.getEvent(t), i = new h; return "DOMMouseScroll" == t.type && c == d.FIREFOX && 3 > u ? (i.x = t.screenX, i.y = t.screenY) : "number" == typeof t.pageX ? (i.x = t.pageX, i.y = t.pageY) : "number" == typeof t.clientX ? (i.x = t.clientX + e.body.scrollLeft + e.documentElement.scrollLeft, i.y = t.clientY + e.body.scrollTop + e.documentElement.scrollTop) : r.fail("Unknown event mouse position, no known technique."), i }, this.getMouseScroll = function (t) { var t = o.getEvent(t), e = 0; return "number" == typeof t.wheelDelta ? e = t.wheelDelta : "number" == typeof t.detail ? e = -1 * t.detail : r.fail("Unknown event mouse scroll, no known technique."), e ? e / i.abs(e) : 0 }, this.getPageScroll = function () { var i = new h, n = e.documentElement || {}, o = e.body || {}; return "number" == typeof t.pageXOffset ? (i.x = t.pageXOffset, i.y = t.pageYOffset) : o.scrollLeft || o.scrollTop ? (i.x = o.scrollLeft, i.y = o.scrollTop) : (n.scrollLeft || n.scrollTop) && (i.x = n.scrollLeft, i.y = n.scrollTop), i }, this.getWindowSize = function () { var i = new h, n = e.documentElement || {}, o = e.body || {}; return "number" == typeof t.innerWidth ? (i.x = t.innerWidth, i.y = t.innerHeight) : n.clientWidth || n.clientHeight ? (i.x = n.clientWidth, i.y = n.clientHeight) : o.clientWidth || o.clientHeight ? (i.x = o.clientWidth, i.y = o.clientHeight) : r.fail("Unknown window size, no known technique."), i }, this.imageFormatSupported = function (t) { var t = t ? t : ""; return !!l[t.toLowerCase()] }, this.makeCenteredNode = function (t) { var t = p.getElement(t), e = o.makeNeutralElement("div"), i = []; i.push('<div style="display:table; height:100%; width:100%;'), i.push("border:none; margin:0px; padding:0px;"), i.push('#position:relative; overflow:hidden; text-align:left;">'), i.push('<div style="#position:absolute; #top:50%; width:100%; '), i.push("border:none; margin:0px; padding:0px;"), i.push('display:table-cell; vertical-align:middle;">'), i.push('<div style="#position:relative; #top:-50%; width:100%; '), i.push("border:none; margin:0px; padding:0px;"), i.push('text-align:center;"></div></div></div>'), e.innerHTML = i.join(""), e = e.firstChild; for (var n = e, s = e.getElementsByTagName("div"); s.length > 0;)n = s[0], s = n.getElementsByTagName("div"); return n.appendChild(t), e }, this.makeNeutralElement = function (t) { var i = e.createElement(t), n = i.style; return n.background = "transparent none", n.border = "none", n.margin = "0px", n.padding = "0px", n.position = "static", i }, this.makeTransparentImage = function (t) { var e = o.makeNeutralElement("img"), i = null; return c == d.IE && 7 > u ? (i = o.makeNeutralElement("span"), i.style.display = "inline-block", e.onload = function () { i.style.width = i.style.width || e.width + "px", i.style.height = i.style.height || e.height + "px", e.onload = null, e = null }, e.src = t, i.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + t + "', sizingMethod='scale')") : (i = e, i.src = t), i }, this.setElementOpacity = function (t, e, n) { var t = o.getElement(t); n && f && (e = i.round(e)), 1 > e ? t.style.opacity = e : t.style.opacity = ""; var s = t.style.filter || ""; if (t.style.filter = s.replace(/[\s]*alpha\(.*?\)[\s]*/g, ""), !(e >= 1)) { var a = i.round(100 * e), r = " alpha(opacity=" + a + ") "; t.style.filter += r } }, this.addEvent = function (t, e, i, n) { var t = o.getElement(t); t.addEventListener ? ("mousewheel" == e && t.addEventListener("DOMMouseScroll", i, n), t.addEventListener(e, i, n)) : t.attachEvent ? (t.attachEvent("on" + e, i), n && t.setCapture && t.setCapture()) : r.fail("Unable to attach event handler, no known technique.") }, this.removeEvent = function (t, e, i, n) { var t = o.getElement(t); t.removeEventListener ? ("mousewheel" == e && t.removeEventListener("DOMMouseScroll", i, n), t.removeEventListener(e, i, n)) : t.detachEvent ? (t.detachEvent("on" + e, i), n && t.releaseCapture && t.releaseCapture()) : r.fail("Unable to detach event handler, no known technique.") }, this.cancelEvent = function (t) { var t = o.getEvent(t); t.preventDefault && t.preventDefault(), t.cancel = !0, t.returnValue = !1 }, this.stopEvent = function (t) { var t = o.getEvent(t); t.stopPropagation && t.stopPropagation(), t.cancelBubble = !0 }, this.createCallback = function (t, e) { for (var i = [], n = 2; n < arguments.length; n++)i.push(arguments[n]); return function () { for (var n = i.concat([]), o = 0; o < arguments.length; o++)n.push(arguments[o]); return e.apply(t, n) } }, this.getUrlParameter = function (t) { var e = m[t]; return e ? e : null }, this.makeAjaxRequest = function (e, i) { var n = "function" == typeof i, o = null; if (n) var l = i, i = function () { t.setTimeout(p.createCallback(null, l, o), 1) }; if (t.ActiveXObject) for (var h = 0; h < a.length; h++)try { o = new ActiveXObject(a[h]); break } catch (c) { continue } else t.XMLHttpRequest && (o = new XMLHttpRequest); o || r.fail("Browser doesn't support XMLHttpRequest."), s.proxyUrl && (e = s.proxyUrl + e), n && (o.onreadystatechange = function () { 4 == o.readyState && (o.onreadystatechange = new Function, i()) }); try { o.open("GET", e, n), o.send(null) } catch (c) { r.log(c.name + " while making AJAX request: " + c.message), o.onreadystatechange = null, o = null, n && i() } return n ? null : o }, this.parseXml = function (e) { var i = null; if (t.ActiveXObject) try { i = new ActiveXObject("Microsoft.XMLDOM"), i.async = !1, i.loadXML(e) } catch (n) { r.log(n.name + " while parsing XML (ActiveX): " + n.message) } else if (t.DOMParser) try { var o = new DOMParser; i = o.parseFromString(e, "text/xml") } catch (n) { r.log(n.name + " while parsing XML (DOMParser): " + n.message) } else r.fail("Browser doesn't support XML DOM."); return i } }; p = o.Utils = new p; var f = o.MouseTracker; !function () { function n(t) { return p.getMousePosition(t) } function a(t, e) { var i = p.getMousePosition(t), n = p.getElementPosition(e); return i.minus(n) } function l(t, i) { for (var n = e.body; i && t != i && n != i;)try { i = i.parentNode } catch (o) { return !1 } return t == i } function h() { m = !0 } function c() { m = !1 } if (!f) { var u = p.getBrowser() == d.IE && p.getBrowserVersion() < 9, m = !1, g = !1, v = {}, y = []; !function () { u ? (p.addEvent(e, "mousedown", h, !1), p.addEvent(e, "mouseup", c, !1)) : (p.addEvent(t, "mousedown", h, !0), p.addEvent(t, "mouseup", c, !0)) }(), f = o.MouseTracker = function (o) { function h() { H || (p.addEvent(o, "mouseover", x, !1), p.addEvent(o, "mouseout", _, !1), p.addEvent(o, "mousedown", C, !1), p.addEvent(o, "mouseup", k, !1), p.addEvent(o, "mousewheel", A, !1), p.addEvent(o, "click", S, !1), H = !0, v[O] = N) } function c() { H && (p.removeEvent(o, "mouseover", x, !1), p.removeEvent(o, "mouseout", _, !1), p.removeEvent(o, "mousedown", C, !1), p.removeEvent(o, "mouseup", k, !1), p.removeEvent(o, "mousewheel", A, !1), p.removeEvent(o, "click", S, !1), f(), H = !1, delete v[O]) } function d() { z || (u ? (p.removeEvent(o, "mouseup", k, !1), p.addEvent(o, "mouseup", T, !0), p.addEvent(o, "mousemove", E, !0)) : (p.addEvent(t, "mouseup", P, !0), p.addEvent(t, "mousemove", D, !0)), z = !0) } function f() { z && (u ? (p.removeEvent(o, "mousemove", E, !0), p.removeEvent(o, "mouseup", T, !0), p.addEvent(o, "mouseup", k, !1)) : (p.removeEvent(t, "mousemove", D, !0), p.removeEvent(t, "mouseup", P, !0)), z = !1) } function b(t, e) { var i = v; for (var n in i) i.hasOwnProperty(n) && O != n && i[n][t](e) } function w() { return L } function x(t) { var t = p.getEvent(t); u && z && !l(t.srcElement, o) && b("onMouseOver", t); var e = t.target ? t.target : t.srcElement, i = t.relatedTarget ? t.relatedTarget : t.fromElement; if (l(o, e) && !l(o, i) && (L = !0, "function" == typeof I.enterHandler)) try { I.enterHandler(I, a(t, o), F, m) } catch (n) { r.error(n.name + " while executing enter handler: " + n.message, n) } } function _(t) { var t = p.getEvent(t); u && z && !l(t.srcElement, o) && b("onMouseOut", t); var e = t.target ? t.target : t.srcElement, i = t.relatedTarget ? t.relatedTarget : t.toElement; if (l(o, e) && !l(o, i) && (L = !1, "function" == typeof I.exitHandler)) try { I.exitHandler(I, a(t, o), F, m) } catch (n) { r.error(n.name + " while executing exit handler: " + n.message, n) } } function C(t) { var t = p.getEvent(t); if (2 != t.button) { if (F = !0, R = n(t), B = R, W = (new Date).getTime(), "function" == typeof I.pressHandler) try { I.pressHandler(I, a(t, o)) } catch (e) { r.error(e.name + " while executing press handler: " + e.message, e) } (I.pressHandler || I.dragHandler) && p.cancelEvent(t), u && g ? u && y.push(N) : (d(), g = !0, y = [N]) } } function k(t) { var t = p.getEvent(t), e = F, i = L; if (2 != t.button) { if (F = !1, "function" == typeof I.releaseHandler) try { I.releaseHandler(I, a(t, o), e, i) } catch (n) { r.error(n.name + " while executing release handler: " + n.message, n) } e && i && M(t) } } function T(t) { var t = p.getEvent(t); if (2 != t.button) { for (var i = 0; i < y.length; i++) { var n = y[i]; n.hasMouse() || n.onMouseUp(t) } f(), g = !1, t.srcElement.fireEvent("on" + t.type, e.createEventObject(t)), p.stopEvent(t) } } function P(t) { L || k(t), f() } function S(t) { I.clickHandler && p.cancelEvent(t) } function M(t) { var t = p.getEvent(t); if (2 != t.button) { var e = (new Date).getTime() - W, i = n(t), l = B.distanceTo(i), h = e <= s.clickTimeThreshold && l <= s.clickDistThreshold; if ("function" == typeof I.clickHandler) try { I.clickHandler(I, a(t, o), h, t.shiftKey) } catch (c) { r.error(c.name + " while executing click handler: " + c.message, c) } } } function D(t) { var t = p.getEvent(t), e = n(t), i = e.minus(R); if (R = e, "function" == typeof I.dragHandler) { try { I.dragHandler(I, a(t, o), i, t.shiftKey) } catch (s) { r.error(s.name + " while executing drag handler: " + s.message, s) } p.cancelEvent(t) } } function E(t) { for (var e = 0; e < y.length; e++)y[e].onMouseMove(t); p.stopEvent(t) } function A(t) { var t = p.getEvent(t), e = p.getMouseScroll(t); if ("function" == typeof I.scrollHandler) { if (e) try { I.scrollHandler(I, a(t, o), e, t.shiftKey) } catch (i) { r.error(i.name + " while executing scroll handler: " + i.message, i) } p.cancelEvent(t) } } var I = this, N = null, O = i.random(), o = p.getElement(o), H = !1, z = !1, F = !1, L = !1, R = null, W = null, B = null; this.target = o, this.enterHandler = null, this.exitHandler = null, this.pressHandler = null, this.releaseHandler = null, this.clickHandler = null, this.dragHandler = null, this.scrollHandler = null, function () { N = { hasMouse: w, onMouseOver: x, onMouseOut: _, onMouseUp: k, onMouseMove: D } }(), this.isTracking = function () { return H }, this.setTracking = function (t) { t ? h() : c() } } } }(); var m, g = o.EventManager = function () { var e = {}; this.addListener = function (t, i) { "function" == typeof i && (e[t] || (e[t] = []), e[t].push(i)) }, this.removeListener = function (t, i) { var n = e[t]; if ("function" == typeof i && n) for (var o = 0; o < n.length; o++)if (i == n[o]) return void n.splice(o, 1) }, this.clearListeners = function (t) { e[t] && delete e[t] }, this.trigger = function (i) { var n = e[i], o = []; if (n) { for (var s = 1; s < arguments.length; s++)o.push(arguments[s]); for (var s = 0; s < n.length; s++)try { n[s].apply(t, o) } catch (a) { r.error(a.name + " while executing " + i + " handler: " + a.message, a) } } } }; !function () { function e(e, n) { function o(i) { s.onload = null, s.onabort = null, s.onerror = null, a && t.clearTimeout(a), t.setTimeout(function () { n(e, i ? s : null) }, 1) } var s = null, a = null; this.start = function () { s = new Image; var n = function () { o(!0) }, l = function () { o(!1) }, h = function () { r.log("Image timed out: " + e), o(!1) }; s.onload = n, s.onabort = l, s.onerror = l, a = t.setTimeout(h, i), s.src = e } } var i = 15e3; m = o.ImageLoader = function () { function t(t, e, n) { if (i-- , "function" == typeof t) try { t(n) } catch (o) { r.error(o.name + " while executing " + e + " callback: " + o.message, o) } } var i = 0; this.loadImage = function (n, o) { if (i >= s.imageLoaderLimit) return !1; var a = p.createCallback(null, t, o), r = new e(n, a); return i++ , r.start(), !0 } } }(); var v, y; !function () { var e = { REST: 0, GROUP: 1, HOVER: 2, DOWN: 3 }; v = o.Button = function (n, o, s, a, r, l, h, c, u, m) { function g() { t.setTimeout(v, 20) } function v() { if (F) { var t = (new Date).getTime(), e = t - z, n = 1 - e / H; n = i.min(1, n), n = i.max(0, n), p.setElementOpacity(A, n, !0), n > 0 && g() } } function y() { F = !0, z = (new Date).getTime() + O, t.setTimeout(g, O) } function b() { F = !1, p.setElementOpacity(A, 1, !0) } function w(t) { t >= e.GROUP && M == e.REST && (b(), M = e.GROUP), t >= e.HOVER && M == e.GROUP && (I.style.visibility = "", M = e.HOVER), t >= e.DOWN && M == e.HOVER && (N.style.visibility = "", M = e.DOWN) } function x(t) { t <= e.HOVER && M == e.DOWN && (N.style.visibility = "hidden", M = e.HOVER), t <= e.GROUP && M == e.HOVER && (I.style.visibility = "hidden", M = e.GROUP), t <= e.REST && M == e.GROUP && (y(), M = e.REST) } function _(t, i, n, o) { n ? (w(e.DOWN), u && u()) : o || w(e.HOVER) } function C(t, i, n, o) { x(e.GROUP), n && m && m() } function k(t, i) { w(e.DOWN), l && l() } function T(t, i, n, o) { n && o ? (x(e.HOVER), h && h()) : n ? x(e.GROUP) : w(e.HOVER) } function P(t, e, i, n) { c && i && c() } var S = p.makeNeutralElement("span"), M = e.GROUP, D = new f(S), E = p.makeTransparentImage(o), A = p.makeTransparentImage(s), I = p.makeTransparentImage(a), N = p.makeTransparentImage(r), l = "function" == typeof l ? l : null, h = "function" == typeof h ? h : null, c = "function" == typeof c ? c : null, u = "function" == typeof u ? u : null, m = "function" == typeof m ? m : null, O = 0, H = 2e3, z = null, F = !1; this.elmt = S, this.notifyGroupEnter = function () { w(e.GROUP) }, this.notifyGroupExit = function () { x(e.REST) }, function () { S.style.display = "inline-block", S.style.position = "relative", S.title = n, S.appendChild(E), S.appendChild(A), S.appendChild(I), S.appendChild(N); var t = (E.style, A.style), i = I.style, o = N.style; t.position = i.position = o.position = "absolute", t.top = i.top = o.top = "0px", t.left = i.left = o.left = "0px", i.visibility = o.visibility = "hidden", p.getBrowser() == d.FIREFOX && p.getBrowserVersion() < 3 && (t.top = i.top = o.top = ""), D.enterHandler = _, D.exitHandler = C, D.pressHandler = k, D.releaseHandler = T, D.clickHandler = P, D.setTracking(!0), x(e.REST) }() }, y = o.ButtonGroup = function (t) { function e(e, i, n, o) { for (var s = 0; s < t.length; s++)t[s].notifyGroupEnter() } function i(e, i, n, o) { if (!n) for (var s = 0; s < t.length; s++)t[s].notifyGroupExit() } function n(e, i, n, o) { if (!o) for (var s = 0; s < t.length; s++)t[s].notifyGroupExit() } var o = p.makeNeutralElement("span"), t = t.concat([]), s = new f(o); this.elmt = o, this.emulateEnter = function () { e() }, this.emulateExit = function () { i() }, function () { o.style.display = "inline-block"; for (var a = 0; a < t.length; a++)o.appendChild(t[a].elmt); s.enterHandler = e, s.exitHandler = i, s.releaseHandler = n, s.setTracking(!0) }() } }(); var b = o.TileSource = function (t, e, n, o, s, a) { var r = this, l = e / t; this.width = t, this.height = e, this.aspectRatio = t / e, this.dimensions = new h(t, e), this.minLevel = s ? s : 0, this.maxLevel = a ? a : i.ceil(i.log(i.max(t, e)) / i.log(2)), this.tileSize = n ? n : 0, this.tileOverlap = o ? o : 0, this.getLevelScale = function (t) { return 1 / (1 << r.maxLevel - t) }, this.getNumTiles = function (n) { var o = r.getLevelScale(n), s = i.ceil(o * t / r.tileSize), a = i.ceil(o * e / r.tileSize); return new h(s, a) }, this.getPixelRatio = function (t) { var e = r.dimensions.times(r.getLevelScale(t)), i = 1 / e.x, n = 1 / e.y; return new h(i, n) }, this.getTileAtPoint = function (t, e) { var n, o, s = r.dimensions.times(r.getLevelScale(t)), a = e.times(s.x); return n = e.x >= 0 && e.x <= 1 ? i.floor(a.x / r.tileSize) : i.ceil(s.x / r.tileSize) * i.floor(a.x / s.x) + i.floor((s.x + a.x % s.x) % s.x / r.tileSize), o = e.y >= 0 && e.y <= l ? i.floor(a.y / r.tileSize) : i.ceil(s.y / r.tileSize) * i.floor(a.y / s.y) + i.floor((s.y + a.y % s.y) % s.y / r.tileSize), new h(n, o) }, this.getTileBounds = function (t, e, n) { var o = r.dimensions.times(r.getLevelScale(t)), s = 0 === e ? 0 : r.tileSize * e - r.tileOverlap, a = 0 === n ? 0 : r.tileSize * n - r.tileOverlap, l = r.tileSize + (0 === e ? 1 : 2) * r.tileOverlap, h = r.tileSize + (0 === n ? 1 : 2) * r.tileOverlap; l = i.min(l, o.x - s), h = i.min(h, o.y - a); var u = 1 / o.x; return new c(s * u, a * u, l * u, h * u) }, this.getTileUrl = function (t, e, i) { throw new Error("Method not implemented.") }, this.tileExists = function (t, e, i) { var n = r.getNumTiles(t); return t >= r.minLevel && t <= r.maxLevel && e >= 0 && i >= 0 && e < n.x && i < n.y } }, w = o.DisplayRect = function (t, e, i, n, o, s) { c.apply(this, arguments), this.minLevel = o, this.maxLevel = s }; w.prototype = new c; var x = o.DziTileSource = function (t, e, n, o, s, a, r) { b.apply(this, [t, e, n, o]); var l = this, h = {}; this.fileFormat = a, this.tileFormat = a, this.displayRects = r, function () { if (r) for (var t = r.length - 1; t >= 0; t--)for (var e = r[t], i = e.minLevel; i <= e.maxLevel; i++)h[i] || (h[i] = []), h[i].push(e) }(), this.getTileUrl = function (t, e, i) { return [s, t, "/", e, "_", i, ".", a].join("") }, this.tileExists = function (t, e, o) { var s = h[t]; if (!s || !s.length) return !0; for (var a = l.getLevelScale(t), r = s.length - 1; r >= 0; r--) { var c = s[r]; if (!(t < c.minLevel || t > c.maxLevel)) { var u = c.x * a, d = c.y * a, p = u + c.width * a, f = d + c.height * a; if (u = i.floor(u / n), d = i.floor(d / n), p = i.ceil(p / n), f = i.ceil(f / n), e >= u && p > e && o >= d && f > o) return !0 } } return !1 } }; x.prototype = new b, function () { function e(t) { Error.apply(this, arguments), this.message = t } function i(t) { return t instanceof e || (r.error(t.name + " while creating DZI from XML: " + t.message), t = new e(a.getString("Errors.Unknown"))), t } function n(t) { var e = t.split("/"), i = e[e.length - 1], n = i.lastIndexOf("."); return n > -1 && (e[e.length - 1] = i.slice(0, n)), e.join("/") + "_files/" } function o(t, i) { if (!t) throw new e(a.getString("Errors.Security")); if (200 !== t.status && 0 !== t.status) { var n = t.status, o = 404 == n ? "Not Found" : t.statusText; throw new e(a.getString("Errors.Status", n, o)) } var r = null; return t.responseXML && t.responseXML.documentElement ? r = t.responseXML : t.responseText && (r = p.parseXml(t.responseText)), s(r, i) } function s(t, i) { if (!t || !t.documentElement) throw new e(a.getString("Errors.Xml")); var n = t.documentElement, o = n.tagName; if ("Image" == o) try { return l(n, i) } catch (s) { var r = a.getString("Errors.Dzi"); throw s instanceof e ? s : new e(r) } else { if ("Collection" == o) throw new e(a.getString("Errors.Dzc")); if ("Error" == o) return h(n) } throw new e(a.getString("Errors.Dzi")) } function l(t, i) { var n = t.getAttribute("Format"); if (!p.imageFormatSupported(n)) throw new e(a.getString("Errors.ImageFormat", n.toUpperCase())); for (var o = t.getElementsByTagName("Size")[0], s = t.getElementsByTagName("DisplayRect"), r = parseInt(o.getAttribute("Width"), 10), l = parseInt(o.getAttribute("Height"), 10), h = parseInt(t.getAttribute("TileSize")), c = parseInt(t.getAttribute("Overlap")), u = [], d = 0; d < s.length; d++) { var f = s[d], m = f.getElementsByTagName("Rect")[0]; u.push(new w(parseInt(m.getAttribute("X"), 10), parseInt(m.getAttribute("Y"), 10), parseInt(m.getAttribute("Width"), 10), parseInt(m.getAttribute("Height"), 10), parseInt(f.getAttribute("MinLevel"), 10), parseInt(f.getAttribute("MaxLevel"), 10))) } return new x(r, l, h, c, i, n, u) } function h(t) { var i = t.getElementsByTagName("Message")[0], n = i.firstChild.nodeValue; throw new e(n) } e.prototype = new Error, x.getTilesUrl = n, x.createFromJson = function (o, s) { var r, l, h = "function" == typeof s, c = o; if (c && (c.url || c.tilesUrl)) try { var u = c.displayRects; if (u && u.length) for (var d = 0, f = u.length; f > d; d++) { var m = u[d]; u[d] = new w(m.x || m[0], m.y || m[1], m.width || m[2], m.height || m[3], m.minLevel || m[4], m.maxLevel || m[5]) } r = new x(c.width, c.height, c.tileSize, c.tileOverlap, c.tilesUrl || n(c.url), c.tileFormat, c.displayRects), r.xmlUrl = c.url } catch (g) { l = i(g) } else l = new e(a.getString("Errors.Empty")); if (!h) { if (l) throw l; return r } t.setTimeout(p.createCallback(null, s, r, l && l.message), 1) }, x.createFromXml = function (r, l, h) { function c(t, e) { try { var n = t(e, f); return n.xmlUrl = r, n } catch (o) { if (u) return d = i(o).message, null; throw i(o) } } var u = "function" == typeof h, d = null; if (!r) { if (d = a.getString("Errors.Empty"), u) return t.setTimeout(function () { h(null, d) }, 1), null; throw new e(d) } var f = n(r); return u ? (l ? t.setTimeout(function () { var t = c(s, p.parseXml(l)); h(t, d) }, 1) : p.makeAjaxRequest(r, function (t) { var e = c(o, t); h(e, d) }), null) : l ? c(s, p.parseXml(l)) : c(o, p.makeAjaxRequest(r)) } }(); var _, C, k = o.Viewport = function (t, e) { function n() { f.goHome(!0), f.update() } function a(t) { return i.log(t) / C } function r(t) { return i.pow(2, t) } function l(t, e, n) { return i.min(i.max(t, e), n) } function d(t, e) { var i = t.x, n = t.y, o = l(i, e.x, e.x + e.width), s = l(n, e.y, e.y + e.height); return i === o && n === s ? t : new h(o, s) } function p(t) { var e = f.getZoom(t), i = 1 / e, n = i / f.getAspectRatio(), a = s.visibilityRatio, r = (a - .5) * i, l = (a - .5) * n, h = 1 - 2 * r, c = g - 2 * l; return 0 > h && (r += .5 * h, h = 0), 0 > c && (l += .5 * c, c = 0), new o.Rect(r, l, h, c) } var f = this, t = new h(t.x, t.y), m = e.x / e.y, g = e.y / e.x, v = new u(0), y = new u(0), b = new u(s.logarithmicZoom ? 0 : 1), w = null, x = new c(0, 0, 1, g), _ = x.getCenter(), C = i.LN2; this.getHomeBounds = function () { var t = f.getAspectRatio(), e = new c(x.x, x.y, x.width, x.height); return m >= t ? (e.height = x.width / t, e.y = _.y - e.height / 2) : (e.width = x.height * t, e.x = _.x - e.width / 2), e }, this.getHomeCenter = function () { return _ }, this.getHomeZoom = function () { var t = m / f.getAspectRatio(); return t >= 1 ? 1 : t }, this.getMinCenter = function (t) { return p(t).getTopLeft() }, this.getMaxCenter = function (t) { return p(t).getBottomRight() }, this.getMinZoom = function () { var n = f.getHomeZoom(); if (s.minZoomDimension) var o = e.x <= e.y ? s.minZoomDimension / t.x : s.minZoomDimension / (t.x * g); else var o = s.minZoomImageRatio * n; return i.min(o, n) }, this.getMaxZoom = function () { var n = e.x * s.maxZoomPixelRatio / t.x; return i.max(n, f.getHomeZoom()) }, this.getAspectRatio = function () { return t.x / t.y }, this.getContainerSize = function () { return new h(t.x, t.y) }, this.getBounds = function (t) { var e = f.getCenter(t), i = 1 / f.getZoom(t), n = i / f.getAspectRatio(); return new c(e.x - i / 2, e.y - n / 2, i, n) }, this.getCenter = function (e) { var i = new h(v.getCurrent(), y.getCurrent()), n = new h(v.getTarget(), y.getTarget()); if (e) return i; if (!w) return n; var o = f.getZoom(), s = 1 / o, a = s / f.getAspectRatio(), r = new c(i.x - s / 2, i.y - a / 2, s, a), l = f.pixelFromPoint(w, !0), u = w.minus(r.getTopLeft()).times(t.x / r.width), d = u.minus(l), p = d.divide(t.x * o); return n.plus(p) }, this.getZoom = function (t) { var e; return t ? (e = b.getCurrent(), s.logarithmicZoom ? r(e) : e) : (e = b.getTarget(), s.logarithmicZoom ? r(e) : e) }, this.applyConstraints = function (t) { var e = f.getZoom(), i = l(e, f.getMinZoom(), f.getMaxZoom()); e != i && f.zoomTo(i, w, t); var n = f.getCenter(), o = d(n, p()); if (s.wrapHorizontal && (o.x = n.x), s.wrapVertical && (o.y = n.y), !n.equals(o)) { var a = 1 / i, r = a / f.getAspectRatio(); f.fitBounds(new c(o.x - .5 * a, o.y - .5 * r, a, r), t) } }, this.ensureVisible = function (t) { f.applyConstraints(t) }, this.fitBounds = function (e, i) { var n = f.getAspectRatio(), o = e.getCenter(), s = new c(e.x, e.y, e.width, e.height); s.getAspectRatio() >= n ? (s.height = e.width / n, s.y = o.y - s.height / 2) : (s.width = e.height * n, s.x = o.x - s.width / 2), f.panTo(f.getCenter(!0), !0), f.zoomTo(f.getZoom(!0), null, !0); var a = f.getBounds(), r = f.getZoom(), l = 1 / s.width; if (l == r || s.width == a.width) return void f.panTo(o, i); var h = a.getTopLeft().times(t.x / a.width).minus(s.getTopLeft().times(t.x / s.width)).divide(t.x / a.width - t.x / s.width); f.zoomTo(l, h, i) }, this.goHome = function (t) { var e = f.getCenter(); s.wrapHorizontal && (e.x = (1 + e.x % 1) % 1, v.resetTo(e.x), v.update()), s.wrapVertical && (e.y = (g + e.y % g) % g, y.resetTo(e.y), y.update()), f.fitBounds(x, t) }, this.panBy = function (t, e) { f.panTo(f.getCenter().plus(t), e) }, this.panTo = function (e, i) { if (i) return v.resetTo(e.x), void y.resetTo(e.y); if (!w) return v.springTo(e.x), void y.springTo(e.y); var n = f.getZoom(), o = 1 / n, s = o / f.getAspectRatio(), a = new c(v.getCurrent() - o / 2, y.getCurrent() - s / 2, o, s), r = f.pixelFromPoint(w, !0), l = w.minus(a.getTopLeft()).times(t.x / a.width), h = l.minus(r), u = h.divide(t.x * n), d = e.minus(u); v.springTo(d.x), y.springTo(d.y) }, this.zoomBy = function (t, e, i) { f.zoomTo(f.getZoom() * t, e, i) }, this.zoomTo = function (t, e, i) { i ? b.resetTo(s.logarithmicZoom ? a(t) : t) : b.springTo(s.logarithmicZoom ? a(t) : t), w = e instanceof h ? e : null }, this.resize = function (e, i) { var n = f.getBounds(), o = n, s = e.x / t.x; t = new h(e.x, e.y), i && (o.width = n.width * s, o.height = o.width / f.getAspectRatio()), f.fitBounds(o, !0) }, this.update = function () { var t = v.getCurrent(), e = y.getCurrent(), i = b.getCurrent(); if (w) var n = f.pixelFromPoint(w, !0); if (b.update(), w && b.getCurrent() != i) { var o = f.pixelFromPoint(w, !0), s = o.minus(n), a = f.deltaPointsFromPixels(s, !0); v.shiftBy(a.x), y.shiftBy(a.y) } else w = null; return v.update(), y.update(), v.getCurrent() != t || y.getCurrent() != e || b.getCurrent() != i }, this.deltaPixelsFromPoints = function (e, i) { return e.times(t.x * f.getZoom(i)) }, this.deltaPointsFromPixels = function (e, i) { return e.divide(t.x * f.getZoom(i)) }, this.pixelFromPoint = function (e, i) { var n = f.getBounds(i); return e.minus(n.getTopLeft()).times(t.x / n.width) }, this.pointFromPixel = function (e, i) { var n = f.getBounds(i); return e.divide(t.x / n.width).plus(n.getTopLeft()) }, n() }; !function () {
        function t(t, e, i, n, o, s) { this.level = t, this.x = e, this.y = i, this.bounds = n, this.exists = o, this.url = s, this.elmt = null, this.image = null, this.loaded = !1, this.loading = !1, this.style = null, this.position = null, this.size = null, this.blendStart = null, this.opacity = null, this.distance = null, this.visibility = null, this.beingDrawn = !1, this.lastDrawnTime = 0, this.lastTouchTime = 0 } function a(t) { switch (t) { case C.TOP_LEFT: return function (t, e) { }; case C.TOP: return function (t, e) { t.x -= e.x / 2 }; case C.TOP_RIGHT: return function (t, e) { t.x -= e.x }; case C.RIGHT: return function (t, e) { t.x -= e.x, t.y -= e.y / 2 }; case C.BOTTOM_RIGHT: return function (t, e) { t.x -= e.x, t.y -= e.y }; case C.BOTTOM: return function (t, e) { t.x -= e.x / 2, t.y -= e.y }; case C.BOTTOM_LEFT: return function (t, e) { t.y -= e.y }; case C.LEFT: return function (t, e) { t.y -= e.y / 2 }; case C.CENTER: default: return function (t, e) { t.x -= e.x / 2, t.y -= e.y / 2 } } } function u(t, e, i) { this.elmt = t, this.scales = e instanceof c, this.bounds = new c(e.x, e.y, e.width, e.height), this.adjust = a(e instanceof h ? i : C.TOP_LEFT), this.position = new h(e.x, e.y), this.size = new h(e.width, e.height), this.style = t.style, this.naturalSize = new h(t.clientWidth, t.clientHeight) } for (var f, g, v = 100, y = .5, b = p.getBrowser(), w = p.getBrowserVersion(), x = (navigator.userAgent, !!e.createElement("canvas").getContext), k = e.documentElement || {}, T = k.style || {}, P = !1, S = ["msTransform", "WebkitTransform", "MozTransform"]; f = S.shift();)if ("undefined" != typeof T[f]) { P = !0, g = /webkit/i.test(f); break } var M = "WebkitTransition", D = ("undefined" != typeof T[M], "progid:DXImageTransform.Microsoft.Matrix"), E = (new RegExp(D + "\\(.*?\\)", "g"), function () { try { return b == d.IE && !!e.documentElement.filters } catch (t) { return !1 } }(), b == d.SAFARI && 4 > w), A = x && !E, I = !A && P, N = !1, O = "undefined" != typeof e.documentMode ? "bicubic" : "nearest-neighbor"; t.prototype.toString = function () { return this.level + "/" + this.x + "_" + this.y }, t.prototype.drawHTML = function (t) { if (!this.loaded) return void r.error("Attempting to draw tile " + this.toString() + " when it's not yet loaded."); this.elmt || (this.elmt = p.makeNeutralElement("img"), this.elmt.src = this.url, this.style = this.elmt.style, this.style.position = "absolute", this.style.msInterpolationMode = O, I && (this.style[f + "Origin"] = "0px 0px")); var e = this.elmt, n = this.image, o = this.style, s = this.position, a = this.size; if (e.parentNode != t && t.appendChild(e), I) o[f] = ["matrix(", (a.x / n.width).toFixed(8), ",0,0,", (a.y / n.height).toFixed(8), ",", s.x.toFixed(8), g ? "," : "px,", s.y.toFixed(8), g ? ")" : "px)"].join(""); else if (N) { var l = t.clientWidth, h = t.clientHeight; o.width = l + "px", o.height = h + "px", o.filter = ["progid:DXImageTransform.Microsoft.Matrix(", "M11=", (a.x / l).toFixed(8), ",M22=", (a.y / h).toFixed(8), ",Dx=", s.x.toFixed(8), ",Dy=", s.y.toFixed(8), ")"].join("") } else s = s.apply(i.floor), a = a.apply(i.ceil), o.left = s.x + "px", o.top = s.y + "px", o.width = a.x + "px", o.height = a.y + "px"; p.setElementOpacity(e, this.opacity) }, t.prototype.drawCanvas = function (t) { if (!this.loaded) return void r.error("Attempting to draw tile " + this.toString() + " when it's not yet loaded."); var e = this.position, i = this.size; t.globalAlpha = this.opacity, t.drawImage(this.image, e.x, e.y, i.x, i.y) }, t.prototype.unload = function () { this.elmt && this.elmt.parentNode && this.elmt.parentNode.removeChild(this.elmt), this.elmt = null, this.image = null, this.loaded = !1, this.loading = !1 }, C = o.OverlayPlacement = { CENTER: 0, TOP_LEFT: 1, TOP: 2, TOP_RIGHT: 3, RIGHT: 4, BOTTOM_RIGHT: 5, BOTTOM: 6, BOTTOM_LEFT: 7, LEFT: 8 }, u.prototype.destroy = function () { var t = this.elmt, e = this.style; t.parentNode && t.parentNode.removeChild(t), e.top = "", e.left = "", e.position = "", this.scales && (e.width = "", e.height = "") }, u.prototype.drawHTML = function (t) { var e = this.elmt, n = this.style, o = this.scales, a = this.naturalSize; e.parentNode != t && (t.appendChild(e), n.position = "absolute", a.x = e.clientWidth, a.y = e.clientHeight); var r = this.position, l = this.size; if (o || (l.x = a.x = a.x || e.clientWidth, l.y = a.y = a.y || e.clientHeight), this.adjust(r, l), s.transformOverlays && P) n[f + "Origin"] = "0px 0px", n[f] = ["translate(", r.x.toFixed(8), "px,", r.y.toFixed(8), "px)"].join(""), o && (e.clientWidth || (n.width = "100%"), e.clientHeight || (n.height = "100%"), n[f] += [" scale(", (l.x / e.clientWidth).toFixed(8), ",", (l.y / e.clientHeight).toFixed(8), ")"].join("")); else if (s.transformOverlays && N) { var h = t.clientWidth, c = t.clientHeight; n.width = h + "px", n.height = c + "px", n.filter = ["progid:DXImageTransform.Microsoft.Matrix(", "M11=", (l.x / h).toFixed(8), ",M22=", (l.y / c).toFixed(8), ",Dx=", r.x.toFixed(8), ",Dy=", r.y.toFixed(8), ")"].join("") } else r = r.apply(i.floor), l = l.apply(i.ceil), n.left = r.x + "px", n.top = r.y + "px", o && (n.width = l.x + "px", n.height = l.y + "px") }, u.prototype.update = function (t, e) { this.scales = t instanceof c, this.bounds = new c(t.x, t.y, t.width, t.height), this.adjust = a(t instanceof h ? e : C.TOP_LEFT) }, _ = o.Drawer = function (e, o, a) {
            function c(t) { return B[t] || (B[t] = e.getNumTiles(t)), B[t] } function f(t) { return j[t] || (j[t] = e.getPixelRatio(t)), j[t] } function g(i, n, o, s, a, r) { if (U[i] || (U[i] = {}), U[i][n] || (U[i][n] = {}), !U[i][n][o]) { var l = (a + n % a) % a, h = (r + o % r) % r, c = e.getTileBounds(i, l, h), u = e.tileExists(i, l, h), d = e.getTileUrl(i, l, h); c.x += 1 * (n - l) / a, c.y += W * (o - h) / r, U[i][n][o] = new t(i, n, o, c, u, d) } var p = U[i][n][o]; return p.lastTouchTime = s, p } function w(t, e) { t.loading = O.loadImage(t.url, p.createCallback(null, x, t, e)) } function x(t, e, n) { if (t.loading = !1, K) return void r.error("Tile load callback in middle of drawing routine."); if (!n) return r.log("Tile " + t + " failed to load: " + t.url), void (t.exists = !1); if (G > e) return void r.log("Ignoring tile " + t + " loaded before reset: " + t.url); t.loaded = !0, t.image = n; var o = q.length; if (q.length >= v) { for (var s = i.ceil(i.log(L) / i.log(2)), a = null, l = -1, h = q.length - 1; h >= 0; h--) { var c = q[h]; if (!(c.level <= s || c.beingDrawn)) if (a) { var u = c.lastTouchTime, d = a.lastTouchTime, p = c.level, f = a.level; (d > u || u == d && p > f) && (a = c, l = h) } else a = c, l = h } a && l >= 0 && (a.unload(), o = l) } q[o] = t, Z = !0 } function _() { U = {}, q = [] } function C(t, e, i) { if (!$[t]) return !1; if (e === n || i === n) { var o = $[t]; for (var s in o) if (o.hasOwnProperty(s)) { var a = o[s]; for (var r in a) if (a.hasOwnProperty(r) && !a[r]) return !1 } return !0 } return $[t][e] === n || $[t][e][i] === n || $[t][e][i] === !0 } function k(t, e, i) { return e === n || i === n ? C(t + 1) : C(t + 1, 2 * e, 2 * i) && C(t + 1, 2 * e, 2 * i + 1) && C(t + 1, 2 * e + 1, 2 * i) && C(t + 1, 2 * e + 1, 2 * i + 1) } function T(t, e, i, n) { return $[t] ? ($[t][e] || ($[t][e] = {}), void ($[t][e][i] = n)) : void r.error("Setting coverage for a tile before its level's coverage has been reset: " + t) } function P(t) { $[t] = {} } function S(t, e) {
                return t ? e.visibility > t.visibility ? e : e.visibility == t.visibility && e.distance < t.distance ? e : t : e;
            } function M(t) { for (var e = Y.length - 1; e >= 0; e--)if (Y[e].elmt == t) return e; return -1 } function D() { Z = !1; for (var t = I, n = N, a = A, r = V; r.length > 0;) { var l = r.pop(); l.beingDrawn = !1 } var u = o.getContainerSize(), p = u.x, m = u.y; a ? (t.width = p, t.height = m, n.clearRect(0, 0, p, m)) : t.innerHTML = ""; var v = o.getBounds(!0), x = v.getTopLeft(), _ = v.getBottomRight(); if ((s.wrapHorizontal || !(_.x < 0 || x.x > 1)) && (s.wrapVertical || !(_.y < 0 || x.y > W))) { var M = c, D = f, O = g, H = k, L = T, B = P, j = C, U = R, q = X, $ = b === d.CHROME, G = i.abs, K = (i.ceil, i.floor), J = i.log, Q = i.max, tt = i.min, et = o.deltaPixelsFromPoints, it = o.pixelFromPoint, nt = e.getTileAtPoint, ot = s.alwaysBlend, st = 1e3 * s.blendTime, at = s.immediateRender, rt = s.minZoomDimension, lt = (s.minImageRatio, s.wrapHorizontal), ht = s.wrapVertical, ct = s.wrapOverlays; lt || (x.x = Q(x.x, 0), _.x = tt(_.x, 1)), ht || (x.y = Q(x.y, 0), _.y = tt(_.y, W)); var ut = null, dt = !1, pt = (new Date).getTime(), ft = o.getCenter(), mt = it(ft), gt = et(D(0), !1).x, vt = at ? 1 : gt; rt = rt || 64; var yt = Q(z, K(J(rt) / J(2))), bt = et(D(0), !0).x, wt = tt(F, K(J(bt / y) / J(2))); yt = tt(yt, wt); for (var xt = wt; xt >= yt; xt--) { var _t = !1, Ct = et(D(xt), !0).x; if (!dt && Ct >= y || xt == yt) _t = !0, dt = !0; else if (!dt) continue; B(xt); var kt = tt(1, (Ct - .5) / .5), Tt = et(D(xt), !1).x, Pt = vt / G(vt - Tt), St = nt(xt, x), Mt = nt(xt, _), Dt = M(xt), Et = Dt.x, At = Dt.y; lt || (Mt.x = tt(Mt.x, Et - 1)), ht || (Mt.y = tt(Mt.y, At - 1)); for (var It = St.x; It <= Mt.x; It++)for (var Nt = St.y; Nt <= Mt.y; Nt++) { var l = O(xt, It, Nt, pt, Et, At), Ot = _t; if (L(xt, It, Nt, !1), l.exists && (dt && !Ot && (H(xt, It, Nt) ? L(xt, It, Nt, !0) : Ot = !0), Ot)) { var Ht = l.bounds.getTopLeft(), zt = l.bounds.getSize(), Ft = it(Ht, !0), Lt = et(zt, !0); U || (Lt = Lt.plus(new h(1, 1))); var Rt = it(Ht, !1), Wt = et(zt, !1), Bt = Rt.plus(Wt.divide(2)), jt = mt.distanceTo(Bt); if (l.position = Ft, l.size = Lt, l.distance = jt, l.visibility = Pt, l.loaded) { l.blendStart || (l.blendStart = pt); var Ut = pt - l.blendStart, qt = 0 === st ? 1 : tt(1, Ut / st); ot && (qt *= kt), l.opacity = qt, r.push(l), qt >= 1 ? (L(xt, It, Nt, !0), $ && l.lastDrawnTime !== q && L(xt, It, Nt, !1)) : st > Ut && (Z = !0), l.lastDrawnTime = pt } else l.loading || (ut = S(ut, l)) } } if (j(xt)) break } for (var $t = r.length - 1; $t >= 0; $t--) { var l = r[$t]; a ? l.drawCanvas(n) : l.drawHTML(t), l.beingDrawn = !0 } for (var Yt = Y.length, $t = 0; Yt > $t; $t++) { var Vt = Y[$t], Xt = Vt.bounds, Gt = Xt.getTopLeft(); ct && lt && (Gt.x += K(ft.x)), Vt.position = it(Gt, !0), Vt.size = et(Xt.getSize(), !0), Vt.drawHTML(E) } ut && (w(ut, pt), Z = !0), X = pt } } var E = p.getElement(a), I = p.makeNeutralElement(A ? "canvas" : "div"), N = A ? I.getContext("2d") : null, O = new m, H = new l, z = e.minLevel, F = e.maxLevel, L = e.tileSize, R = e.tileOverlap, W = e.height / e.width, B = {}, j = {}, U = {}, q = [], $ = {}, Y = [], V = [], X = 0, G = 0, K = !1, Z = !0; this.elmt = E, this.profiler = H, function () { I.style.width = "100%", I.style.height = "100%", I.style.position = "absolute", E.style.textAlign = "left", E.appendChild(I) }(), this.addOverlay = function (t, e, i) { var t = p.getElement(t); M(t) >= 0 || (Y.push(new u(t, e, i)), Z = !0) }, this.updateOverlay = function (t, e, i) { var t = p.getElement(t), n = M(t); n >= 0 && (Y[n].update(e, i), Z = !0) }, this.removeOverlay = function (t) { var t = p.getElement(t), e = M(t); e >= 0 && (Y[e].destroy(), Y.splice(e, 1), Z = !0) }, this.clearOverlays = function () { for (; Y.length > 0;)Y.pop().destroy(), Z = !0 }, this.needsUpdate = function () { return Z }, this.numTilesLoaded = function () { return q.length }, this.reset = function () { _(), G = (new Date).getTime(), Z = !0 }, this.update = function () { H.beginUpdate(), K = !0, D(), K = !1, H.endUpdate() }, this.idle = function () { }, this.useCanvas = function () { return A }, this.getCanvas = function () { return I }
        }
    }(); var T, P; !function () { function n(t, e, i) { e == P.TOP_RIGHT || e == P.BOTTOM_RIGHT ? i.insertBefore(t, i.firstChild) : i.appendChild(t) } function c(t, e, i) { var o = p.makeNeutralElement("span"); this.elmt = t, this.anchor = e, this.container = i, this.wrapper = o, o.style.display = "inline-block", o.appendChild(t), e == P.NONE && (o.style.width = o.style.height = "100%"), n(o, e, i) } function u(e) { function n() { e.viewport && e.viewport.goHome() } function o() { e.setFullPage(!e.isFullPage()), b.emulateExit(), e.viewport && e.viewport.applyConstraints() } function r() { k = (new Date).getTime(), _ = s.zoomPerSecond, x = !0, c() } function l() { k = (new Date).getTime(), _ = 1 / s.zoomPerSecond, x = !0, c() } function h() { x = !1 } function c() { t.setTimeout(u, 10) } function u() { if (x && e.viewport) { var t = (new Date).getTime(), n = t - k, o = i.pow(_, n / 1e3); e.viewport.zoomBy(o), e.viewport.applyConstraints(), k = t, c() } } function d() { e.viewport && (x = !1, e.viewport.zoomBy(s.zoomPerClick / 1), e.viewport.applyConstraints()) } function p() { e.viewport && (x = !1, e.viewport.zoomBy(1 / s.zoomPerClick), e.viewport.applyConstraints()) } function f() { b.emulateEnter(), b.emulateExit() } function g(t, e) { return s.imagePath + t + e } var b = null, x = !1, _ = null, k = null, T = new v(a.getString("Tooltips.ZoomIn"), g(S, D), g(S, E), g(S, A), g(S, I), r, h, d, r, h), P = new v(a.getString("Tooltips.ZoomOut"), g(M, D), g(M, E), g(M, A), g(M, I), l, h, p, l, h), N = new v(a.getString("Tooltips.Home"), g(C, D), g(C, E), g(C, A), g(C, I), null, n, null, null, null), O = new v(a.getString("Tooltips.FullPage"), g(w, D), g(w, E), g(w, A), g(w, I), null, o, null, null, null); return b = new y([T, P, N, O]), b.elmt[m] = !0, e.addEventListener("open", f), b.elmt } var m = "----seadragon----", b = p.getBrowser(); P = o.ControlAnchor = { NONE: 0, TOP_LEFT: 1, TOP_RIGHT: 2, BOTTOM_RIGHT: 3, BOTTOM_LEFT: 4 }, c.prototype.destroy = function () { this.wrapper.removeChild(this.elmt), this.container.removeChild(this.wrapper) }, c.prototype.isVisible = function () { return "none" != this.wrapper.style.display }, c.prototype.setVisible = function (t) { this.wrapper.style.display = t ? "inline-block" : "none" }, c.prototype.setOpacity = function (t) { this.elmt[m] && b == d.IE ? p.setElementOpacity(this.elmt, t, !0) : p.setElementOpacity(this.wrapper, t, !0) }; var w = "fullpage", C = "home", S = "zoomin", M = "zoomout", D = "_rest.png", E = "_grouphover.png", A = "_hover.png", I = "_pressed.png"; T = o.Viewer = function (n) { function d() { var e = U.style, i = n.style, s = q.style, a = $.style, r = Y.style, l = V.style; i.width = "100%", i.height = "100%", i.position = "relative", i.left = "0px", i.top = "0px", i.textAlign = "left", e.width = "100%", e.height = "100%", e.overflow = "hidden", e.position = "absolute", e.top = "0px", e.left = "0px", s.position = a.position = r.position = l.position = "absolute", s.top = a.top = "0px", s.left = l.left = "0px", a.right = r.right = "0px", l.bottom = r.bottom = "0px", Q.clickHandler = H, Q.pressHandler = z, Q.dragHandler = F, Q.releaseHandler = L, Q.scrollHandler = R, Q.setTracking(!0), o.Config.showNavBtnGroup && (ot = u(B), ot.style.marginRight = "4px", ot.style.marginBottom = "4px", B.addControl(ot, P.BOTTOM_RIGHT)), tt.enterHandler = I, tt.exitHandler = N, tt.releaseHandler = O, tt.setTracking(!0), t.setTimeout(A, 1), n.appendChild(U), n.appendChild(q), n.appendChild($), n.appendChild(Y), n.appendChild(V), j.innerHTML = "", j.appendChild(n) } function m(t) { var i = e.createTextNode(t); U.innerHTML = "", U.appendChild(p.makeCenteredNode(i)); var n = i.parentNode.style; n.fontFamily = "verdana", n.fontSize = "13px", n.fontSizeAdjust = "none", n.fontStyle = "normal", n.fontStretch = "normal", n.fontVariant = "normal", n.fontWeight = "normal", n.lineHeight = "1em", n.textAlign = "center", n.textDecoration = "none" } function v() { return X && b(), pt = (new Date).getTime(), t.setTimeout(function () { pt > ft && m(a.getString("Messages.Loading")) }, 2e3), pt } function y(e, i, o) { return ft = (new Date).getTime(), pt > e ? (r.log("Ignoring out-of-date open."), void J.trigger("ignore", B)) : i ? (U.innerHTML = "", dt = p.getElementSize(n), 0 === dt.x || 0 === dt.y ? void t.setTimeout(function () { y(e, i, o) }, 10) : (X = i, K = new k(dt, X.dimensions), G = new _(X, K, U), Z = new l, B.source = X, B.viewport = K, B.drawer = G, B.profiler = Z, vt = !1, yt = !0, w(T), void J.trigger("open", B))) : (m(o), void J.trigger("error", B)) } function b() { B.source = X = null, B.viewport = K = null, B.drawer = G = null, B.profiler = Z = null, U.innerHTML = "" } function w(e, n) { if (vt) return t.setTimeout(e, 1); var o = (new Date).getTime(), n = n ? n : o, s = n + 1e3 / 60, a = i.max(1, s - o); return t.setTimeout(e, a) } function C() { if (X) { Z.beginUpdate(); var t = p.getElementSize(n); !t.equals(dt) && t.x > 0 && t.y > 0 && (K.resize(t, !0), dt = t, J.trigger("resize", B)); var e = K.update(); !vt && e && (J.trigger("animationstart", B), E()), e ? (G.update(), J.trigger("animation", B)) : yt || G.needsUpdate() ? (G.update(), yt = !1) : G.idle(), vt && !e && (J.trigger("animationfinish", B), bt || A()), vt = e, Z.endUpdate() } } function T() { if (X) { var t = (new Date).getTime(); C(), w(arguments.callee, t) } } function S(t) { for (var e = et.length - 1; e >= 0; e--)if (et[e].elmt == t) return e; return -1 } function M() { t.setTimeout(D, 20) } function D() { if (it) { var t = (new Date).getTime(), e = t - nt, n = 1 - e / at; n = i.min(1, n), n = i.max(0, n); for (var o = et.length - 1; o >= 0; o--)et[o].setOpacity(n); n > 0 && M() } } function E() { it = !1; for (var t = et.length - 1; t >= 0; t--)et[t].setOpacity(1) } function A() { s.autoHideControls && (it = !0, nt = (new Date).getTime() + st, t.setTimeout(M, st)) } function I(t, e, i, n) { bt = !0, E() } function N(t, e, i, n) { i || (bt = !1, vt || A()) } function O(t, e, i, n) { n || (bt = !1, vt || A()) } function H(t, e, i, n) { if (K && i) { var o = s.zoomPerClick, a = n ? 1 / o : o; K.zoomBy(a, K.pointFromPixel(e, !0)), K.applyConstraints() } } function z(t, e) { K && (mt = e, gt = K.getCenter()) } function F(t, e, i, n) { if (K) if (s.constrainDuringPan) { var o = e.minus(mt), a = K.deltaPointsFromPixels(o.negate(), !0); K.panTo(gt.plus(a)), K.applyConstraints() } else K.panBy(K.deltaPointsFromPixels(i.negate(), !0)) } function L(t, e, i, n) { i && K && K.applyConstraints() } function R(t, e, n, o) { if (K) { var a = i.pow(s.zoomPerScroll, n); K.zoomBy(a, K.pointFromPixel(e, !0)), K.applyConstraints() } } function W(t) { t = p.getEvent(t), 27 === t.keyCode && B.setFullPage(!1) } var B = this, j = p.getElement(n), n = p.makeNeutralElement("div"), U = p.makeNeutralElement("div"), q = p.makeNeutralElement("div"), $ = p.makeNeutralElement("div"), Y = p.makeNeutralElement("div"), V = p.makeNeutralElement("div"), X = null, G = null, K = null, Z = null, J = new g, Q = new f(U), tt = new f(n), et = [], it = !0, nt = null, ot = null, st = 1e3, at = 2e3, nt = null, it = !1, rt = e.body.style.width, lt = e.body.style.height, ht = e.body.style.overflow, ct = e.documentElement.style.overflow, ut = new h(1, 1), dt = null, pt = 0, ft = 0, mt = null, gt = null, vt = !1, yt = !1, bt = !1; this.container = j, this.elmt = n, this.source = null, this.drawer = null, this.viewport = null, this.profiler = null, this.tracker = Q, this.isOpen = function () { return !!X }, this.openDzi = function (t, e) { var i = v(), n = p.createCallback(null, y, i); switch (typeof t) { case "string": x.createFromXml(t, e, n); break; default: x.createFromJson(t, n) } }, this.openTileSource = function (e) { var i = v(); t.setTimeout(function () { y(i, e) }, 1) }, this.close = function () { X && b() }, this.addControl = function (t, e) { var t = p.getElement(t); if (!(S(t) >= 0)) { var i = null; switch (e) { case P.TOP_RIGHT: i = $, t.style.position = "relative"; break; case P.BOTTOM_RIGHT: i = Y, t.style.position = "relative"; break; case P.BOTTOM_LEFT: i = V, t.style.position = "relative"; break; case P.TOP_LEFT: i = q, t.style.position = "relative"; break; case P.NONE: default: i = n, t.style.position = "absolute" }et.push(new c(t, e, i)) } }, this.removeControl = function (t) { var t = p.getElement(t), e = S(t); e >= 0 && (et[e].destroy(), et.splice(e, 1)) }, this.clearControls = function () { for (; et.length > 0;)et.pop().destroy() }, this.getNavControl = function () { return ot }, this.isDashboardEnabled = function () { for (var t = et.length - 1; t >= 0; t--)if (et[t].isVisible()) return !0; return !1 }, this.isFullPage = function () { return n.parentNode == e.body }, this.isMouseNavEnabled = function () { return Q.isTracking() }, this.isVisible = function () { return "hidden" != n.style.visibility }, this.setDashboardEnabled = function (t) { for (var e = et.length - 1; e >= 0; e--)et[e].setVisible(t) }, this.setFullPage = function (t) { if (t != B.isFullPage()) { var o = e.body, s = o.style, a = e.documentElement.style, r = n.style, l = U.style; if (t ? (ht = s.overflow, ct = a.overflow, s.overflow = "hidden", a.overflow = "hidden", rt = s.width, lt = s.height, s.width = "100%", s.height = "100%", l.backgroundColor = "black", l.color = "white", r.position = "fixed", r.zIndex = "99999999", o.appendChild(n), dt = p.getWindowSize(), p.addEvent(e, "keydown", W), I()) : (s.overflow = ht, a.overflow = ct, s.width = rt, s.height = lt, l.backgroundColor = "", l.color = "", r.position = "relative", r.zIndex = "", j.appendChild(n), dt = p.getElementSize(j), p.removeEvent(e, "keydown", W), N()), K) { var c = K.getBounds(); K.resize(dt); var u = K.getBounds(); t ? ut = new h(u.width / c.width, u.height / c.height) : (K.update(), K.zoomBy(i.max(ut.x, ut.y), null, !0)), yt = !0, J.trigger("resize", B), C() } } }, this.setMouseNavEnabled = function (t) { Q.setTracking(t) }, this.setVisible = function (t) { n.style.visibility = t ? "" : "hidden" }, this.showMessage = function (e, i) { return i ? void t.setTimeout(function () { B.isOpen() || m(e) }, i) : void m(e) }, this.addEventListener = function (t, e) { J.addListener(t, e) }, this.removeEventListener = function (t, e) { J.removeListener(t, e) }, this.trigger = function () { J.trigger.apply(B, arguments) }, d() } }()
    }(window, document, Math), function (t, e, i, n, o) {
        function s(t, e, i, n, o, s) { return ((t * t + e * e) * (n - s) - (i * i + n * n) * (n - s) - (i * i + n * n) * (e - n) + (o * o + s * s) * (e - n)) / (2 * ((t - i) * (n - s) - (i - o) * (e - n))) } function a(t, e, i, n, o, a) { var r = s(t, e, i, n, o, a); return (i * i + n * n - (o * o + a * a) - 2 * r * (i - o)) / (2 * (n - a)) } function r(t, e, i) { var n = s(t.x, t.y, e.x, e.y, i.x, i.y), o = a(t.x, t.y, e.x, e.y, i.x, i.y); return new Pt(n, o) } function l(t, e) { var n = e.x - t.x, o = e.y - t.y; return i.sqrt(n * n + o * o) } function h(t, e, n, o, s, a) { var r = i.atan2(e - o, t - n), l = i.atan2(a - o, s - n), h = (l - r) / i.PI * 180; return 0 > h ? 360 + h : h } function c(t, e, n, o, s, a) { var r = i.atan2(e - o, t - n), l = i.atan2(a - o, s - n); return l - r } function u(t, e, i) { return c(t.x, t.y, e.x, e.y, i.x, i.y) } function d(t, e) { return i.atan2(t.y - e.y, t.x - e.x) } function p(t, e, i) { return h(t.x, t.y, e.x, e.y, i.x, i.y) } function f(t) { var e = 0; return e = 0 > t ? 2 * i.PI + t : t, e < .5 * i.PI || e > 1.5 * i.PI ? !0 : !1 } function m(t) { return 0 > t ? 2 * i.PI + t : t } function g(t) { for (var e = 0, n = t.length, o = 0; n > o; o++) { var s = (o + 1) % n; e += t[o].x * t[s].y, e -= t[o].y * t[s].x } return i.abs(e / 2) } function v(t) { var e = 0, i = 0; if (null != t && (e = t.length, 2 > e)) return 0; for (var n = 0, o = 1; e > o; o++)i += b(t[n], t[o]), n = o; return i } function y(t) { if (null == t) return 0; var e = t.length; if (2 > e) return 0; if (t[0] != t[e - 1]) { t.push(t[0]); var i = v(t); return t.splice(t.length - 1, 1), i } return v(t) } function b(t, e) { var n = t.x - e.x, o = t.y - e.y; return i.sqrt(n * n + o * o) } function w(t, e, i, o, s, a, r, l, h, c, u, d) { var p = n(t); p.css({ left: e + "px", top: i + "px", "font-size": o + "px", "font-family": s, color: a, position: "absolute", padding: "5px", "float": "left", "border-radius": "4px", "-moz-border-radius": "4px", "-webkit-border-radius": "4px" }), r && p.css({ "font-weight": "bold" }), l && p.css({ "font-style": "italic" }), h && p.css({ "text-decoration": "underline" }), u && p.css({ "background-color": "#F7F8FA", border: "1px solid #A3AEB9" }), d && p.css({ filter: "alpha(opacity=80)", opacity: "0.8", display: "block" }); var f = C(c); p.html(f) } function x(t) { $elmt = n(t), $elmt.css({ "font-size": "12px", "background-color": "#F7F8FA", border: "1px solid #A3AEB9", color: "#000000", "font-family": "Microsoft Sans Serif,Arial, Helvetica, sans-serif,宋体", filter: "alpha(opacity=80)", opacity: "0.8", position: "absolute", padding: "4px", "border-radius": "4px", "-moz-border-radius": "4px", "-webkit-border-radius": "4px" }) } function _(t) { return i.round(100 * t) / 100 } function C(t) { return t = t.replaceAll("\n", _t) } function k(t) { for (var e = !1, i = 0; i < t.length; i++)if ("\n" == t[i]) { e = !0; break } return e } function T(t, e) { var i = n(e).width(), o = n(e).height(); 200 > i && (i = 200), 200 > o && (o = 200), n(t).width(i).height(o) } function P(t, e) { return t += e + _t } function S(t, e) { return t += e } function M(t, e, i) { $elmt = n(t), $elmt.css({ left: e + "px", top: i + "px" }) } function D(t) { return t /= 2, 10 > t && (t = 10), t } function E(t, e, i, n) { n = D(n); var o, s, a, r; if (t.x > e.x ? (o = e.x, a = t.x) : (o = t.x, a = e.x), t.y > e.y ? (s = e.y, r = t.y) : (s = t.y, r = e.y), i.x < o - n || i.x > a + n || i.y < s - n || i.y > r + n) return !1; var l = A(t, e, i); return null == l ? !1 : n > l ? !0 : !1 } function A(t, e, n) { var o = t.y - e.y, s = e.x - t.x, a = (t.x - s) * t.y - t.x * (t.y + o); return 0 == s && 0 == o ? null : i.abs(o * n.x + s * n.y + a) / i.sqrt(s * s + o * o) } function I(t, e, i, n) { n = D(n); var o = l(e, i); return t + n >= o ? !0 : !1 } function N(t, e, i, n) { n = D(n); var o = l(e, i), s = new Jt; return s.isIn = t + n >= o, s.length = o, s } function O(t, e, n, o, s, a, r) { r = D(r); var l = !1, h = b(e, n), c = d(n, e); return t + r >= h && (l = i.abs(o - s) < i.PI ? a ? i.min(o, s) > c || c > i.max(o, s) : i.min(o, s) < c || c < i.max(o, s) : a ? i.min(o, s) < c || c < i.max(o, s) : i.min(o, s) > c || c > i.max(o, s)), l } function H() { function t() { return (65536 * (1 + i.random()) | 0).toString(16).substring(1) } return t() + t() + "-" + t() + "-" + t() + "-" + t() + "-" + t() + t() + t() } t.SMds || (t.SMds = {}); var z = t.SMds, F = z.MdsError; !function () { F = z.MdsError = function (t) { Error.apply(this, arguments), this.message = t }, F.prototype = new Error }(); var L = z.Config; !function () { function t(t, e, s) { if (e === o) { if (i[t] === o) { var a = n.cookie(t); i[t] = a ? "on" === a : s === !0 } return i[t] } i[t] = e, e ? n.cookie(t, "on", { expires: 7 }) : n.cookie(t, "off", { expires: 7 }) } function e(t) { t ? (L.enableImageAdjustment = !1, L.enableAnnotation = !1, Seadragon.Config.animationTime = 0, Seadragon.Config.blendTime = 0, Seadragon.Config.immediateRender = !0) : (L.enableImageAdjustment = !0, L.enableAnnotation = !0, Seadragon.Config.animationTime = 1, Seadragon.Config.blendTime = .5, Seadragon.Config.immediateRender = !1) } if (!L) { var i = {}; L = z.Config = { enableImageAdjustment: !0, enableAnnotation: !0, language: "auto", exitConfirm: !0, autoShowAnnoDialog: !0, showOption: !0, showNav: !0, showNavMap: function (e) { return t("shownavmap", e, !0) }, showRulers: function (e) { return t("showrulers", e) }, showGrid: function (e) { return t("showgrid", e) }, showLabel: function (e) { return t("showlabel", e) }, compactBrowsing: function (i) { return i !== o && e(i), t("compactbrowsing", i) } }, Seadragon.Config.showNavBtnGroup = !1, Seadragon.Config.debugMode = !0, Seadragon.Config.autoHideControls = !1, Seadragon.Config.maxZoomPixelRatio = 2, Seadragon.Config.imageLoaderLimit = 4, Seadragon.Config.zoomPerClick = 1, e(L.compactBrowsing()) } }(); var R = z.Strings; !function () { function e() { var e = L.language; if (i[e]) return i[e]; if (e === o || null === e || "" === e || "auto" === e) { e = t.navigator.userLanguage || t.navigator.language; var n = e.split("-"); return e = n[0], i[e] || (e = "en"), L.language = e, i[e] } } if (!R) { var i = { en: { Buttons: { Annotation: "Annotations", ImageAdjustment: "Adjust Image", Options: "Options", Edit: "Edit", Delete: "Delete", AnnotationList: "List", Back: "Back", Ok: "Ok", Cancel: "Cancel", Yes: "Yes", No: "No", Reset: "Reset", Finish: "Finish", Save: "Save", On: "On", Off: "Off", AutoShow: "Show Automatically" }, Labels: { AnnotationType: "Annotations:" }, Tooltips: { BtnBackToBase: "Back to base image", BtnHome: "Fit to view window", ZoomIn: "Zoom In", ZoomOut: "Zoom Out" }, Messages: { SaveSuccess: "Save Successfully.", SaveFailed: "Save Failed.", ExitConfirm: "The slide's data has been changed, do you want to exit without saving ?", SaveAdjustmentSuccess: "Save image adjustment successfully.", SaveAdjustmentFailed: "Save image adjustment failed.", SaveAnnotationSuccess: "Save annotations successfully.", SaveAnnotationFailed: "Save annotations failed." }, ImageAdjustments: { Title: "Adjust Image", Gamma: "Gamma", Factor: "Factor", MinInput: "Min Input", MaxInput: "MaxInput", Contrast: "Contrast", Channels: "Color", Red: "Red", Green: "Green", Blue: "Blue", AllChannels: "All Channels", SS: "Sharpness & Saturation", Saturation: "Saturation", Sharpness: "Sharpness" }, Annotations: { Draw: { Line: "Draw Line", Arrow: "Draw Arrow", Rectangle: "Draw Rectangle", Ellipse: "Draw Ellipse", Remark: "Add Remark", Position: "Add Position", CurveRounded: "Draw Closed Curve", Curve: "Draw Curve", Angle: "Draw Angle by 3 Points", Circle: "Draw Circle", CircleThreePoints: "Draw Circle by 3 points", Arc: "Draw Arc by 3 points", Polygon: "Draw Polygon", PolygonLine: "Draw PolygonLine", Brace: "Draw Brace" }, Dialog: { Title: "Edit Annotation", LineWidth: "Line Width:", FontSize: "Font Size:", Name: "Name:", Description: "Description:", Color: "Color:" }, Measurement: { TxtLength: "Length:", TxtWidth: "Width:", TxtHeight: "Height:", TxtAngle: "Angle:", TxtArcLength: "Arc Length:", TxtArea: "Area:", TxtMajorhalfaxis: "Major half axis:", TxtMinorhalfaxis: "Minor half axis:", TxtPerimeter: "Perimeter:", TxtRadius: "Radius:", TxtDescription: "Description:", TxtUnit: " um", TxtAreaUnit: " squm", TxtDeg: " Deg" }, Default: { Name: "New Annotation", Description: "Description" }, AskSave: { Title: "Save Annotations", Message: "Annotations have been changed, do you want to save ?" } }, Options: { Title: "Options", NavMap: "Nav Map:", Compact: "Compact:", Ruler: "Ruler:", Grid: "Grid:", Label: "Label:" }, Compact: { Title: "Compact Browsing", Message: "This function is disabled in compact browsing. You can go to [Options] to turn it off." }, NotSupported: { Title: "Not Supported", Message: 'It seems this function is not supported well on your browser. Please use the latest <a href="https://www.google.com/chrome" target="_blank">Chrome</a>, <a href="http://www.mozillaonline.com/" target="_blank">Firefox</a> or <a href="http://www.apple.com/safari/" target="_blank">Safari</a> for a better browsing experience.' } }, zh: { Buttons: { Annotation: "标注", ImageAdjustment: "图像调节", Options: "标尺", NavMap: "导航图", Edit: "编辑", Delete: "删除", Select: "选择", Send: "发送", AnnotationList: "标注列表", Back: "返回", Ok: "确定", Cancel: "取消", Yes: "是", No: "否", Reset: "重置", Finish: "完成", Location: "定位", Save: "保存", On: "开", Off: "关", AutoShow: "自动显示" }, Labels: { AnnotationType: "标注类型：" }, Tooltips: { BtnBackToBase: "返回底图", BtnHome: "自适应窗口", ZoomIn: "放大", ZoomOut: "缩小" }, Messages: { SaveSuccess: "保存成功。", SaveFailed: "保存失败！", ExitConfirm: "切片的数据已经改变，是否直接退出？", SaveAdjustmentSuccess: "图像调节保存成功。", SaveAdjustmentFailed: "图像调节保存失败！", SaveAnnotationSuccess: "标注保存成功。", SaveAnnotationFailed: "标注保存失败！" }, ImageAdjustments: { Title: "调节图像", Gamma: "伽马", Factor: "因子", Contrast: "对比度", MinInput: "最小值", MaxInput: "最大值", Channels: "颜色通道", Red: "红", Green: "绿", Blue: "蓝", AllChannels: "所有通道", SS: "锐度和饱和度", Saturation: "饱和度", Sharpness: "锐度" }, Annotations: { Draw: { Line: "绘制直线", Arrow: "绘制带箭头直线", Rectangle: "绘制矩形", Ellipse: "绘制椭圆", Remark: "绘制文本注释", Position: "标记位置", CurveRounded: "绘制闭合曲线", Curve: "绘制自由曲线", Angle: "三点画角度", Circle: "绘制圆", CircleThreePoints: "三点画圆", Arc: "三点画弧", Polygon: "绘制多边形", PolygonLine: "绘制折线", Brace: "绘制大括号" }, Dialog: { Title: "编辑标注", LineWidth: "线宽：", FontSize: "字号：", Name: "名称：", Description: "描述：", Color: "颜色：" }, Measurement: { TxtLength: "长度：", TxtWidth: "宽：", TxtHeight: "高：", TxtAngle: "角度：", TxtArcLength: "弧长：", TxtArea: "面积：", TxtMajorhalfaxis: "长半轴：", TxtMinorhalfaxis: "短半轴：", TxtPerimeter: "周长：", TxtRadius: "半径：", TxtDescription: "描述：", TxtUnit: " 微米", TxtAreaUnit: " 平方微米", TxtDeg: " 度" }, Default: { Name: "新标注", Description: "请输入" }, AskSave: { Title: "保存标注", Message: "标注已经改变，是否保存？" } }, Options: { Title: "选项", NavMap: "导航图：", Compact: "精简模式：", Ruler: "标尺：", Grid: "网格：", Label: "标签：" }, Compact: { Title: "精简模式", Message: "精简模式下该功能是关闭的。您可以到 【选项】 关闭精简模式。" }, NotSupported: { Title: "不支持", Message: '您的浏览器还不能很好的支持此功能，请使用最新的 <a href="https://www.google.com/chrome" target="_blank">Chrome</a>, <a href="http://www.mozillaonline.com/" target="_blank">Firefox</a> 或 <a href="http://www.apple.com/safari/" target="_blank">Safari</a> 浏览器以获得更好的体验。' } } }; R = z.Strings = {}, R.getString = function (t) { for (var i = t.split("."), n = e(), o = 0; o < i.length; o++)n = n[i[o]] || {}; "string" != typeof n && (n = ""); var s = arguments; return n.replace(/\{\d+\}/g, function (t) { var e = parseInt(t.match(/\d+/)) + 1; return e < s.length ? arguments[e] : "" }) } } }(); var W = z.Support; !function () { if (!W) { n.extend(n.support, { orientation: "orientation" in t && "onorientationchange" in t, touch: "ontouchend" in e }), W = z.Support = { imageAdjustment: !1, canvas: !1, isAndroid: !1 }; var i = Seadragon.Utils.getBrowser(), o = navigator.userAgent.toLowerCase(), s = !!e.createElement("canvas").getContext; W.canvas = s, s && i != Seadragon.Browser.IE && i != Seadragon.Browser.UNKNOWN && (W.imageAdjustment = !0), W.isAndroid = o.indexOf("android") > -1 } }(); var B = z.ZoomPanel, j = z.SliderPanel; !function () { B = z.ZoomPanel = function (t) { function i() { var e = 2, i = n.support.touch ? "touchstart" : "click", s = '<a class="zoom-button zoom-button-in zoom-icon-in" title="' + R.getString("Tooltips.ZoomIn") + '"><span></span></a>', a = n(s); a.bind(i, function (i) { t.viewport && (t.viewport.zoomBy(e / 1), t.viewport.applyConstraints(), i.stopPropagation && i.stopPropagation()) }), s = '<a class="zoom-button zoom-button-out zoom-icon-out" title="' + R.getString("Tooltips.ZoomOut") + '"><span></span></a>'; var r = n(s); r.bind(i, function (i) { t.viewport && (t.viewport.zoomBy(1 / e), t.viewport.applyConstraints(), i.stopPropagation && i.stopPropagation()) }), n(o.elmt).addClass("zoom-panel").append(a).append(r) } var o = this; this.elmt = e.createElement("div"), function () { i() }() }, j = z.SliderPanel = function (t, i, o) { function s() { a.elmt = e.createElement("div"), n(a.elmt).addClass("ui-corner-all ui-dialog-content slider-panel-contain").hide(), l = n('<label for="slider3D" class="slider-panel-text">0</label>'), r = n('<div id="slider3D" class="slider-panel-slider"></div>').slider({ min: t, max: i, step: o, slide: function (t, e) { l.html(e.value.toString()) } }), n(a.elmt).append(l).append(r) } var a = this; this.elmt = null; var r = null, l = null; !function () { s() }(), this.setData = function (t, e, i, n) { r.slider("option", "min", t), r.slider("option", "max", e), r.slider("option", "step", n || 1), r.slider("value", i || 0) }, this.change = function (t) { r.bind("slidechange", t) }, this.val = function () { return parseInt(r.slider("value")) }, this.show = function () { n(a.elmt).show() }, this.hide = function () { n(a.elmt).hide() } } }(); var U = z.Toolbar; AnnotationType = { NONE: "NONE", Line: "Line", Arrow: "Arrow", Brace: "Brace", Rectangle: "Rectangle", Ellipse: "Ellipse", Remark: "Remark", Position: "Position", CurveRounded: "RoundedCurve", Curve: "FreeRoundedCurve", Angle: "Angle", Circle: "Circle", CircleThreePoints: "CircleThreePoints", Arc: "Arc", Polygon: "Polygon" }, function () { U = z.Toolbar = function (t, e) { } }(); var q = function (t, i) { function n() { o.tbAnnotation.hide(), o.tbMain.onShowAnnotationToobar = function () { o.tbAnnotation.show(), o.tbMain.hide() }, t.addEventListener("open", function () { var e = t.getCurrentImage(); o.tbMain.setBackButton(e.id >= 0) }), o.tbMain.onback = function () { var e = t.getCurrentImage(); t.openMds(e.id) }, o.tbAnnotation.onback = function () { o.tbMain.show(), o.tbAnnotation.hide() }, o.elmt.appendChild(o.tbMain.elmt), o.elmt.appendChild(o.tbAnnotation.elmt) } var o = this; o.elmt = e.getElementById(i), o.tbMain = new $(t), o.tbAnnotation = new Y(t), function () { n() }() }, $ = function (t) { function e() { x = new V(t), _ = new K(t), C = new J, k = new Z } function i() { var t = new tt("400px", "left", "times"); P.addToolstrip(t), m = new et("refresh", null, a, null, R.getString("Tooltips.BtnBackToBase")), t.addItem(m), g = new et("Home", null, r, null, R.getString("Tooltips.BtnHome")), t.addItem(g); for (var e = 0; e < S.length; e++) { var i = new et(S[e].toString() + "x", null, l, { obj: S[e] }); M.push(i), t.addItem(i) } t = new tt("30%", "center", "name"), P.addToolstrip(t), b = new it("", "70%"), t.addItem(b), w = new it("", "30%"), t.addItem(w), t = new tt("300px", "right", "label"), P.addToolstrip(t), L.enableAnnotation && (v = new et(null, R.getString("Buttons.Annotation"), u, null), t.addItem(v)), L.showOption && (y = new et(null, R.getString("Buttons.Options"), d, null), t.addItem(y)), L.showNav && (y = new et(null, R.getString("Buttons.NavMap"), p, null), t.addItem(y)) } function o() { t.isOpen() && (h(), c(), s()), t.addEventListener("open", h), t.addEventListener("animation", c), t.addEventListener("resize", s) } function s() { t.viewport.getContainerSize().x < 735 ? (n("#times").hide(), n("#name").width("100%"), n("#label").hide()) : (n("#times").show(), n("#name").width("30%"), n("#label").show()) } function a() { T.onback && T.onback() } function r() { t.viewport && t.viewport.goHome() } function l(e) { t && t.zoomToObj(e.data.obj) } function h() { var e = t.getCurrentSlide(), i = t.getCurrentImage(), n = t.getScale(); e && b.setText(e.name), i && n && w.setText((i.scanObjective * n).toFixed(2) + "x"), i && f(i.scanObjective), s() } function c() { var e = t.getScale(), i = t.getCurrentImage(); i && e && w.setText((i.scanObjective * e).toFixed(2) + "x") } function u() { t.getShapeCanvas().setSelectedEnable(!0), W.canvas ? L.compactBrowsing() ? C.show() : T.onShowAnnotationToobar && T.onShowAnnotationToobar() : k.show() } function d() { D = D ? !1 : !0, L.showRulers(D), t.update() } function p() { E = E ? !1 : !0, t.setActions("isNavmap", E), t.update() } function f(t) { for (var e = 0; e < S.length; e++)S[e] > t ? M[e].hide() : M[e].show() } var m, g, v, y, b, w, x, _, C, k, T = this, P = new Q, S = [2, 4, 10, 20, 40, 60, 100], M = [], D = !1, E = !0; T.elmt = P.elmt, function () { e(), i(), o() }(), this.onShowAnnotationToobar, this.onShowAdjustImage, this.onback, this.show = function () { P && P.show() }, this.hide = function () { P && P.hide() }, this.setBackButton = function (t) { t ? m.show() : m.hide() } }, Y = function (t) { function e() { d = new X(t), p = new G(t) } function i() { var e, i, n = new tt("100px", "left", "annoType"); e = new it(R.getString("Labels.AnnotationType")), n.addItem(e), n = new tt("350px", "left", "annoAction"), g.addToolstrip(n), i = new et("hand", null, o, { type: "hand" }), n.addItem(i), y.push(i), i = new et("selectanno", null, o, { type: "select" }), n.addItem(i), y.push(i), i = new et("line", null, o, { type: AnnotationType.Line, text: R.getString("Annotations.Draw.Line") }), n.addItem(i), y.push(i), i = new et("arrow", null, o, { type: AnnotationType.Arrow, text: R.getString("Annotations.Draw.Arrow") }), n.addItem(i), y.push(i), i = new et("brace", null, o, { type: AnnotationType.Brace, text: R.getString("Annotations.Draw.Brace") }), n.addItem(i), y.push(i), i = new et("rect", null, o, { type: AnnotationType.Rectangle, text: R.getString("Annotations.Draw.Rectangle") }), n.addItem(i), y.push(i), i = new et("ellipse", null, o, { type: AnnotationType.Ellipse, text: R.getString("Annotations.Draw.Ellipse") }), n.addItem(i), y.push(i), i = new et("polygon", null, o, { type: AnnotationType.Polygon, text: R.getString("Annotations.Draw.Polygon") }), n.addItem(i), y.push(i), i = new et("polygonLine", null, o, { type: AnnotationType.PolygonLine, text: R.getString("Annotations.Draw.PolygonLine") }), n.addItem(i), y.push(i), i = new et("position", null, o, { type: AnnotationType.Position, text: R.getString("Annotations.Draw.Position") }), n.addItem(i), y.push(i), n = new tt("100px", "center", "name"), g.addToolstrip(n), m = new it("", "100%"), n.addItem(m), n = new tt("250px", "right", "setting"), g.addToolstrip(n), c = new et(null, R.getString("Buttons.Finish"), function () { }), c.hide(), n.addItem(c), u = new et(null, R.getString("Buttons.Save"), function () { t.saveAnnotations() }), u.hide(), n.addItem(u), i = new et(null, R.getString("Buttons.Edit"), function () { d.show() }), n.addItem(i), i = new et(null, R.getString("Buttons.Delete"), function () { t.getShapeCanvas().deleteAnnotation() }), n.addItem(i), i = new et(null, R.getString("Buttons.Back"), s), n.addItem(i) } function o(e) { for (var i = 0; i < y.length; i++) { var n = y[i], o = n.data == e.data; if (n.setSelected(o), o) switch (c.hide(), e.data.type) { case "hand": t.getShapeCanvas().setSelectedEnable(!1); break; case "select": t.getShapeCanvas().setSelectedEnable(!0); break; default: n.data.type == AnnotationType.Polygon, t.getShapeCanvas().setDrawAnnotationType(n.data.type) } } } function s() { var e = t.getShapeCanvas(); e.setSelectedEnable(!1), v.resetAnnotationButtons(), v.onback && v.onback(), e.isShapeChanged && t.canWrite() && p.show() } function a() { t.isOpen() && (r(), l(), h()), t.addEventListener("open", r), t.addEventListener("resize", h), t.addEventListener("animation", l) } function r() { var e = t.getCurrentSlide(), i = t.getCurrentImage(), n = t.getScale(); e && (f = e.name), i && n && m.setText((i.scanObjective * n).toFixed(2) + "x") } function l() { var e = t.getScale(), i = t.getCurrentImage(); i && e && m.setText((i.scanObjective * e).toFixed(2) + "x") } function h() { t.viewport.getContainerSize().x < 735 ? (n("#annoType").hide(), n("#annoAction").hide(), n("#setting").hide(), v.onback()) : (n("#annoType").show(), n("#annoAction").show(), n("#setting").show()) } var c, u, d, p, f, m, g = new Q, v = this, y = []; v.elmt = g.elmt, function () { e(), i(), a() }(), this.onback, this.show = function () { g && g.show() }, this.hide = function () { g && g.hide() }, this.setSaveButton = function (t) { t ? u.show() : u.hide() }, this.resetAnnotationButtons = function () { for (var t = 0; t < y.length; t++)y[t].setSelected(!1); c.hide() }, this.showAnnotationDialog = function () { d && d.show() } }, V = function (t) {
            function e() {
            m = n(P), n("[data-lang]", m).html(function () { return R.getString(n(this).attr("data-lang")) }), m.attr("title", R.getString("ImageAdjustments.Title")), n(v, m).slider({ min: 1, max: 100, value: 50, slide: function (t, e) { var s = e.value, a = i(s); n(v + "Value", m).html(a.toFixed(2).toString()), t.originalEvent && d.gamma != a && (d.gamma = a, o()) } }), n(y, m).slider({ min: 0, max: 255, value: 0, slide: function (t, e) { var i = e.value; n(y + "Value", m).html(i.toString()), t.originalEvent && d.contrastMin != i && (d.contrastMin = i, o()) } }), n(b, m).slider({ min: 0, max: 255, value: 255, slide: function (t, e) { var i = e.value; n(b + "Value", m).html(i.toString()), t.originalEvent && d.contrastMax != i && (d.contrastMax = i, o()) } }), n(w, m).slider({ min: 1, max: 100, value: 50, slide: function (t, e) { var s = e.value, a = i(s); n(w + "Value", m).html(a.toFixed(2).toString()), t.originalEvent && d.red != a && (d.red = a, g && (d.green = d.blue = d.red, n(x, m).slider("value", s), n(_, m).slider("value", s)), o()) } }), n(x, m).slider({ min: 1, max: 100, value: 50, slide: function (t, e) { var s = e.value, a = i(s); n(x + "Value", m).html(a.toFixed(2).toString()), t.originalEvent && d.green != a && (d.green = a, g && (d.red = d.blue = d.green, n(w, m).slider("value", s), n(_, m).slider("value", s)), o()) } }), n(_, m).slider({ min: 1, max: 100, value: 50, slide: function (t, e) { var s = e.value, a = i(s); n(_ + "Value", m).html(a.toFixed(2).toString()), t.originalEvent && d.blue != a && (d.blue = a, g && (d.red = d.green = d.blue, n(w, m).slider("value", s), n(x, m).slider("value", s)), o()) } }), n(C, m).slider({ min: 0, max: 10, value: 0, slide: function (t, e) { var i = e.value; n(C + "Value", m).html(i.toString()), t.originalEvent && d.saturation != i && (d.saturation = i, o()) } }), n(k, m).slider({ min: 0, max: 10, value: 0, slide: function (t, e) { var i = e.value; n(k + "Value", m).html(i.toString()), t.originalEvent && d.sharpness != i && (d.sharpness = i, o()) } }), n(T, m).change(function () {
                if (g = "checked" === n(this).attr("checked")) { d.green = d.blue = d.red; var t = s(d.red); n(x, m).slider("value", t), n(_, m).slider("value", t) }
            }), m.appendTo(n("body")).dialog({ autoOpen: !1, resizable: !1, width: 500, modal: !0, buttons: [{ text: R.getString("Buttons.Ok"), click: function () { u && !d.isEquals(p) && (u.imageAdjustment = d, t.canWrite() && c()) } }, { text: R.getString("Buttons.Cancel"), click: function () { u && (d = p, u.imageAdjustment = d), o(), n(this).dialog("close") } }, { text: R.getString("Buttons.Reset"), click: function () { d.reset(), o(), a() } }], open: l })
            } function i(t) { var e = 1; return 50 > t ? e = .05 + t / 50 : t > 50 && (e = 1 + (t - 50) / 12.5), e } function o() { f || (f = t.getImageProcessing()), f && (t.update(), f.adjust(d)) } function s(t) { var e = 50; return 1 > t ? e = 50 * (t - .05) : t > 1 && (e = 12.5 * (t - 1) + 50), e } function a() { n(v, m).slider("value", r(d.gamma)), n(v + "Value").html(d.gamma.toFixed(2).toString()), n(y, m).slider("value", d.contrastMin), n(y + "Value").html(d.contrastMin.toString()), n(b, m).slider("value", d.contrastMax), n(b + "Value").html(d.contrastMax.toString()), n(w, m).slider("value", s(d.red)), n(w + "Value").html(d.red.toFixed(2).toString()), n(x, m).slider("value", s(d.green)), n(x + "Value").html(d.green.toFixed(2).toString()), n(_, m).slider("value", s(d.blue)), n(_ + "Value").html(d.blue.toFixed(2).toString()), n(C, m).slider("value", d.saturation), n(C + "Value").html(d.saturation.toString()), n(k, m).slider("value", d.sharpness), n(k + "Value").html(d.sharpness.toString()) } function r(t) { var e = 50; return 1 > t ? e = 50 * t + .5 : t > 1 && (e = 50 + 50 * (t - 1) / 8.82 * .5), e } function l() { h() } function h() { u = t.getCurrentImage(), u && u.imageAdjustment ? (d = u.imageAdjustment, p = d.clone()) : (d = new dt, p = null), a() } function c() { function e(e) { e.success ? t.showMessage(SlideViewerStrings.getString("Messages.SaveAdjustmentSuccess")) : t.showMessage(SlideViewerStrings.getString("Messages.SaveAdjustmentFailed")) } if (t.provider) { var i = t.getCurrentSlide(); t.provider.updateImageAdjustment(i.id, u.id, u.imageAdjustment, e) } } var u, d, p, f, m, g = !1, v = "#gamma", y = "#min", b = "#max", w = "#red", x = "#green", _ = "#blue", C = "#saturation", k = "#sharpness", T = "#chkAllChannels", P = '<div id="imageAdjustment" title="Adjust Image"> 		<fieldset> 				<legend data-lang="ImageAdjustments.Gamma">Gamma</legend> 				<div data-role="fieldcontain"> 					<label class="adjustment-slider-text" for="gamma" data-lang="ImageAdjustments.Factor">Factor</label> 					<div id="gamma" class="adjustment-slider" data-role="slider"></div> 					<label id="gammaValue" class="adjustment-slider-value">1</label> 				</div> 		</fieldset> 		<fieldset> 			<legend data-lang="ImageAdjustments.Contrast">Contrast</legend> 			<div data-role="fieldcontain"> 				<label class="adjustment-slider-text" for="min" data-lang="ImageAdjustments.MinInput">Min Input</label> 				<div id="min" class="adjustment-slider" data-role="slider"></div> 				<label id="minValue" class="adjustment-slider-value">0</label> 			</div> 			<div data-role="fieldcontain"> 				<label class="adjustment-slider-text" for="max" data-lang="ImageAdjustments.MaxInput">Max Input</label> 				<div id="max" class="adjustment-slider" data-role="slider"></div> 				<label id="maxValue" class="adjustment-slider-value">255</label> 			</div> 		</fieldset> 		<fieldset> 			<legend data-lang="ImageAdjustments.Channels">Channels</legend> 			<div data-role="fieldcontain"> 				<label class="adjustment-slider-text" for="red" data-lang="ImageAdjustments.Red">Red</label> 				<div id="red" class="adjustment-slider" data-role="slider"></div> 				<label id="redValue" class="adjustment-slider-value">1</label> 			</div> 			<div data-role="fieldcontain"> 				<label class="adjustment-slider-text" for="green" data-lang="ImageAdjustments.Green">Green</label> 				<div id="green" class="adjustment-slider" data-role="slider"></div> 				<label id="greenValue" class="adjustment-slider-value">1</label> 			</div> 			<div data-role="fieldcontain"> 				<label class="adjustment-slider-text" for="blue" data-lang="ImageAdjustments.Blue">Blue</label> 				<div id="blue" class="adjustment-slider" data-role="slider"></div> 				<label id="blueValue" class="adjustment-slider-value">1</label> 			</div> 			<input type="checkbox" id="chkAllChannels" /> 			<label for="chkAllChannels" data-lang="ImageAdjustments.AllChannels">All Channels</label> 		</fieldset> 		<fieldset> 			<legend data-lang="ImageAdjustments.SS">Saturation & Sharpness</legend> 			<div data-role="fieldcontain"> 				<label class="adjustment-slider-text" for="saturation" data-lang="ImageAdjustments.Saturation">Saturation</label> 				<div id="saturation" class="adjustment-slider" data-role="slider"></div> 				<label id="saturationValue" class="adjustment-slider-value">0</label> 			</div> 			<div data-role="fieldcontain"> 				<label class="adjustment-slider-text" for="sharpness" data-lang="ImageAdjustments.Sharpness">Sharpness</label> 				<div id="sharpness" class="adjustment-slider" data-role="slider"></div> 				<label id="sharpnessValue" class="adjustment-slider-value">0</label> 			</div> 		</fieldset> 	</div>'; !function () { e() }(), this.show = function () { m.dialog("open") }
        }, X = function (t) { function e() { n("#annotationDialog").remove(), h = n(c), n("[data-lang]", h).html(function () { return R.getString(n(this).attr("data-lang")) }), h.attr("title", R.getString("Annotations.Dialog.Title")), h.dialog({ open: i, autoOpen: !1, resizable: !1, modal: !1, width: 400, dialogClass: "editClass", buttons: [{ text: R.getString("Buttons.Ok"), click: function () { s(), r.showImageAnnotations(), n(this).dialog("close") } }, { text: R.getString("Buttons.Cancel"), click: function () { n(this).dialog("close") } }] }), n(".ui-dialog-buttonset").find("button").addClass("btn green-haze"), n("#colorpicker", h).farbtastic("#color"), a = n.farbtastic("#colorpicker") } function i() { r = t.getShapeCanvas(), l = r.getActiveShape(), o() } function o() { n("#chkAutoShow", h).attr("checked", L.autoShowAnnoDialog), l && (n("#lineWidth", h).val(l.width), a.setColor(l.color), n("#annoName", h).val(l.name), n("#annoDesc", h).val(l.description), "Position" == l.type ? n("#LineAndFont").text(R.getString("Annotations.Dialog.FontSize")) : n("#LineAndFont").text(R.getString("Annotations.Dialog.LineWidth"))) } function s() { Mt.defaultColor = n("#color", h).val(), Mt.lineWidth = n("#lineWidth", h).val(), L.autoShowAnnoDialog = "checked" === n("#chkAutoShow", h).attr("checked"), l && ("Position" === l.type && (l.fontSize = 5 * Mt.lineWidth), l.width = Mt.lineWidth, l.color = Mt.defaultColor, l.name = n("#annoName", h).val(), l.description = n("#annoDesc", h).val(), l.isMeasurementChanged = !0, r.dirtyCanvas()) } var a, r, l, h, c = '<div id="annotationDialog" data-role="dialog" data-overlay-theme="e"  title="Edit Annotation" class="ui-dialog-topright"><div data-role="content" data-theme="c"> <form  class="form-horizontal"><div class="form-group"><label for="lineWidth" id = "LineAndFont" class="col-xs-4 control-label" data-lang="Annotations.Dialog.LineWidth">Line Width:</label><div class="col-xs-7"><select id="lineWidth" class="form-control" width = "200px"><option value="1">1</option><option value="2" selected="selected">2</option><option value="5" >5</option><option value="10">10</option><option value="20">20</option></select></div></div><div class="form-group"><label  for="annoName" class="col-xs-4 control-label" data-lang="Annotations.Dialog.Name">Name:</label><div class="col-xs-7 input-icon"><i class="fa fa-file-text"></i><input type="text" class="form-control" id="annoName"/> </div></div><div class="form-group"><label for="annoDesc" class="col-xs-4 control-label" data-lang="Annotations.Dialog.Description">Description:</label><div class="col-xs-7 input-icon"><i class="fa fa-book"></i><input type="text" class="form-control" id="annoDesc"/> </div></div><div class="form-group"><label for="color" class="col-xs-4 control-label" data-lang="Annotations.Dialog.Color">Color:</label> <div class="col-xs-7 input-icon"><input type="text" id="color" value="#0d29e7" class="form-control"/></div></div><div class="form-group"><div id="colorpicker"></div> </div></form></div></div>'; !function () { e() }(), this.show = function () { h.dialog("open") } }, G = function (t) { function e() { i = n(s), n("[data-lang]", i).html(function () { return R.getString(n(this).attr("data-lang")) }), i.attr("title", R.getString("Annotations.AskSave.Title")), i.appendTo(n("body")).dialog({ autoOpen: !1, resizable: !1, modal: !0, buttons: [{ text: R.getString("Buttons.Yes"), click: function () { t.saveAnnotations(), n(this).dialog("close"), o.closeDialog && o.closeDialog() } }, { text: R.getString("Buttons.No"), click: function () { t.resumeAnnotations(), n(this).dialog("close"), o.closeDialog && o.closeDialog() } }] }) } var i, o = this, s = '<div id="annotationSaveDialog" data-role="dialog"> 		<div data-role="content" data-theme="c" data-mini="true"> 			<p data-lang="Annotations.AskSave.Message">Annotations have been changed, do you want to save?</p> 		</div> 	</div>'; !function () { e() }(), this.closeDialog, this.show = function () { i.dialog("open") } }, K = function (t) { function e() { o = n(s), n("[data-lang]", o).html(function () { return R.getString(n(this).attr("data-lang")) }), o.attr("title", R.getString("Options.Title")), n(".option-item-radio", o).buttonset(), W.canvas || n("[data-show='canvas']", o).hide(), o.appendTo(n("body")).dialog({ open: i, autoOpen: !1, resizable: !1, modal: !0, buttons: [{ text: R.getString("Buttons.Ok"), click: function () { var e = "checked" === n(a + "on", o).attr("checked"); L.showNavMap(e); var i = "checked" === n(r + "on", o).attr("checked"); L.compactBrowsing(i); var s = !0; L.showRulers(s); var l = "checked" === n(h + "on", o).attr("checked"); L.showGrid(l); var u = "checked" === n(c + "on", o).attr("checked"); L.showLabel(u), t.getNavMap().setVisibility(e), t.update(), n(this).dialog("close") } }, { text: R.getString("Buttons.Cancel"), click: function () { n(this).dialog("close") } }] }) } function i() { var t = L.showNavMap(); t ? n(a + "on", o).attr("checked", "checked").button("refresh") : n(a + "off", o).attr("checked", "checked").button("refresh"), t = L.compactBrowsing(), t ? n(r + "on", o).attr("checked", "checked").button("refresh") : n(r + "off", o).attr("checked", "checked").button("refresh"), t = L.showRulers(), t ? n(l + "on", o).attr("checked", "checked").button("refresh") : n(l + "off", o).attr("checked", "checked").button("refresh"), t = L.showGrid(), t ? n(h + "on", o).attr("checked", "checked").button("refresh") : n(h + "off", o).attr("checked", "checked").button("refresh"), t = L.showLabel(), t ? n(c + "on", o).attr("checked", "checked").button("refresh") : n(c + "off", o).attr("checked", "checked").button("refresh") } var o, s = '<div id="optionsDialog" title="Options" data-role="dialog"><div data-role="fieldcontain" class="option-item"><label for="flip-navmap" class="option-item-label" data-lang="Options.NavMap">Nav Map:</label><div id="flip-navmap" class="option-item-radio"><input type="radio" id="flip-navmap-on" name="navmap" value="on" /><label for="flip-navmap-on" data-lang="Buttons.On">On</label><input type="radio" id="flip-navmap-off" name="navmap" checked="checked" value="off" /><label for="flip-navmap-off" data-lang="Buttons.Off">Off</label></div></div><div data-role="fieldcontain" class="option-item"><label for="flip-label" class="option-item-label" data-lang="Options.Label">Label:</label><div id="flip-label" class="option-item-radio"><input type="radio" id="flip-label-on" name="label" value="on"/><label for="flip-label-on" data-lang="Buttons.On">On</label><input type="radio" id="flip-label-off" name="label" value="off" /><label for="flip-label-off" data-lang="Buttons.Off">Off</label></div></div><div data-role="fieldcontain" class="option-item"><label for="flip-compact" class="option-item-label" data-lang="Options.Compact">Compact:</label><div id="flip-compact" class="option-item-radio"><input type="radio" id="flip-compact-on" name="compact" value="on"/><label for="flip-compact-on" data-lang="Buttons.On">On</label><input type="radio" id="flip-compact-off" name="compact" value="off" /><label for="flip-compact-off" data-lang="Buttons.Off">Off</label></div></div><div data-role="fieldcontain" class="option-item" data-show="canvas"><label for="flip-ruler" class="option-item-label" data-lang="Options.Ruler">Ruler:</label><div id="flip-ruler" class="option-item-radio"><input type="radio" id="flip-ruler-on" name="ruler" value="on" /><label for="flip-ruler-on" data-lang="Buttons.On">On</label><input type="radio" id="flip-ruler-off" name="ruler" value="off" /><label for="flip-ruler-off" data-lang="Buttons.Off">Off</label></div></div><div data-role="fieldcontain" class="option-item" data-show="canvas"><label for="flip-grid" class="option-item-label" data-lang="Options.Grid">Grid:</label><div id="flip-grid" class="option-item-radio"><input type="radio" id="flip-grid-on" name="grid" value="on" /><label for="flip-grid-on" data-lang="Buttons.On">On</label><input type="radio" id="flip-grid-off" name="grid" value="off" /><label for="flip-grid-off" data-lang="Buttons.Off">Off</label></div></div>     </div>', a = "#flip-navmap-", r = "#flip-compact-", l = "#flip-ruler-", h = "#flip-grid-", c = "#flip-label-"; !function () { e() }(), this.show = function () { o.dialog("open") } }, Z = function () { function t() { e = n(i), n("[data-lang]", e).html(function () { return R.getString(n(this).attr("data-lang")) }), e.attr("title", R.getString("NotSupported.Title")), e.appendTo(n("body")).dialog({ autoOpen: !1, resizable: !1, modal: !0, width: 500, buttons: [{ text: R.getString("Buttons.Ok"), click: function () { n(this).dialog("close") } }] }) } var e, i = '<div id="notSupportedDialog" data-role="dialog" class="ui-dialog-topright"> 		<div data-role="content" data-theme="c" data-mini="true">             <p data-lang="NotSupported.Message">It seems this function is not supported well on your browser.                Please use the latest <a href="https://www.google.com/chrome" target="_blank">Chrome</a> ,<a href="http://www.mozillaonline.com/" target="_blank">Firefox</a> or <a href="http://www.apple.com/safari/" target="_blank">Safari</a> for a better browsing experience.</p> 		</div>     </div>'; !function () { t() }(), this.show = function () { e.dialog("open") } }, J = function () { function t() { e = n(i), n("[data-lang]", e).html(function () { return R.getString(n(this).attr("data-lang")) }), e.attr("title", R.getString("Compact.Title")), e.appendTo(n("body")).dialog({ autoOpen: !1, resizable: !1, modal: !0, width: 500, buttons: [{ text: R.getString("Buttons.Ok"), click: function () { n(this).dialog("close") } }] }) } var e, i = '<div id="compactDialog" data-role="dialog" class="ui-dialog-topright"> 		<div data-role="content" data-theme="c" data-mini="true"> 			<p data-lang="Compact.Message">You are now in compact browsing. You can go to [Options] to turn it off.</p> 		</div> 	</div>'; !function () { t() }(), this.show = function () { e.dialog("open") } }, Q = function () { function t() { i.addClass("toolbar"), i.append("<table><tr></tr></table>") } this.elmt = e.createElement("div"); var i = n(this.elmt); !function () { t() }(), this.addToolstrip = function (t) { i.find("tr").append(t.elmt) }, this.hide = function () { i.hide() }, this.show = function () { i.show() } }, tt = function (t, i, o) { function s() { var e = l; e.addClass("toolstrip"), o && e.attr("id", o), i && e.css("text-align", i), t && e.css("width", t) } var a = this; this.elmt = e.createElement("td"); var r = [], l = n(this.elmt); !function () { s() }(), this.addItem = function (t) { l.append(t.elmt), t.toolstrip = a, r.push(t) } }, et = function (t, i, o, s, a) { function r() { var e = l; o && (e.bind("click", s, o), e.css("padding", "0 6px"), e.css("border-style", "none"), e.attr("type", "button"), i ? (e.addClass("btn-slice"), e.append("<img  src='\\Static\\plugins\\slide\\img\\" + i + ".png' />"), e.append(i)) : (e.addClass("btn-slice"), e.append("<img  src='\\Static\\plugins\\slide\\img\\" + t + ".png' />"), a && e.attr("title", a))) } this.elmt = e.createElement("button"), this.data = s; var l = n(this.elmt); !function () { r() }(), this.hide = function () { l.hide() }, this.show = function () { l.css("display", "") }, this.setSelected = function (e) { if (!i) { var n = "toolbtn-icon-" + t + "-selected"; e ? l.find(".toolbutton-inner").addClass(n) : l.find(".toolbutton-inner").removeClass(n) } } }, it = function (t, i) { function o() { var e = s; e.addClass("toollabel"), i && e.css("width", i), e.text(t) } this.elmt = e.createElement("span"); var s = n(this.elmt); !function () { o() }(), this.setText = function (t) { s.text(t) } }, nt = function (t, i, o) { function s() { n("#Thumbnail").remove(), S = e.createElement("div"), S.id = "Thumbnail", S.style.width = i + N, S.style.height = o + N, S.style.top = E + N, S.style.left = D + N, W.canvas ? (T = e.createElement("canvas"), T.id = "cavView", T.width = i, T.height = o, S.appendChild(T), P = new Image, P.src = t, P.onload = function () { _.refresh(), _.imgLoaded = !0 }) : (k = e.createElement("img"), k.id = "imgView", k.src = t, k.alt = "", S.appendChild(k)), g = e.createElement("div"), g.id = "hLine", g.style.top = o / 2 + N, g.style.width = i + N, S.appendChild(g), v = e.createElement("div"), v.id = "vLine", v.style.left = i / 2 + N, v.style.height = o + N, S.appendChild(v), M = e.createElement("div"), M.id = "viewRect", M.style.top = (o - 50) / 2 + N, M.style.left = (i - 50) / 2 + N; var s = n(M); n.support.touch ? (s.bind("touchstart", a), s.bind("touchmove", r), s.bind("touchend", l), n(S).bind("touchstart", h)) : (s.mousedown(c), s.mouseup(d), s.mouseleave(p), n(S).mousedown(f)), S.appendChild(M) } function a(t) { t.stopPropagation(), C = !0; var e = t.originalEvent; e.preventDefault(), y = e.targetTouches[0].pageX, b = e.targetTouches[0].pageY } function r(t) { t.stopPropagation(); var e = t.originalEvent; if (e.preventDefault(), C && 1 == e.targetTouches.length) { var i = y - e.targetTouches[0].pageX, n = b - e.targetTouches[0].pageY; if (y = e.targetTouches[0].pageX, b = e.targetTouches[0].pageY, M.style.top = parseFloat(M.style.top) - n + N, M.style.left = parseFloat(M.style.left) - i + N, g.style.top = parseFloat(g.style.top) - n + N, v.style.left = parseFloat(v.style.left) - i + N, _.onUserMove) { var o = parseFloat(M.style.left) + parseFloat(M.clientWidth) / 2, s = parseFloat(M.style.top) + parseFloat(M.clientHeight) / 2, a = o / (parseFloat(M.style.width) * w), r = s / (parseFloat(M.style.width) * w); _.onUserMove(a, r) } } } function l(t) { t.stopPropagation(); var e = t.originalEvent; e.preventDefault(), C = !1 } function h(t) { var e = t.originalEvent; if (e.preventDefault(), y = e.targetTouches[0].pageX, b = e.targetTouches[0].pageY, g.style.top = parseFloat(b - I - O) + N, v.style.left = parseFloat(y - A - O) + N, M.style.top = parseFloat(b - I - parseFloat(M.style.height) / 2 - O) + N, M.style.left = parseFloat(y - A - parseFloat(M.style.height) / 2 - O) + N, _.onUserMove) { var i = parseFloat(M.style.left) + parseFloat(M.style.width) / 2, n = parseFloat(M.style.top) + parseFloat(M.style.height) / 2, o = i / (parseFloat(M.style.width) * w), s = n / (parseFloat(M.style.width) * w); _.onUserMove(o, s) } return t.stopPropagation(), !1 } function c(t) { return t.stopPropagation(), C = !0, y = t.pageX, b = t.pageY, n(M).mousemove(u), !1 } function u(t) { if (t.stopPropagation(), C) { var e = t.pageX, i = t.pageY, n = e - y, o = i - b; if (y = e, b = i, 0 == n && 0 == o) return !1; if (M.style.top = parseFloat(M.style.top) + o + N, M.style.left = parseFloat(M.style.left) + n + N, g.style.top = parseFloat(g.style.top) + o + N, v.style.left = parseFloat(v.style.left) + n + N, _.onUserMove) { var s = parseFloat(M.style.left) + parseFloat(M.style.width) / 2, a = parseFloat(M.style.top) + parseFloat(M.style.height) / 2, r = s / (parseFloat(M.style.width) * w), l = a / (parseFloat(M.style.width) * w); _.onUserMove(r, l) } } } function d() { return C = !1, n(M).mousemove(null), !1 } function p() { return C = !1, !1 } function f(t) { if (y = t.pageX, b = t.pageY, g.style.top = parseFloat(b - I - O) + N, v.style.left = parseFloat(y - A - O) + N, M.style.top = parseFloat(b - I - parseFloat(M.style.height) / 2 - O) + N, M.style.left = parseFloat(y - A - parseFloat(M.style.width) / 2 - O) + N, _.onUserMove) { var e = parseFloat(M.style.left) + parseFloat(M.style.width) / 2, i = parseFloat(M.style.top) + parseFloat(M.style.height) / 2, n = e / (parseFloat(M.style.width) * w), o = i / (parseFloat(M.style.width) * w); _.onUserMove(n, o) } return t.stopPropagation(), !1 } function m() { n(S).css({ position: "relative", "z-index": "0", overflow: "hidden", border: "1px solid #319DCE" }), n(T).css({ "z-index": "0", position: "absolute" }), n(k).css({ "z-index": "0" }), n(g).css({ height: "1px", "line-height": "1px", position: "absolute", left: "0px", "background-color": "#FF0000", "z-index": "0" }), n(v).css({ width: "1px", "line-height": "1px", position: "absolute", top: "0px", "background-color": "#FF0000", "z-index": "0" }), n(M).css({ border: "1px solid #FF0000", "background-color": "#FFFFFF", position: "absolute", width: "50px", height: "50px", cursor: "pointer", "z-index": "0", top: "0px", left: "0px", filter: "alpha(opacity=50)", opacity: "0.5" }) } var g, v, y, b, w, x, _ = this, C = !1, k = null, T = null, P = null, S = null, M = null, D = 25, E = 25, A = 0, I = 0, N = "px", O = 1; !function () { s(), m(), _.elmt = S }(), this.imgLoaded = !1, this.onUserMove, this.isOnDragging = function () { return C }, this.setVisibility = function (t) { t ? n(S).show() : n(S).hide() }, this.refresh = function () { var t = T.getContext("2d"); t.clearRect(0, 0, i, o), t.drawImage(P, 0, 0, i, o) }, this.getCanvas = function () { return T }, this.UpdateViewRect = function (t, e, n, o) { if (w = t, x = o, !C) { var s = i / w, a = s / o, r = i * e, l = i * n; M.style.width = s + N, M.style.height = a + N, M.style.top = l + N, M.style.left = r + N, g.style.top = a / 2 + l + N, v.style.left = s / 2 + r + N } }, this.UpdateThumbnailOrigin = function (t, e) { A = t, I = e } }, ot = function () { this.error, this.resultCode = -1, this.webSiteUrl, this.slide }, st = function () { this.id = 0, this.guid = "", this.barcode = "", this.name = "unknown", this.scanObjective = 40, this.calibration = -1, this.width = 0, this.height = 0, this.tileSize = 256, this.annotations = [], this.hasAnnotations = !1, this.imageAdjustment, this.tierCount = 1, this.tierSpacing = 0, this.fileUrl = "", this.iconUrl = "", this.description = "" }, at = function () { this.error, this.resultCode = -1, this.webSiteUrl, this.annotations = [] }, rt = function () { this.error, this.success = !1 }, lt = function () { this.imageId, this.guid, this.name, this.description, this.scale, this.width, this.type, this.region, this.fontUnderLine, this.fontSize, this.fontFamily, this.fontItalic, this.fontBold, this.visible, this.color, this.measurement, this.radius, this.arcLength, this.angle, this.points = [], this.usedType = 2 }, ht = function () { this.sliceId = null, this.id = null, this.name = null, this.anno = null, this.text = null }, ct = z.Provider; !function () { ct = z.Provider = function () { function t(t, i, n) { var o = null; "success" == i && t ? (o = e(t), o.webSiteUrl = l, f = o.slide.iconUrl) : (o = new ot, o.error = i), "function" == typeof c && c(o) } function e(t) { var e = t, i = (e.result, new ot); e = e[0]; var o = new st; return o.id = e.SliceID, o.guid = e.CatalogueID, o.name = e.SliceName, o.scanObjective = e.PicZoom, o.calibration = e.Scale, o.width = e.PicWidth, o.height = e.PicHeight, o.fileURL = e.FileURL, o.tileSize = 256, o.iconUrl = e.IconUrl, o.tierCount = 256, o.tierSpacing = 0, o.description = e.Description, n("#info").length > 0 && n("#info").append(e.Description), i.slide = o, i } function i(t, e) { var i = new rt; "success" == e ? i.success = !0 : i.error = e, "function" == typeof d && d(i) } function o(t, e) { for (var i = [], n = 0; n < e.length; n++) { for (var o = e[n], s = { slideId: t, name: o.name, description: o.description, scale: o.scale, Width: o.width, Type: o.type, Region: { RegionX: parseFloat(o.region.x), RegionY: parseFloat(o.region.y), RegionWidth: parseFloat(o.region.width), RegionHeight: parseFloat(o.region.height) }, FontUnderLine: o.fontUnderLine, FontSize: o.fontSize, FontFamily: o.fontFamily, FontItalic: o.fontItalic, FontBold: o.fontBold, Visible: o.visible, Color: o.color, Measurement: o.measurement, Radius: o.radius, ArcLength: o.arcLength, Angle: o.angle, Points: [] }, a = 0; a < o.points.length; a++)s.Points.push({ PointX: parseFloat(o.points[a].x), PointY: parseFloat(o.points[a].y) }); i.push(s) } return i } function s(t, e, i) { var n = null; "success" == e ? (n = a(t), n.webSiteUrl = l) : (n = new at, n.error = e), "function" == typeof u && u(n) } function a(t) { var e = t, i = new at, n = []; if (e != []) { i.annotations = n; for (var o = 0; o < e.length; o++) { var s = e[o], a = new lt; a.imageId = s.SlideId, a.guid = s.ID, a.name = s.name, a.description = s.description, a.scale = s.scale, a.width = s.width, a.type = s.type, a.fontUnderLine = s.fontUnderLine, a.fontSize = s.fontSize, a.fontFamily = s.fontFamily, a.fontItalic = s.fontItalic, a.fontBold = s.fontBold, a.visible = s.visible, a.color = s.color, a.measurement = s.measurement, a.region = s.region, a.points = s.points, n.push(a) } } return i } var r, l, h, c, u, d, p, f; this.openSlide = function (e, i) { l = h = "/Api/Slice/GetSliceFromId?id=" + e, r = e, c = "function" == typeof i ? i : null; var o = { slideId: r }; n.ajax({ type: "GET", dataType: "json", async: !0, cache: !1, url: h, data: o, success: t, error: function (t, e) { console.log(t) } }) }, this.getAnnotation = function (t, e, i) { u = "function" == typeof i ? i : null, l = h = "/Api/Slice/GetAnnoFromId?id=" + t, n.ajax({ url: h, cache: !1, type: "GET", dataType: "json", success: s }) }, this.updateAnnotations = function (t, e, s, a) { d = "function" == typeof a ? a : null, l = h = "/Api/Slice/SaveAnnoToId"; o(t, s); n.ajax({ url: h, type: "POST", cache: !1, dataType: "json", data: { Data: s, slideId: t }, success: i }) }, this.sendAnnoArray = function (t, e) { n.ajax({ url: "/Api/Slice/SaveAnnoToArray", type: "POST", cache: !1, dataType: "json", data: t, success: function () { "function" == typeof e && e("success") }, error: function () { "function" == typeof e && e("error") } }) }, this.getImageAjustment = function (t, e) { }, this.getUserPermisson = function (t) { p = "function" == typeof t ? t : null, l = h = "/Api/Auth/GetUserInRole", n.ajax({ url: h, cache: !1, type: "GET", dataType: "json", success: function (t, e) { var i = null; "success" == e && (i = t), "function" == typeof p && p(i) } }) }, this.getThumbnailUrl = function () { return f } } }(); var ut = z.TileSource; !function () { ut = z.TileSource = function (t, i, n, o, s) { Seadragon.TileSource.apply(this, [i / 2, n / 2, o, s]), this.getTileUrl = function (i, n, o) { var s = e.location.host, a = ["http://", s, t, "/", "0", "/", i, "/", n, "-", o, ".", "jpg"].join(""); return a } } }(); var dt = z.ImgAdj; !function () { dt = z.ImgAdj = function () { this.gamma = 1, this.contrastMin = 0, this.contrastMax = 255, this.red = 1, this.green = 1, this.blue = 1, this.saturation = 0, this.sharpness = 0 }, dt.prototype.isChanged = function () { var t = !1; return this.isDefaultColorChannel() && this.isDefaultContrast() && this.isDefaultGamma() && this.isDefaultSaturation() && this.isDefaultSharpness() || (t = !0), t }, dt.prototype.isDefaultGamma = function () { return 1 == this.gamma }, dt.prototype.isDefaultContrast = function () { return 0 == this.contrastMin && 255 == this.contrastMax }, dt.prototype.isDefaultColorChannel = function () { return 1 == this.red && 1 == this.green && 1 == this.blue }, dt.prototype.isDefaultSaturation = function () { return 0 == this.saturation }, dt.prototype.isDefaultSharpness = function () { return 0 == this.sharpness }, dt.prototype.clone = function () { var t = new dt; return t.gamma = this.gamma, t.contrastMin = this.contrastMin, t.contrastMax = this.contrastMax, t.red = this.red, t.green = this.green, t.blue = this.blue, t.saturation = this.saturation, t.sharpness = this.sharpness, t }, dt.prototype.reset = function () { this.gamma = 1, this.contrastMin = 0, this.contrastMax = 255, this.red = 1, this.green = 1, this.blue = 1, this.saturation = 0, this.sharpness = 0 }, dt.prototype.isEquals = function (t) { var e = !1; return this.gamma == t.gamma && this.contrastMin == t.contrastMin && this.contrastMax == t.contrastMax && this.red == t.red && this.green == t.green && this.blue == t.blue && this.saturation == t.saturation && this.sharpness == t.sharpness && (e = !0), e } }(); var pt; !function () { pt || (pt = function () { }, pt.prototype.filter = function () { }, pt.prototype.reset = function () { }) }(); var ft; !function () { if (!ft) { ft = function () { pt.apply(this), this.gamma = 1, this.shift = 0 }; var t = ft.prototype; t.reset = function () { this.gamma = 1, this.shift = 0 }, t.setCorrectionValue = function (t, e) { this.gamma = t, this.shift = e }, t.filter = function (t, e, n) { var o = new Array(256), s = new Array(256); if (1 == this.gamma) for (var a = 0; 256 > a; a++)o[a] = a; else for (var a = 0; 256 > a; a++) { var r = a / 256, l = 256 * i.pow(r, this.gamma) + 1e-4; l > 255 ? l = 255 : (0 > l && (l = 0), o[a] = i.floor(l)) } var h = 255 - this.shift; if (this.gamma < 1) { for (var a = 0; a <= this.shift; a++)s[a] = 0; for (var a = this.shift + 1; 256 > a; a++)s[a] = i.floor((a - this.shift) / (1 * h) * 255) } else { for (var a = 255; a >= h; a--)s[a] = 255; for (var a = h - 1; a >= 0; a--)s[a] = i.floor(255 * a / h) } for (var a = 0; 256 > a; a++)t[a] = s[o[t[a]]], e[a] = s[o[e[a]]], n[a] = s[o[n[a]]] } } }(); var mt; !function () { if (!mt) { mt = function () { pt.apply(this), this.minGray = 0, this.maxGray = 255 }; var t = mt.prototype; t.reset = function () { this.minGray = 0, this.maxGray = 255 }, t.setGray = function (t, e) { 0 > t ? t = 0 : t > 255 && (t = 255), 0 > e ? e = 0 : e > 255 && (e = 255), this.minGray = t, this.maxGray = e }, t.filter = function (t, e, n) { var o = this.minGray, s = this.maxGray, a = 0, r = new Array(256); s > o && (a = 255 / (s - o)); for (var l = 0; o > l; l++)r[l] = 0; for (var l = s; 256 > l; l++)r[l] = 255; for (var l = o; s > l; l++)r[l] = i.floor((l - o) * a); for (var l = 0; 256 > l; l++)t[l] = r[t[l]], e[l] = r[e[l]], n[l] = r[n[l]] } } }(); var gt; !function () { if (!gt) { gt = function () { pt.apply(this), this.contrast = new Array(3), this.brightness = new Array(3), this.rt = new Array(256), this.gt = new Array(256), this.bt = new Array(256) }; var t = gt.prototype; t.reset = function () { this.contrast[0] = 1, this.contrast[1] = 1, this.contrast[2] = 1, this.brightness[0] = 0, this.brightness[1] = 0, this.brightness[2] = 0 }, t.setContrast = function (t, e, i) { this.contrast[0] = t, this.contrast[1] = e, this.contrast[2] = i }, t.setBrightness = function (t, e, i) { this.brightness[0] = t, this.brightness[1] = e, this.brightness[2] = i }, t.filter = function (t, e, n) { for (var o = i.floor(256 * this.contrast[0]), s = i.floor(256 * this.contrast[1]), a = i.floor(256 * this.contrast[2]), r = 0; 256 > r; r++) { var l = (r * a >> 8) + this.brightness[2]; 0 > l ? this.bt[r] = 0 : l > 255 ? this.bt[r] = 255 : this.bt[r] = l, l = (r * s >> 8) + this.brightness[1], 0 > l ? this.gt[r] = 0 : l > 255 ? this.gt[r] = 255 : this.gt[r] = l, l = (r * o >> 8) + this.brightness[0], 0 > l ? this.rt[r] = 0 : l > 255 ? this.rt[r] = 255 : this.rt[r] = l } for (var r = 0; 256 > r; r++)t[r] = this.rt[t[r]], e[r] = this.gt[e[r]], n[r] = this.bt[n[r]] } } }(); var vt; !function () { if (!vt) { vt = function () { }; var t = vt.prototype; t.filter = function () { } } }(); var yt; !function () { if (!yt) { yt = function () { vt.apply(this), this.needFilter = !1, this.lutRed = new Array(256), this.lutGreen = new Array(256), this.lutBlue = new Array(256), this.gammaFilter = new ft, this.mappingFilter = new mt, this.adjustFilter = new gt, this.filters = [], this.filters.push(this.gammaFilter), this.filters.push(this.mappingFilter), this.filters.push(this.adjustFilter) }; var t = yt.prototype; t.reset = function () { for (var t = 0; t < this.filters.length; t++)this.filters[t].reset() }, t.setCorrectionValue = function (t, e) { this.gammaFilter.setCorrectionValue(t, e) }, t.setContrast = function (t, e, i) { this.adjustFilter.setContrast(t, e, i) }, t.setBrightness = function (t, e, i) { this.adjustFilter.setBrightness(t, e, i) }, t.setGray = function (t, e) { this.mappingFilter.setGray(t, e) }, t.refreshLut = function () { for (var t = 0; 256 > t; t++)this.lutRed[t] = t, this.lutGreen[t] = t, this.lutBlue[t] = t; for (var t = 0; t < this.filters.length; t++)this.filters[t].filter(this.lutRed, this.lutGreen, this.lutBlue); this.needFilter = !1; for (var t = 0; 256 > t; t++)if (this.lutRed[t] != t || this.lutGreen[t] != t || this.lutBlue[t] != t) { this.needFilter = !0; break } }, t.filter = function (t) { if (this.needFilter) for (var e = t.data, i = 0, n = 0; n < e.length; n += 4)i = n, e[i] = this.lutRed[e[i]], i++ , e[i] = this.lutGreen[e[i]], i++ , e[i] = this.lutBlue[e[i]] } } }(); var bt; !function () { function t(t, e, i, n, o) { for (var s = 0, s = 0; o > s; s++)t[e + s] = i[n + s] } if (!bt) { bt = function () { vt.apply(this), this.level = 0 }; var e = bt.prototype; e.setSharpness = function (e) { 0 > e ? this.level = 0 : t > 10 && (this.level = 10), this.level = e }, e.filter = function (e) { var i, n, o, s, a, r, l, h, c, u, d, p, f, m = this.level, g = e.width, v = e.height, y = 4, b = 5, w = g * y, x = e.data; if (4 > g || g > 8196 || 4 > v || v > 8196) return 1; for (m > 0 ? (h = -m, c = 4 * -h + 8, u = 3) : (h = -m, h > 8 && (h = 8), c = 32 - 4 * h, u = 5), f = new Array(w * b), t(f, 0, x, 0, w * b), i = 2; v - 2 > i; i++) { for (o = (i - 1) * w + 7, s = i * w + 7, a = (i + 1) * w + 7, d = i % b * w, p = (i - 2) % b * w, n = 2; g - 2 > n; n++)o++ , s++ , a++ , r = n * y + d, l = x[s] * c + (x[o] + x[a] + x[s - 8] + x[s + 8]) * h >> u, f[r] = 0 > l ? 0 : l > 255 ? 255 : l, o++ , s++ , a++ , r++ , l = x[s] * c + (x[o] + x[a] + x[s - 8] + x[s + 8]) * h >> u, f[r] = 0 > l ? 0 : l > 255 ? 255 : l, o++ , s++ , a++ , r++ , l = x[s] * c + (x[o] + x[a] + x[s - 8] + x[s + 8]) * h >> u, f[r] = 0 > l ? 0 : l > 255 ? 255 : l, o++ , s++ , a++ , r++ , f[r] = x[s]; t(x, (i - 2) * g * y + 8, f, p + 8, (g - 4) * y) } f = null } } }(); var wt; !function () {
            if (!wt) {
                wt = function () { vt.apply(this), this.v = 0 }; var t = wt.prototype; t.setCorrectionValue = function (t) { -10 > t && (t = -10), t > 10 && (t = 10), this.v = t }, t.filter = function (t) {
                    var e, n, o, s, a, r, l, h, c, u, d, p, f, m, g, v, y, b, w, x = t.width, _ = t.height, C = t.data, k = !1, T = 1 * this.v; -10 > T && (T = -10), T > 10 && (T = 10); var P, S, M, D, n, e, E, A = new Array(9), I = new Array(2560), N = 0; if (k) { for (P = 0, S = 0, M = 0, D = 0, n = 0; _ > n; n++)for (e = 0; x > e; e++)E = 3 * (n * x + e), P += C[E], S += C[E + 1], M += C[E + 2]; P /= x * _, S /= x * _, M /= x * _, 1 > P && (P = 1), 1 > S && (S = 1), 1 > M && (M = 1), D = P > S ? P : S, M > D && (D = M), P = D / P, S = D / S, M = D / M } else P = 1, S = 1, M = 1; for (0 > T && (T = (T + 10) / 10), 1 > T ? (A[1] = i.floor(601.088 * (1 - T)), A[2] = i.floor(116.736 * (1 - T)), A[3] = i.floor(306.176 * (1 - T)), A[5] = i.floor(116.736 * (1 - T)), A[6] = i.floor(306.176 * (1 - T)), A[7] = i.floor(601.088 * (1 - T)), A[0] = i.floor(1024 * (.299 + .701 * T)), A[4] = i.floor(1024 * (.587 + .413 * T)), A[8] = i.floor(1024 * (.114 + .866 * T))) : (A[1] = i.floor(1024 * (-T / 10) * S), A[2] = i.floor(1024 * (-T / 50) * M), A[3] = i.floor(1024 * (-T / 50) * P), A[5] = i.floor(1024 * (-T / 20) * M), A[6] = i.floor(1024 * (-T / 50) * P), A[7] = i.floor(1024 * (-T / 50) * S), A[0] = i.floor((1024 - A[1] - A[2]) * P), A[4] = i.floor((1024 - A[3] - A[5]) * S), A[8] = i.floor((1024 - A[6] - A[7]) * M)), e = 0; 9 > e; e++)for (n = 0; 256 > n; n++)I[256 * e + n] = A[e] * n; for (c = 0, u = 256, d = 512, p = 768, f = 1024, m = 1280, g = 1536, v = 1792, y = 2048, b = 0; _ > b; b++)for (N = b * x * 4, w = 0; x > w; w++)r = C[N], l = C[N + 1], h = C[N + 2], o = I[c + r] + I[u + l] + I[d + h], s = I[p + r] + I[f + l] + I[m + h],
                        a = I[g + r] + I[v + l] + I[y + h], 0 > o && (o = 0), 0 > s && (s = 0), 0 > a && (a = 0), o >>= 10, s >>= 10, a >>= 10, o > 255 && (o = 255), s > 255 && (s = 255), a > 255 && (a = 255), C[N] = o, C[N + 1] = s, C[N + 2] = a, N += 4
                }
            }
        }(); var xt; !function () { function t() { if (W.imageAdjustment && L.enableImageAdjustment) { var t = n.getCurrentImage(), i = n.drawer.useCanvas(); t && n.imageAdjustment && i && n.imageAdjustment.isChanged() && e(t.imageAdjustment) } } function e(t) { if (t && t.isChanged()) { var e = n.drawer.getCanvas(); i(e, t); var o = n.getNavMap(), s = o.getCanvas(); s && (o.refresh(), i(s, t)) } } function i(t, e) { var i = t.getContext("2d"), n = i.getImageData(0, 0, t.width, t.height); o.reset(), e.isDefaultGamma() || o.setCorrectionValue(e.gamma, 0), e.isDefaultColorChannel() || o.setContrast(e.red, e.green, e.blue), e.isDefaultContrast() || o.setGray(e.contrastMin, e.contrastMax), o.refreshLut(), o.filter(n), e.isDefaultSaturation() || (s.setCorrectionValue(e.saturation), s.filter(n)), e.isDefaultSharpness() || (a.setSharpness(e.sharpness), a.filter(n)), i.putImageData(n, 0, 0) } var n, o, s, a; if (!xt) { xt = function (t) { n = t }; var r = xt.prototype; r.start = function () { o || (o = new yt), s || (s = new wt), a || (a = new bt), n.addEventListener("animation", t) }, r.stop = function () { n.removeEventListener("animation") }, r.adjust = e } }(), function () { var e = t.CanvasRenderingContext2D && CanvasRenderingContext2D.prototype; e && e.lineTo && (e.dashedLine = function (t, e, n, o, s) { var a = function (t, e) { return e >= t }, r = function (t, e) { return t >= e }, l = function (t, e) { return i.min(t, e) }, h = function (t, e) { return i.max(t, e) }, c = { thereYet: r, cap: l }, u = { thereYet: r, cap: l }; e - o > 0 && (u.thereYet = a, u.cap = h), t - n > 0 && (c.thereYet = a, c.cap = h), this.moveTo(t, e); for (var d = t, p = e, f = 0, m = !0; !c.thereYet(d, n) || !u.thereYet(p, o);) { var g = i.atan2(o - e, n - t), v = s[f]; d = c.cap(n, d + i.cos(g) * v), p = u.cap(o, p + i.sin(g) * v), m ? this.lineTo(d, p) : this.moveTo(d, p), f = (f + 1) % s.length, m = !m } }) }(); var _t = "<br/>", Ct = null, kt = null, Tt = null; String.prototype.replaceAll = function (t, e) { return this.replace(new RegExp(t, "gm"), e) }, ActiveMove = { None: "None", StartMove: "StartMove", EndMove: "EndMove", LeftTopMove: "LeftTopMove", RightTopMove: "RightTopMove", LeftBottomMove: "LeftBottomMove", RightBottomMove: "RightBottomMove", TopMiddleMove: "TopMiddleMove", BottomMiddleMove: "BottomMiddleMove", LeftMiddleMove: "LeftMiddleMove", RightMiddleMove: "RightMiddleMove", PointMove: "PointMove", ShapeMove: "ShapeMove" }, Measurement = {}, AnnotationType = { NONE: "NONE", Line: "Line", Arrow: "Arrow", Brace: "Brace", Rectangle: "Rectangle", Ellipse: "Ellipse", Remark: "Remark", Position: "Position", CurveRounded: "RoundedCurve", Curve: "FreeRoundedCurve", Angle: "Angle", Circle: "Circle", CircleThreePoints: "CircleThreePoints", Arc: "Arc", Polygon: "Polygon", PolygonLine: "PolygonLine" }; var Pt; !function () { Pt = function (t, e) { this.x = "number" == typeof t ? t : 1 * t, this.y = "number" == typeof e ? e : 1 * e } }(); var St; !function () { St = function (t, e, i, n) { this.x = "number" == typeof t ? t : 1 * t, this.y = "number" == typeof e ? e : 1 * e, this.width = "number" == typeof i ? i : 1 * i, this.height = "number" == typeof n ? n : 1 * n } }(); var Mt; !function () { Mt || (Mt = { defaultColor: "#0000ff", lineWidth: 2, thumbRadius: 5, thumbMoveRadius: 8, thumbHitRadius: 20, thumbHitMoveRadius: 40, name: "", description: "" }) }(); var Dt; !function () { Dt = function (t, e, i) { this.shapeViewer = t, this.startPoint = e, this.endPoint = i, this.rsPoint, this.rePoint, this.movePoint, this.calibration = 0, this.width = Mt.lineWidth, this.color = Mt.defaultColor, this.imageId, this.guid = null, this.name = Mt.name, this.description = Mt.description, this.scale = 1, this.type, this.region, this.fontUnderLine = !1, this.fontSize = 11, this.fontFamily = "Microsoft Sans Serif", this.fontItalic = !1, this.fontBold = !1, this.visible = !0, this.measurement = !1, this.radius = 0, this.arcLength = 0, this.angle = 0, this.points = [], this.isEndDrawing = !1, this.txtElmt, this.inpElmt, this.container = t && t.getContainer(), this.isSelected = !1, this.cavScale, this.cavOffset, this.moveOffset, this.activeMove = ActiveMove.None, this.isMeasurementChanged = !0, this.isDrawStart = !1, this.cavRect }; var t = Dt.prototype; t.drawThumb = function (t) { var e = this; if (null != t) { var n = e.getContext(); n.beginPath(), n.lineWidth = 2, n.arc(t.x, t.y, Mt.thumbRadius, 0, 2 * i.PI, !1), n.fillStyle = "rgba(255, 255, 255, 0.6)", n.fill(), n.strokeStyle = "#666465", n.stroke() } }, t.drawMoveThumb = function (t) { var e = this; if (null != t) { var n = e.getContext(); n.beginPath(), n.lineWidth = 2, n.arc(t.x, t.y, Mt.thumbMoveRadius, 0, 2 * i.PI, !1), n.fillStyle = "rgba(255, 255, 255, 0.6)", n.fill(), n.strokeStyle = "#666465", n.stroke() } }, t.getContext = function () { var t = this; return t.isSelected ? t.shapeViewer.DrawCanvas.getContext("2d") : t.shapeViewer.Canvas.getContext("2d") }, t.drawStart = function (t) { var e = this; e.startPoint = t, e.endPoint = new Pt(t.x, t.y), e.drawThumb(e.toCanvasPoint(t)), e.isDrawStart = !0 }, t.drawMove = function (t) { var e = this; e.endPoint = t, e.isDrawStart = !1 }, t.drawClick = function (t) { var e = this; null != t && (e.endPoint = t), (e.startPoint.x != e.endPoint.x || e.startPoint.y != e.endPoint.y) && (e.isEndDrawing = !0) }, t.drawEnd = function () { }, t.refresh = function (t, e) { var i = this; i.cavScale = t, i.cavOffset = e }, t.createElmt = function () { var t = this; null == t.txtElmt && (t.txtElmt = e.createElement("div"), t.container.appendChild(t.txtElmt), x(t.txtElmt)) }, t.showMeasurement = function () { var t = this; if (!t.measurement || !L.enableAnnotation) return void n(t.txtElmt).hide(); if (t.createElmt(), n(t.txtElmt).show(), M(t.txtElmt, t.movePoint.x + Mt.thumbMoveRadius, t.movePoint.y + Mt.thumbMoveRadius), t.isMeasurementChanged) { var e = t.calcMeasurementInfo(); if (k(t.description)) { var i = "<table style='border-spacing:0px;'><tr>", o = "<td>" + Measurement.Description + "</td>" + C("<td>" + this.description + "</td></tr></table>"); e += S(i, o) } else e += P(Measurement.Description, t.description); n(t.txtElmt).html(e), t.isMeasurementChanged = !1 } }, t.calcMeasurementInfo = function () { }, t.active = function () { }, t.shapeMovePosition = function () { }, t.isHitMe = function () { }, t.isHitMyArea = function (t) { var e = this; if (e.type == AnnotationType.Remark || e.type == AnnotationType.Position) return !1; var i, n, o, s; e.rsPoint.x < e.rePoint.x ? (i = e.rsPoint.x, o = e.rePoint.x) : (i = e.rePoint.x, o = e.rsPoint.x), e.rsPoint.y < e.rePoint.y ? (n = e.rsPoint.y, s = e.rePoint.y) : (n = e.rePoint.y, s = e.rsPoint.y); var a = e.width / 2; return i - a <= t.x && t.x <= o + a && n - a < t.y && t.y <= s + a ? e.isSelected = !0 : e.isSelected = !1, e.cavRect = new St(i, n, o - i, s - n), e.isSelected }, t.resetPoint = function (t, e, i) { var n = new Pt(t.x, t.y); return e && (n.x *= e, n.y *= e), i && (n.x += i.x, n.y += i.y), n }, t.resetDefaultColor = function () { var t = this; Mt.defaultColor = t.color }, t.clickInThumb = function (t, e) { var i = this; return N(Mt.thumbHitRadius, t, e, i.width) }, t.clickInMoveThumb = function (t, e) { var i = this; return N(Mt.thumbHitMoveRadius, t, e, i.width) }, t.addClickResult = function (t, e, i, n, o) { var s = this, a = s.clickInThumb(e, i); a.isIn && (a.activeMove = n, a.pIndex = o, t.push(a)) }, t.setNearestMove = function (t) { var e = this; if (t.length <= 0) e.activeMove = ActiveMove.None; else if (1 == t.length) e.activeMove = t[0].activeMove, e.pIndex = t[0].pIndex; else { for (var i = 0, n = 0; n < t.length; n++)0 == n ? len = t[n].length : t[n].length < len && (len = t[n].length, i = n); e.activeMove = t[i].activeMove, e.pIndex = t[i].pIndex } }, t.resetActiveMovePoint = function (t, e, i) { var n = this; if (null == i) { if (null == n.moveOffset) return; t.x += n.moveOffset.x, t.y += n.moveOffset.y } else t.x += i.x, t.y += i.y; e.x = (t.x - n.cavOffset.x) / n.cavScale, e.y = (t.y - n.cavOffset.y) / n.cavScale }, t.resetStartPoint = function (t) { var e = this; e.rsPoint = t, e.startPoint = e.toImagePoint(t) }, t.resetEndPoint = function (t) { var e = this; e.rePoint = t, e.endPoint = e.toImagePoint(t) }, t.toImagePoint = function (t) { var e = this; return new Pt((t.x - e.cavOffset.x) / e.cavScale, (t.y - e.cavOffset.y) / e.cavScale) }, t.toCanvasPoint = function (t) { var e = this; return new Pt(t.x * e.cavScale + e.cavOffset.x, t.y * e.cavScale + e.cavOffset.y) } }(); var Et; !function () { Et = function (t, e, i) { Dt.apply(this, [t, e, i]) }, Et.prototype = new Dt; var t = Et.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.rsPoint = t.resetPoint(t.startPoint, t.cavScale, t.cavOffset), t.rePoint = t.resetPoint(t.endPoint, t.cavScale, t.cavOffset), t.shapeMovePosition(), t.movePoint = new Pt((t.rsPoint.x + t.rePoint.x) / 2, (t.rsPoint.y + t.rePoint.y) / 2), e.moveTo(t.rsPoint.x, t.rsPoint.y), e.lineTo(t.rePoint.x, t.rePoint.y), e.lineWidth = t.width, e.strokeStyle = t.color, e.stroke(), t.active(), t.showMeasurement() }, t.shapeMovePosition = function () { var t = this; if (t.activeMove != ActiveMove.None) { switch (t.activeMove) { case ActiveMove.StartMove: t.resetActiveMovePoint(t.rsPoint, t.startPoint); break; case ActiveMove.EndMove: t.resetActiveMovePoint(t.rePoint, t.endPoint); break; case ActiveMove.ShapeMove: t.resetActiveMovePoint(t.rsPoint, t.startPoint), t.resetActiveMovePoint(t.rePoint, t.endPoint) }t.activeMove != ActiveMove.ShapeMove && (t.isMeasurementChanged = !0) } }, t.calcMeasurementInfo = function () { var t = this, e = l(t.startPoint, t.endPoint); return P(Measurement.Length, _(e * t.calibration) + Measurement.Unit) }, t.active = function () { var t = this; !this.isEndDrawing && this.isDrawStart || !this.isSelected || (t.drawThumb(t.rsPoint), t.drawThumb(t.rePoint), t.drawMoveThumb(t.movePoint)) }, t.isHitMe = function (t) { var e = this; if (e.isSelected) { var i = []; e.addClickResult(i, t, e.rePoint, ActiveMove.EndMove), e.addClickResult(i, t, e.rsPoint, ActiveMove.StartMove), e.addClickResult(i, t, e.movePoint, ActiveMove.ShapeMove), e.setNearestMove(i) } return e.activeMove != ActiveMove.None ? !0 : !1 }, t.isHitMyArea = function (t) { var e = this; if (e.activeMove == ActiveMove.None) { var i = E(e.rsPoint, e.rePoint, t, e.width); return e.isSelected = i, e.cavRect = new St(e.rsPoint.x, e.rsPoint.y, 0, 0), i } return !0 } }(); var At; !function () { At = function (t, e, i) { Et.apply(this, [t, e, i]) }, At.prototype = new Et; var t = At.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.rsPoint = t.resetPoint(t.startPoint, t.cavScale, t.cavOffset), t.rePoint = t.resetPoint(t.endPoint, t.cavScale, t.cavOffset), t.shapeMovePosition(), t.movePoint = new Pt((t.rsPoint.x + t.rePoint.x) / 2, (t.rsPoint.y + t.rePoint.y) / 2), e.moveTo(t.rsPoint.x, t.rsPoint.y), e.lineTo(t.rePoint.x, t.rePoint.y); var n, o, s = ((t.rsPoint.y - t.rePoint.y) / (t.rsPoint.x - t.rePoint.x), new Pt(2 * t.width, 3 * t.width)); if (t.rsPoint.x == t.rePoint.x) t.rsPoint.y < t.rePoint.y ? (n = new Pt(t.rsPoint.x - s.x, t.rsPoint.y + s.y), o = new Pt(t.rsPoint.x + s.x, t.rsPoint.y + s.y)) : (n = new Pt(t.rsPoint.x - s.x, t.rsPoint.y - s.y), o = new Pt(t.rsPoint.x + s.x, t.rsPoint.y - s.y)); else if (t.rsPoint.y == t.rePoint.y) t.rsPoint.x < t.rePoint.x ? (n = new Pt(t.rsPoint.x + s.y, t.rsPoint.y - s.x), o = new Pt(t.rsPoint.x + s.y, t.rsPoint.y + s.y)) : (n = new Pt(t.rsPoint.x - s.y, t.rsPoint.y - s.x), o = new Pt(t.rsPoint.x - s.y, t.rsPoint.y + s.x)); else { var a = i.atan2(t.rsPoint.y - t.rePoint.y, t.rsPoint.x - t.rePoint.x), r = i.atan2(s.x, s.y), l = i.sqrt(s.x * s.x + s.y * s.y); n = new Pt(t.rsPoint.x - l * i.cos(a + r), t.rsPoint.y - l * i.sin(a + r)), o = new Pt(t.rsPoint.x - l * i.cos(a - r), t.rsPoint.y - l * i.sin(a - r)) } e.moveTo(n.x, n.y), e.lineTo(t.rsPoint.x, t.rsPoint.y), e.lineTo(o.x, o.y), e.lineWidth = t.width, e.strokeStyle = t.color, e.stroke(), t.active(), t.showMeasurement() } }(); var It; !function () { It = function (t, e, i) { Et.apply(this, [t, e, i]) }, It.prototype = new Et; var t = It.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.rsPoint = t.resetPoint(t.startPoint, t.cavScale, t.cavOffset), t.rePoint = t.resetPoint(t.endPoint, t.cavScale, t.cavOffset), t.shapeMovePosition(), t.movePoint = new Pt((t.rsPoint.x + t.rePoint.x) / 2, (t.rsPoint.y + t.rePoint.y) / 2); var n, o, s, a = 10; n = i.atan2(t.rsPoint.y - t.rePoint.y, t.rsPoint.x - t.rePoint.x), o = i.cos(n), s = i.sin(n), ptStart = new Pt(t.rsPoint.x + a * o + a * s, t.rsPoint.y + a * s - a * o), ptEnd = new Pt(t.rePoint.x + (-a * o + a * s), t.rePoint.y + (-a * o - a * s)), ptMid = new Pt((t.rsPoint.x + t.rePoint.x) / 2, (t.rsPoint.y + t.rePoint.y) / 2), ptPreMid = new Pt(ptMid.x + a * o, ptMid.y + a * s), ptPostMid = new Pt(ptMid.x - a * o, ptMid.y - a * s), ptCurve = new Pt(ptMid.x - a * s, ptMid.y + a * o), e.moveTo(ptStart.x, ptStart.y), e.lineTo(t.rsPoint.x, t.rsPoint.y), e.lineTo(ptPreMid.x, ptPreMid.y), e.lineTo(ptCurve.x, ptCurve.y), e.lineTo(ptPostMid.x, ptPostMid.y), e.lineTo(t.rePoint.x, t.rePoint.y), e.lineTo(ptEnd.x, ptEnd.y), e.lineWidth = t.width, e.strokeStyle = t.color, e.stroke(), t.active(), t.showMeasurement() } }(); var Nt; !function () { Nt = function (t, e, i) { Dt.apply(this, [t, e, i]), this.leftTopPoint, this.leftBottomPoint, this.rightTopPoint, this.rightBottomPoint, this.topMiddlePoint, this.bottomMiddlePoint, this.leftMiddlePoint, this.rightMiddlePoint }, Nt.prototype = new Dt; var t = Nt.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.rsPoint = t.resetPoint(t.startPoint, t.cavScale, t.cavOffset), t.rePoint = t.resetPoint(t.endPoint, t.cavScale, t.cavOffset), t.shapeMovePosition(); var n = 0, o = 0, s = i.abs(t.rePoint.x - t.rsPoint.x), a = i.abs(t.rePoint.y - t.rsPoint.y); t.rePoint.x > t.rsPoint.x && t.rePoint.y > t.rsPoint.y ? (n = t.rsPoint.x, o = t.rsPoint.y) : t.rePoint.x > t.rsPoint.x && t.rePoint.y < t.rsPoint.y ? (n = t.rsPoint.x, o = t.rePoint.y) : t.rePoint.x < t.rsPoint.x && t.rePoint.y > t.rsPoint.y ? (n = t.rePoint.x, o = t.rsPoint.y) : t.rePoint.x < t.rsPoint.x && t.rePoint.y < t.rsPoint.y && (n = t.rePoint.x, o = t.rePoint.y), t.leftTopPoint = new Pt(t.rsPoint.x, t.rsPoint.y), t.leftBottomPoint = new Pt(t.rsPoint.x, t.rePoint.y), t.rightTopPoint = new Pt(t.rePoint.x, t.rsPoint.y), t.rightBottomPoint = new Pt(t.rePoint.x, t.rePoint.y), t.topMiddlePoint = new Pt(n + s / 2, t.rsPoint.y), t.bottomMiddlePoint = new Pt(n + s / 2, t.rePoint.y), t.leftMiddlePoint = new Pt(t.rsPoint.x, o + a / 2), t.rightMiddlePoint = new Pt(t.rePoint.x, o + a / 2), t.movePoint = new Pt((t.rsPoint.x + t.rePoint.x) / 2, (t.rsPoint.y + t.rePoint.y) / 2), e.strokeStyle = t.color, e.lineWidth = t.width, e.strokeRect(n, o, s, a), e.stroke(), t.active(), t.showMeasurement() }, t.calcMeasurementInfo = function () { var t = i.abs(this.startPoint.x - this.endPoint.x), e = i.abs(this.startPoint.y - this.endPoint.y), n = ""; return n = P(n, Measurement.Width + _(t * this.calibration) + Measurement.Unit), n = P(n, Measurement.Height + _(e * this.calibration) + Measurement.Unit), n = P(n, Measurement.Area + _(t * this.calibration * e * this.calibration) + Measurement.AreaUnit), n = P(n, Measurement.Perimeter + _((2 * e + 2 * t) * this.calibration) + Measurement.Unit) }, t.active = function () { var t = this; !t.isEndDrawing && t.isDrawStart || !t.isSelected || (t.drawThumb(t.leftTopPoint), t.drawThumb(t.leftBottomPoint), t.drawThumb(t.rightTopPoint), t.drawThumb(t.rightBottomPoint), t.drawThumb(t.topMiddlePoint), t.drawThumb(t.bottomMiddlePoint), t.drawThumb(t.leftMiddlePoint), t.drawThumb(t.rightMiddlePoint), t.drawMoveThumb(t.movePoint)) }, t.shapeMovePosition = function () { var t = this; if (null != t.activeMove && t.activeMove != ActiveMove.None && null != t.moveOffset) { var e; switch (t.activeMove) { case ActiveMove.LeftTopMove: t.resetActiveMovePoint(t.rsPoint, t.startPoint); break; case ActiveMove.RightTopMove: e = new Pt(0, t.moveOffset.y), t.resetActiveMovePoint(t.rsPoint, t.startPoint, e), e = new Pt(t.moveOffset.x, 0), t.resetActiveMovePoint(t.rePoint, t.endPoint, e); break; case ActiveMove.LeftBottomMove: e = new Pt(t.moveOffset.x, 0), t.resetActiveMovePoint(t.rsPoint, t.startPoint, e), e = new Pt(0, t.moveOffset.y), t.resetActiveMovePoint(t.rePoint, t.endPoint, e); break; case ActiveMove.RightBottomMove: t.resetActiveMovePoint(t.rePoint, t.endPoint); break; case ActiveMove.TopMiddleMove: e = new Pt(0, t.moveOffset.y), t.resetActiveMovePoint(t.rsPoint, t.startPoint, e); break; case ActiveMove.BottomMiddleMove: e = new Pt(0, t.moveOffset.y), t.resetActiveMovePoint(t.rePoint, t.endPoint, e); break; case ActiveMove.LeftMiddleMove: e = new Pt(this.moveOffset.x, 0), t.resetActiveMovePoint(t.rsPoint, t.startPoint, e); break; case ActiveMove.RightMiddleMove: e = new Pt(t.moveOffset.x, 0), t.resetActiveMovePoint(t.rePoint, t.endPoint, e); break; case ActiveMove.ShapeMove: t.resetActiveMovePoint(t.rsPoint, t.startPoint), t.resetActiveMovePoint(t.rePoint, t.endPoint) }t.activeMove != ActiveMove.ShapeMove && (t.isMeasurementChanged = !0) } }, t.getActiveMove = function (t) { var e = this, i = []; e.addClickResult(i, t, e.leftTopPoint, ActiveMove.LeftTopMove), e.addClickResult(i, t, e.leftBottomPoint, ActiveMove.LeftBottomMove), e.addClickResult(i, t, e.rightTopPoint, ActiveMove.RightTopMove), e.addClickResult(i, t, e.rightBottomPoint, ActiveMove.RightBottomMove), e.addClickResult(i, t, e.topMiddlePoint, ActiveMove.TopMiddleMove), e.addClickResult(i, t, e.bottomMiddlePoint, ActiveMove.BottomMiddleMove), e.addClickResult(i, t, e.leftMiddlePoint, ActiveMove.LeftMiddleMove), e.addClickResult(i, t, e.rightMiddlePoint, ActiveMove.RightMiddleMove), e.addClickResult(i, t, e.movePoint, ActiveMove.ShapeMove), e.setNearestMove(i) }, t.isHitMe = function (t) { var e = this; return e.isSelected && (e.getActiveMove(t), e.activeMove != ActiveMove.None) ? !0 : !1 } }(); var Ot; !function () { function t(t, e, i, n, o) { var s = .5522848, a = n / 2 * s, r = o / 2 * s, l = e + n, h = i + o, c = e + n / 2, u = i + o / 2; t.beginPath(), t.moveTo(e, u), t.bezierCurveTo(e, u - r, c - a, i, c, i), t.bezierCurveTo(c + a, i, l, u - r, l, u), t.bezierCurveTo(l, u + r, c + a, h, c, h), t.bezierCurveTo(c - a, h, e, u + r, e, u), t.stroke() } Ot = function (t, e, i) { Nt.apply(this, [t, e, i]) }, Ot.prototype = new Nt; var e = Ot.prototype; e.draw = function () { var e = this, n = e.getContext(); e.rsPoint = e.resetPoint(e.startPoint, e.cavScale, e.cavOffset), e.rePoint = e.resetPoint(e.endPoint, e.cavScale, e.cavOffset), e.shapeMovePosition(); var o, s = 0, a = i.abs(e.rePoint.x - e.rsPoint.x), r = i.abs(e.rePoint.y - e.rsPoint.y); e.rePoint.x > e.rsPoint.x && e.rePoint.y > e.rsPoint.y ? (s = e.rsPoint.x, o = e.rsPoint.y) : e.rePoint.x > e.rsPoint.x && e.rePoint.y < e.rsPoint.y ? (s = e.rsPoint.x, o = e.rePoint.y) : e.rePoint.x < e.rsPoint.x && e.rePoint.y > e.rsPoint.y ? (s = e.rePoint.x, o = e.rsPoint.y) : e.rePoint.x < e.rsPoint.x && e.rePoint.y < e.rsPoint.y && (s = e.rePoint.x, o = e.rePoint.y), e.leftTopPoint = new Pt(e.rsPoint.x, e.rsPoint.y), e.leftBottomPoint = new Pt(e.rsPoint.x, e.rePoint.y), e.rightTopPoint = new Pt(e.rePoint.x, e.rsPoint.y), e.rightBottomPoint = new Pt(e.rePoint.x, e.rePoint.y), e.topMiddlePoint = new Pt(s + a / 2, e.rsPoint.y), e.bottomMiddlePoint = new Pt(s + a / 2, e.rePoint.y), e.leftMiddlePoint = new Pt(e.rsPoint.x, o + r / 2), e.rightMiddlePoint = new Pt(e.rePoint.x, o + r / 2), e.movePoint = new Pt((e.rsPoint.x + e.rePoint.x) / 2, (e.rsPoint.y + e.rePoint.y) / 2), n.lineWidth = e.width, n.strokeStyle = e.color, t(n, s, o, a, r), e.active(), e.showMeasurement() }, e.calcMeasurementInfo = function () { var t, e, n = this, o = i.abs(n.startPoint.x - n.endPoint.x), s = i.abs(n.startPoint.y - n.endPoint.y), a = o / 2 * n.calibration, r = s / 2 * n.calibration, l = i.abs(a - r) / (a + r); l *= l, t = isNaN(l) ? 0 : i.PI * (a + r) * (135168 - 85760 * l - 5568 * l * l + 3868 * l * l * l) / (135168 - 119552 * l + 22208 * l * l - 345 * l * l * l), e = i.abs(i.PI * o * this.calibration * s * this.calibration / 4); var h = ""; return h = P(h, Measurement.Majorhalfaxis + _(i.max(a, r)) + Measurement.Unit), h = P(h, Measurement.Minorhalfaxis + _(i.min(a, r)) + Measurement.Unit), h = P(h, Measurement.Area + _(e) + Measurement.AreaUnit), h = P(h, Measurement.Perimeter + _(t) + Measurement.Unit) }, e.isHitMe = function (t) { var e = this; return e.isSelected && e.getActiveMove(t), e.activeMove != ActiveMove.None ? !0 : !1 } }(); var Ht; !function () { function t(t, e) { if (t) T(e.inpElmt, e.txtElmt), n(e.txtElmt).hide(), n(e.inpElmt).show(), e.inpElmt.select(), e.isSelected = !0, e.active(); else { n(e.txtElmt).show(); var i = n(e.inpElmt).val(); e.description != i && e.shapeViewer.dirtyCanvas(), n(e.txtElmt).html(C(i)), n(e.inpElmt).hide(), e.description = i } } Ht = function (t, e, i) { Dt.apply(this, [t, e, i]), t && null != t.getContainer() && this.createElmt() }, Ht.prototype = new Dt; var i = Ht.prototype; i.draw = function () { var t = this; t.rsPoint = t.resetPoint(t.startPoint, t.cavScale, t.cavOffset), t.rePoint = t.resetPoint(t.endPoint, t.cavScale, t.cavOffset), t.setCSS(t.rsPoint.x, t.rsPoint.y), t.shapeMovePosition() }, i.active = function () { var t = this; t.isSelected && (t.movePoint = new Pt(t.rsPoint.x, t.rsPoint.y), t.drawMoveThumb(t.rsPoint)) }, i.isHitMe = function (t) { var e = this; if (e.isSelected) { var i = []; if (e.addClickResult(i, t, e.rsPoint, ActiveMove.ShapeMove), e.setNearestMove(i), e.activeMove == ActiveMove.ShapeMove) return !0 } return !1 }, i.isHitMyArea = function (t) { var e = this; return e.isSelected = e.isHitMe(t), e.isSelected }, i.shapeMovePosition = function () { var t = this; null != t.activeMove && t.activeMove != ActiveMove.None && t.activeMove == ActiveMove.ShapeMove && (t.resetActiveMovePoint(t.rsPoint, t.startPoint), t.resetActiveMovePoint(t.rePoint, t.endPoint)) }, i.createElmt = function () { var i, o = this; null == o.txtElmt && (o.txtElmt = e.createElement("label"), o.container.appendChild(o.txtElmt), i = n(o.txtElmt), i.bind("mousedown", { owner: o }, function (e) { var i = e.data.owner; return i.shapeViewer.isSelectedEnable ? (i.shapeViewer.setActiveShape(i), i.type == AnnotationType.Position ? (i.isSelected = !0, i.shapeViewer.showImageAnnotations()) : t(!0, i), e.stopPropagation(), !1) : !0 }), i.hide()), null == o.inpElmt && (o.inpElmt = e.createElement("textarea"), o.container.appendChild(o.inpElmt), i = n(o.inpElmt), i.mousedown(function (t) { t.stopPropagation() }), i.hide()) }, i.setCSS = function (e, i) { var n = this; w(n.txtElmt, e, i, n.fontSize, n.fontFamily, n.color, n.fontBold, n.fontItalic, n.fontUnderLine, n.description || "", !0, !0), w(n.inpElmt, e, i, n.fontSize, n.fontFamily, n.color, n.fontBold, n.fontItalic, n.fontUnderLine, n.description || "", !0, !1), t(n.isSelected, n) }, i.drawStart = function () { }, i.drawClick = function () { this.isEndDrawing = !0 } }(); var zt; !function () { zt = function (t, e, i) { Ht.apply(this, [t, e, i]) }, zt.prototype = new Ht; var t = zt.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.rsPoint = t.resetPoint(t.startPoint, t.cavScale, t.cavOffset), t.rePoint = t.resetPoint(t.endPoint, t.cavScale, t.cavOffset), t.setCSS(t.rsPoint.x, t.rsPoint.y), t.shapeMovePosition(), t.movePoint = t.rsPoint, !t.isSelected, t.guid == Ct }, t.drawPositionIcon = function (t) { if (null != t) { var e = this.getContext(), n = 6.5; e.beginPath(), e.lineWidth = 2, e.arc(t.x, t.y, n, 0, 2 * i.PI, !1), e.fillStyle = "rgba(255, 255, 255, 0.6)", e.fill(), e.strokeStyle = "#666465", e.stroke(), e.beginPath(), e.lineWidth = 3, e.strokeStyle = "#cfb569", e.moveTo(t.x, t.y), e.lineTo(t.x, t.y - 2.8 * n), e.stroke(), e.lineTo(t.x + 1.6 * n, t.y - n - 2), e.lineTo(t.x, t.y - n - 2), e.fillStyle = "#dd4f37", e.fill() } } }(); var Ft; !function () { function t(t, e, i, n) { for (var o = 0; o < e.length; o++) { var s, a, r = new Pt(e[o].x, e[o].y); r = t.resetPoint(r, i, n), 0 == o ? (s = new Pt(r.x, r.y), a = new Pt(r.x, r.y)) : (s.x > r.x && (s.x = r.x), s.y > r.y && (s.y = r.y), a.x < r.x && (a.x = r.x), a.y < r.y && (a.y = r.y)), t.cavPoints.push(r), t.cavScale = i, t.cavOffset = n, t.resetStartPoint(s), t.resetEndPoint(a), t.initRect = new St(s.x, s.y, a.x - s.x, a.y - s.y) } } Ft = function (e, i, n, o, s, a) { Nt.apply(this, [e, i, n]), this.isClose = !0, this.pointCount = 0, this.cavPoints = [], this.tempPoints, this.initRect, null != o && t(this, o, s, a) }, Ft.prototype = new Nt; var e = Ft.prototype; e.draw = function () { var t = this, e = t.getContext(); if (e.beginPath(), t.shapeMovePosition(), t.isEndDrawing) { t.activeMove == ActiveMove.None && (t.rsPoint = t.toCanvasPoint(t.startPoint), t.rePoint = t.toCanvasPoint(t.endPoint), t.resetStartPoint(t.rsPoint), t.resetEndPoint(t.rePoint)); var i = t.rePoint.x - t.rsPoint.x, n = t.rePoint.y - t.rsPoint.y, o = t.rsPoint.x, s = t.rsPoint.y, a = (t.rePoint.x - t.rsPoint.x) / t.initRect.width, r = (t.rePoint.y - t.rsPoint.y) / t.initRect.height; t.tempPoints = []; for (var l = 0; l < t.cavPoints.length; l++) { var h = new Pt(t.cavPoints[l].x, t.cavPoints[l].y); h.x -= t.initRect.x, h.y -= t.initRect.y, h.x *= a, h.y *= r, h.x += o, h.y += s, t.tempPoints.push(h) } t.points = []; for (var l = 0; l < t.tempPoints.length; l++) { var c, h = t.tempPoints[l]; t.points.push(new Pt((h.x - t.cavOffset.x) / t.cavScale, (h.y - t.cavOffset.y) / t.cavScale)), 0 == l ? (e.moveTo(h.x, h.y), c = h) : l == t.tempPoints.length - 1 ? (e.lineTo(h.x, h.y), t.isClose && e.lineTo(c.x, c.y)) : e.lineTo(h.x, h.y) } t.leftTopPoint = new Pt(o, s), t.leftBottomPoint = new Pt(o, s + n), t.rightTopPoint = new Pt(o + i, s), t.rightBottomPoint = new Pt(o + i, s + n), t.topMiddlePoint = new Pt(o + i / 2, s), t.bottomMiddlePoint = new Pt(o + i / 2, s + n), t.leftMiddlePoint = new Pt(o, s + n / 2), t.rightMiddlePoint = new Pt(o + i, s + n / 2), t.movePoint = new Pt((t.rsPoint.x + t.rePoint.x) / 2, (t.rsPoint.y + t.rePoint.y) / 2) } else for (var l = 0; l < t.points.length; l++) { var u = t.resetPoint(t.points[l], t.cavScale, t.cavOffset); 0 == l ? e.moveTo(u.x, u.y) : e.lineTo(u.x, u.y) } e.lineWidth = t.width, e.strokeStyle = t.color, e.stroke(), t.active(), t.showMeasurement() }, e.calcMeasurementInfo = function () { var t = this, e = y(t.points) * t.calibration, i = g(t.points) * t.calibration * t.calibration, n = ""; return n = P(n, Measurement.Area + _(i) + Measurement.AreaUnit), n = P(n, Measurement.Perimeter + _(e) + Measurement.Unit) }, e.isHitMe = function (t) { var e = this; return e.isSelected && e.getActiveMove(t), e.activeMove != ActiveMove.None ? !0 : !1 }, e.drawStart = function (t) { this.points.push(t), this.startPoint = this.endPoint = t }, e.drawMove = function (t) { var e = this; e.pointCount++ , 4 == e.pointCount && (e.pointCount = 0, e.points.push(t), e.endPoint = t) }, e.drawEnd = function () { t(this, this.points, this.cavScale, this.cavOffset) } }(); var Lt; !function () { Lt = function (t, e, i, n, o, s) { Ft.apply(this, [t, e, i, n, o, s]), this.isClose = !1 }, Lt.prototype = new Ft; var t = Lt.prototype; t.calcMeasurementInfo = function () { var t = this, e = v(t.points) * t.calibration; return P(Measurement.Perimeter, _(e) + Measurement.Unit) } }(); var Rt; !function () { Rt = function (t, e, i) { Dt.apply(this, [t, e, i]), this.cavPoints = [], this.pIndex = 0 }, Rt.prototype = new Dt; var t = Rt.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.shapeMovePosition(), t.cavPoints = []; for (var i = 0; i < t.points.length; i++) { var n = t.resetPoint(t.points[i], t.cavScale, t.cavOffset); t.cavPoints.push(n) } if (t.isEndDrawing) { var o = 10, s = d(t.cavPoints[0], t.cavPoints[1]), a = d(t.cavPoints[2], t.cavPoints[1]); e.arc(t.cavPoints[1].x, t.cavPoints[1].y, o, s, a, !1), t.movePoint = new Pt((t.cavPoints[0].x + t.cavPoints[2].x) / 2, (t.cavPoints[0].y + t.cavPoints[2].y) / 2) } for (var r, l, i = 0; i < t.cavPoints.length; i++) { var n = t.cavPoints[i]; 0 == i ? (e.moveTo(n.x, n.y), r = new Pt(n.x, n.y), l = new Pt(n.x, n.y)) : (e.lineTo(n.x, n.y), r.x > n.x && (r.x = n.x), r.y > n.y && (r.y = n.y), l.x < n.x && (l.x = n.x), l.y < n.y && (l.y = n.y)) } t.rsPoint = r, t.rePoint = l, e.lineWidth = t.width, e.strokeStyle = t.color, e.stroke(), t.active(), t.showMeasurement() }, t.calcMeasurementInfo = function () { var t = p(this.cavPoints[0], this.cavPoints[1], this.cavPoints[2]); return P(Measurement.Angle, _(t) + Measurement.Deg) }, t.active = function () { var t = this; if (t.isSelected) { for (var e = 0; e < t.cavPoints.length; e++) { var i = t.cavPoints[e]; t.drawThumb(i) } this.drawMoveThumb(t.movePoint) } }, t.shapeMovePosition = function () { var t = this; if (null != t.activeMove && t.activeMove != ActiveMove.None) { switch (t.activeMove) { case ActiveMove.PointMove: t.resetActiveMovePoint(t.cavPoints[t.pIndex], t.points[t.pIndex]); break; case ActiveMove.ShapeMove: for (var e = 0; e < t.cavPoints.length; e++)t.resetActiveMovePoint(t.cavPoints[e], t.points[e]) }t.activeMove != ActiveMove.ShapeMove && (t.isMeasurementChanged = !0) } }, t.getActiveMove = function (t) { for (var e = this, i = [], n = 0; n < e.cavPoints.length; n++)e.addClickResult(i, t, e.cavPoints[n], ActiveMove.PointMove, n); e.addClickResult(i, t, e.movePoint, ActiveMove.ShapeMove), e.setNearestMove(i) }, t.isHitMe = function (t) { var e = this; return e.isSelected && e.getActiveMove(t), e.activeMove != ActiveMove.None ? !0 : !1 }, t.drawStart = function (t) { this.points.push(t) }, t.drawMove = function (t) { var e = this; e.points.length >= 0 && (e.points[e.points.length - 1] = t) }, t.drawClick = function (t) { var e = this; 1 == e.points.length && e.drawThumb(e.toCanvasPoint(t)), e.points.length >= 0 && (e.points[e.points.length - 1] = t), e.points.length >= 3 ? e.isEndDrawing = !0 : e.points.push(t) }, t.drawEnd = function () { } }(); var Wt; !function () { Wt = function (t, e, i) { Dt.apply(this, [t, e, i]) }, Wt.prototype = new Dt; var t = Wt.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.shapeMovePosition(), t.rsPoint = t.movePoint = t.resetPoint(t.startPoint, t.cavScale, t.cavOffset), t.rePoint = t.resetPoint(t.endPoint, t.cavScale, t.cavOffset), t.radius = l(t.rsPoint, t.rePoint), e.lineWidth = t.width, e.strokeStyle = t.color, e.arc(t.rsPoint.x, t.rsPoint.y, t.radius, 0, 2 * i.PI, !1), e.stroke(), t.active(), t.showMeasurement() }, t.calcMeasurementInfo = function () { var t = l(this.startPoint, this.endPoint) * this.calibration, e = ""; return e = P(e, Measurement.Radius + _(t) + Measurement.Unit), e = P(e, Measurement.Area + _(i.PI * t * t) + Measurement.AreaUnit), e = P(e, Measurement.Perimeter + _(2 * i.PI * t) + Measurement.Unit) }, t.active = function () { var t = this; t.isSelected && (t.drawThumb(t.rePoint), t.drawMoveThumb(t.movePoint)) }, t.shapeMovePosition = function () { var t = this; if (null != t.activeMove && t.activeMove != ActiveMove.None) { switch (t.activeMove) { case ActiveMove.PointMove: t.resetActiveMovePoint(t.rePoint, t.endPoint); break; case ActiveMove.ShapeMove: t.resetActiveMovePoint(t.rePoint, t.endPoint), t.resetActiveMovePoint(t.rsPoint, t.startPoint) }t.activeMove != ActiveMove.ShapeMove && (t.isMeasurementChanged = !0) } }, t.getActiveMove = function (t) { var e = this, i = []; e.addClickResult(i, t, e.rePoint, ActiveMove.PointMove), e.addClickResult(i, t, e.movePoint, ActiveMove.ShapeMove), e.setNearestMove(i) }, t.isHitMe = function (t) { var e = this; return e.isSelected && e.getActiveMove(t), e.activeMove != ActiveMove.None ? !0 : !1 }, t.isHitMyArea = function (t) { var e = this, i = I(e.radius, e.rsPoint, t, e.width); return e.cavRect = new St(e.rsPoint.x - e.radius, e.rsPoint.y - e.radius, 2 * e.radius, 2 * e.radius), e.isSelected = i, i }, t.drawStart = function (t) { this.points.push(t) } }(); var Bt; !function () { Bt = function (t, e, i) { Rt.apply(this, [t, e, i]) }, Bt.prototype = new Rt; var t = Bt.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.shapeMovePosition(), t.cavPoints = []; for (var n = 0; n < t.points.length; n++) { var o = t.resetPoint(t.points[n], t.cavScale, t.cavOffset); t.cavPoints.push(o) } if (t.isEndDrawing) { var s = r(t.cavPoints[0], t.cavPoints[1], t.cavPoints[2]), a = l(s, t.cavPoints[0]); t.movePoint = s, e.arc(s.x, s.y, a, 0, 2 * i.PI, !1) } else for (var n = 0; n < t.cavPoints.length; n++)0 == n ? e.moveTo(t.cavPoints[n].x, t.cavPoints[n].y) : e.lineTo(t.cavPoints[n].x, t.cavPoints[n].y); e.lineWidth = t.width, e.strokeStyle = t.color, e.stroke(), t.active(), t.showMeasurement() }, t.calcMeasurementInfo = function () { var t = this, e = l(t.toImagePoint(t.movePoint), t.points[0]) * t.calibration, n = ""; return n = P(n, Measurement.Radius + _(e) + Measurement.Unit), n = P(n, Measurement.Area + _(i.PI * e * e) + Measurement.AreaUnit), n = P(n, Measurement.Perimeter + _(2 * i.PI * e) + Measurement.Unit) }, t.isHitMe = function (t) { var e = this; return e.isSelected && e.getActiveMove(t), e.activeMove != ActiveMove.None ? !0 : !1 }, t.isHitMyArea = function (t) { var e = this, i = e.movePoint, n = l(i, e.cavPoints[0]), o = I(n, i, t, e.width); return e.cavRect = new St(i.x - n, i.y - n, 2 * n, 2 * n), e.isSelected = o, o } }(); var jt; !function () { jt = function (t, e, i) { Rt.apply(this, [t, e, i]), this.radian1, this.radian2, this.centerCircle, this.isLargeArc = !1 }, jt.prototype = new Rt; var t = jt.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.shapeMovePosition(), t.cavPoints = []; for (var i = 0; i < t.points.length; i++) { var n = t.resetPoint(t.points[i], t.cavScale, t.cavOffset); t.cavPoints.push(n) } if (t.isEndDrawing) { var o = r(t.cavPoints[0], t.cavPoints[1], t.cavPoints[2]); t.radius = l(o, t.cavPoints[0]), t.radian1 = d(t.cavPoints[0], o), t.radian2 = d(t.cavPoints[2], o), t.movePoint = new Pt((t.cavPoints[0].x + t.cavPoints[2].x) / 2, (t.cavPoints[0].y + t.cavPoints[2].y) / 2), t.centerCircle = o; var s = u(t.cavPoints[0], t.cavPoints[1], t.cavPoints[2]), a = m(s); t.isLargeArc = f(s), e.arc(o.x, o.y, t.radius, t.radian1, t.radian2, a) } else for (var i = 0; i < t.cavPoints.length; i++)0 == i ? e.moveTo(t.cavPoints[i].x, t.cavPoints[i].y) : e.lineTo(t.cavPoints[i].x, t.cavPoints[i].y); e.lineWidth = t.width, e.strokeStyle = t.color, e.stroke(), t.active(), t.showMeasurement() }, t.calcMeasurementInfo = function () { var t = this, e = t.toImagePoint(t.centerCircle), n = l(e, t.points[0]) * t.calibration, o = p(t.points[0], e, t.points[2]); this.isLargeArc ? 180 > o && (o = 360 - o) : o > 180 && (o = 360 - o); var s = "", a = 2 * i.PI * n * o / 360; return s = P(s, Measurement.Radius + _(n) + Measurement.Unit), s = P(s, Measurement.Perimeter + _(2 * i.PI * n) + Measurement.Unit), s = P(s, Measurement.Angle + _(o) + Measurement.AreaUnit), s = P(s, Measurement.ArcLength + _(a) + Measurement.Unit) }, t.isHitMe = function (t) { var e = this; return e.isSelected && e.getActiveMove(t), e.activeMove != ActiveMove.None ? !0 : !1 }, t.isHitMyArea = function (t) { var e = this, n = e.centerCircle, o = e.radius, s = O(o, n, t, e.radian1, e.radian2, e.isLargeArc, e.width), a = b(n, t), r = A(e.cavPoints[0], e.cavPoints[2], n); if (s && !e.isLargeArc && r > a ? s = !1 : !s && e.isLargeArc && r > a && (s = !0), s) { var l = i.min(e.cavPoints[0].x, e.cavPoints[1].x); l = i.min(l, e.cavPoints[2].x); var h = i.max(e.cavPoints[0].y, e.cavPoints[1].y); h = i.max(h, e.cavPoints[2].y); var c = i.min(e.cavPoints[0].y, e.cavPoints[1].y); c = i.min(c, e.cavPoints[2].y); var u = i.max(e.cavPoints[0].y, e.cavPoints[1].y); u = i.max(u, e.cavPoints[2].y), e.cavRect = new St(l, c, h - l, u - c) } return e.isSelected = s, s } }(); var Ut; !function () {
        Ut = function (t, e, i) { Rt.apply(this, [t, e, i]) }, Ut.prototype = new Rt; var t = Ut.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.shapeMovePosition(), t.cavPoints = []; for (var i, n, o = 0; o < t.points.length; o++) { var s = t.resetPoint(t.points[o], t.cavScale, t.cavOffset); t.cavPoints.push(s), 0 == o ? (e.moveTo(s.x, s.y), t.rsPoint = s, i = new Pt(s.x, s.y), n = new Pt(s.x, s.y)) : (e.lineTo(s.x, s.y), i.x > s.x && (i.x = s.x), i.y > s.y && (i.y = s.y), n.x < s.x && (n.x = s.x), n.y < s.y && (n.y = s.y)) } t.isEndDrawing && t.points.length > 1 && (e.lineTo(t.rsPoint.x, t.rsPoint.y), t.movePoint = new Pt((i.x + n.x) / 2, (i.y + n.y) / 2), t.rsPoint = i, t.rePoint = n), e.lineWidth = t.width, e.strokeStyle = t.color, e.stroke(), t.active(), t.showMeasurement() }, t.calcMeasurementInfo = function () {
            var t = this, e = "", i = g(t.points) * t.calibration * t.calibration, n = y(t.points) * t.calibration; return e = P(e, Measurement.Area + _(i) + Measurement.AreaUnit), e = P(e, Measurement.Perimeter + _(n) + Measurement.Unit)
        }, t.drawMove = function (t) { var e = this; e.points.length >= 0 && (e.points[e.points.length - 1] = t) }, t.drawClick = function (t) { this.points.push(t) }, t.drawEnd = function () { for (var t, e = this, i = e.points.length - 1; i > 0 && (_(e.points[i].x) == _(e.points[i - 1].x) && _(e.points[i].y) == _(e.points[i - 1].y)); i--)t = i; null != t && e.points.splice(t, e.points.length - t) }
        }(); var qt; !function () { qt = function (t, e, i) { Rt.apply(this, [t, e, i]) }, qt.prototype = new Rt; var t = qt.prototype; t.draw = function () { var t = this, e = t.getContext(); e.beginPath(), t.shapeMovePosition(), t.cavPoints = []; for (var i, n, o = 0; o < t.points.length; o++) { var s = t.resetPoint(t.points[o], t.cavScale, t.cavOffset); t.cavPoints.push(s), 0 == o ? (e.moveTo(s.x, s.y), t.rsPoint = s, i = new Pt(s.x, s.y), n = new Pt(s.x, s.y)) : (e.lineTo(s.x, s.y), i.x > s.x && (i.x = s.x), i.y > s.y && (i.y = s.y), n.x < s.x && (n.x = s.x), n.y < s.y && (n.y = s.y)) } t.isEndDrawing && t.points.length > 1 && (t.movePoint = new Pt((i.x + n.x) / 2, (i.y + n.y) / 2), t.rsPoint = i, t.rePoint = n), e.lineWidth = t.width, e.strokeStyle = t.color, e.stroke(), t.active(), t.showMeasurement() }, t.calcMeasurementInfo = function () { var t = this, e = "", i = g(t.points) * t.calibration * t.calibration, n = y(t.points) * t.calibration; return e = P(e, Measurement.Area + _(i) + Measurement.AreaUnit), e = P(e, Measurement.Perimeter + _(n) + Measurement.Unit) }, t.drawMove = function (t) { var e = this; e.points.length >= 0 && (e.points[e.points.length - 1] = t) }, t.drawClick = function (t) { this.points.push(t) }, t.drawEnd = function () { for (var t, e = this, i = e.points.length - 1; i > 0 && (_(e.points[i].x) == _(e.points[i - 1].x) && _(e.points[i].y) == _(e.points[i - 1].y)); i--)t = i; null != t && e.points.splice(t, e.points.length - t) } }(); var $t, Yt, Vt = function (t, e) { this.width = t, this.height = e }, Xt = function (t, e) { var i = this; this.canvas = t, this.calibration = e, this.cellWidth = 800, this.minCellWidth = 48, this.maxCellWidth = 156, this.cavScale, this.cavOffset, this.autoAdjustCellWidth = !0, this.location = new Pt(0, 0), this.defaultPadding = 20, this.containerSize, this.width = 1, this.color = "#363736", this.getContext = function () { return i.canvas.getContext("2d") }, this.refresh = function (t, e) { i.cavScale = t, i.cavOffset = e }, this.resetContainerSize = function (t, e) { i.containerSize = new Vt(t, e) }, this.draw = function () { } }, Gt = function (t, e, n, o, s, a) { Xt.apply(this, [t, e]); var r = this; this.imgSize = new Vt(n, o), this.containerSize = new Vt(s, a), this.displayRect = new St, this.draw = function (t, e) { r.refresh(t, e); var s = r.cellWidth * r.cavScale / r.calibration; if (r.autoAdjustCellWidth) { if (s < r.minCellWidth) return r.cellWidth *= 2, void r.draw(t, e); if (s > r.maxCellWidth) return r.cellWidth /= 2, void r.draw(t, e) } if (L.showRulers() || (r.defaultPadding = 0), r.displayRect.x = r.cavOffset.x, r.displayRect.y = r.cavOffset.y, r.displayRect.width = r.imgSize.width * r.cavScale, r.displayRect.height = r.imgSize.height * r.cavScale, !(r.displayRect.width < n || r.displayRect.height < o)) { var a = r.getContext(); a.beginPath(); var l = r.location.x + r.defaultPadding, h = r.location.y + r.defaultPadding, c = new Pt(l + r.cavOffset.x, h + r.cavOffset.y), u = c.x % s - l, d = c.y % s - h; i.min(r.containerSize.width, r.displayRect.width), i.min(r.containerSize.height, r.displayRect.height); if (r.containerSize.width < r.displayRect.width && r.containerSize.height < r.displayRect.height) { for (var p = u; p < r.containerSize.width; p += s)a.moveTo(p, h), a.lineTo(p, r.containerSize.height); for (var f = d; f < r.containerSize.height; f += s)a.moveTo(l, f), a.lineTo(r.containerSize.width, f) } else { for (var p = r.displayRect.x; p < r.displayRect.width + r.displayRect.x; p += s)a.moveTo(p, r.displayRect.y), a.moveTo(p, r.displayRect.y + r.displayRect.height); for (var f = r.displayRect.y; f < r.displayRect.height + r.displayRect.y; f += s)a.moveTo(r.displayRect.x, f), a.lineTo(r.displayRect.x + r.displayRect.width, f) } a.lineWidth = r.width, a.strokeStyle = "Grey", a.stroke() } } }, Kt = function (t, e, n, o) { Xt.apply(this, [t, e]); var s = this; this.divisionMark = 5, this.divisionMajorMark = this.defaultPadding, this.divisionNum = 5, this.containerSize = new Vt(n, o), this.zeroPoint, this.draw = function (t, e) { s.refresh(t, e); var n = s.cellWidth * s.cavScale / s.calibration; if (s.autoAdjustCellWidth) { if (n < s.minCellWidth) return s.cellWidth *= 2, void s.draw(t, e); if (n > s.maxCellWidth) return s.cellWidth /= 2, void s.draw(t, e) } s.zeroPoint = new Pt(s.cavOffset.x, s.cavOffset.y); var o = s.getContext(); o.beginPath(), o.fillStyle = "#ffffff", o.fillRect(s.location.x, s.location.y, s.containerSize.width, s.divisionMajorMark), o.fillRect(s.location.x, s.location.y, s.divisionMajorMark, s.containerSize.height), o.font = "12px Microsoft Sans Serif,宋体", o.fillStyle = s.color; var a = 0, r = n / s.divisionNum, l = s.location.x + s.divisionMajorMark, h = s.location.y + s.divisionMajorMark, c = new Pt(l + s.cavOffset.x, h + s.cavOffset.y), u = c.x % n - l, d = c.y % n - h; o.moveTo(l, h), o.lineTo(s.location.x + s.containerSize.width, h); for (var p = u; p < s.containerSize.width; p += r)if (l > p) a++; else { if (a % s.divisionNum == 0) { o.moveTo(p, h), o.lineTo(p, h - s.divisionMajorMark); var f = _((p - s.zeroPoint.x) * s.cellWidth / n).toString(); o.fillText(f, p + 2, h / 1.5) } else o.moveTo(p, h), o.lineTo(p, h - s.divisionMark); a++ } a = 0, o.moveTo(l, h), o.lineTo(l, s.location.y + s.containerSize.height); for (var m = d; m < s.containerSize.height; m += r)if (h > m) a++; else { if (a % s.divisionNum == 0) { o.moveTo(l, m), o.lineTo(l - s.divisionMajorMark, m), o.rotate(3 * i.PI / 2); var f = _((m - s.zeroPoint.y) * s.cellWidth / n).toString(); o.fillText(f, -(m + 8 * f.length), l / 1.5), o.rotate(i.PI / 2) } else o.moveTo(l, m), o.lineTo(l - s.divisionMark, m); a++ } o.lineWidth = s.width, o.strokeStyle = s.color, o.stroke() } }, Zt = function (t) { function i() { var e = t.viewport.getContainerSize(); M.width = e.x, M.height = e.y, D.width = e.x, D.height = e.y, E.width = e.x, E.height = e.y, null != S && (q.resetContainerSize(e.x, e.y), $.resetContainerSize(e.x, e.y), Y.showImageAnnotations()), B.style.width = e.x + "px", B.style.height = e.y + "px" } function s() { Measurement = { Length: R.getString("Annotations.Measurement.TxtLength"), Width: R.getString("Annotations.Measurement.TxtWidth"), Height: R.getString("Annotations.Measurement.TxtHeight"), Angle: R.getString("Annotations.Measurement.TxtAngle"), ArcLength: R.getString("Annotations.Measurement.TxtArcLength"), Area: R.getString("Annotations.Measurement.TxtArea"), Majorhalfaxis: R.getString("Annotations.Measurement.TxtMajorhalfaxis"), Minorhalfaxis: R.getString("Annotations.Measurement.TxtMinorhalfaxis"), Perimeter: R.getString("Annotations.Measurement.TxtPerimeter"), Radius: R.getString("Annotations.Measurement.TxtRadius"), Description: R.getString("Annotations.Measurement.TxtDescription"), Unit: R.getString("Annotations.Measurement.TxtUnit"), AreaUnit: R.getString("Annotations.Measurement.TxtAreaUnit"), Deg: R.getString("Annotations.Measurement.TxtDeg") }, Mt.name = R.getString("Annotations.Default.Name"), Mt.description = R.getString("Annotations.Default.Description") } function a() { null != N && (N.isSelected = !1, N.measurement = !1), N = null, r(D) } function r(t) { t.getContext("2d").clearRect(0, 0, t.width, t.height) } function l(t) { if (null == V) return !1; null != N && (N.measurement = !1), null == N || N.isSelected || (a(), Y.showImageAnnotations()); var e = !1, i = [], o = !1; if (null != N && N.isHitMe(t)) e = !0; else if (Y.isSelectedEnable || Y.isShowInfo) for (var s = 0; s < V.length; s++)V[s].isHitMyArea(t) && (e = !0, V[s].isSelected = !1, i.push(V[s]), N == V[s] && (o = !0)); else null != N && (N.isSelected = !1, a(), Y.showImageAnnotations()); if (1 == i.length && N != i[0]) N = i[0], N.isSelected = !0; else if (!o && i.length > 0) { for (var r, s = 0; s < i.length; s++)0 == s ? r = i[0] : r.cavRect.x < i[s].cavRect.x && r.cavRect.y < i[s].cavRect.y && r.cavRect.width > i[s].cavRect.width && r.cavRect.height > i[s].cavRect.height && (r = i[s]); N = r, N.isSelected = !0 } else { null == N && (N = i[0]); for (var s = 0; s < i.length; s++)if (N == i[s]) { s < i.length - 1 ? (N.isSelected = !1, N = i[s + 1], N.isSelected = !0) : (N.isSelected = !1, N = i[0], N.isSelected = !0); break } } return null != N && (N.isSelected ? (N.measurement = !0, N.activeMove != ActiveMove.None ? (n.support.touch ? n(B).bind("mousemove", c) : n(B).bind("mousemove", c), G = !0, I = t) : !Y.isSelectedEnable && Y.isShowInfo && (N.isSelected = !1)) : (a(), Y.showImageAnnotations())), e } function h() { Y.isShapeChanged = !0, Y.onShapeChanged && Y.onShapeChanged() } function c(t) { if (G) return j = t.pageX, U = t.pageY, j -= F.x, U -= F.y, (j != I.x || U != I.y) && (N.moveOffset = new Seadragon.Point(j - I.x, U - I.y), I.x = j, I.y = U, Y.showImageAnnotations(), N.moveOffset.x = 0, N.moveOffset.y = 0), B.style.cursor = "move", t.stopPropagation(), h(), !1; if (X && null != N) { t.stopPropagation(); var e = t.pageX, i = t.pageY; return e -= F.x + z.x, i -= F.y + z.y, e != j || i != U ? (j = e, U = i, N.drawMove(new Seadragon.Point(j / Z, U / Z)), Y.showImageAnnotations(), h(), !1) : void 0 } } function u(t) { if (null == V) return !1; for (var e = !1, i = 0; i < V.length; i++)(V[i].isSelected || V[i].measurement) && (V[i].isSelected = !1, V[i].measurement = !1, e = !0); return null != t && (t.isSelected = !0), e } function d() { n(B).unbind("mousemove"), n(B).unbind("touchmove"), N.activeMove = ActiveMove.None, O = null, X = !1, G = !1 } function p(t) { N.cavScale = Z, N.cavOffset = z, N.isEndDrawing = !0, N.measurement = !0, N.drawEnd(t), d(), Y.showImageAnnotations(), Y.onShapeDrawEnd && Y.onShapeDrawEnd() } function f(t) { return t.stopPropagation(), X && null != N && p(), !1 } function m(t) { if (j = t.pageX, U = t.pageY, F = Seadragon.Utils.getElementPosition(M), j -= F.x, U -= F.y, null == O && l(new Seadragon.Point(j, U)) && (Y.showImageAnnotations(), (Y.isSelectedEnable || null != N) && N.activeMove != ActiveMove.None)) return !1; if (null != O && (null == N || N.isEndDrawing)) { u() && Y.showImageAnnotations(), t.stopPropagation(), j -= z.x, U -= z.y; var e, i = new Seadragon.Point(j / Z, U / Z), o = i, s = i; switch (O) { case AnnotationType.Line: e = new Et(Y, o, s); break; case AnnotationType.Arrow: e = new At(Y, o, s); break; case AnnotationType.Brace: e = new It(Y, o, s); break; case AnnotationType.Rectangle: e = new Nt(Y, o, s); break; case AnnotationType.Ellipse: e = new Ot(Y, o, s); break; case AnnotationType.Remark: e = new Ht(Y, o, s); break; case AnnotationType.Position: e = new zt(Y, o, s); break; case AnnotationType.CurveRounded: e = new Ft(Y, o, s); break; case AnnotationType.Curve: e = new Lt(Y, o, s); break; case AnnotationType.Angle: e = new Rt(Y, o, s); break; case AnnotationType.Circle: e = new Wt(Y, o, s); break; case AnnotationType.CircleThreePoints: e = new Bt(Y, o, s); break; case AnnotationType.Arc: e = new jt(Y, o, s); break; case AnnotationType.Polygon: e = new Ut(Y, o, s); break; case AnnotationType.PolygonLine: e = new qt(Y, o, s); break; default: e = null }return V.push(e), N = e, N.imageId = S.id, N.type = O, N.scale = Z, N.guid = H(), N.refresh(Z, z), N.calibration = S.calibration, N.drawStart(i), N.isSelected = !0, X = !0, n(B).bind("mousemove", c), !1 } } function g(t) { if (G) return t.stopPropagation(), d(), Y.showImageAnnotations(), B.style.cursor = "", !1; if (X && null != N) { t.stopPropagation(), j = t.pageX, U = t.pageY, j -= F.x + z.x, U -= F.y + z.y; var e = new Seadragon.Point(j / Z, U / Z); return N.drawClick(e), N.isEndDrawing && p(e), !1 } } function v() { K = !0 } function y() { w(), Y.showImageAnnotations() } function b() { K = !1 } function w() { var e = t.viewport.getBounds(!0), i = t.viewport.getZoom(!0), n = t.viewport.getContainerSize(); Z = n.x * i / S.width, z = new Seadragon.Point(-1 * e.x * n.x * i, -1 * e.y * n.x * i) } function x(t, e) { return e.imageId = t.imageId, e.guid = t.guid, e.name = t.name, e.description = t.description, e.scale = t.scale, e.width = t.width, e.type = t.type, e.region = t.region, e.fontUnderLine = t.fontUnderLine, e.fontSize = t.fontSize, e.fontFamily = t.fontFamily, e.fontItalic = t.fontItalic, e.fontBold = t.fontBold, e.visible = t.visible, e.color = t.color, e.measurement = t.measurement, e.radius = t.radius, e.arcLength = t.arcLength, e.angle = t.angle, e.points = _(t.points), e.calibration = S.calibration, e.isEndDrawing = !0, e } function _(t) { var e = []; if (!t) return e; for (var i = 0; i < t.length; i++)e.push(new Pt(t[i].x, t[i].y)); return e } function C(t) { P = t } function k(t) { var i = n("#anno"), o = []; i.empty(), i.append('<div class="list-group"></div>'); for (var s = 0; s < t.length; s++)!function (i) { o[i] = e.createElement("input"), o[i].type = "button", o[i].id = t[i].guid, o[i].className = "btn-lable list-group-item", o[i].onmouseover = function () { this.style.cursor = "pointer" }, o[i].value = t[i].name + " " + t[i].type, o[i].onclick = function () { viewer.locationAnno(this.id) }, n("#anno .list-group").append(o[i]).children("input").css({ display: "block", width: "100%", "text-align": "left" }) }(s) } function T(t, e) { return t.imageId = e.imageId, t.guid = null == e.guid ? H() : e.guid, t.name = e.name, t.description = e.description, t.scale = e.scale, t.width = e.width, t.type = e.type, t.fontUnderLine = e.fontUnderLine, t.fontSize = e.fontSize, t.fontFamily = e.fontFamily, t.fontItalic = e.fontItalic, t.fontBold = e.fontBold, t.visible = e.visible, t.color = e.color, t.measurement = e.measurement, t.radius = e.radius, t.arcLength = e.arcLength, t.angle = e.angle, t.points = _(e.points), t.region = new Seadragon.Rect(e.startPoint.x, e.startPoint.y, e.endPoint.x - e.startPoint.x, e.endPoint.y - e.startPoint.y), t } var P, S, M, D, E, A, I, N, O, z, F, B, j, U, q, $, Y = this, V = [], X = !1, G = !1, K = !1, Z = 1; this.isShapeChanged = !1, this.isSelectedEnable = !1, this.isShowInfo = !0, this.Canvas = null, this.DrawCanvas = null, this.onShapeChanged, this.onShapeDrawEnd, this.createShapeCanvas = function (o) { if (!W.canvas) return !1; M = e.createElement("canvas"), M.id = "shapeCanvas" + o, M.style.position = "absolute", D = e.createElement("canvas"), D.id = "drawCanvas" + o, D.style.position = "absolute", E = e.createElement("canvas"), E.id = "measureCanvas" + o, E.style.position = "absolute", Y.Canvas = M, Y.DrawCanvas = D, B = e.createElement("div"), B.id = "shapeContainer" + o, B.style.position = "absolute", i(), s(), a(), B.appendChild(M), B.appendChild(D), B.appendChild(E), t.drawer.elmt.appendChild(B); var r = n(B); return n.support.touch ? (r.unbind("mousedown", m), r.unbind("mouseup", g), r.unbind("dblclick", f), r.bind("mousedown", m), r.bind("mouseup", g), r.bind("dblclick", f)) : (r.unbind("mousedown", m), r.unbind("mouseup", g), r.unbind("dblclick", f), r.bind("mousedown", m), r.bind("mouseup", g), r.bind("dblclick", f)), t.removeEventListener("animationstart", v), t.removeEventListener("animation", y), t.removeEventListener("animationfinish", b), t.removeEventListener("resize", i), t.addEventListener("animationstart", v), t.addEventListener("animation", y), t.addEventListener("animationfinish", b), t.addEventListener("resize", i), !0 }, this.setOpenImage = function (e, i) { S = e, A = i; var n = t.viewport.getContainerSize(); q = new Gt(E, S.calibration, S.width, S.height, n.x, n.y), $ = new Kt(E, S.calibration, n.x, n.y), w() }, this.initImageAnnotationsShape = function (t) { if (null != t) { Y.clearShapeArray(); for (var e = 0; e < t.length; e++) { var i, n = t[e], o = new Seadragon.Point(n.region.x, n.region.y), s = new Seadragon.Point(o.x + n.region.width, o.y + n.region.height); switch (n.type) { case AnnotationType.Line: i = new Et(Y, o, s); break; case AnnotationType.Arrow: i = new At(Y, o, s); break; case AnnotationType.Brace: i = new It(Y, o, s); break; case AnnotationType.Rectangle: i = new Nt(Y, o, s); break; case AnnotationType.Ellipse: i = new Ot(Y, o, s); break; case AnnotationType.Remark: i = new Ht(Y, o, s); break; case AnnotationType.Position: i = new zt(Y, o, s); break; case AnnotationType.CurveRounded: i = new Ft(Y, o, s, n.points, Z, z); break; case AnnotationType.Curve: i = new Lt(Y, o, s, n.points, Z, z); break; case AnnotationType.Angle: i = new Rt(Y, o, s); break; case AnnotationType.Circle: i = new Wt(Y, o, s); break; case AnnotationType.CircleThreePoints: i = new Bt(Y, o, s); break; case AnnotationType.Arc: i = new jt(Y, o, s); break; case AnnotationType.Polygon: i = new Ut(Y, o, s); break; case AnnotationType.PolygonLine: i = new qt(Y, o, s); break; default: i = null }null != i && V.push(x(n, i)) } C(t) } }, this.dirtyCanvas = function () { h() }, this.resumeBackUpShapes = function () { for (var t = 0; t < V.length; t++)(V[t].type == AnnotationType.Remark || V[t].type == AnnotationType.Position) && (n(V[t].txtElmt).remove(), n(V[t].inpElmt).remove()); Y.initImageAnnotationsShape(P), Y.showImageAnnotations(), Y.isShapeChanged = !1 }, this.setSelectedEnable = function (t) { O = null, Y.isSelectedEnable = t; var e = !1; if (!t) { for (var i = 0; i < V.length; i++)(V[i].isSelected || V[i].measurement) && (V[i].isSelected = V[i].measurement = !1, e = !0); e && Y.showImageAnnotations() } }, this.setShowInfoEnable = function (t) { if (Y.isShowInfo = t, !t) for (var e = 0; e < V.length; e++)V[e].measurement && (V[e].measurement = !1, n(V[e].txtElmt).hide()) }, this.updateImageAnnotations = function (e) { function i(t) { t.success && (Y.isShapeChanged = !1, C(S.annotations), k(S.annotations)), e(t, V) } if (null != S && Y.isShapeChanged) { S.annotations = []; for (var n = 0; n < V.length; n++)S.annotations.push(T(new lt, V[n])); t.provider.updateAnnotations(A, S.id, S.annotations, i) } }, this.getImageAnnotations = function (t) { S.annotations = []; for (var e = 0; e < V.length; e++)S.annotations.push(T(new lt, V[e])); t(S.annotations) }, this.finishDrawing = function () { p() }, this.getActiveShape = function () { return N }, this.getActiveShapeArray = function () { var t = T(new lt, N); return t }, this.setActiveShape = function (t) { t.isSelected = !0, N = t }, this.turnToShape = function (e) { Ct && V[Tt] != o && (V[Tt].color = kt); for (var i = 0; i < V.length; i++)!function (i) { if (V[i].guid == e && (N = V[i], null != N)) { var n = t.viewport.getContainerSize(), o = S.width * N.scale / n.x; t.viewport.zoomTo(o); var s = N.toImagePoint(N.movePoint), a = s.x / S.width, r = s.y / S.width; t.viewport.panTo(new Pt(a, r)), kt = N.color, Ct = e, Tt = i } }(i) }, this.showMeasurement = function (t) { for (var e = 0, i = 0; i < V.length; i++)V[i].type != AnnotationType.Remark && V[i].type != AnnotationType.Position && (V[i].measurement = t, V[i].showMeasurement(), e++); e > 0 && h() }, this.deleteAnnotation = function () { for (var t, e, i = 0; i < V.length; i++)if (N == V[i] || V[i].isSelected) { t = i, e = V[i]; break } null != t && (V.splice(t, 1), Y.showImageAnnotations(), n(e.txtElmt).remove(), n(e.inpElmt).remove(), a(), h()) }, this.showImageAnnotations = function (t) { if (null != M && null != V) if (null == t && (t = !1), Y.clearShapeCanvas(), K || null == V || t || !X && !G) { if (L.enableAnnotation) for (var e = 0; e < V.length; e++)V[e].refresh(Z, z), V[e].draw(); L.showGrid() && q.draw(Z, z), L.showRulers() && $.draw(Z, z) } else N.refresh(Z, z), N.draw() }, this.setDrawAnnotationType = function (t) { O = t }, this.clearShapeCanvas = function (t) { if (null == t && (t = !1), t) { if (r(M), r(D), r(E), !L.enableAnnotation) for (var e = 0; e < V.length; e++)n(V[e].txtElmt).hide(), n(V[e].inpElmt).hide() } else K || null == N || !X && !G ? (r(M), null != N && r(D), (L.showGrid() || L.showRulers()) && r(E)) : r(D) }, this.clearShapeArray = function () { for (var t = 0; t < V.length; t++)n(V[t].txtElmt).remove(), n(V[t].inpElmt).remove(); V = [], Y.clearShapeCanvas(!0) }, this.getContainer = function () { return B } }, Jt = function () { this.isIn = !1, this.length = 0, this.activeMove, this.pIndex }; !function () { $t = z.Viewer = function (e, o, s) { function a() { } function r() { y = new q(z, o) } function l() { h(), c(), u(), "function" == typeof s.onOpen && s.onOpen() } function h() { z.provider.getUserPermisson(function (t) { var e = t; "Admin" != e && "Teacher" != e || !s.isSaveBtn ? y.tbAnnotation.setSaveButton(!1) : y.tbAnnotation.setSaveButton(!0) }) } function c() { O || (O = new Zt(z)), O.createShapeCanvas(e), O.onShapeDrawEnd = function () { y.tbAnnotation.resetAnnotationButtons(), L.autoShowAnnoDialog && y.tbAnnotation.showAnnotationDialog() }, O.onShapeChanged = function () { (2 & W) > 0 && y.tbAnnotation.setSaveButton(!0) }, O.setOpenImage(_, x.id), L.enableAnnotation && !_.hasAnnotations ? (O.clearShapeArray(), z.provider.getAnnotation(x.id, _.id, function (t) { return t.error ? void (error = new MdsError(t.error)) : (_.hasAnnotations = !0, _.annotations = t.annotations, void (s.isShape && z.setAnnotations(t.annotations))) })) : (O.initImageAnnotationsShape(_.annotations), s.isShape && O.showImageAnnotations()) } function u() { if (_) { var t = 200, e = 200; _.width > _.height ? e = i.floor(t * _.height / _.width) : t = i.floor(e * _.width / _.height); var n = z.provider.getThumbnailUrl(); "undefined" == typeof n && (n = "1"), A = new nt(n, t, e), A.onUserMove = function (t, e) { z.viewport && z.viewport.panTo(new Seadragon.Point(t, e)) }, s.isNavmap ? A.setVisibility(!0) : A.setVisibility(!1), z.addControl(A.elmt, Seadragon.ControlAnchor.TOP_LEFT), d() } } function d() { if (z.viewport) { var t = z.viewport.getZoom(!0), e = z.viewport.getContainerSize(), i = z.viewport.getBounds(), n = z.viewport.getAspectRatio(); if (E = e.x * t / _.width, z.trigger("viewportchanged", { viewportWidth: t, containerSize: e, bounds: i, aspectRatio: n, scale: E }), A) { A.UpdateViewRect(z.viewport.getZoom(), i.x, i.y, n); var o = Seadragon.Utils.getElementPosition(A.elmt); A.isOnDragging() || A.UpdateThumbnailOrigin(o.x, o.y) } } } function p(t) { var e = t.originalEvent; C = e.targetTouches[0].clientX, k = e.targetTouches[0].clientY, 2 == e.targetTouches.length && (D = z.viewport.getZoom(!0), T = e.targetTouches[1].clientX, P = e.targetTouches[1].clientY, S = i.sqrt(i.pow(T - C, 2) + i.pow(P - k, 2))) } function f(t) { var e = t.originalEvent; if (e.preventDefault(), z.viewport && 1 == e.targetTouches.length) { var n = C - e.targetTouches[0].clientX, o = k - e.targetTouches[0].clientY; C = e.targetTouches[0].clientX, k = e.targetTouches[0].clientY; var s = z.viewport.deltaPointsFromPixels(new Seadragon.Point(n, o)); z.viewport.panBy(s) } else if (z.viewport && 2 == e.targetTouches.length) { C = e.targetTouches[0].clientX, k = e.targetTouches[0].clientY, T = e.targetTouches[1].clientX, P = e.targetTouches[1].clientY, M = i.sqrt(i.pow(T - C, 2) + i.pow(P - k, 2)); var a = M / S, r = D * a; z.viewport.getMinZoom() < r && r < z.viewport.getMaxZoom() && z.viewport.zoomTo(r) } } function m() { } function g(t) { z.provider = new ct, z.provider.openSlide(t, function (t) { x = t.slide, v() }) } function v() { _ = x; var t = new ut(_.fileURL, _.width, _.height, _.tileSize, 0); z.openTileSource(t) } Seadragon.Viewer.apply(this, [e]); var y, w, x, _, C, k, T, P, S, M, D, E, A, I, N, O, z = this, W = 0; this.annoArray = new ht, function () { z.addEventListener("open", l), z.addEventListener("animation", d), z.setMouseNavEnabled(s.isLockMouse), n.support.touch && n("#" + e).bind({ touchstart: p, touchmove: f, touchend: m }), a(), r() }(), this.provider, this.getShapeCanvas = function () { return O }, this.getNavMap = function () { return A }, this.getSlideLabel = function () { return I }, this.getCurrentSlide = function () { return x }, this.canWrite = function () { return (2 & W) > 0 }, this.getCurrentImage = function () { return _ }, this.getScale = function () { return E }, this.getImageProcessing = function () { return N }, this.getCurrentId = function () { return w }, this.update = function () { O && (O.clearShapeCanvas(!0), O.showImageAnnotations(!0), A.refresh()) }, this.openMds = function (t) { if ("number" == typeof t) return w = t, z.close(), void g(w); throw new F("Open slide failed: id is not current!") }, this.zoomToObj = function (t) { var e = z.viewport.getContainerSize(), i = t / _.scanObjective * _.width / e.x; z.viewport.zoomTo(i) }, this.showMessage = function (e, i) { null == i && (i = 1500); var o, s, a, r = n("<div class='ui-loader ui-overlay-shadow ui-body-e ui-corner-all'><h1>" + e + "</h1></div>"); r.appendTo("body"), o = null == z.viewport ? new Seadragon.Point(n(t).width(), n(t).height()) : z.viewport.getContainerSize(), a = (o.x - r.width()) / 2 + "px", s = (o.y - r.height()) / 2 + "px", r.css({ top: s, left: a, filter: "alpha(opacity=90)", opacity: "0.9", position: "absolute", display: "block", "padding-left": "12px", "padding-right": "12px" }), r.delay(i).fadeOut(400, function () { n(this).remove() }) }, this.saveAnnotations = function () { O && O.updateImageAnnotations(function (t, e) { t.success ? z.showMessage(R.getString("Messages.SaveAnnotationSuccess")) : z.showMessage(R.getString("Messages.SaveAnnotationFailed")) }) }, this.getAnnotations = function () { var t; return O && O.getImageAnnotations(function (e) { t = e }), t.concat() }, this.setAnnotations = function (t) { O && (O.initImageAnnotationsShape(t), A.refresh(), O.showImageAnnotations(!0)) }, this.clearCanvas = function () { O && O.clearShapeArray() }, this.showAnnotations = function () { O && O.showImageAnnotations(!0) }, this.locationAnno = function (t) { O && O.turnToShape(t) }, this.getActiveAnno = function () { if (this.annoArray.sliceId = w, "Position" !== O.getActiveShapeArray().type ? this.annoArray.anno = O.getActiveShapeArray() : (null == this.annoArray.anno && (this.annoArray.anno = O.getActiveShapeArray()), this.annoArray.text = O.getActiveShapeArray()), null !== this.annoArray.text && null !== this.annoArray.anno && "Line" == this.annoArray.anno.type) { var t = {}, e = {}, i = {}; i.x = this.annoArray.text.region.x, i.y = this.annoArray.text.region.y, t.x = this.annoArray.anno.region.x, t.y = this.annoArray.anno.region.y, e.x = this.annoArray.anno.region.x + this.annoArray.anno.region.width, e.y = this.annoArray.anno.region.y + this.annoArray.anno.region.height, this.annoArray.text.actPoint = b(i, t) >= b(i, e) ? t : e } else if (null !== this.annoArray.text && null !== this.annoArray.anno && "Line" !== this.annoArray.anno.type && "Position" !== this.annoArray.anno.type) { var i = {}; i.x = this.annoArray.text.region.x, i.y = this.annoArray.text.region.y, this.annoArray.text.actPoint = i } else if (null !== this.annoArray.text && this.annoArray.anno.type == this.annoArray.text.type) { var i = {}; i.x = this.annoArray.text.region.x, i.y = this.annoArray.text.region.y, this.annoArray.text.actPoint = i, this.annoArray.anno.type = "Line", this.annoArray.anno.region.width = 0, this.annoArray.anno.region.height = 0 } return this.annoArray.id = H(), this.annoArray.name = null == this.annoArray.text ? null : this.annoArray.text.description, this.annoArray }, this.returnAnnoArray = function () { return this.annoArray }, this.openImage = function (t) { v(t) }, this.setActions = function (t, i) { switch (t) { case "isNavmap": A.setVisibility(i); break; case "isToolbar": i ? (n("#" + e).css({ "padding-top": "30px", height: "100%" }), n("#" + o).show()) : (n("#" + e).css({ "padding-top": "0px", height: "100%" }), n("#" + o).hide()); break; case "isLockMouse": z.setMouseNavEnabled(i); break; case "isOnlyNameAndScale": i ? (n("#times").hide(), n("#name").width("100%"), n("#label").hide()) : (n("#times").show(), n("#name").width("20%"), n("#label").show()); break; case "isSaveButton": y.tbAnnotation.setSaveButton(i); break; default: alert("error") } }, this.goHome = function () { z.viewport && z.viewport.goHome() }, this.getCenterPoint = function () { if (z.viewport) { var t = { point: z.viewport.getCenter(), zoom: z.viewport.getZoom() }; return t } }, this.panToPoint = function (t) { z.viewport && t && (z.viewport.zoomTo(t.zoom), z.viewport.panTo(t.point)) }, this.changeAnno = function (t) { O.setDrawAnnotationType(t) } } }(), function () { Yt = z.createViewer = function (t) { var i = e.getElementById(t.containerId), o = e.createElement("div"), s = e.createElement("div"); o.id = t.containerId + "_toolbar", s.id = t.containerId + "_viewer", i.appendChild(o), i.appendChild(s), n(o).css({ "margin-bottom": "-30px", height: "30px" }), t.isToolbar ? n(s).css({ "padding-top": "30px", height: "100%" }) : (n(o).hide(), n(s).css({ "padding-top": "0px", height: "100%" })); var a = new $t(s.id, o.id, t); return a.openMds(t.slideId), a } }()
    }(window, document, Math, t)
    }).call(e, i(4))
}, function (t, e) { }, , , , function (t, e, i) {
    var n; (function (o) {
        "use strict"; n = function (t, e, n) {
            var s = i(15), a = i(19), r = i(17), l = r.KEY, h = i(9); i(115); var c = h.extend({
                init: function (t) { this.config = o.extend({ type: "custom", data: null, anchor: null, title: null, optional: !0, alignment: "auto", offsetX: 0, offsetY: 0, className: null, confirmLabel: "确定", cancelLabel: "取消", hoverTarget: null, hoverClass: "hover", multiSelect: !1 }, t), this.onBackgroundClk = this.onBackgroundClk.bind(this), this.onDocKeyDown = this.onDocKeyDown.bind(this), this.onCancelClk = this.onCancelClk.bind(this), this.onConfirmClk = this.onConfirmClk.bind(this), this.onInputChanged = this.onInputChanged.bind(this), this.layout = this.layout.bind(this), this.confirmed = new s.Signal, this.canceled = new s.Signal, this.destroyed = new s.Signal, this.render() }, render: function () { this.$domElement = o('<div class="prompt" data-type="' + this.config.type + '">'), this.$innerElement = o('<div class="prompt-inner">').appendTo(this.$domElement), this.$arrowElement = o('<div class="prompt-arrow">').appendTo(this.$innerElement), this.config.title && (this.$titleElement = o('<h3 class="title">'), this.$titleElement.html(this.config.title), this.$titleElement.appendTo(this.$innerElement)), this.config.className && this.$domElement.addClass(this.config.className), this.config.html && this.$innerElement.append(this.config.html), "select" === this.config.type ? this.renderSelect() : "list" === this.config.type ? (this.renderList(), this.renderFooterBtns(!this.config.multiSelect, this.config.multiSelect)) : "input" === this.config.type && (this.renderInput(), this.renderFooterBtns()) }, renderSelect: function () { this.config.data.concat().forEach(function (t) { var e = o('<a class="item button outline l">'); e.appendTo(this.$innerElement), e.html(t.html), e.data("callback", t.callback || a.loop), e.on("click", function (t) { var e = o(t.currentTarget).data("callback"); "function" == typeof e && e.apply(null), this.destroy(), t.preventDefault() }.bind(this)), t.focused === !0 && e.addClass("focus"), t.selected === !0 && e.addClass("selected"), "string" == typeof t.className && e.addClass(t.className) }.bind(this)), this.$domElement.attr("data-length", this.config.data.length) }, renderList: function () { this.$listElement = o('<div class="list">'), this.$listElement.appendTo(this.$innerElement), this.config.data.concat().forEach(function (t) { var e = o('<div class="item">'); e.appendTo(this.$listElement), e.html(['<span class="title">', t.title ? t.title : t.value, "</span>", '<span class="checkmark icon i-checkmark"></span>'].join("")), e.data({ callback: t.callback, value: t.value }), e.on("click", function (e) { var i = o(e.currentTarget), n = i.data("callback") || a.loop, s = i.data("value"); this.config.multiSelect && (i.toggleClass("selected"), t.exclusive ? (i.addClass("selected"), i.siblings().removeClass("selected")) : i.siblings().filter(".exclusive").removeClass("selected")), "function" == typeof n && n.apply(null, [s, i.hasClass("selected")]), this.config.multiSelect && (this.confirmed.dispatch(s), this.destroy()) }.bind(this)), t.focused === !0 && e.addClass("focus"), t.selected === !0 && e.addClass("selected"), t.exclusive === !0 && e.addClass("exclusive"), "string" == typeof t.className && e.addClass(t.className) }.bind(this)) }, renderInput: function () { this.config.data.multiline === !0 ? this.$inputElement = o('<textarea cols="40" rows="8">') : (this.$inputElement = o('<input type="text">'), "number" == typeof this.config.data.width && this.$inputElement.css("width", this.config.data.width)), this.config.data.value && this.$inputElement.val(this.config.data.value), this.config.data.placeholder && this.$inputElement.attr("placeholder", this.config.data.placeholder), this.config.data.maxLength && this.$inputElement.attr("maxlength", this.config.data.maxLength), this.$inputWrapperElement = o('<div class="input-wrapper">'), this.$inputWrapperElement.append(this.$inputElement), this.$inputWrapperElement.appendTo(this.$innerElement), this.onInputChanged() }, renderFooterBtns: function (t, e) { this.$footerElement = o('<div class="footer">'), this.$footerElement.appendTo(this.$innerElement), !e && this.config.optional && this.config.cancelLabel && this.$footerElement.append(['<button class="button l outline white prompt-cancel">', this.config.cancelLabel, "</button>"].join("")), !t && this.config.confirmLabel && this.$footerElement.append(['<button class="button l prompt-confirm">', this.config.confirmLabel, "</button>"].join("")) }, bind: function () { o(window).on("resize", this.layout), this.$domElement.on("click", this.onBackgroundClk), r.keyDown(this.onDocKeyDown), "hidden" !== o("html").css("overflow") && o(window).on("scroll", this.layout), this.$domElement.find(".prompt-cancel").on("click", this.onCancelClk), this.$domElement.find(".prompt-confirm").on("click", this.onConfirmClk), this.$inputElement && this.$inputElement.on("input", this.onInputChanged) }, unbind: function () { o(window).off("resize scroll", this.layout), this.$domElement.off("click", this.onBackgroundClk), r.release(this.onDocKeyDown), this.$domElement.find(".prompt-cancel").off("click", this.onCancelClk), this.$domElement.find(".prompt-confirm").off("click", this.onConfirmClk), this.$inputElement && this.$inputElement.off("input", this.onInputChanged) }, layout: function () { var t = 10, e = window.innerWidth, i = window.innerHeight; this.$innerElement.css({ "max-width": e - 2 * t, "max-height": i - 2 * t }); var n = this.$innerElement.outerWidth(), s = this.$innerElement.outerHeight(), a = o(this.config.anchor); if (a.length) { var r = this.config.alignment, l = a.offset(), h = o(window).scrollLeft(), c = o(window).scrollTop(), u = l.left - h, d = l.top - c; u += this.config.offsetX, d += this.config.offsetY; var p = a.outerWidth(), f = a.outerHeight(), m = p / 2, g = f / 2, v = 15, y = 8; if ("auto" === r) { var b = s + v + y; r = l.top - b < c ? "b" : "t" } switch (this.$domElement.attr("data-alignment", r), r) { case "t": u += (p - n) / 2, d -= s + v; break; case "b": u += (p - n) / 2, d += f + v; break; case "l": u -= n + v, d += (f - s) / 2; break; case "r": u += n + v, d += (f - s) / 2 }switch (u = Math.max(Math.min(u, e - n - t), t), d = Math.max(Math.min(d, i - s - t), t), u = Math.round(u), d = Math.round(d), r) { case "t": m = l.left - u - h + p / 2, m = Math.max(Math.min(m, n - y), y), g = s; break; case "b": m = l.left - u - h + p / 2, m = Math.max(Math.min(m, n - y), y), g = -y; break; case "l": m = n, g = l.top - d - i + p / 2, g = Math.max(Math.min(g, s - y), y); break; case "r": m = -y, g = l.top - d - i + p / 2, g = Math.max(Math.min(g, s - y), y) }this.$innerElement.css({ left: u, top: d }), this.$arrowElement.css({ left: m, top: g }) } else this.$arrowElement.hide(), this.$innerElement.css({ top: Math.round(.4 * (i - s)), left: Math.round((e - n) / 2) }) }, focus: function (t) { var e = this.$innerElement.find(".focus"); if (e.length || (e = this.$innerElement.find(".selected")), e.length) { var i = null; i = t > 0 ? e.next(".item") : e.prev(".item"), i.length && (e.removeClass("focus"), i.addClass("focus")) } else this.$innerElement.find(".item").first().addClass("focus") }, getInputVal: function () {
                    return "input" === this.config.type ? this.$innerElement.val() : "";
                }, getDomElement: function () { return this.$domElement }, cancel: function () { if ("input" === this.config.type && this.config.data.confirmBeforeDiscard) { var t = this.config.data.value || "", e = this.getInputVal() || ""; e !== t ? u({ title: "丢弃掉没有保存的数据?", type: "select", data: [{ html: "<h3>取消</h3>" }, { html: "<h3>丢弃</h3>", selected: !0, className: "negative", callback: function () { this.canceled.dispatch(this.getInputVal()), this.destroy() }.bind(this) }] }) : (this.canceled.dispatch(this.getInputVal()), this.destroy()) } else this.canceled.dispatch(this.getInputVal()), this.destroy() }, show: function () { var t = o(this.config.anchor); t.length && t.addClass("focus"), o(this.config.hoverTarget).addClass(this.config.hoverClass), this.$domElement.removeClass("visible").appendTo(document.body), setTimeout(function () { this.$domElement.addClass("visible") }.bind(this), 1), this.layout(), this.bind(), this.$inputElement && this.$inputElement.focus() }, hide: function () { var t = o(this.config.anchor); t.length && t.removeClass("focus"), o(this.config.hoverTarget).removeClass(this.config.hoverClass), this.$domElement.detach(), this.unbind() }, onBackgroundClk: function (t) { this.config.optional && o(t.target).is(this.$domElement) && (this.cancel(), t.preventDefault()) }, onDocKeyDown: function (t) { if (t.keyCode === l.Escape) return this.config.optional && this.cancel(), t.preventDefault(), !1; if ("select" === this.config.type || "list" === this.config.type) if (t.keyCode === l.Enter) { var e = this.$innerElement.find(".focus"); 0 === e.length && (e = this.$innerElement.find(".selected")), e.length && (e.trigger("click"), t.preventDefault()) } else t.keyCode === l.Left || t.keyCode === l.Up ? (this.focus(-1), t.preventDefault()) : t.keyCode === l.Right || t.keyCode === l.Down ? (this.focus(1), t.preventDefault()) : t.keyCode === l.Tab && t.shiftKey ? (this.focus(-1), t.preventDefault()) : t.keyCode === l.Tab && (this.focus(1), t.preventDefault()); return "input" === this.config.type && (t.keyCode !== l.Enter || this.config.data.multiline || this.onConfirmClk(t)), !0 }, onCancelClk: function (t) { this.cancel(), t.preventDefault() }, onConfirmClk: function (t) { this.confirmed.dispatch(this.getInputVal()), this.destroy(), t.preventDefault() }, onInputChanged: function () { if (this.config.data.maxLength) { var t = this.$inputWrapperElement.find(".input-status"); 0 === t.length && (t = o('<div class="input-status">'), t.appendTo(this.$inputWrapperElement)); var e = this.$inputElement.val().length, i = this.config.data.maxLength; t.text(e + "/" + i), t.toggleClass("negative", e > .95 * i) } }, destroy: function () { this.destroyed.dispatch(), this.destroyed.dispose(); var t = o(this.config.anchor); t.length && t.removeClass("focus"), o(this.config.hoverTarget).removeClass(this.config.hoverClass), this.$domElement.remove(), this.unbind(), this.confirmed.dispose(), this.canceled.dispose() }
            }), u = function (t) { var e = new c(t); return e.show(), e }; n.exports.Prompt = c, n.exports = u
        }.call(e, i, e, t), !(void 0 !== n && (t.exports = n))
    }).call(e, i(4))
}, function (t, e) { }, , function (t, e) { }]);